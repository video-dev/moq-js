{"version":3,"file":"moq-publisher.iife.js","sources":["../../transport/buffer.ts","../../transport/base_data.ts","../../transport/control/subscribe.ts","../../transport/control/subscribe_ok.ts","../../transport/control/subscribe_error.ts","../../transport/control/subscribe_update.ts","../../transport/control/subscribe_namespace.ts","../../transport/control/subscribe_namespace_ok.ts","../../transport/control/subscribe_namespace_error.ts","../../transport/control/unsubscribe.ts","../../transport/control/publish.ts","../../transport/control/publish_ok.ts","../../transport/control/publish_error.ts","../../transport/control/publish_done.ts","../../transport/control/publish_namespace.ts","../../transport/control/publish_namespace_ok.ts","../../transport/control/publish_namespace_error.ts","../../transport/control/publish_namespace_done.ts","../../transport/control/fetch.ts","../../transport/control/fetch_ok.ts","../../transport/control/fetch_error.ts","../../transport/control/fetch_cancel.ts","../../transport/control/go_away.ts","../../transport/control/client_setup.ts","../../transport/control/server_setup.ts","../../transport/control/max_request_id.ts","../../transport/control/index.ts","../../transport/control/requests_block.ts","../../transport/utils.ts","../../transport/stream.ts","../../transport/subgroup.ts","../../transport/objects.ts","../../common/error.ts","../../common/async.ts","../../transport/publisher.ts","../../transport/subscriber.ts","../../transport/connection.ts","../../transport/client.ts","../../contribute/segment.ts","../../node_modules/mp4box/dist/mp4box.all.js","../../media/mp4/index.ts","../../contribute/container.ts","../../contribute/audio.ts","../../contribute/video.ts","../../contribute/track.ts","../../common/settings.ts","../../contribute/broadcast.ts","../../media/catalog/index.ts","../../publish/index.ts","../../moq-publisher/index.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"// file:src/log.js\n/* \n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar Log = (function (){\n\t\tvar start = new Date();\n\t\tvar LOG_LEVEL_ERROR \t= 4;\n\t\tvar LOG_LEVEL_WARNING \t= 3;\n\t\tvar LOG_LEVEL_INFO \t\t= 2;\n\t\tvar LOG_LEVEL_DEBUG\t\t= 1;\n\t\tvar log_level = LOG_LEVEL_ERROR;\n\t\tvar logObject = {\n\t\t\tsetLogLevel : function(level) {\n\t\t\t\tif (level == this.debug) log_level = LOG_LEVEL_DEBUG;\n\t\t\t\telse if (level == this.info) log_level = LOG_LEVEL_INFO;\n\t\t\t\telse if (level == this.warn) log_level = LOG_LEVEL_WARNING;\n\t\t\t\telse if (level == this.error) log_level = LOG_LEVEL_ERROR;\n\t\t\t\telse log_level = LOG_LEVEL_ERROR;\n\t\t\t},\n\t\t\tdebug : function(module, msg) {\n\t\t\t\tif (console.debug === undefined) {\n\t\t\t\t\tconsole.debug = console.log;\n\t\t\t\t}\n\t\t\t\tif (LOG_LEVEL_DEBUG >= log_level) {\n\t\t\t\t\tconsole.debug(\"[\"+Log.getDurationString(new Date()-start,1000)+\"]\",\"[\"+module+\"]\",msg);\n\t\t\t\t}\n\t\t\t},\n\t\t\tlog : function(module, msg) {\n\t\t\t\tthis.debug(module.msg)\n\t\t\t},\n\t\t\tinfo : function(module, msg) {\n\t\t\t\tif (LOG_LEVEL_INFO >= log_level) {\n\t\t\t\t\tconsole.info(\"[\"+Log.getDurationString(new Date()-start,1000)+\"]\",\"[\"+module+\"]\",msg);\n\t\t\t\t}\n\t\t\t},\n\t\t\twarn : function(module, msg) {\n\t\t\t\tif (LOG_LEVEL_WARNING >= log_level) {\n\t\t\t\t\tconsole.warn(\"[\"+Log.getDurationString(new Date()-start,1000)+\"]\",\"[\"+module+\"]\",msg);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror : function(module, msg) {\n\t\t\t\tif (LOG_LEVEL_ERROR >= log_level) {\n\t\t\t\t\tconsole.error(\"[\"+Log.getDurationString(new Date()-start,1000)+\"]\",\"[\"+module+\"]\",msg);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn logObject;\n\t})();\n\t\n/* Helper function to print a duration value in the form H:MM:SS.MS */\nLog.getDurationString = function(duration, _timescale) {\n\tvar neg;\n\t/* Helper function to print a number on a fixed number of digits */\n\tfunction pad(number, length) {\n\t\tvar str = '' + number;\n\t\tvar a = str.split('.');\t\t\n\t\twhile (a[0].length < length) {\n\t\t\ta[0] = '0' + a[0];\n\t\t}\n\t\treturn a.join('.');\n\t}\n\tif (duration < 0) {\n\t\tneg = true;\n\t\tduration = -duration;\n\t} else {\n\t\tneg = false;\t\n\t}\n\tvar timescale = _timescale || 1;\n\tvar duration_sec = duration/timescale;\n\tvar hours = Math.floor(duration_sec/3600);\n\tduration_sec -= hours * 3600;\n\tvar minutes = Math.floor(duration_sec/60);\n\tduration_sec -= minutes * 60;\t\t\n\tvar msec = duration_sec*1000;\n\tduration_sec = Math.floor(duration_sec);\n\tmsec -= duration_sec*1000;\n\tmsec = Math.floor(msec);\n\treturn (neg ? \"-\": \"\")+hours+\":\"+pad(minutes,2)+\":\"+pad(duration_sec,2)+\".\"+pad(msec,3);\n}\n\t\n/* Helper function to stringify HTML5 TimeRanges objects */\t\nLog.printRanges = function(ranges) {\n\tvar length = ranges.length;\n\tif (length > 0) {\n\t\tvar str = \"\";\n\t\tfor (var i = 0; i < length; i++) {\n\t\t  if (i > 0) str += \",\";\n\t\t  str += \"[\"+Log.getDurationString(ranges.start(i))+ \",\"+Log.getDurationString(ranges.end(i))+\"]\";\n\t\t}\n\t\treturn str;\n\t} else {\n\t\treturn \"(empty)\";\n\t}\n}\n\nif (typeof exports !== 'undefined') {\n\texports.Log = Log;\n}\n// file:src/stream.js\nvar MP4BoxStream = function(arrayBuffer) {\n  if (arrayBuffer instanceof ArrayBuffer) {\n    this.buffer = arrayBuffer;\n    this.dataview = new DataView(arrayBuffer);\n  } else {\n    throw (\"Needs an array buffer\");\n  }\n  this.position = 0;\n};\n\n/*************************************************************************\n  Common API between MultiBufferStream and SimpleStream\n *************************************************************************/\nMP4BoxStream.prototype.getPosition = function() {\n  return this.position;\n}\n\nMP4BoxStream.prototype.getEndPosition = function() {\n  return this.buffer.byteLength;\n}\n\nMP4BoxStream.prototype.getLength = function() {\n  return this.buffer.byteLength;\n}\n\nMP4BoxStream.prototype.seek = function (pos) {\n  var npos = Math.max(0, Math.min(this.buffer.byteLength, pos));\n  this.position = (isNaN(npos) || !isFinite(npos)) ? 0 : npos;\n  return true;\n}\n\nMP4BoxStream.prototype.isEos = function () {\n  return this.getPosition() >= this.getEndPosition();\n}\n\n/*************************************************************************\n  Read methods, simimar to DataStream but simpler\n *************************************************************************/\nMP4BoxStream.prototype.readAnyInt = function(size, signed) {\n  var res = 0;\n  if (this.position + size <= this.buffer.byteLength) {\n    switch (size) {\n      case 1:\n        if (signed) {\n          res = this.dataview.getInt8(this.position);\n        } else {\n          res = this.dataview.getUint8(this.position);\n        }\n        break;\n      case 2:\n        if (signed) {\n          res = this.dataview.getInt16(this.position);\n        } else {\n          res = this.dataview.getUint16(this.position);\n        }\n        break;\n      case 3:\n        if (signed) {\n          throw (\"No method for reading signed 24 bits values\");\n        } else {\n          res = this.dataview.getUint8(this.position) << 16;\n          res |= this.dataview.getUint8(this.position+1) << 8;\n          res |= this.dataview.getUint8(this.position+2);\n        }\n        break;\n      case 4:\n        if (signed) {\n          res = this.dataview.getInt32(this.position);\n        } else {\n          res = this.dataview.getUint32(this.position);\n        }\n        break;\n      case 8:\n        if (signed) {\n          throw (\"No method for reading signed 64 bits values\");\n        } else {\n          res = this.dataview.getUint32(this.position) << 32;\n          res |= this.dataview.getUint32(this.position+4);\n        }\n        break;\n      default:\n        throw (\"readInt method not implemented for size: \"+size);\n    }\n    this.position+= size;\n    return res;\n  } else {\n    throw (\"Not enough bytes in buffer\");\n  }\n}\n\nMP4BoxStream.prototype.readUint8 = function() {\n  return this.readAnyInt(1, false);\n}\n\nMP4BoxStream.prototype.readUint16 = function() {\n  return this.readAnyInt(2, false);\n}\n\nMP4BoxStream.prototype.readUint24 = function() {\n  return this.readAnyInt(3, false);\n}\n\nMP4BoxStream.prototype.readUint32 = function() {\n  return this.readAnyInt(4, false);\n}\n\nMP4BoxStream.prototype.readUint64 = function() {\n  return this.readAnyInt(8, false);\n}\n\nMP4BoxStream.prototype.readString = function(length) {\n  if (this.position + length <= this.buffer.byteLength) {\n    var s = \"\";\n    for (var i = 0; i < length; i++) {\n      s += String.fromCharCode(this.readUint8());\n    }\n    return s;\n  } else {\n    throw (\"Not enough bytes in buffer\");\n  }\n}\n\nMP4BoxStream.prototype.readCString = function() {\n  var arr = [];\n  while(true) {\n    var b = this.readUint8();\n    if (b !== 0) {\n      arr.push(b);\n    } else {\n      break;\n    }\n  }\n  return String.fromCharCode.apply(null, arr); \n}\n\nMP4BoxStream.prototype.readInt8 = function() {\n  return this.readAnyInt(1, true);\n}\n\nMP4BoxStream.prototype.readInt16 = function() {\n  return this.readAnyInt(2, true);\n}\n\nMP4BoxStream.prototype.readInt32 = function() {\n  return this.readAnyInt(4, true);\n}\n\nMP4BoxStream.prototype.readInt64 = function() {\n  return this.readAnyInt(8, false);\n}\n\nMP4BoxStream.prototype.readUint8Array = function(length) {\n  var arr = new Uint8Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readUint8();\n  }\n  return arr;\n}\n\nMP4BoxStream.prototype.readInt16Array = function(length) {\n  var arr = new Int16Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readInt16();\n  }\n  return arr;\n}\n\nMP4BoxStream.prototype.readUint16Array = function(length) {\n  var arr = new Int16Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readUint16();\n  }\n  return arr;\n}\n\nMP4BoxStream.prototype.readUint32Array = function(length) {\n  var arr = new Uint32Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readUint32();\n  }\n  return arr;\n}\n\nMP4BoxStream.prototype.readInt32Array = function(length) {\n  var arr = new Int32Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readInt32();\n  }\n  return arr;\n}\n\nif (typeof exports !== 'undefined') {\n  exports.MP4BoxStream = MP4BoxStream;\n}// file:src/DataStream.js\n/**\n  DataStream reads scalars, arrays and structs of data from an ArrayBuffer.\n  It's like a file-like DataView on steroids.\n\n  @param {ArrayBuffer} arrayBuffer ArrayBuffer to read from.\n  @param {?Number} byteOffset Offset from arrayBuffer beginning for the DataStream.\n  @param {?Boolean} endianness DataStream.BIG_ENDIAN or DataStream.LITTLE_ENDIAN (the default).\n  */\nvar DataStream = function(arrayBuffer, byteOffset, endianness) {\n  this._byteOffset = byteOffset || 0;\n  if (arrayBuffer instanceof ArrayBuffer) {\n    this.buffer = arrayBuffer;\n  } else if (typeof arrayBuffer == \"object\") {\n    this.dataView = arrayBuffer;\n    if (byteOffset) {\n      this._byteOffset += byteOffset;\n    }\n  } else {\n    this.buffer = new ArrayBuffer(arrayBuffer || 0);\n  }\n  this.position = 0;\n  this.endianness = endianness == null ? DataStream.LITTLE_ENDIAN : endianness;\n};\nDataStream.prototype = {};\n\nDataStream.prototype.getPosition = function() {\n  return this.position;\n}\n\n/**\n  Internal function to resize the DataStream buffer when required.\n  @param {number} extra Number of bytes to add to the buffer allocation.\n  @return {null}\n  */\nDataStream.prototype._realloc = function(extra) {\n  if (!this._dynamicSize) {\n    return;\n  }\n  var req = this._byteOffset + this.position + extra;\n  var blen = this._buffer.byteLength;\n  if (req <= blen) {\n    if (req > this._byteLength) {\n      this._byteLength = req;\n    }\n    return;\n  }\n  if (blen < 1) {\n    blen = 1;\n  }\n  while (req > blen) {\n    blen *= 2;\n  }\n  var buf = new ArrayBuffer(blen);\n  var src = new Uint8Array(this._buffer);\n  var dst = new Uint8Array(buf, 0, src.length);\n  dst.set(src);\n  this.buffer = buf;\n  this._byteLength = req;\n};\n\n/**\n  Internal function to trim the DataStream buffer when required.\n  Used for stripping out the extra bytes from the backing buffer when\n  the virtual byteLength is smaller than the buffer byteLength (happens after\n  growing the buffer with writes and not filling the extra space completely).\n\n  @return {null}\n  */\nDataStream.prototype._trimAlloc = function() {\n  if (this._byteLength == this._buffer.byteLength) {\n    return;\n  }\n  var buf = new ArrayBuffer(this._byteLength);\n  var dst = new Uint8Array(buf);\n  var src = new Uint8Array(this._buffer, 0, dst.length);\n  dst.set(src);\n  this.buffer = buf;\n};\n\n\n/**\n  Big-endian const to use as default endianness.\n  @type {boolean}\n  */\nDataStream.BIG_ENDIAN = false;\n\n/**\n  Little-endian const to use as default endianness.\n  @type {boolean}\n  */\nDataStream.LITTLE_ENDIAN = true;\n\n/**\n  Virtual byte length of the DataStream backing buffer.\n  Updated to be max of original buffer size and last written size.\n  If dynamicSize is false is set to buffer size.\n  @type {number}\n  */\nDataStream.prototype._byteLength = 0;\n\n/**\n  Returns the byte length of the DataStream object.\n  @type {number}\n  */\nObject.defineProperty(DataStream.prototype, 'byteLength',\n  { get: function() {\n    return this._byteLength - this._byteOffset;\n  }});\n\n/**\n  Set/get the backing ArrayBuffer of the DataStream object.\n  The setter updates the DataView to point to the new buffer.\n  @type {Object}\n  */\nObject.defineProperty(DataStream.prototype, 'buffer',\n  { get: function() {\n      this._trimAlloc();\n      return this._buffer;\n    },\n    set: function(v) {\n      this._buffer = v;\n      this._dataView = new DataView(this._buffer, this._byteOffset);\n      this._byteLength = this._buffer.byteLength;\n    } });\n\n/**\n  Set/get the byteOffset of the DataStream object.\n  The setter updates the DataView to point to the new byteOffset.\n  @type {number}\n  */\nObject.defineProperty(DataStream.prototype, 'byteOffset',\n  { get: function() {\n      return this._byteOffset;\n    },\n    set: function(v) {\n      this._byteOffset = v;\n      this._dataView = new DataView(this._buffer, this._byteOffset);\n      this._byteLength = this._buffer.byteLength;\n    } });\n\n/**\n  Set/get the backing DataView of the DataStream object.\n  The setter updates the buffer and byteOffset to point to the DataView values.\n  @type {Object}\n  */\nObject.defineProperty(DataStream.prototype, 'dataView',\n  { get: function() {\n      return this._dataView;\n    },\n    set: function(v) {\n      this._byteOffset = v.byteOffset;\n      this._buffer = v.buffer;\n      this._dataView = new DataView(this._buffer, this._byteOffset);\n      this._byteLength = this._byteOffset + v.byteLength;\n    } });\n\n/**\n  Sets the DataStream read/write position to given position.\n  Clamps between 0 and DataStream length.\n\n  @param {number} pos Position to seek to.\n  @return {null}\n  */\nDataStream.prototype.seek = function(pos) {\n  var npos = Math.max(0, Math.min(this.byteLength, pos));\n  this.position = (isNaN(npos) || !isFinite(npos)) ? 0 : npos;\n};\n\n/**\n  Returns true if the DataStream seek pointer is at the end of buffer and\n  there's no more data to read.\n\n  @return {boolean} True if the seek pointer is at the end of the buffer.\n  */\nDataStream.prototype.isEof = function() {\n  return (this.position >= this._byteLength);\n};\n\n\n/**\n  Maps a Uint8Array into the DataStream buffer.\n\n  Nice for quickly reading in data.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Uint8Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapUint8Array = function(length) {\n  this._realloc(length * 1);\n  var arr = new Uint8Array(this._buffer, this.byteOffset+this.position, length);\n  this.position += length * 1;\n  return arr;\n};\n\n\n/**\n  Reads an Int32Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Int32Array.\n */\nDataStream.prototype.readInt32Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 4) : length;\n  var arr = new Int32Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads an Int16Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Int16Array.\n */\nDataStream.prototype.readInt16Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 2) : length;\n  var arr = new Int16Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads an Int8Array of desired length from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Int8Array.\n */\nDataStream.prototype.readInt8Array = function(length) {\n  length = length == null ? (this.byteLength-this.position) : length;\n  var arr = new Int8Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Uint32Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Uint32Array.\n */\nDataStream.prototype.readUint32Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 4) : length;\n  var arr = new Uint32Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Uint16Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Uint16Array.\n */\nDataStream.prototype.readUint16Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 2) : length;\n  var arr = new Uint16Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Uint8Array of desired length from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Uint8Array.\n */\nDataStream.prototype.readUint8Array = function(length) {\n  length = length == null ? (this.byteLength-this.position) : length;\n  var arr = new Uint8Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Float64Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Float64Array.\n */\nDataStream.prototype.readFloat64Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 8) : length;\n  var arr = new Float64Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Float32Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Float32Array.\n */\nDataStream.prototype.readFloat32Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 4) : length;\n  var arr = new Float32Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n\n/**\n  Reads a 32-bit int from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readInt32 = function(e) {\n  var v = this._dataView.getInt32(this.position, e == null ? this.endianness : e);\n  this.position += 4;\n  return v;\n};\n\n/**\n  Reads a 16-bit int from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readInt16 = function(e) {\n  var v = this._dataView.getInt16(this.position, e == null ? this.endianness : e);\n  this.position += 2;\n  return v;\n};\n\n/**\n  Reads an 8-bit int from the DataStream.\n\n  @return {number} The read number.\n */\nDataStream.prototype.readInt8 = function() {\n  var v = this._dataView.getInt8(this.position);\n  this.position += 1;\n  return v;\n};\n\n/**\n  Reads a 32-bit unsigned int from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readUint32 = function(e) {\n  var v = this._dataView.getUint32(this.position, e == null ? this.endianness : e);\n  this.position += 4;\n  return v;\n};\n\n/**\n  Reads a 16-bit unsigned int from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readUint16 = function(e) {\n  var v = this._dataView.getUint16(this.position, e == null ? this.endianness : e);\n  this.position += 2;\n  return v;\n};\n\n/**\n  Reads an 8-bit unsigned int from the DataStream.\n\n  @return {number} The read number.\n */\nDataStream.prototype.readUint8 = function() {\n  var v = this._dataView.getUint8(this.position);\n  this.position += 1;\n  return v;\n};\n\n/**\n  Reads a 32-bit float from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readFloat32 = function(e) {\n  var v = this._dataView.getFloat32(this.position, e == null ? this.endianness : e);\n  this.position += 4;\n  return v;\n};\n\n/**\n  Reads a 64-bit float from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readFloat64 = function(e) {\n  var v = this._dataView.getFloat64(this.position, e == null ? this.endianness : e);\n  this.position += 8;\n  return v;\n};\n\n/**\n  Native endianness. Either DataStream.BIG_ENDIAN or DataStream.LITTLE_ENDIAN\n  depending on the platform endianness.\n\n  @type {boolean}\n */\nDataStream.endianness = new Int8Array(new Int16Array([1]).buffer)[0] > 0;\n\n/**\n  Copies byteLength bytes from the src buffer at srcOffset to the\n  dst buffer at dstOffset.\n\n  @param {Object} dst Destination ArrayBuffer to write to.\n  @param {number} dstOffset Offset to the destination ArrayBuffer.\n  @param {Object} src Source ArrayBuffer to read from.\n  @param {number} srcOffset Offset to the source ArrayBuffer.\n  @param {number} byteLength Number of bytes to copy.\n */\nDataStream.memcpy = function(dst, dstOffset, src, srcOffset, byteLength) {\n  var dstU8 = new Uint8Array(dst, dstOffset, byteLength);\n  var srcU8 = new Uint8Array(src, srcOffset, byteLength);\n  dstU8.set(srcU8);\n};\n\n/**\n  Converts array to native endianness in-place.\n\n  @param {Object} array Typed array to convert.\n  @param {boolean} arrayIsLittleEndian True if the data in the array is\n                                       little-endian. Set false for big-endian.\n  @return {Object} The converted typed array.\n */\nDataStream.arrayToNative = function(array, arrayIsLittleEndian) {\n  if (arrayIsLittleEndian == this.endianness) {\n    return array;\n  } else {\n    return this.flipArrayEndianness(array);\n  }\n};\n\n/**\n  Converts native endianness array to desired endianness in-place.\n\n  @param {Object} array Typed array to convert.\n  @param {boolean} littleEndian True if the converted array should be\n                                little-endian. Set false for big-endian.\n  @return {Object} The converted typed array.\n */\nDataStream.nativeToEndian = function(array, littleEndian) {\n  if (this.endianness == littleEndian) {\n    return array;\n  } else {\n    return this.flipArrayEndianness(array);\n  }\n};\n\n/**\n  Flips typed array endianness in-place.\n\n  @param {Object} array Typed array to flip.\n  @return {Object} The converted typed array.\n */\nDataStream.flipArrayEndianness = function(array) {\n  var u8 = new Uint8Array(array.buffer, array.byteOffset, array.byteLength);\n  for (var i=0; i<array.byteLength; i+=array.BYTES_PER_ELEMENT) {\n    for (var j=i+array.BYTES_PER_ELEMENT-1, k=i; j>k; j--, k++) {\n      var tmp = u8[k];\n      u8[k] = u8[j];\n      u8[j] = tmp;\n    }\n  }\n  return array;\n};\n\n/**\n  Seek position where DataStream#readStruct ran into a problem.\n  Useful for debugging struct parsing.\n\n  @type {number}\n */\nDataStream.prototype.failurePosition = 0;\n\nString.fromCharCodeUint8 = function(uint8arr) {\n    var arr = [];\n    for (var i = 0; i < uint8arr.length; i++) {\n      arr[i] = uint8arr[i];\n    }\n    return String.fromCharCode.apply(null, arr);\n}\n/**\n  Read a string of desired length and encoding from the DataStream.\n\n  @param {number} length The length of the string to read in bytes.\n  @param {?string} encoding The encoding of the string data in the DataStream.\n                            Defaults to ASCII.\n  @return {string} The read string.\n */\nDataStream.prototype.readString = function(length, encoding) {\n  if (encoding == null || encoding == \"ASCII\") {\n    return String.fromCharCodeUint8.apply(null, [this.mapUint8Array(length == null ? this.byteLength-this.position : length)]);\n  } else {\n    return (new TextDecoder(encoding)).decode(this.mapUint8Array(length));\n  }\n};\n\n/**\n  Read null-terminated string of desired length from the DataStream. Truncates\n  the returned string so that the null byte is not a part of it.\n\n  @param {?number} length The length of the string to read.\n  @return {string} The read string.\n */\nDataStream.prototype.readCString = function(length) {\n  var blen = this.byteLength-this.position;\n  var u8 = new Uint8Array(this._buffer, this._byteOffset + this.position);\n  var len = blen;\n  if (length != null) {\n    len = Math.min(length, blen);\n  }\n  for (var i = 0; i < len && u8[i] !== 0; i++); // find first zero byte\n  var s = String.fromCharCodeUint8.apply(null, [this.mapUint8Array(i)]);\n  if (length != null) {\n    this.position += len-i;\n  } else if (i != blen) {\n    this.position += 1; // trailing zero if not at end of buffer\n  }\n  return s;\n};\n\n/* \n   TODO: fix endianness for 24/64-bit fields\n   TODO: check range/support for 64-bits numbers in JavaScript\n*/\nvar MAX_SIZE = Math.pow(2, 32);\n\nDataStream.prototype.readInt64 = function () {\n  return (this.readInt32()*MAX_SIZE)+this.readUint32();\n}\nDataStream.prototype.readUint64 = function () {\n\treturn (this.readUint32()*MAX_SIZE)+this.readUint32();\n}\n\nDataStream.prototype.readInt64 = function () {\n  return (this.readUint32()*MAX_SIZE)+this.readUint32();\n}\n\nDataStream.prototype.readUint24 = function () {\n\treturn (this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8();\n}\n\nif (typeof exports !== 'undefined') {\n  exports.DataStream = DataStream;  \n}\n// file:src/DataStream-write.js\n/**\n  Saves the DataStream contents to the given filename.\n  Uses Chrome's anchor download property to initiate download.\n \n  @param {string} filename Filename to save as.\n  @return {null}\n  */\nDataStream.prototype.save = function(filename) {\n  var blob = new Blob([this.buffer]);\n  if (window.URL && URL.createObjectURL) {\n      var url = window.URL.createObjectURL(blob);\n      var a = document.createElement('a');\n      // Required in Firefox:\n      document.body.appendChild(a);\n      a.setAttribute('href', url);\n      a.setAttribute('download', filename);\n      // Required in Firefox:\n      a.setAttribute('target', '_self');\n      a.click();\n      window.URL.revokeObjectURL(url);\n  } else {\n      throw(\"DataStream.save: Can't create object URL.\");\n  }\n};\n\n/**\n  Whether to extend DataStream buffer when trying to write beyond its size.\n  If set, the buffer is reallocated to twice its current size until the\n  requested write fits the buffer.\n  @type {boolean}\n  */\nDataStream.prototype._dynamicSize = true;\nObject.defineProperty(DataStream.prototype, 'dynamicSize',\n  { get: function() {\n      return this._dynamicSize;\n    },\n    set: function(v) {\n      if (!v) {\n        this._trimAlloc();\n      }\n      this._dynamicSize = v;\n    } });\n\n/**\n  Internal function to trim the DataStream buffer when required.\n  Used for stripping out the first bytes when not needed anymore.\n\n  @return {null}\n  */\nDataStream.prototype.shift = function(offset) {\n  var buf = new ArrayBuffer(this._byteLength-offset);\n  var dst = new Uint8Array(buf);\n  var src = new Uint8Array(this._buffer, offset, dst.length);\n  dst.set(src);\n  this.buffer = buf;\n  this.position -= offset;\n};\n\n/**\n  Writes an Int32Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeInt32Array = function(arr, e) {\n  this._realloc(arr.length * 4);\n  if (arr instanceof Int32Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapInt32Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeInt32(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes an Int16Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeInt16Array = function(arr, e) {\n  this._realloc(arr.length * 2);\n  if (arr instanceof Int16Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapInt16Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeInt16(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes an Int8Array to the DataStream.\n\n  @param {Object} arr The array to write.\n */\nDataStream.prototype.writeInt8Array = function(arr) {\n  this._realloc(arr.length * 1);\n  if (arr instanceof Int8Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapInt8Array(arr.length);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeInt8(arr[i]);\n    }\n  }\n};\n\n/**\n  Writes a Uint32Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeUint32Array = function(arr, e) {\n  this._realloc(arr.length * 4);\n  if (arr instanceof Uint32Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapUint32Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeUint32(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes a Uint16Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeUint16Array = function(arr, e) {\n  this._realloc(arr.length * 2);\n  if (arr instanceof Uint16Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapUint16Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeUint16(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes a Uint8Array to the DataStream.\n\n  @param {Object} arr The array to write.\n */\nDataStream.prototype.writeUint8Array = function(arr) {\n  this._realloc(arr.length * 1);\n  if (arr instanceof Uint8Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapUint8Array(arr.length);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeUint8(arr[i]);\n    }\n  }\n};\n\n/**\n  Writes a Float64Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeFloat64Array = function(arr, e) {\n  this._realloc(arr.length * 8);\n  if (arr instanceof Float64Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapFloat64Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeFloat64(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes a Float32Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeFloat32Array = function(arr, e) {\n  this._realloc(arr.length * 4);\n  if (arr instanceof Float32Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapFloat32Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeFloat32(arr[i], e);\n    }\n  }\n};\n\n\n/**\n  Writes a 32-bit int to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeInt32 = function(v, e) {\n  this._realloc(4);\n  this._dataView.setInt32(this.position, v, e == null ? this.endianness : e);\n  this.position += 4;\n};\n\n/**\n  Writes a 16-bit int to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeInt16 = function(v, e) {\n  this._realloc(2);\n  this._dataView.setInt16(this.position, v, e == null ? this.endianness : e);\n  this.position += 2;\n};\n\n/**\n  Writes an 8-bit int to the DataStream.\n\n  @param {number} v Number to write.\n */\nDataStream.prototype.writeInt8 = function(v) {\n  this._realloc(1);\n  this._dataView.setInt8(this.position, v);\n  this.position += 1;\n};\n\n/**\n  Writes a 32-bit unsigned int to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeUint32 = function(v, e) {\n  this._realloc(4);\n  this._dataView.setUint32(this.position, v, e == null ? this.endianness : e);\n  this.position += 4;\n};\n\n/**\n  Writes a 16-bit unsigned int to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeUint16 = function(v, e) {\n  this._realloc(2);\n  this._dataView.setUint16(this.position, v, e == null ? this.endianness : e);\n  this.position += 2;\n};\n\n/**\n  Writes an 8-bit unsigned  int to the DataStream.\n\n  @param {number} v Number to write.\n */\nDataStream.prototype.writeUint8 = function(v) {\n  this._realloc(1);\n  this._dataView.setUint8(this.position, v);\n  this.position += 1;\n};\n\n/**\n  Writes a 32-bit float to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeFloat32 = function(v, e) {\n  this._realloc(4);\n  this._dataView.setFloat32(this.position, v, e == null ? this.endianness : e);\n  this.position += 4;\n};\n\n/**\n  Writes a 64-bit float to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeFloat64 = function(v, e) {\n  this._realloc(8);\n  this._dataView.setFloat64(this.position, v, e == null ? this.endianness : e);\n  this.position += 8;\n};\n\n/**\n  Write a UCS-2 string of desired endianness to the DataStream. The\n  lengthOverride argument lets you define the number of characters to write.\n  If the string is shorter than lengthOverride, the extra space is padded with\n  zeroes.\n\n  @param {string} str The string to write.\n  @param {?boolean} endianness The endianness to use for the written string data.\n  @param {?number} lengthOverride The number of characters to write.\n */\nDataStream.prototype.writeUCS2String = function(str, endianness, lengthOverride) {\n  if (lengthOverride == null) {\n    lengthOverride = str.length;\n  }\n  for (var i = 0; i < str.length && i < lengthOverride; i++) {\n    this.writeUint16(str.charCodeAt(i), endianness);\n  }\n  for (; i<lengthOverride; i++) {\n    this.writeUint16(0);\n  }\n};\n\n/**\n  Writes a string of desired length and encoding to the DataStream.\n\n  @param {string} s The string to write.\n  @param {?string} encoding The encoding for the written string data.\n                            Defaults to ASCII.\n  @param {?number} length The number of characters to write.\n */\nDataStream.prototype.writeString = function(s, encoding, length) {\n  var i = 0;\n  if (encoding == null || encoding == \"ASCII\") {\n    if (length != null) {\n      var len = Math.min(s.length, length);\n      for (i=0; i<len; i++) {\n        this.writeUint8(s.charCodeAt(i));\n      }\n      for (; i<length; i++) {\n        this.writeUint8(0);\n      }\n    } else {\n      for (i=0; i<s.length; i++) {\n        this.writeUint8(s.charCodeAt(i));\n      }\n    }\n  } else {\n    this.writeUint8Array((new TextEncoder(encoding)).encode(s.substring(0, length)));\n  }\n};\n\n/**\n  Writes a null-terminated string to DataStream and zero-pads it to length\n  bytes. If length is not given, writes the string followed by a zero.\n  If string is longer than length, the written part of the string does not have\n  a trailing zero.\n\n  @param {string} s The string to write.\n  @param {?number} length The number of characters to write.\n */\nDataStream.prototype.writeCString = function(s, length) {\n  var i = 0;\n  if (length != null) {\n    var len = Math.min(s.length, length);\n    for (i=0; i<len; i++) {\n      this.writeUint8(s.charCodeAt(i));\n    }\n    for (; i<length; i++) {\n      this.writeUint8(0);\n    }\n  } else {\n    for (i=0; i<s.length; i++) {\n      this.writeUint8(s.charCodeAt(i));\n    }\n    this.writeUint8(0);\n  }\n};\n\n/**\n  Writes a struct to the DataStream. Takes a structDefinition that gives the\n  types and a struct object that gives the values. Refer to readStruct for the\n  structure of structDefinition.\n\n  @param {Object} structDefinition Type definition of the struct.\n  @param {Object} struct The struct data object.\n  */\nDataStream.prototype.writeStruct = function(structDefinition, struct) {\n  for (var i = 0; i < structDefinition.length; i+=2) {\n    var t = structDefinition[i+1];\n    this.writeType(t, struct[structDefinition[i]], struct);\n  }\n};\n\n/**\n  Writes object v of type t to the DataStream.\n\n  @param {Object} t Type of data to write.\n  @param {Object} v Value of data to write.\n  @param {Object} struct Struct to pass to write callback functions.\n  */\nDataStream.prototype.writeType = function(t, v, struct) {\n  var tp;\n  if (typeof t == \"function\") {\n    return t(this, v);\n  } else if (typeof t == \"object\" && !(t instanceof Array)) {\n    return t.set(this, v, struct);\n  }\n  var lengthOverride = null;\n  var charset = \"ASCII\";\n  var pos = this.position;\n  if (typeof(t) == 'string' && /:/.test(t)) {\n    tp = t.split(\":\");\n    t = tp[0];\n    lengthOverride = parseInt(tp[1]);\n  }\n  if (typeof t == 'string' && /,/.test(t)) {\n    tp = t.split(\",\");\n    t = tp[0];\n    charset = parseInt(tp[1]);\n  }\n\n  switch(t) {\n    case 'uint8':\n      this.writeUint8(v);\n      break;\n    case 'int8':\n      this.writeInt8(v);\n      break;\n\n    case 'uint16':\n      this.writeUint16(v, this.endianness);\n      break;\n    case 'int16':\n      this.writeInt16(v, this.endianness);\n      break;\n    case 'uint32':\n      this.writeUint32(v, this.endianness);\n      break;\n    case 'int32':\n      this.writeInt32(v, this.endianness);\n      break;\n    case 'float32':\n      this.writeFloat32(v, this.endianness);\n      break;\n    case 'float64':\n      this.writeFloat64(v, this.endianness);\n      break;\n\n    case 'uint16be':\n      this.writeUint16(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'int16be':\n      this.writeInt16(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'uint32be':\n      this.writeUint32(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'int32be':\n      this.writeInt32(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'float32be':\n      this.writeFloat32(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'float64be':\n      this.writeFloat64(v, DataStream.BIG_ENDIAN);\n      break;\n\n    case 'uint16le':\n      this.writeUint16(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'int16le':\n      this.writeInt16(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'uint32le':\n      this.writeUint32(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'int32le':\n      this.writeInt32(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'float32le':\n      this.writeFloat32(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'float64le':\n      this.writeFloat64(v, DataStream.LITTLE_ENDIAN);\n      break;\n\n    case 'cstring':\n      this.writeCString(v, lengthOverride);\n      break;\n\n    case 'string':\n      this.writeString(v, charset, lengthOverride);\n      break;\n\n    case 'u16string':\n      this.writeUCS2String(v, this.endianness, lengthOverride);\n      break;\n\n    case 'u16stringle':\n      this.writeUCS2String(v, DataStream.LITTLE_ENDIAN, lengthOverride);\n      break;\n\n    case 'u16stringbe':\n      this.writeUCS2String(v, DataStream.BIG_ENDIAN, lengthOverride);\n      break;\n\n    default:\n      if (t.length == 3) {\n        var ta = t[1];\n        for (var i=0; i<v.length; i++) {\n          this.writeType(ta, v[i]);\n        }\n        break;\n      } else {\n        this.writeStruct(t, v);\n        break;\n      }\n  }\n  if (lengthOverride != null) {\n    this.position = pos;\n    this._realloc(lengthOverride);\n    this.position = pos + lengthOverride;\n  }\n};\n\n\nDataStream.prototype.writeUint64 = function (v) {\n\tvar h = Math.floor(v / MAX_SIZE);\n\tthis.writeUint32(h);\n\tthis.writeUint32(v & 0xFFFFFFFF);\n}\n\nDataStream.prototype.writeUint24 = function (v) {\n\tthis.writeUint8((v & 0x00FF0000)>>16);\n\tthis.writeUint8((v & 0x0000FF00)>>8);\n\tthis.writeUint8((v & 0x000000FF));\n}\n\nDataStream.prototype.adjustUint32 = function(position, value) {\n\tvar pos = this.position;\n\tthis.seek(position);\n\tthis.writeUint32(value);\n\tthis.seek(pos);\n}\n// file:src/DataStream-map.js\n/**\n  Maps an Int32Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Int32Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapInt32Array = function(length, e) {\n  this._realloc(length * 4);\n  var arr = new Int32Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 4;\n  return arr;\n};\n\n/**\n  Maps an Int16Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Int16Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapInt16Array = function(length, e) {\n  this._realloc(length * 2);\n  var arr = new Int16Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 2;\n  return arr;\n};\n\n/**\n  Maps an Int8Array into the DataStream buffer.\n\n  Nice for quickly reading in data.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Int8Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapInt8Array = function(length) {\n  this._realloc(length * 1);\n  var arr = new Int8Array(this._buffer, this.byteOffset+this.position, length);\n  this.position += length * 1;\n  return arr;\n};\n\n/**\n  Maps a Uint32Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Uint32Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapUint32Array = function(length, e) {\n  this._realloc(length * 4);\n  var arr = new Uint32Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 4;\n  return arr;\n};\n\n/**\n  Maps a Uint16Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Uint16Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapUint16Array = function(length, e) {\n  this._realloc(length * 2);\n  var arr = new Uint16Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 2;\n  return arr;\n};\n\n/**\n  Maps a Float64Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Float64Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapFloat64Array = function(length, e) {\n  this._realloc(length * 8);\n  var arr = new Float64Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 8;\n  return arr;\n};\n\n/**\n  Maps a Float32Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Float32Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapFloat32Array = function(length, e) {\n  this._realloc(length * 4);\n  var arr = new Float32Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 4;\n  return arr;\n};\n// file:src/buffer.js\n/**\n * MultiBufferStream is a class that acts as a SimpleStream for parsing \n * It holds several, possibly non-contiguous ArrayBuffer objects, each with a fileStart property \n * containing the offset for the buffer data in an original/virtual file \n *\n * It inherits also from DataStream for all read/write/alloc operations\n */\n\n/**\n * Constructor\n */\nvar MultiBufferStream = function(buffer) {\n\t/* List of ArrayBuffers, with a fileStart property, sorted in fileStart order and non overlapping */\n\tthis.buffers = [];\t\n\tthis.bufferIndex = -1;\n\tif (buffer) {\n\t\tthis.insertBuffer(buffer);\n\t\tthis.bufferIndex = 0;\n\t}\n}\nMultiBufferStream.prototype = new DataStream(new ArrayBuffer(), 0, DataStream.BIG_ENDIAN);\n\n/************************************************************************************\n  Methods for the managnement of the buffers (insertion, removal, concatenation, ...)\n ***********************************************************************************/\n\nMultiBufferStream.prototype.initialized = function() {\n\tvar firstBuffer;\n\tif (this.bufferIndex > -1) {\n\t\treturn true;\n\t} else if (this.buffers.length > 0) {\n\t\tfirstBuffer = this.buffers[0];\n\t\tif (firstBuffer.fileStart === 0) {\n\t\t\tthis.buffer = firstBuffer;\n\t\t\tthis.bufferIndex = 0;\n\t\t\tLog.debug(\"MultiBufferStream\", \"Stream ready for parsing\");\n\t\t\treturn true;\n\t\t} else {\n\t\t\tLog.warn(\"MultiBufferStream\", \"The first buffer should have a fileStart of 0\");\n\t\t\tthis.logBufferLevel();\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\tLog.warn(\"MultiBufferStream\", \"No buffer to start parsing from\");\n\t\tthis.logBufferLevel();\n\t\treturn false;\n\t}\t\t\t\n}\n\n/**\n * helper functions to concatenate two ArrayBuffer objects\n * @param  {ArrayBuffer} buffer1 \n * @param  {ArrayBuffer} buffer2 \n * @return {ArrayBuffer} the concatenation of buffer1 and buffer2 in that order\n */\nArrayBuffer.concat = function(buffer1, buffer2) {\n  Log.debug(\"ArrayBuffer\", \"Trying to create a new buffer of size: \"+(buffer1.byteLength + buffer2.byteLength));\n  var tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\n  tmp.set(new Uint8Array(buffer1), 0);\n  tmp.set(new Uint8Array(buffer2), buffer1.byteLength);\n  return tmp.buffer;\n};\n\n/**\n * Reduces the size of a given buffer, but taking the part between offset and offset+newlength\n * @param  {ArrayBuffer} buffer    \n * @param  {Number}      offset    the start of new buffer\n * @param  {Number}      newLength the length of the new buffer\n * @return {ArrayBuffer}           the new buffer\n */\nMultiBufferStream.prototype.reduceBuffer = function(buffer, offset, newLength) {\n\tvar smallB;\n\tsmallB = new Uint8Array(newLength);\n\tsmallB.set(new Uint8Array(buffer, offset, newLength));\n\tsmallB.buffer.fileStart = buffer.fileStart+offset;\n\tsmallB.buffer.usedBytes = 0;\n\treturn smallB.buffer;\t\n}\n\n/**\n * Inserts the new buffer in the sorted list of buffers,\n *  making sure, it is not overlapping with existing ones (possibly reducing its size).\n *  if the new buffer overrides/replaces the 0-th buffer (for instance because it is bigger), \n *  updates the DataStream buffer for parsing \n*/\nMultiBufferStream.prototype.insertBuffer = function(ab) {\t\n\tvar to_add = true;\n\t/* TODO: improve insertion if many buffers */\n\tfor (var i = 0; i < this.buffers.length; i++) {\n\t\tvar b = this.buffers[i];\n\t\tif (ab.fileStart <= b.fileStart) {\n\t\t\t/* the insertion position is found */\n\t\t\tif (ab.fileStart === b.fileStart) {\n\t\t\t\t/* The new buffer overlaps with an existing buffer */\n\t\t\t\tif (ab.byteLength >  b.byteLength) {\n\t\t\t\t\t/* the new buffer is bigger than the existing one\n\t\t\t\t\t   remove the existing buffer and try again to insert \n\t\t\t\t\t   the new buffer to check overlap with the next ones */\n\t\t\t\t\tthis.buffers.splice(i, 1);\n\t\t\t\t\ti--; \n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\t/* the new buffer is smaller than the existing one, just drop it */\n\t\t\t\t\tLog.warn(\"MultiBufferStream\", \"Buffer (fileStart: \"+ab.fileStart+\" - Length: \"+ab.byteLength+\") already appended, ignoring\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t/* The beginning of the new buffer is not overlapping with an existing buffer\n\t\t\t\t   let's check the end of it */\n\t\t\t\tif (ab.fileStart + ab.byteLength <= b.fileStart) {\n\t\t\t\t\t/* no overlap, we can add it as is */\n\t\t\t\t} else {\n\t\t\t\t\t/* There is some overlap, cut the new buffer short, and add it*/\n\t\t\t\t\tab = this.reduceBuffer(ab, 0, b.fileStart - ab.fileStart);\n\t\t\t\t}\n\t\t\t\tLog.debug(\"MultiBufferStream\", \"Appending new buffer (fileStart: \"+ab.fileStart+\" - Length: \"+ab.byteLength+\")\");\n\t\t\t\tthis.buffers.splice(i, 0, ab);\n\t\t\t\t/* if this new buffer is inserted in the first place in the list of the buffer, \n\t\t\t\t   and the DataStream is initialized, make it the buffer used for parsing */\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tthis.buffer = ab;\n\t\t\t\t}\n\t\t\t}\n\t\t\tto_add = false;\n\t\t\tbreak;\n\t\t} else if (ab.fileStart < b.fileStart + b.byteLength) {\n\t\t\t/* the new buffer overlaps its beginning with the end of the current buffer */\n\t\t\tvar offset = b.fileStart + b.byteLength - ab.fileStart;\n\t\t\tvar newLength = ab.byteLength - offset;\n\t\t\tif (newLength > 0) {\n\t\t\t\t/* the new buffer is bigger than the current overlap, drop the overlapping part and try again inserting the remaining buffer */\n\t\t\t\tab = this.reduceBuffer(ab, offset, newLength);\n\t\t\t} else {\n\t\t\t\t/* the content of the new buffer is entirely contained in the existing buffer, drop it entirely */\n\t\t\t\tto_add = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t/* if the buffer has not been added, we can add it at the end */\n\tif (to_add) {\n\t\tLog.debug(\"MultiBufferStream\", \"Appending new buffer (fileStart: \"+ab.fileStart+\" - Length: \"+ab.byteLength+\")\");\n\t\tthis.buffers.push(ab);\n\t\t/* if this new buffer is inserted in the first place in the list of the buffer, \n\t\t   and the DataStream is initialized, make it the buffer used for parsing */\n\t\tif (i === 0) {\n\t\t\tthis.buffer = ab;\n\t\t}\n\t}\n}\n\n/**\n * Displays the status of the buffers (number and used bytes)\n * @param  {Object} info callback method for display\n */\nMultiBufferStream.prototype.logBufferLevel = function(info) {\n\tvar i;\n\tvar buffer;\n\tvar used, total;\n\tvar ranges = [];\n\tvar range;\n\tvar bufferedString = \"\";\n\tused = 0;\n\ttotal = 0;\n\tfor (i = 0; i < this.buffers.length; i++) {\n\t\tbuffer = this.buffers[i];\n\t\tif (i === 0) {\n\t\t\trange = {};\n\t\t\tranges.push(range);\n\t\t\trange.start = buffer.fileStart;\n\t\t\trange.end = buffer.fileStart+buffer.byteLength;\n\t\t\tbufferedString += \"[\"+range.start+\"-\";\n\t\t} else if (range.end === buffer.fileStart) {\n\t\t\trange.end = buffer.fileStart+buffer.byteLength;\n\t\t} else {\n\t\t\trange = {};\n\t\t\trange.start = buffer.fileStart;\n\t\t\tbufferedString += (ranges[ranges.length-1].end-1)+\"], [\"+range.start+\"-\";\n\t\t\trange.end = buffer.fileStart+buffer.byteLength;\n\t\t\tranges.push(range);\n\t\t}\n\t\tused += buffer.usedBytes;\n\t\ttotal += buffer.byteLength;\n\t}\n\tif (ranges.length > 0) {\n\t\tbufferedString += (range.end-1)+\"]\";\n\t}\n\tvar log = (info ? Log.info : Log.debug)\n\tif (this.buffers.length === 0) {\n\t\tlog(\"MultiBufferStream\", \"No more buffer in memory\");\n\t} else {\n\t\tlog(\"MultiBufferStream\", \"\"+this.buffers.length+\" stored buffer(s) (\"+used+\"/\"+total+\" bytes), continuous ranges: \"+bufferedString);\n\t}\n}\n\nMultiBufferStream.prototype.cleanBuffers = function () {\n\tvar i;\n\tvar buffer;\n\tfor (i = 0; i < this.buffers.length; i++) {\n\t\tbuffer = this.buffers[i];\n\t\tif (buffer.usedBytes === buffer.byteLength) {\n\t\t\tLog.debug(\"MultiBufferStream\", \"Removing buffer #\"+i);\n\t\t\tthis.buffers.splice(i, 1);\n\t\t\ti--;\n\t\t}\n\t}\n}\n\nMultiBufferStream.prototype.mergeNextBuffer = function() {\n\tvar next_buffer;\n\tif (this.bufferIndex+1 < this.buffers.length) {\n\t\tnext_buffer = this.buffers[this.bufferIndex+1];\n\t\tif (next_buffer.fileStart === this.buffer.fileStart + this.buffer.byteLength) {\n\t\t\tvar oldLength = this.buffer.byteLength;\n\t\t\tvar oldUsedBytes = this.buffer.usedBytes;\n\t\t\tvar oldFileStart = this.buffer.fileStart;\n\t\t\tthis.buffers[this.bufferIndex] = ArrayBuffer.concat(this.buffer, next_buffer);\n\t\t\tthis.buffer = this.buffers[this.bufferIndex];\n\t\t\tthis.buffers.splice(this.bufferIndex+1, 1);\n\t\t\tthis.buffer.usedBytes = oldUsedBytes; /* TODO: should it be += ? */\n\t\t\tthis.buffer.fileStart = oldFileStart;\n\t\t\tLog.debug(\"ISOFile\", \"Concatenating buffer for box parsing (length: \"+oldLength+\"->\"+this.buffer.byteLength+\")\");\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\treturn false;\n\t}\n}\n\n\n/*************************************************************************\n  Seek-related functions\n *************************************************************************/\n\n/**\n * Finds the buffer that holds the given file position\n * @param  {Boolean} fromStart    indicates if the search should start from the current buffer (false) \n *                                or from the first buffer (true)\n * @param  {Number}  filePosition position in the file to seek to\n * @param  {Boolean} markAsUsed   indicates if the bytes in between the current position and the seek position \n *                                should be marked as used for garbage collection\n * @return {Number}               the index of the buffer holding the seeked file position, -1 if not found.\n */\nMultiBufferStream.prototype.findPosition = function(fromStart, filePosition, markAsUsed) {\n\tvar i;\n\tvar abuffer = null;\n\tvar index = -1;\n\n\t/* find the buffer with the largest position smaller than the given position */\n\tif (fromStart === true) {\n\t   /* the reposition can be in the past, we need to check from the beginning of the list of buffers */\n\t\ti = 0;\n\t} else {\n\t\ti = this.bufferIndex;\n\t}\n\n\twhile (i < this.buffers.length) {\n\t\tabuffer = this.buffers[i];\n\t\tif (abuffer.fileStart <= filePosition) {\n\t\t\tindex = i;\n\t\t\tif (markAsUsed) {\n\t\t\t\tif (abuffer.fileStart + abuffer.byteLength <= filePosition) {\n\t\t\t\t\tabuffer.usedBytes = abuffer.byteLength;\t\n\t\t\t\t} else {\n\t\t\t\t\tabuffer.usedBytes = filePosition - abuffer.fileStart;\n\t\t\t\t}\t\t\n\t\t\t\tthis.logBufferLevel();\t\n\t\t\t}\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t\ti++;\n\t}\n\n\tif (index !== -1) {\n\t\tabuffer = this.buffers[index];\n\t\tif (abuffer.fileStart + abuffer.byteLength >= filePosition) {\t\t\t\n\t\t\tLog.debug(\"MultiBufferStream\", \"Found position in existing buffer #\"+index);\n\t\t\treturn index;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t} else {\n\t\treturn -1;\n\t}\n}\n\n/**\n * Finds the largest file position contained in a buffer or in the next buffers if they are contiguous (no gap)\n * starting from the given buffer index or from the current buffer if the index is not given\n *\n * @param  {Number} inputindex Index of the buffer to start from\n * @return {Number}            The largest file position found in the buffers\n */\nMultiBufferStream.prototype.findEndContiguousBuf = function(inputindex) {\n\tvar i;\n\tvar currentBuf;\n\tvar nextBuf;\n\tvar index = (inputindex !== undefined ? inputindex : this.bufferIndex);\n\tcurrentBuf = this.buffers[index];\n\t/* find the end of the contiguous range of data */\n\tif (this.buffers.length > index+1) {\n\t\tfor (i = index+1; i < this.buffers.length; i++) {\n\t\t\tnextBuf = this.buffers[i];\n\t\t\tif (nextBuf.fileStart === currentBuf.fileStart + currentBuf.byteLength) {\n\t\t\t\tcurrentBuf = nextBuf;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t/* return the position of last byte in the file that we have */\n\treturn currentBuf.fileStart + currentBuf.byteLength;\n}\n\n/**\n * Returns the largest file position contained in the buffers, larger than the given position\n * @param  {Number} pos the file position to start from\n * @return {Number}     the largest position in the current buffer or in the buffer and the next contiguous \n *                      buffer that holds the given position\n */\nMultiBufferStream.prototype.getEndFilePositionAfter = function(pos) {\n\tvar index = this.findPosition(true, pos, false);\n\tif (index !== -1) {\n\t\treturn this.findEndContiguousBuf(index);\n\t} else {\n\t\treturn pos;\n\t}\n}\n\n/*************************************************************************\n  Garbage collection related functions\n *************************************************************************/\n\n/**\n * Marks a given number of bytes as used in the current buffer for garbage collection\n * @param {Number} nbBytes \n */\nMultiBufferStream.prototype.addUsedBytes = function(nbBytes) {\n\tthis.buffer.usedBytes += nbBytes;\n\tthis.logBufferLevel();\n}\n\n/**\n * Marks the entire current buffer as used, ready for garbage collection\n */\nMultiBufferStream.prototype.setAllUsedBytes = function() {\n\tthis.buffer.usedBytes = this.buffer.byteLength;\n\tthis.logBufferLevel();\n}\n\n/*************************************************************************\n  Common API between MultiBufferStream and SimpleStream\n *************************************************************************/\n\n/**\n * Tries to seek to a given file position\n * if possible, repositions the parsing from there and returns true \n * if not possible, does not change anything and returns false \n * @param  {Number}  filePosition position in the file to seek to\n * @param  {Boolean} fromStart    indicates if the search should start from the current buffer (false) \n *                                or from the first buffer (true)\n * @param  {Boolean} markAsUsed   indicates if the bytes in between the current position and the seek position \n *                                should be marked as used for garbage collection\n * @return {Boolean}              true if the seek succeeded, false otherwise\n */\nMultiBufferStream.prototype.seek = function(filePosition, fromStart, markAsUsed) {\n\tvar index;\n\tindex = this.findPosition(fromStart, filePosition, markAsUsed);\n\tif (index !== -1) {\n\t\tthis.buffer = this.buffers[index];\n\t\tthis.bufferIndex = index;\n\t\tthis.position = filePosition - this.buffer.fileStart;\n\t\tLog.debug(\"MultiBufferStream\", \"Repositioning parser at buffer position: \"+this.position);\n\t\treturn true;\n\t} else {\n\t\tLog.debug(\"MultiBufferStream\", \"Position \"+filePosition+\" not found in buffered data\");\n\t\treturn false;\n\t}\n}\n\n/**\n * Returns the current position in the file\n * @return {Number} the position in the file\n */\nMultiBufferStream.prototype.getPosition = function() {\n\tif (this.bufferIndex === -1 || this.buffers[this.bufferIndex] === null) {\n\t\tthrow \"Error accessing position in the MultiBufferStream\";\n\t}\n\treturn this.buffers[this.bufferIndex].fileStart+this.position;\n}\n\n/**\n * Returns the length of the current buffer\n * @return {Number} the length of the current buffer\n */\nMultiBufferStream.prototype.getLength = function() {\n\treturn this.byteLength;\n}\n\nMultiBufferStream.prototype.getEndPosition = function() {\n\tif (this.bufferIndex === -1 || this.buffers[this.bufferIndex] === null) {\n\t\tthrow \"Error accessing position in the MultiBufferStream\";\n\t}\n\treturn this.buffers[this.bufferIndex].fileStart+this.byteLength;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.MultiBufferStream = MultiBufferStream;\n}// file:src/descriptor.js\n/*\n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar MPEG4DescriptorParser = function () {\n\tvar ES_DescrTag \t\t\t= 0x03;\n\tvar DecoderConfigDescrTag \t= 0x04;\n\tvar DecSpecificInfoTag \t\t= 0x05;\n\tvar SLConfigDescrTag \t\t= 0x06;\n\n\tvar descTagToName = [];\n\tdescTagToName[ES_DescrTag] \t\t\t\t= \"ES_Descriptor\";\n\tdescTagToName[DecoderConfigDescrTag] \t= \"DecoderConfigDescriptor\";\n\tdescTagToName[DecSpecificInfoTag] \t\t= \"DecoderSpecificInfo\";\n\tdescTagToName[SLConfigDescrTag] \t\t= \"SLConfigDescriptor\";\n\n\tthis.getDescriptorName = function(tag) {\n\t\treturn descTagToName[tag];\n\t}\n\n\tvar that = this;\n\tvar classes = {};\n\n\tthis.parseOneDescriptor = function (stream) {\n\t\tvar hdrSize = 0;\n\t\tvar size = 0;\n\t\tvar tag;\n\t\tvar desc;\n\t\tvar byteRead;\n\t\ttag = stream.readUint8();\n\t\thdrSize++;\n\t\tbyteRead = stream.readUint8();\n\t\thdrSize++;\n\t\twhile (byteRead & 0x80) {\n\t\t\tsize = (size << 7) + (byteRead & 0x7F);\n\t\t\tbyteRead = stream.readUint8();\n\t\t\thdrSize++;\n\t\t}\n\t\tsize = (size << 7) + (byteRead & 0x7F);\n\t\tLog.debug(\"MPEG4DescriptorParser\", \"Found \"+(descTagToName[tag] || \"Descriptor \"+tag)+\", size \"+size+\" at position \"+stream.getPosition());\n\t\tif (descTagToName[tag]) {\n\t\t\tdesc = new classes[descTagToName[tag]](size);\n\t\t} else {\n\t\t\tdesc = new classes.Descriptor(size);\n\t\t}\n\t\tdesc.parse(stream);\n\t\treturn desc;\n\t}\n\n\tclasses.Descriptor = function(_tag, _size) {\n\t\tthis.tag = _tag;\n\t\tthis.size = _size;\n\t\tthis.descs = [];\n\t}\n\n\tclasses.Descriptor.prototype.parse = function (stream) {\n\t\tthis.data = stream.readUint8Array(this.size);\n\t}\n\n\tclasses.Descriptor.prototype.findDescriptor = function (tag) {\n\t\tfor (var i = 0; i < this.descs.length; i++) {\n\t\t\tif (this.descs[i].tag == tag) {\n\t\t\t\treturn this.descs[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tclasses.Descriptor.prototype.parseRemainingDescriptors = function (stream) {\n\t\tvar start = stream.position;\n\t\twhile (stream.position < start+this.size) {\n\t\t\tvar desc = that.parseOneDescriptor(stream);\n\t\t\tthis.descs.push(desc);\n\t\t}\n\t}\n\n\tclasses.ES_Descriptor = function (size) {\n\t\tclasses.Descriptor.call(this, ES_DescrTag, size);\n\t}\n\n\tclasses.ES_Descriptor.prototype = new classes.Descriptor();\n\n\tclasses.ES_Descriptor.prototype.parse = function(stream) {\n\t\tthis.ES_ID = stream.readUint16();\n\t\tthis.flags = stream.readUint8();\n\t\tthis.size -= 3;\n\t\tif (this.flags & 0x80) {\n\t\t\tthis.dependsOn_ES_ID = stream.readUint16();\n\t\t\tthis.size -= 2;\n\t\t} else {\n\t\t\tthis.dependsOn_ES_ID = 0;\n\t\t}\n\t\tif (this.flags & 0x40) {\n\t\t\tvar l = stream.readUint8();\n\t\t\tthis.URL = stream.readString(l);\n\t\t\tthis.size -= l+1;\n\t\t} else {\n\t\t\tthis.URL = \"\";\n\t\t}\n\t\tif (this.flags & 0x20) {\n\t\t\tthis.OCR_ES_ID = stream.readUint16();\n\t\t\tthis.size -= 2;\n\t\t} else {\n\t\t\tthis.OCR_ES_ID = 0;\n\t\t}\n\t\tthis.parseRemainingDescriptors(stream);\n\t}\n\n\tclasses.ES_Descriptor.prototype.getOTI = function(stream) {\n\t\tvar dcd = this.findDescriptor(DecoderConfigDescrTag);\n\t\tif (dcd) {\n\t\t\treturn dcd.oti;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tclasses.ES_Descriptor.prototype.getAudioConfig = function(stream) {\n\t\tvar dcd = this.findDescriptor(DecoderConfigDescrTag);\n\t\tif (!dcd) return null;\n\t\tvar dsi = dcd.findDescriptor(DecSpecificInfoTag);\n\t\tif (dsi && dsi.data) {\n\t\t\tvar audioObjectType = (dsi.data[0]& 0xF8) >> 3;\n\t\t\tif (audioObjectType === 31 && dsi.data.length >= 2) {\n\t\t\t\taudioObjectType = 32 + ((dsi.data[0] & 0x7) << 3) + ((dsi.data[1] & 0xE0) >> 5);\n\t\t\t}\n\t\t\treturn audioObjectType;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tclasses.DecoderConfigDescriptor = function (size) {\n\t\tclasses.Descriptor.call(this, DecoderConfigDescrTag, size);\n\t}\n\tclasses.DecoderConfigDescriptor.prototype = new classes.Descriptor();\n\n\tclasses.DecoderConfigDescriptor.prototype.parse = function(stream) {\n\t\tthis.oti = stream.readUint8();\n\t\tthis.streamType = stream.readUint8();\n\t\tthis.upStream = ((this.streamType >> 1) & 1) !== 0;\n\t\tthis.streamType = this.streamType >>> 2;\n\t\tthis.bufferSize = stream.readUint24();\n\t\tthis.maxBitrate = stream.readUint32();\n\t\tthis.avgBitrate = stream.readUint32();\n\t\tthis.size -= 13;\n\t\tthis.parseRemainingDescriptors(stream);\n\t}\n\n\tclasses.DecoderSpecificInfo = function (size) {\n\t\tclasses.Descriptor.call(this, DecSpecificInfoTag, size);\n\t}\n\tclasses.DecoderSpecificInfo.prototype = new classes.Descriptor();\n\n\tclasses.SLConfigDescriptor = function (size) {\n\t\tclasses.Descriptor.call(this, SLConfigDescrTag, size);\n\t}\n\tclasses.SLConfigDescriptor.prototype = new classes.Descriptor();\n\n\treturn this;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.MPEG4DescriptorParser = MPEG4DescriptorParser;\n}\n// file:src/box.js\n/*\n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar BoxParser = {\n\tERR_INVALID_DATA : -1,\n\tERR_NOT_ENOUGH_DATA : 0,\n\tOK : 1,\n\n\t// Boxes to be created with default parsing\n\tBASIC_BOXES: [\n\t\t{type: \"mdat\", name: \"MediaDataBox\"},\n\t\t{type: \"idat\", name: \"ItemDataBox\"},\n\t\t{type: \"free\", name: \"FreeSpaceBox\"},\n\t\t{type: \"skip\", name: \"FreeSpaceBox\"},\n\t\t{type: \"meco\", name: \"AdditionalMetadataContainerBox\"},\n\t\t{type: \"strk\", name: \"SubTrackBox\"}\n\t],\n\tFULL_BOXES: [\n\t\t{type: \"hmhd\", name: \"HintMediaHeaderBox\"},\n\t\t{type: \"nmhd\", name: \"NullMediaHeaderBox\"},\n\t\t{type: \"iods\", name: \"ObjectDescriptorBox\"},\n\t\t{type: \"xml \", name: \"XMLBox\"},\n\t\t{type: \"bxml\", name: \"BinaryXMLBox\"},\n\t\t{type: \"ipro\", name: \"ItemProtectionBox\"},\n\t\t{type: \"mere\", name: \"MetaboxRelationBox\"}\n\t],\n\tCONTAINER_BOXES: [\n\t\t[{type: \"moov\", name: \"CompressedMovieBox\"}, [\"trak\", \"pssh\"]],\n\t\t[{type: \"trak\", name: \"TrackBox\"}],\n\t\t[{type: \"edts\", name: \"EditBox\"}],\n\t\t[{type: \"mdia\", name: \"MediaBox\"}],\n\t\t[{type: \"minf\", name: \"MediaInformationBox\"}],\n\t\t[{type: \"dinf\", name: \"DataInformationBox\"}],\n\t\t[{type: \"stbl\", name: \"SampleTableBox\"}, [\"sgpd\", \"sbgp\"]],\n\t\t[{type: \"mvex\", name: \"MovieExtendsBox\"}, [\"trex\"]],\n\t\t[{type: \"moof\", name: \"CompressedMovieFragmentBox\"}, [\"traf\"]],\n\t\t[{type: \"traf\", name: \"TrackFragmentBox\"}, [\"trun\", \"sgpd\", \"sbgp\"]],\n\t\t[{type: \"vttc\", name: \"VTTCueBox\"}],\n\t\t[{type: \"tref\", name: \"TrackReferenceBox\"}],\n\t\t[{type: \"iref\", name: \"ItemReferenceBox\"}],\n\t\t[{type: \"mfra\", name: \"MovieFragmentRandomAccessBox\"}, [\"tfra\"]],\n\t\t[{type: \"meco\", name: \"AdditionalMetadataContainerBox\"}],\n\t\t[{type: \"hnti\", name: \"trackhintinformation\"}],\n\t\t[{type: \"hinf\", name: \"hintstatisticsbox\"}],\n\t\t[{type: \"strk\", name: \"SubTrackBox\"}],\n\t\t[{type: \"strd\", name: \"SubTrackDefinitionBox\"}],\n\t\t[{type: \"sinf\", name: \"ProtectionSchemeInfoBox\"}],\n\t\t[{type: \"rinf\", name: \"RestrictedSchemeInfoBox\"}],\n\t\t[{type: \"schi\", name: \"SchemeInformationBox\"}],\n\t\t[{type: \"trgr\", name: \"TrackGroupBox\"}],\n\t\t[{type: \"udta\", name: \"UserDataBox\"}, [\"kind\"]],\n\t\t[{type: \"iprp\", name: \"ItemPropertiesBox\"}, [\"ipma\"]],\n\t\t[{type: \"ipco\", name: \"ItemPropertyContainerBox\"}],\n\t\t[{type: \"grpl\", name: \"GroupsListBox\"}],\n\t\t[{type: \"j2kH\", name: \"J2KHeaderInfoBox\"}],\n\t\t[{type: \"etyp\", name: \"ExtendedTypeBox\"}, [\"tyco\"]]\n\t],\n\t// Boxes effectively created\n\tboxCodes : [],\n\tfullBoxCodes : [],\n\tcontainerBoxCodes : [],\n\tsampleEntryCodes : {},\n\tsampleGroupEntryCodes: [],\n\ttrackGroupTypes: [],\n\tUUIDBoxes: {},\n\tUUIDs: [],\n\tinitialize: function() {\n\t\tBoxParser.FullBox.prototype = new BoxParser.Box();\n\t\tBoxParser.ContainerBox.prototype = new BoxParser.Box();\n\t\tBoxParser.SampleEntry.prototype = new BoxParser.Box();\n\t\tBoxParser.TrackGroupTypeBox.prototype = new BoxParser.FullBox();\n\n\t\t/* creating constructors for simple boxes */\n\t\tBoxParser.BASIC_BOXES.forEach(function(box) {\n\t\t\tBoxParser.createBoxCtor(box.type, box.name)\n\t\t});\n\t\tBoxParser.FULL_BOXES.forEach(function(box) {\n\t\t\tBoxParser.createFullBoxCtor(box.type, box.name);\n\t\t});\n\t\tBoxParser.CONTAINER_BOXES.forEach(function(boxes) {\n\t\t\tBoxParser.createContainerBoxCtor(boxes[0].type, boxes[0].name, null, boxes[1]);\n\t\t});\n\t},\n\tBox: function(_type, _size, _name, _uuid) {\n\t\tthis.type = _type;\n\t\tthis.box_name = _name;\n\t\tthis.size = _size;\n\t\tthis.uuid = _uuid;\n\t},\n\tFullBox: function(type, size, name, uuid) {\n\t\tBoxParser.Box.call(this, type, size, name, uuid);\n\t\tthis.flags = 0;\n\t\tthis.version = 0;\n\t},\n\tContainerBox: function(type, size, name, uuid) {\n\t\tBoxParser.Box.call(this, type, size, name, uuid);\n\t\tthis.boxes = [];\n\t},\n\tSampleEntry: function(type, size, hdr_size, start) {\n\t\tBoxParser.ContainerBox.call(this, type, size);\n\t\tthis.hdr_size = hdr_size;\n\t\tthis.start = start;\n\t},\n\tSampleGroupEntry: function(type) {\n\t\tthis.grouping_type = type;\n\t},\n\tTrackGroupTypeBox: function(type, size) {\n\t\tBoxParser.FullBox.call(this, type, size);\n\t},\n\tcreateBoxCtor: function(type, name, parseMethod){\n\t\tBoxParser.boxCodes.push(type);\n\t\tBoxParser[type+\"Box\"] = function(size) {\n\t\t\tBoxParser.Box.call(this, type, size, name);\n\t\t}\n\t\tBoxParser[type+\"Box\"].prototype = new BoxParser.Box();\n\t\tif (parseMethod) BoxParser[type+\"Box\"].prototype.parse = parseMethod;\n\t},\n\tcreateFullBoxCtor: function(type, name, parseMethod) {\n\t\t//BoxParser.fullBoxCodes.push(type);\n\t\tBoxParser[type+\"Box\"] = function(size) {\n\t\t\tBoxParser.FullBox.call(this, type, size, name);\n\t\t}\n\t\tBoxParser[type+\"Box\"].prototype = new BoxParser.FullBox();\n\t\tBoxParser[type+\"Box\"].prototype.parse = function(stream) {\n\t\t\tthis.parseFullHeader(stream);\n\t\t\tif (parseMethod) {\n\t\t\t\tparseMethod.call(this, stream);\n\t\t\t}\n\t\t};\n\t},\n\taddSubBoxArrays: function(subBoxNames) {\n\t\tif (subBoxNames) {\n\t\t\tthis.subBoxNames = subBoxNames;\n\t\t\tvar nbSubBoxes = subBoxNames.length;\n\t\t\tfor (var k = 0; k<nbSubBoxes; k++) {\n\t\t\t\tthis[subBoxNames[k]+\"s\"] = [];\n\t\t\t}\n\t\t}\n\t},\n\tcreateContainerBoxCtor: function(type, name, parseMethod, subBoxNames) {\n\t\t//BoxParser.containerBoxCodes.push(type);\n\t\tBoxParser[type+\"Box\"] = function(size) {\n\t\t\tBoxParser.ContainerBox.call(this, type, size, name);\n\t\t\tBoxParser.addSubBoxArrays.call(this, subBoxNames);\n\t\t}\n\t\tBoxParser[type+\"Box\"].prototype = new BoxParser.ContainerBox();\n\t\tif (parseMethod) BoxParser[type+\"Box\"].prototype.parse = parseMethod;\n\t},\n\tcreateMediaSampleEntryCtor: function(mediaType, parseMethod, subBoxNames) {\n\t\tBoxParser.sampleEntryCodes[mediaType] = [];\n\t\tBoxParser[mediaType+\"SampleEntry\"] = function(type, size) {\n\t\t\tBoxParser.SampleEntry.call(this, type, size);\n\t\t\tBoxParser.addSubBoxArrays.call(this, subBoxNames);\n\t\t};\n\t\tBoxParser[mediaType+\"SampleEntry\"].prototype = new BoxParser.SampleEntry();\n\t\tif (parseMethod) BoxParser[mediaType+\"SampleEntry\"].prototype .parse = parseMethod;\n\t},\n\tcreateSampleEntryCtor: function(mediaType, type, parseMethod, subBoxNames) {\n\t\tBoxParser.sampleEntryCodes[mediaType].push(type);\n\t\tBoxParser[type+\"SampleEntry\"] = function(size) {\n\t\t\tBoxParser[mediaType+\"SampleEntry\"].call(this, type, size);\n\t\t\tBoxParser.addSubBoxArrays.call(this, subBoxNames);\n\t\t};\n\t\tBoxParser[type+\"SampleEntry\"].prototype = new BoxParser[mediaType+\"SampleEntry\"]();\n\t\tif (parseMethod) BoxParser[type+\"SampleEntry\"].prototype.parse = parseMethod;\n\t},\n\tcreateEncryptedSampleEntryCtor: function(mediaType, type, parseMethod) {\n\t\tBoxParser.createSampleEntryCtor.call(this, mediaType, type, parseMethod, [\"sinf\"]);\n\t},\n\tcreateSampleGroupCtor: function(type, parseMethod) {\n\t\t//BoxParser.sampleGroupEntryCodes.push(type);\n\t\tBoxParser[type+\"SampleGroupEntry\"] = function(size) {\n\t\t\tBoxParser.SampleGroupEntry.call(this, type, size);\n\t\t}\n\t\tBoxParser[type+\"SampleGroupEntry\"].prototype = new BoxParser.SampleGroupEntry();\n\t\tif (parseMethod) BoxParser[type+\"SampleGroupEntry\"].prototype.parse = parseMethod;\n\t},\n\tcreateTrackGroupCtor: function(type, parseMethod) {\n\t\t//BoxParser.trackGroupTypes.push(type);\n\t\tBoxParser[type+\"TrackGroupTypeBox\"] = function(size) {\n\t\t\tBoxParser.TrackGroupTypeBox.call(this, type, size);\n\t\t}\n\t\tBoxParser[type+\"TrackGroupTypeBox\"].prototype = new BoxParser.TrackGroupTypeBox();\n\t\tif (parseMethod) BoxParser[type+\"TrackGroupTypeBox\"].prototype.parse = parseMethod;\n\t},\n\tcreateUUIDBox: function(uuid, name, isFullBox, isContainerBox, parseMethod) {\n\t\tBoxParser.UUIDs.push(uuid);\n\t\tBoxParser.UUIDBoxes[uuid] = function(size) {\n\t\t\tif (isFullBox) {\n\t\t\t\tBoxParser.FullBox.call(this, \"uuid\", size, name, uuid);\n\t\t\t} else {\n\t\t\t\tif (isContainerBox) {\n\t\t\t\t\tBoxParser.ContainerBox.call(this, \"uuid\", size, name, uuid);\n\t\t\t\t} else {\n\t\t\t\t\tBoxParser.Box.call(this, \"uuid\", size, name, uuid);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tBoxParser.UUIDBoxes[uuid].prototype = (isFullBox ? new BoxParser.FullBox() : (isContainerBox ? new BoxParser.ContainerBox() : new BoxParser.Box()));\n\t\tif (parseMethod) {\n\t\t\tif (isFullBox) {\n\t\t\t\tBoxParser.UUIDBoxes[uuid].prototype.parse = function(stream) {\n\t\t\t\t\tthis.parseFullHeader(stream);\n\t\t\t\t\tif (parseMethod) {\n\t\t\t\t\t\tparseMethod.call(this, stream);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tBoxParser.UUIDBoxes[uuid].prototype.parse = parseMethod;\n\t\t\t}\n\t\t}\n\t}\n}\n\nBoxParser.initialize();\n\nBoxParser.TKHD_FLAG_ENABLED    = 0x000001;\nBoxParser.TKHD_FLAG_IN_MOVIE   = 0x000002;\nBoxParser.TKHD_FLAG_IN_PREVIEW = 0x000004;\n\nBoxParser.TFHD_FLAG_BASE_DATA_OFFSET\t= 0x01;\nBoxParser.TFHD_FLAG_SAMPLE_DESC\t\t\t= 0x02;\nBoxParser.TFHD_FLAG_SAMPLE_DUR\t\t\t= 0x08;\nBoxParser.TFHD_FLAG_SAMPLE_SIZE\t\t\t= 0x10;\nBoxParser.TFHD_FLAG_SAMPLE_FLAGS\t\t= 0x20;\nBoxParser.TFHD_FLAG_DUR_EMPTY\t\t\t= 0x10000;\nBoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF= 0x20000;\n\nBoxParser.TRUN_FLAGS_DATA_OFFSET= 0x01;\nBoxParser.TRUN_FLAGS_FIRST_FLAG\t= 0x04;\nBoxParser.TRUN_FLAGS_DURATION\t= 0x100;\nBoxParser.TRUN_FLAGS_SIZE\t\t= 0x200;\nBoxParser.TRUN_FLAGS_FLAGS\t\t= 0x400;\nBoxParser.TRUN_FLAGS_CTS_OFFSET\t= 0x800;\n\nBoxParser.Box.prototype.add = function(name) {\n\treturn this.addBox(new BoxParser[name+\"Box\"]());\n}\n\nBoxParser.Box.prototype.addBox = function(box) {\n\tthis.boxes.push(box);\n\tif (this[box.type+\"s\"]) {\n\t\tthis[box.type+\"s\"].push(box);\n\t} else {\n\t\tthis[box.type] = box;\n\t}\n\treturn box;\n}\n\nBoxParser.Box.prototype.set = function(prop, value) {\n\tthis[prop] = value;\n\treturn this;\n}\n\nBoxParser.Box.prototype.addEntry = function(value, _prop) {\n\tvar prop = _prop || \"entries\";\n\tif (!this[prop]) {\n\t\tthis[prop] = [];\n\t}\n\tthis[prop].push(value);\n\treturn this;\n}\n\nif (typeof exports !== \"undefined\") {\n\texports.BoxParser = BoxParser;\n}\n// file:src/box-parse.js\n/* \n * Copyright (c) Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nBoxParser.parseUUID = function(stream) {\n\treturn BoxParser.parseHex16(stream);\n}\n\nBoxParser.parseHex16 = function(stream) {\n\tvar hex16 = \"\"\n\tfor (var i = 0; i <16; i++) {\n\t\tvar hex = stream.readUint8().toString(16);\n\t\thex16 += (hex.length === 1 ? \"0\"+hex : hex);\n\t}\n\treturn hex16;\n}\n\nBoxParser.parseOneBox = function(stream, headerOnly, parentSize) {\n\tvar box;\n\tvar start = stream.getPosition();\n\tvar hdr_size = 0;\n\tvar diff;\n\tvar uuid;\n\tif (stream.getEndPosition() - start < 8) {\n\t\tLog.debug(\"BoxParser\", \"Not enough data in stream to parse the type and size of the box\");\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA };\n\t}\n\tif (parentSize && parentSize < 8) {\n\t\tLog.debug(\"BoxParser\", \"Not enough bytes left in the parent box to parse a new box\");\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA };\n\t}\n\tvar size = stream.readUint32();\n\tvar type = stream.readString(4);\n\tvar box_type = type;\n\tLog.debug(\"BoxParser\", \"Found box of type '\"+type+\"' and size \"+size+\" at position \"+start);\n\thdr_size = 8;\n\tif (type == \"uuid\") {\n\t\tif ((stream.getEndPosition() - stream.getPosition() < 16) || (parentSize -hdr_size < 16)) {\n\t\t\tstream.seek(start);\n\t\t\tLog.debug(\"BoxParser\", \"Not enough bytes left in the parent box to parse a UUID box\");\n\t\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA };\n\t\t}\n\t\tuuid = BoxParser.parseUUID(stream);\n\t\thdr_size += 16;\n\t\tbox_type = uuid;\n\t}\n\tif (size == 1) {\n\t\tif ((stream.getEndPosition() - stream.getPosition() < 8) || (parentSize && (parentSize - hdr_size) < 8)) {\n\t\t\tstream.seek(start);\n\t\t\tLog.warn(\"BoxParser\", \"Not enough data in stream to parse the extended size of the \\\"\"+type+\"\\\" box\");\n\t\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA };\n\t\t}\n\t\tsize = stream.readUint64();\n\t\thdr_size += 8;\n\t} else if (size === 0) {\n\t\t/* box extends till the end of file or invalid file */\n\t\tif (parentSize) {\n\t\t\tsize = parentSize;\n\t\t} else {\n\t\t\t/* box extends till the end of file */\n\t\t\tif (type !== \"mdat\") {\n\t\t\t\tLog.error(\"BoxParser\", \"Unlimited box size not supported for type: '\"+type+\"'\");\n\t\t\t\tbox = new BoxParser.Box(type, size);\n\t\t\t\treturn { code: BoxParser.OK, box: box, size: box.size };\n\t\t\t}\n\t\t}\n\t}\n\tif (size !== 0 && size < hdr_size) {\n\t\tLog.error(\"BoxParser\", \"Box of type \"+type+\" has an invalid size \"+size+\" (too small to be a box)\");\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA, type: type, size: size, hdr_size: hdr_size, start: start };\n\t}\n\tif (size !== 0 && parentSize && size > parentSize) {\n\t\tLog.error(\"BoxParser\", \"Box of type '\"+type+\"' has a size \"+size+\" greater than its container size \"+parentSize);\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA, type: type, size: size, hdr_size: hdr_size, start: start };\n\t}\n\tif (size !== 0 && start + size > stream.getEndPosition()) {\n\t\tstream.seek(start);\n\t\tLog.info(\"BoxParser\", \"Not enough data in stream to parse the entire '\"+type+\"' box\");\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA, type: type, size: size, hdr_size: hdr_size, start: start };\n\t}\n\tif (headerOnly) {\n\t\treturn { code: BoxParser.OK, type: type, size: size, hdr_size: hdr_size, start: start };\n\t} else {\n\t\tif (BoxParser[type+\"Box\"]) {\n\t\t\tbox = new BoxParser[type+\"Box\"](size);\n\t\t} else {\n\t\t\tif (type !== \"uuid\") {\n\t\t\t\tLog.warn(\"BoxParser\", \"Unknown box type: '\"+type+\"'\");\n\t\t\t\tbox = new BoxParser.Box(type, size);\n\t\t\t\tbox.has_unparsed_data = true;\n\t\t\t} else {\n\t\t\t\tif (BoxParser.UUIDBoxes[uuid]) {\n\t\t\t\t\tbox = new BoxParser.UUIDBoxes[uuid](size);\n\t\t\t\t} else {\n\t\t\t\t\tLog.warn(\"BoxParser\", \"Unknown uuid type: '\"+uuid+\"'\");\n\t\t\t\t\tbox = new BoxParser.Box(type, size);\n\t\t\t\t\tbox.uuid = uuid;\n\t\t\t\t\tbox.has_unparsed_data = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tbox.hdr_size = hdr_size;\n\t/* recording the position of the box in the input stream */\n\tbox.start = start;\n\tif (box.write === BoxParser.Box.prototype.write && box.type !== \"mdat\") {\n\t\tLog.info(\"BoxParser\", \"'\"+box_type+\"' box writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\tbox.parseDataAndRewind(stream);\n\t}\n\tbox.parse(stream);\n\tdiff = stream.getPosition() - (box.start+box.size);\n\tif (diff < 0) {\n\t\tLog.warn(\"BoxParser\", \"Parsing of box '\"+box_type+\"' did not read the entire indicated box data size (missing \"+(-diff)+\" bytes), seeking forward\");\n\t\tstream.seek(box.start+box.size);\n\t} else if (diff > 0) {\n\t\tLog.error(\"BoxParser\", \"Parsing of box '\"+box_type+\"' read \"+diff+\" more bytes than the indicated box data size, seeking backwards\");\n\t\tif (box.size !== 0) stream.seek(box.start+box.size);\n\t}\n\treturn { code: BoxParser.OK, box: box, size: box.size };\n}\n\nBoxParser.Box.prototype.parse = function(stream) {\n\tif (this.type != \"mdat\") {\n\t\tthis.data = stream.readUint8Array(this.size-this.hdr_size);\n\t} else {\n\t\tif (this.size === 0) {\n\t\t\tstream.seek(stream.getEndPosition());\n\t\t} else {\n\t\t\tstream.seek(this.start+this.size);\n\t\t}\n\t}\n}\n\n/* Used to parse a box without consuming its data, to allow detailled parsing\n   Useful for boxes for which a write method is not yet implemented */\nBoxParser.Box.prototype.parseDataAndRewind = function(stream) {\n\tthis.data = stream.readUint8Array(this.size-this.hdr_size);\n\t// rewinding\n\tstream.position -= this.size-this.hdr_size;\n}\n\nBoxParser.FullBox.prototype.parseDataAndRewind = function(stream) {\n\tthis.parseFullHeader(stream);\n\tthis.data = stream.readUint8Array(this.size-this.hdr_size);\n\t// restore the header size as if the full header had not been parsed\n\tthis.hdr_size -= 4;\n\t// rewinding\n\tstream.position -= this.size-this.hdr_size;\n}\n\nBoxParser.FullBox.prototype.parseFullHeader = function (stream) {\n\tthis.version = stream.readUint8();\n\tthis.flags = stream.readUint24();\n\tthis.hdr_size += 4;\n}\n\nBoxParser.FullBox.prototype.parse = function (stream) {\n\tthis.parseFullHeader(stream);\n\tthis.data = stream.readUint8Array(this.size-this.hdr_size);\n}\n\nBoxParser.ContainerBox.prototype.parse = function(stream) {\n\tvar ret;\n\tvar box;\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = ret.box;\n\t\t\t/* store the box in the 'boxes' array to preserve box order (for offset) but also store box in a property for more direct access */\n\t\t\tthis.boxes.push(box);\n\t\t\tif (this.subBoxNames && this.subBoxNames.indexOf(box.type) != -1) {\n\t\t\t\tthis[this.subBoxNames[this.subBoxNames.indexOf(box.type)]+\"s\"].push(box);\n\t\t\t} else {\n\t\t\t\tvar box_type = box.type !== \"uuid\" ? box.type : box.uuid;\n\t\t\t\tif (this[box_type]) {\n\t\t\t\t\tLog.warn(\"Box of type \"+box_type+\" already stored in field of this type\");\n\t\t\t\t} else {\n\t\t\t\t\tthis[box_type] = box;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nBoxParser.Box.prototype.parseLanguage = function(stream) {\n\tthis.language = stream.readUint16();\n\tvar chars = [];\n\tchars[0] = (this.language>>10)&0x1F;\n\tchars[1] = (this.language>>5)&0x1F;\n\tchars[2] = (this.language)&0x1F;\n\tthis.languageString = String.fromCharCode(chars[0]+0x60, chars[1]+0x60, chars[2]+0x60);\n}\n\n// file:src/parsing/sampleentries/sampleentry.js\nBoxParser.SAMPLE_ENTRY_TYPE_VISUAL \t\t= \"Visual\";\nBoxParser.SAMPLE_ENTRY_TYPE_AUDIO \t\t= \"Audio\";\nBoxParser.SAMPLE_ENTRY_TYPE_HINT \t\t= \"Hint\";\nBoxParser.SAMPLE_ENTRY_TYPE_METADATA \t= \"Metadata\";\nBoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE \t= \"Subtitle\";\nBoxParser.SAMPLE_ENTRY_TYPE_SYSTEM \t\t= \"System\";\nBoxParser.SAMPLE_ENTRY_TYPE_TEXT \t\t= \"Text\";\n\nBoxParser.SampleEntry.prototype.parseHeader = function(stream) {\n\tstream.readUint8Array(6);\n\tthis.data_reference_index = stream.readUint16();\n\tthis.hdr_size += 8;\n}\n\nBoxParser.SampleEntry.prototype.parse = function(stream) {\n\tthis.parseHeader(stream);\n\tthis.data = stream.readUint8Array(this.size - this.hdr_size);\n}\n\nBoxParser.SampleEntry.prototype.parseDataAndRewind = function(stream) {\n\tthis.parseHeader(stream);\n\tthis.data = stream.readUint8Array(this.size - this.hdr_size);\n\t// restore the header size as if the sample entry header had not been parsed\n\tthis.hdr_size -= 8;\n\t// rewinding\n\tstream.position -= this.size-this.hdr_size;\n}\n\nBoxParser.SampleEntry.prototype.parseFooter = function(stream) {\n\tBoxParser.ContainerBox.prototype.parse.call(this, stream);\n}\n\n// Base SampleEntry types with default parsing\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_HINT);\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA);\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE);\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SYSTEM);\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_TEXT);\n\n//Base SampleEntry types for Audio and Video with specific parsing\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, function(stream) {\n\tvar compressorname_length;\n\tthis.parseHeader(stream);\n\tstream.readUint16();\n\tstream.readUint16();\n\tstream.readUint32Array(3);\n\tthis.width = stream.readUint16();\n\tthis.height = stream.readUint16();\n\tthis.horizresolution = stream.readUint32();\n\tthis.vertresolution = stream.readUint32();\n\tstream.readUint32();\n\tthis.frame_count = stream.readUint16();\n\tcompressorname_length = Math.min(31, stream.readUint8());\n\tthis.compressorname = stream.readString(compressorname_length);\n\tif (compressorname_length < 31) {\n\t\tstream.readString(31 - compressorname_length);\n\t}\n\tthis.depth = stream.readUint16();\n\tstream.readUint16();\n\tthis.parseFooter(stream);\n});\n\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, function(stream) {\n\tthis.parseHeader(stream);\n\tstream.readUint32Array(2);\n\tthis.channel_count = stream.readUint16();\n\tthis.samplesize = stream.readUint16();\n\tstream.readUint16();\n\tstream.readUint16();\n\tthis.samplerate = (stream.readUint32()/(1<<16));\n\tthis.parseFooter(stream);\n});\n\n// Sample entries inheriting from Audio and Video\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avc1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avc2\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avc3\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avc4\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"av01\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"dav1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"hvc1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"hev1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"hvt1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"lhe1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"dvh1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"dvhe\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vvc1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vvi1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vvs1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vvcN\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vp08\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vp09\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avs3\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"j2ki\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"mjp2\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"mjpg\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL,\t\"uncv\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mp4a\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"ac-3\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"ac-4\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"ec-3\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"Opus\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mha1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mha2\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mhm1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mhm2\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"fLaC\");\n\n// Encrypted sample entries\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \t\"encv\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"enca\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \t\"encu\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SYSTEM, \t\"encs\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_TEXT, \t\t\"enct\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA, \t\"encm\");\n// file:src/parsing/a1lx.js\nBoxParser.createBoxCtor(\"a1lx\", \"AV1LayeredImageIndexingProperty\", function(stream) {\n\tvar large_size = stream.readUint8() & 1;\n\tvar FieldLength = ((large_size & 1) + 1) * 16;\n\tthis.layer_size = [];\n\tfor (var i = 0; i < 3; i++) {\n\t\tif (FieldLength == 16) {\n\t\t\tthis.layer_size[i] = stream.readUint16();\n\t\t} else {\n\t\t\tthis.layer_size[i] = stream.readUint32();\n\t\t}\n\t}\n});// file:src/parsing/a1op.js\nBoxParser.createBoxCtor(\"a1op\", \"OperatingPointSelectorProperty\", function(stream) {\n\tthis.op_index = stream.readUint8();\n});// file:src/parsing/auxC.js\nBoxParser.createFullBoxCtor(\"auxC\", \"AuxiliaryTypeProperty\", function(stream) {\n\tthis.aux_type = stream.readCString();\n\tvar aux_subtype_length = this.size - this.hdr_size - (this.aux_type.length + 1);\n\tthis.aux_subtype = stream.readUint8Array(aux_subtype_length);\n});// file:src/parsing/av1C.js\nBoxParser.createBoxCtor(\"av1C\", \"AV1CodecConfigurationBox\", function(stream) {\n\tvar i;\n\tvar toparse;\n\tvar tmp = stream.readUint8();\n\tif ((tmp >> 7 & 0x1) !== 1) {\n\t\tLog.error(\"av1C marker problem\");\n\t\treturn;\n\t}\n\tthis.version = tmp & 0x7F;\n\tif (this.version !== 1) {\n\t\tLog.error(\"av1C version \"+this.version+\" not supported\");\n\t\treturn;\n\t}\n\ttmp = stream.readUint8();\n\tthis.seq_profile = (tmp >> 5) & 0x7;\n\tthis.seq_level_idx_0 = tmp & 0x1F;\n\ttmp = stream.readUint8();\n\tthis.seq_tier_0 = (tmp >> 7) & 0x1;\n\tthis.high_bitdepth = (tmp >> 6) & 0x1;\n\tthis.twelve_bit = (tmp >> 5) & 0x1;\n\tthis.monochrome = (tmp >> 4) & 0x1;\n\tthis.chroma_subsampling_x = (tmp >> 3) & 0x1;\n\tthis.chroma_subsampling_y = (tmp >> 2) & 0x1;\n\tthis.chroma_sample_position = (tmp & 0x3);\n\ttmp = stream.readUint8();\n\tthis.reserved_1 = (tmp >> 5) & 0x7;\n\tif (this.reserved_1 !== 0) {\n\t\tLog.error(\"av1C reserved_1 parsing problem\");\n\t\treturn;\n\t}\n\tthis.initial_presentation_delay_present = (tmp >> 4) & 0x1;\n\tif (this.initial_presentation_delay_present === 1) {\n\t\tthis.initial_presentation_delay_minus_one = (tmp & 0xF);\n\t} else {\n\t\tthis.reserved_2 = (tmp & 0xF);\n\t\tif (this.reserved_2 !== 0) {\n\t\t\tLog.error(\"av1C reserved_2 parsing problem\");\n\t\t\treturn;\n\t\t}\n\t}\n\n\tvar configOBUs_length = this.size - this.hdr_size - 4;\n\tthis.configOBUs = stream.readUint8Array(configOBUs_length);\n});\n\n// file:src/parsing/avcC.js\nfunction printPS(ps) {\n\tvar str = \"<table class='inner-table'>\";\n\tstr += \"<thead><tr><th>length</th><th>nalu_data</th></tr></thead>\";\n\tstr += \"<tbody>\";\n\n\tfor (var i=0; i < ps.length; i++) {\n\t\tvar nalu = ps[i];\n\t\tstr += \"<tr>\";\n\t\tstr += \"<td>\"+nalu.length+\"</td>\";\n\t\tstr += \"<td>\";\n\t\tstr += nalu.nalu.reduce(function(str, byte) {\n\t\t\treturn str + byte.toString(16).padStart(2, \"0\");\n\t\t}, \"0x\");\n\t\tstr += \"</td></tr>\";\n\t}\n\tstr += \"</tbody></table>\";\n\treturn str;\n}\n\nBoxParser.createBoxCtor(\"avcC\", \"AVCConfigurationBox\", function(stream) {\n\tvar i;\n\tvar toparse;\n\tthis.configurationVersion = stream.readUint8();\n\tthis.AVCProfileIndication = stream.readUint8();\n\tthis.profile_compatibility = stream.readUint8();\n\tthis.AVCLevelIndication = stream.readUint8();\n\tthis.lengthSizeMinusOne = (stream.readUint8() & 0x3);\n\tthis.nb_SPS_nalus = (stream.readUint8() & 0x1F);\n\ttoparse = this.size - this.hdr_size - 6;\n\tthis.SPS = [];\n\tthis.SPS.toString = function () {\n\t\treturn printPS(this);\n\t}\n\tfor (i = 0; i < this.nb_SPS_nalus; i++) {\n\t\tthis.SPS[i] = {};\n\t\tthis.SPS[i].length = stream.readUint16();\n\t\tthis.SPS[i].nalu = stream.readUint8Array(this.SPS[i].length);\n\t\ttoparse -= 2+this.SPS[i].length;\n\t}\n\tthis.nb_PPS_nalus = stream.readUint8();\n\ttoparse--;\n\tthis.PPS = [];\n\tthis.PPS.toString = function () {\n\t\treturn printPS(this);\n\t}\n\tfor (i = 0; i < this.nb_PPS_nalus; i++) {\n\t\tthis.PPS[i] = {};\n\t\tthis.PPS[i].length = stream.readUint16();\n\t\tthis.PPS[i].nalu = stream.readUint8Array(this.PPS[i].length);\n\t\ttoparse -= 2+this.PPS[i].length;\n\t}\n\tif (toparse>0) {\n\t\tthis.ext = stream.readUint8Array(toparse);\n\t}\n});\n\n// file:src/parsing/btrt.js\nBoxParser.createBoxCtor(\"btrt\", \"BitRateBox\", function(stream) {\n\tthis.bufferSizeDB = stream.readUint32();\n\tthis.maxBitrate = stream.readUint32();\n\tthis.avgBitrate = stream.readUint32();\n});\n\n// file:src/parsing/ccst.js\nBoxParser.createFullBoxCtor(\"ccst\", \"CodingConstraintsBox\", function(stream) {\n\tvar flags = stream.readUint8();\n\tthis.all_ref_pics_intra = ((flags & 0x80) == 0x80);\n\tthis.intra_pred_used = ((flags & 0x40) == 0x40);\n\tthis.max_ref_per_pic = ((flags & 0x3f) >> 2);\n\tstream.readUint24();\n});\n\n// file:src/parsing/cdef.js\nBoxParser.createBoxCtor(\"cdef\", \"ComponentDefinitionBox\", function(stream) {\n    var i;\n    this.channel_count = stream.readUint16();\n    this.channel_indexes = [];\n    this.channel_types = [];\n    this.channel_associations = [];\n    for (i = 0; i < this.channel_count; i++) {\n        this.channel_indexes.push(stream.readUint16());\n        this.channel_types.push(stream.readUint16());\n        this.channel_associations.push(stream.readUint16());\n    }\n});\n\n// file:src/parsing/clap.js\nBoxParser.createBoxCtor(\"clap\", \"CleanApertureBox\", function(stream) {\n\tthis.cleanApertureWidthN = stream.readUint32();\n\tthis.cleanApertureWidthD = stream.readUint32();\n\tthis.cleanApertureHeightN = stream.readUint32();\n\tthis.cleanApertureHeightD = stream.readUint32();\n\tthis.horizOffN = stream.readUint32();\n\tthis.horizOffD = stream.readUint32();\n\tthis.vertOffN = stream.readUint32();\n\tthis.vertOffD = stream.readUint32();\n});// file:src/parsing/clli.js\nBoxParser.createBoxCtor(\"clli\", \"ContentLightLevelBox\", function(stream) {\n\tthis.max_content_light_level = stream.readUint16();\n    this.max_pic_average_light_level = stream.readUint16();\n});\n\n// file:src/parsing/cmex.js\nBoxParser.createFullBoxCtor(\"cmex\", \"CameraExtrinsicMatrixProperty\", function(stream) {\n\tif (this.flags & 0x1) {\n\t\tthis.pos_x = stream.readInt32();\n\t}\n\tif (this.flags & 0x2) {\n\t\tthis.pos_y = stream.readInt32();\n\t}\n\tif (this.flags & 0x4) {\n\t\tthis.pos_z = stream.readInt32();\n\t}\n\tif (this.flags & 0x8) {\n\t\tif (this.version == 0) {\n\t\t\tif (this.flags & 0x10) {\n\t\t\t\tthis.quat_x = stream.readInt32();\n\t\t\t\tthis.quat_y = stream.readInt32();\n\t\t\t\tthis.quat_z = stream.readInt32();\n\t\t\t} else {\n\t\t\t\tthis.quat_x = stream.readInt16();\n\t\t\t\tthis.quat_y = stream.readInt16();\n\t\t\t\tthis.quat_z = stream.readInt16();\n\t\t\t}\n\t\t} else if (this.version == 1) {\n\t\t\t//ViewpointGlobalCoordinateSysRotationStruct rot;\n\t\t}\n\t}\n\tif (this.flags & 0x20) {\n\t\tthis.id = stream.readUint32();\n\t}\n});\n// file:src/parsing/cmin.js\nBoxParser.createFullBoxCtor(\"cmin\", \"CameraIntrinsicMatrixProperty\", function(stream) {\n\tthis.focal_length_x = stream.readInt32();\n\tthis.principal_point_x = stream.readInt32();\n\tthis.principal_point_y = stream.readInt32();\n\tif (this.flags & 0x1) {\n\t\tthis.focal_length_y = stream.readInt32();\n\t\tthis.skew_factor = stream.readInt32();\n\t}\n});// file:src/parsing/cmpd.js\nBoxParser.createBoxCtor(\"cmpd\", \"ComponentDefinitionBox\", function(stream) {\n\tthis.component_count = stream.readUint32();\n\tthis.component_types = [];\n\tthis.component_type_urls = [];\n\tfor (i = 0; i < this.component_count; i++) {\n\t\tvar component_type = stream.readUint16();\n\t\tthis.component_types.push(component_type);\n\t\tif (component_type >= 0x8000) {\n\t\t\tthis.component_type_urls.push(stream.readCString());\n\t\t}\n\t}\n});// file:src/parsing/co64.js\nBoxParser.createFullBoxCtor(\"co64\", \"ChunkLargeOffsetBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tentry_count = stream.readUint32();\n\tthis.chunk_offsets = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.chunk_offsets.push(stream.readUint64());\n\t\t}\n\t}\n});\n\n// file:src/parsing/CoLL.js\nBoxParser.createFullBoxCtor(\"CoLL\", \"ContentLightLevelBox\", function(stream) {\n\tthis.maxCLL = stream.readUint16();\n    this.maxFALL = stream.readUint16();\n});\n\n// file:src/parsing/colr.js\nBoxParser.createBoxCtor(\"colr\", \"ColourInformationBox\", function(stream) {\n\tthis.colour_type = stream.readString(4);\n\tif (this.colour_type === 'nclx') {\n\t\tthis.colour_primaries = stream.readUint16();\n\t\tthis.transfer_characteristics = stream.readUint16();\n\t\tthis.matrix_coefficients = stream.readUint16();\n\t\tvar tmp = stream.readUint8();\n\t\tthis.full_range_flag = tmp >> 7;\n\t} else if (this.colour_type === 'rICC') {\n\t\tthis.ICC_profile = stream.readUint8Array(this.size - 4);\n\t} else if (this.colour_type === 'prof') {\n\t\tthis.ICC_profile = stream.readUint8Array(this.size - 4);\n\t}\n});// file:src/parsing/cprt.js\nBoxParser.createFullBoxCtor(\"cprt\", \"CopyrightBox\", function (stream) {\n\tthis.parseLanguage(stream);\n\tthis.notice = stream.readCString();\n});\n\n// file:src/parsing/cslg.js\nBoxParser.createFullBoxCtor(\"cslg\", \"CompositionToDecodeBox\", function(stream) {\n\tvar entry_count;\n\tif (this.version === 0) {\n\t\tthis.compositionToDTSShift = stream.readInt32(); /* signed */\n\t\tthis.leastDecodeToDisplayDelta = stream.readInt32(); /* signed */\n\t\tthis.greatestDecodeToDisplayDelta = stream.readInt32(); /* signed */\n\t\tthis.compositionStartTime = stream.readInt32(); /* signed */\n\t\tthis.compositionEndTime = stream.readInt32(); /* signed */\n\t}\n});\n\n// file:src/parsing/ctts.js\nBoxParser.createFullBoxCtor(\"ctts\", \"CompositionOffsetBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tentry_count = stream.readUint32();\n\tthis.sample_counts = [];\n\tthis.sample_offsets = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.sample_counts.push(stream.readUint32());\n\t\t\t/* some files are buggy and declare version=0 while using signed offsets.\n\t\t\t   The likelyhood of using the most significant bit in a 32-bits time offset is very low,\n\t\t\t   so using signed value here as well */\n\t\t\t   var value = stream.readInt32();\n\t\t\t   if (value < 0) {\n\t\t\t   \t\tLog.warn(\"BoxParser\", \"ctts box uses negative values without using version 1\");\n\t\t\t   }\n\t\t\tthis.sample_offsets.push(value);\n\t\t}\n\t} else if (this.version == 1) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.sample_counts.push(stream.readUint32());\n\t\t\tthis.sample_offsets.push(stream.readInt32()); /* signed */\n\t\t}\n\t}\n});\n\n// file:src/parsing/dac3.js\nBoxParser.createBoxCtor(\"dac3\", \"AC3SpecificBox\", function(stream) {\n\tvar tmp_byte1 = stream.readUint8();\n\tvar tmp_byte2 = stream.readUint8();\n\tvar tmp_byte3 = stream.readUint8();\n\tthis.fscod = tmp_byte1 >> 6;\n\tthis.bsid  = ((tmp_byte1 >> 1) & 0x1F);\n\tthis.bsmod = ((tmp_byte1 & 0x1) <<  2) | ((tmp_byte2 >> 6) & 0x3);\n\tthis.acmod = ((tmp_byte2 >> 3) & 0x7);\n\tthis.lfeon = ((tmp_byte2 >> 2) & 0x1);\n\tthis.bit_rate_code = (tmp_byte2 & 0x3) | ((tmp_byte3 >> 5) & 0x7);\n});\n\n// file:src/parsing/dec3.js\nBoxParser.createBoxCtor(\"dec3\", \"EC3SpecificBox\", function(stream) {\n\tvar tmp_16 = stream.readUint16();\n\tthis.data_rate = tmp_16 >> 3;\n\tthis.num_ind_sub = tmp_16 & 0x7;\n\tthis.ind_subs = [];\n\tfor (var i = 0; i < this.num_ind_sub+1; i++) {\n\t\tvar ind_sub = {};\n\t\tthis.ind_subs.push(ind_sub);\n\t\tvar tmp_byte1 = stream.readUint8();\n\t\tvar tmp_byte2 = stream.readUint8();\n\t\tvar tmp_byte3 = stream.readUint8();\n\t\tind_sub.fscod = tmp_byte1 >> 6;\n\t\tind_sub.bsid  = ((tmp_byte1 >> 1) & 0x1F);\n\t\tind_sub.bsmod = ((tmp_byte1 & 0x1) << 4) | ((tmp_byte2 >> 4) & 0xF);\n\t\tind_sub.acmod = ((tmp_byte2 >> 1) & 0x7);\n\t\tind_sub.lfeon = (tmp_byte2 & 0x1);\n\t\tind_sub.num_dep_sub = ((tmp_byte3 >> 1) & 0xF);\n\t\tif (ind_sub.num_dep_sub > 0) {\n\t\t\tind_sub.chan_loc = ((tmp_byte3 & 0x1) << 8) | stream.readUint8();\n\t\t}\n\t}\n});\n\n// file:src/parsing/dfLa.js\nBoxParser.createFullBoxCtor(\"dfLa\", \"FLACSpecificBox\", function(stream) {\n    var BLOCKTYPE_MASK = 0x7F;\n    var LASTMETADATABLOCKFLAG_MASK = 0x80;\n\n    var boxesFound = [];\n    var knownBlockTypes = [\n        \"STREAMINFO\",\n        \"PADDING\",\n        \"APPLICATION\",\n        \"SEEKTABLE\",\n        \"VORBIS_COMMENT\",\n        \"CUESHEET\",\n        \"PICTURE\",\n        \"RESERVED\"\n    ];\n\n    // for (i=0; ; i++) { // to end of box\n    do {\n        var flagAndType = stream.readUint8();\n\n        var type = Math.min(\n            (flagAndType & BLOCKTYPE_MASK),\n            (knownBlockTypes.length - 1)\n        );\n\n        // if this is a STREAMINFO block, read the true samplerate since this\n        // can be different to the AudioSampleEntry samplerate.\n        if (!(type)) {\n            // read past all the other stuff\n            stream.readUint8Array(13);\n\n            // extract samplerate\n            this.samplerate = (stream.readUint32() >> 12);\n\n            // read to end of STREAMINFO\n            stream.readUint8Array(20);\n        } else {\n            // not interested in other block types so just discard length bytes\n            stream.readUint8Array(stream.readUint24());\n        }\n\n        boxesFound.push(knownBlockTypes[type]);\n\n        if (!!(flagAndType & LASTMETADATABLOCKFLAG_MASK)) {\n            break;\n        }\n    } while (true);\n\n    this.numMetadataBlocks =\n        boxesFound.length + \" (\" + boxesFound.join(\", \") + \")\";\n});\n// file:src/parsing/dimm.js\nBoxParser.createBoxCtor(\"dimm\", \"hintimmediateBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/dmax.js\nBoxParser.createBoxCtor(\"dmax\", \"hintlongestpacket\", function(stream) {\n\tthis.time = stream.readUint32();\n});\n\n// file:src/parsing/dmed.js\nBoxParser.createBoxCtor(\"dmed\", \"hintmediaBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/dOps.js\nBoxParser.createBoxCtor(\"dOps\", \"OpusSpecificBox\", function(stream) {\n\tthis.Version = stream.readUint8();\n\tthis.OutputChannelCount = stream.readUint8();\n\tthis.PreSkip = stream.readUint16();\n\tthis.InputSampleRate = stream.readUint32();\n\tthis.OutputGain = stream.readInt16();\n\tthis.ChannelMappingFamily = stream.readUint8();\n\tif (this.ChannelMappingFamily !== 0) {\n\t\tthis.StreamCount = stream.readUint8();\n\t\tthis.CoupledCount = stream.readUint8();\n\t\tthis.ChannelMapping = [];\n\t\tfor (var i = 0; i < this.OutputChannelCount; i++) {\n\t\t\tthis.ChannelMapping[i] = stream.readUint8();\n\t\t}\n\t}\n});\n\n// file:src/parsing/dref.js\nBoxParser.createFullBoxCtor(\"dref\", \"DataReferenceBox\", function(stream) {\n\tvar ret;\n\tvar box;\n\tthis.entries = [];\n\tvar entry_count = stream.readUint32();\n\tfor (var i = 0; i < entry_count; i++) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = ret.box;\n\t\t\tthis.entries.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/drep.js\nBoxParser.createBoxCtor(\"drep\", \"hintrepeatedBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/elng.js\nBoxParser.createFullBoxCtor(\"elng\", \"ExtendedLanguageBox\", function(stream) {\n\tthis.extended_language = stream.readString(this.size-this.hdr_size);\n});\n\n// file:src/parsing/elst.js\nBoxParser.createFullBoxCtor(\"elst\", \"EditListBox\", function(stream) {\n\tthis.entries = [];\n\tvar entry_count = stream.readUint32();\n\tfor (var i = 0; i < entry_count; i++) {\n\t\tvar entry = {};\n\t\tthis.entries.push(entry);\n\t\tif (this.version === 1) {\n\t\t\tentry.segment_duration = stream.readUint64();\n\t\t\tentry.media_time = stream.readInt64();\n\t\t} else {\n\t\t\tentry.segment_duration = stream.readUint32();\n\t\t\tentry.media_time = stream.readInt32();\n\t\t}\n\t\tentry.media_rate_integer = stream.readInt16();\n\t\tentry.media_rate_fraction = stream.readInt16();\n\t}\n});\n\n// file:src/parsing/emsg.js\nBoxParser.createFullBoxCtor(\"emsg\", \"EventMessageBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.timescale \t\t\t\t\t= stream.readUint32();\n\t\tthis.presentation_time \t\t\t= stream.readUint64();\n\t\tthis.event_duration\t\t\t \t= stream.readUint32();\n\t\tthis.id \t\t\t\t\t\t= stream.readUint32();\n\t\tthis.scheme_id_uri \t\t\t\t= stream.readCString();\n\t\tthis.value \t\t\t\t\t\t= stream.readCString();\n\t} else {\n\t\tthis.scheme_id_uri \t\t\t\t= stream.readCString();\n\t\tthis.value \t\t\t\t\t\t= stream.readCString();\n\t\tthis.timescale \t\t\t\t\t= stream.readUint32();\n\t\tthis.presentation_time_delta \t= stream.readUint32();\n\t\tthis.event_duration\t\t\t \t= stream.readUint32();\n\t\tthis.id \t\t\t\t\t\t= stream.readUint32();\n\t}\n\tvar message_size = this.size - this.hdr_size - (4*4 + (this.scheme_id_uri.length+1) + (this.value.length+1));\n\tif (this.version == 1) {\n\t\tmessage_size -= 4;\n\t}\n\tthis.message_data = stream.readUint8Array(message_size);\n});\n\n// file:src/parsing/EntityToGroup.js\n// ISO/IEC 14496-12:2022 Section 8.18.3 Entity to group box\nBoxParser.createEntityToGroupCtor = function(type, parseMethod) {\n    BoxParser[type+\"Box\"] = function(size) {\n        BoxParser.FullBox.call(this, type, size);\n    }\n    BoxParser[type+\"Box\"].prototype = new BoxParser.FullBox();\n    BoxParser[type+\"Box\"].prototype.parse = function(stream) {\n        this.parseFullHeader(stream);\n        if (parseMethod) {\n            parseMethod.call(this, stream);\n        } else {\n            this.group_id = stream.readUint32();\n            this.num_entities_in_group = stream.readUint32();\n            this.entity_ids = [];\n            for (i = 0; i < this.num_entities_in_group; i++) {\n                var entity_id = stream.readUint32();\n                this.entity_ids.push(entity_id);\n            }\n        }\n    };\n};\n\n// Auto exposure bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.2.1)\nBoxParser.createEntityToGroupCtor(\"aebr\");\n\n// Flash exposure bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.5.1)\nBoxParser.createEntityToGroupCtor(\"afbr\");\n\n// Album collection (ISO/IEC 23008-12:2022 Section 6.8.7.1)\nBoxParser.createEntityToGroupCtor(\"albc\");\n\n// Alternative entity (ISO/IEC 14496-12:2022 Section 8.18.3.1)\nBoxParser.createEntityToGroupCtor(\"altr\");\n\n// Burst image entity group (ISO/IEC 23008-12:2022 Section 6.8.2.2)\nBoxParser.createEntityToGroupCtor(\"brst\");\n\n// Depth of field bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.6.1)\nBoxParser.createEntityToGroupCtor(\"dobr\");\n\n// Equivalent entity (ISO/IEC 23008-12:2022 Section 6.8.1.1)\nBoxParser.createEntityToGroupCtor(\"eqiv\");\n\n// Favourites collection (ISO/IEC 23008-12:2022 Section 6.8.7.2)\nBoxParser.createEntityToGroupCtor(\"favc\");\n\n// Focus bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.4.1)\nBoxParser.createEntityToGroupCtor(\"fobr\");\n\n// Audio to image entity group (ISO/IEC 23008-12:2022 Section 6.8.4)\nBoxParser.createEntityToGroupCtor(\"iaug\");\n\n// Panorama (ISO/IEC 23008-12:2022 Section 6.8.8.1)\nBoxParser.createEntityToGroupCtor(\"pano\");\n\n// Slideshow (ISO/IEC 23008-12:2022 Section 6.8.9.1)\nBoxParser.createEntityToGroupCtor(\"slid\");\n\n// Stereo pair (ISO/IEC 23008-12:2022 Section 6.8.5)\nBoxParser.createEntityToGroupCtor(\"ster\");\n\n// Time-synchronised capture entity group (ISO/IEC 23008-12:2022 Section 6.8.3)\nBoxParser.createEntityToGroupCtor(\"tsyn\");\n\n// White balance bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.3.1)\nBoxParser.createEntityToGroupCtor(\"wbbr\");\n\n// Alternative entity (ISO/IEC 23008-12:2022 AMD1 Section 6.8.10)\nBoxParser.createEntityToGroupCtor(\"prgr\");\n\n// Image Pyramid entity group (ISO/IEC 23008-12:20xx Section 6.8.11)\nBoxParser.createEntityToGroupCtor(\"pymd\", function(stream) {\n    this.group_id = stream.readUint32();\n    this.num_entities_in_group = stream.readUint32();\n    this.entity_ids = [];\n    for (var i = 0; i < this.num_entities_in_group; i++) {\n        var entity_id = stream.readUint32();\n        this.entity_ids.push(entity_id);\n    }\n    \n    this.tile_size_x = stream.readUint16();\n    this.tile_size_y = stream.readUint16();\n    this.layer_binning = [];\n    this.tiles_in_layer_column_minus1 = [];\n    this.tiles_in_layer_row_minus1 = [];\n    for (i = 0; i < this.num_entities_in_group; i++) {\n        this.layer_binning[i] = stream.readUint16();\n        this.tiles_in_layer_row_minus1[i] = stream.readUint16();\n        this.tiles_in_layer_column_minus1[i] = stream.readUint16();\n    }\n});\n\n// file:src/parsing/esds.js\nBoxParser.createFullBoxCtor(\"esds\", \"ElementaryStreamDescriptorBox\", function(stream) {\n\tvar esd_data = stream.readUint8Array(this.size-this.hdr_size);\n\tif (typeof MPEG4DescriptorParser !== \"undefined\") {\n\t\tvar esd_parser = new MPEG4DescriptorParser();\n\t\tthis.esd = esd_parser.parseOneDescriptor(new DataStream(esd_data.buffer, 0, DataStream.BIG_ENDIAN));\n\t}\n});\n\n// file:src/parsing/fiel.js\nBoxParser.createBoxCtor(\"fiel\", \"FieldHandlingBox\", function(stream) {\n\tthis.fieldCount = stream.readUint8();\n\tthis.fieldOrdering = stream.readUint8();\n});\n\n// file:src/parsing/frma.js\nBoxParser.createBoxCtor(\"frma\", \"OriginalFormatBox\", function(stream) {\n\tthis.data_format = stream.readString(4);\n});\n\n// file:src/parsing/ftyp.js\nBoxParser.createBoxCtor(\"ftyp\", \"FileTypeBox\", function(stream) {\n\tvar toparse = this.size - this.hdr_size;\n\tthis.major_brand = stream.readString(4);\n\tthis.minor_version = stream.readUint32();\n\ttoparse -= 8;\n\tthis.compatible_brands = [];\n\tvar i = 0;\n\twhile (toparse>=4) {\n\t\tthis.compatible_brands[i] = stream.readString(4);\n\t\ttoparse -= 4;\n\t\ti++;\n\t}\n});\n\n// file:src/parsing/hdlr.js\nBoxParser.createFullBoxCtor(\"hdlr\", \"HandlerBox\", function(stream) {\n\tif (this.version === 0) {\n\t\tstream.readUint32();\n\t\tthis.handler = stream.readString(4);\n\t\tstream.readUint32Array(3);\n\t\tthis.name = stream.readString(this.size-this.hdr_size-20);\n\t\tif (this.name[this.name.length-1]==='\\0') {\n\t\t\tthis.name = this.name.slice(0,-1);\n\t\t}\n\t}\n});\n\n// file:src/parsing/hvcC.js\nBoxParser.createBoxCtor(\"hvcC\", \"HEVCConfigurationBox\", function(stream) {\n\tvar i, j;\n\tvar nb_nalus;\n\tvar length;\n\tvar tmp_byte;\n\tthis.configurationVersion = stream.readUint8();\n\ttmp_byte = stream.readUint8();\n\tthis.general_profile_space = tmp_byte >> 6;\n\tthis.general_tier_flag = (tmp_byte & 0x20) >> 5;\n\tthis.general_profile_idc = (tmp_byte & 0x1F);\n\tthis.general_profile_compatibility = stream.readUint32();\n\tthis.general_constraint_indicator = stream.readUint8Array(6);\n\tthis.general_level_idc = stream.readUint8();\n\tthis.min_spatial_segmentation_idc = stream.readUint16() & 0xFFF;\n\tthis.parallelismType = (stream.readUint8() & 0x3);\n\tthis.chroma_format_idc = (stream.readUint8() & 0x3);\n\tthis.bit_depth_luma_minus8 = (stream.readUint8() & 0x7);\n\tthis.bit_depth_chroma_minus8 = (stream.readUint8() & 0x7);\n\tthis.avgFrameRate = stream.readUint16();\n\ttmp_byte = stream.readUint8();\n\tthis.constantFrameRate = (tmp_byte >> 6);\n\tthis.numTemporalLayers = (tmp_byte & 0XD) >> 3;\n\tthis.temporalIdNested = (tmp_byte & 0X4) >> 2;\n\tthis.lengthSizeMinusOne = (tmp_byte & 0X3);\n\n\tthis.nalu_arrays = [];\n\tthis.nalu_arrays.toString = function () {\n\t\tvar str = \"<table class='inner-table'>\";\n\t\tstr += \"<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>\";\n\t\tstr += \"<tbody>\";\n\n\t\tfor (var i=0; i<this.length; i++) {\n\t\t\tvar nalu_array = this[i];\n\t\t\tstr += \"<tr>\";\n\t\t\tstr += \"<td rowspan='\"+nalu_array.length+\"'>\"+nalu_array.completeness+\"</td>\";\n\t\t\tstr += \"<td rowspan='\"+nalu_array.length+\"'>\"+nalu_array.nalu_type+\"</td>\";\n\t\t\tfor (var j=0; j<nalu_array.length; j++) {\n\t\t\t\tvar nalu = nalu_array[j];\n\t\t\t\tif (j !== 0) str += \"<tr>\";\n\t\t\t\tstr += \"<td>\";\n\t\t\t\tstr += nalu.data.reduce(function(str, byte) {\n\t\t\t\t\treturn str + byte.toString(16).padStart(2, \"0\");\n\t\t\t\t}, \"0x\");\n\t\t\t\tstr += \"</td></tr>\";\n\t\t\t}\n\t\t}\n\t\tstr += \"</tbody></table>\";\n\t\treturn str;\n\t}\n\tvar numOfArrays = stream.readUint8();\n\tfor (i = 0; i < numOfArrays; i++) {\n\t\tvar nalu_array = [];\n\t\tthis.nalu_arrays.push(nalu_array);\n\t\ttmp_byte = stream.readUint8()\n\t\tnalu_array.completeness = (tmp_byte & 0x80) >> 7;\n\t\tnalu_array.nalu_type = tmp_byte & 0x3F;\n\t\tvar numNalus = stream.readUint16();\n\t\tfor (j = 0; j < numNalus; j++) {\n\t\t\tvar nalu = {}\n\t\t\tnalu_array.push(nalu);\n\t\t\tlength = stream.readUint16();\n\t\t\tnalu.data   = stream.readUint8Array(length);\n\t\t}\n\t}\n});\n\n// file:src/parsing/iinf.js\nBoxParser.createFullBoxCtor(\"iinf\", \"ItemInfoBox\", function(stream) {\n\tvar ret;\n\tif (this.version === 0) {\n\t\tthis.entry_count = stream.readUint16();\n\t} else {\n\t\tthis.entry_count = stream.readUint32();\n\t}\n\tthis.item_infos = [];\n\tfor (var i = 0; i < this.entry_count; i++) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tif (ret.box.type !== \"infe\") {\n\t\t\t\tLog.error(\"BoxParser\", \"Expected 'infe' box, got \"+ret.box.type);\n\t\t\t}\n\t\t\tthis.item_infos[i] = ret.box;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/iloc.js\nBoxParser.createFullBoxCtor(\"iloc\", \"ItemLocationBox\", function(stream) {\n\tvar byte;\n\tbyte = stream.readUint8();\n\tthis.offset_size = (byte >> 4) & 0xF;\n\tthis.length_size = byte & 0xF;\n\tbyte = stream.readUint8();\n\tthis.base_offset_size = (byte >> 4) & 0xF;\n\tif (this.version === 1 || this.version === 2) {\n\t\tthis.index_size = byte & 0xF;\n\t} else {\n\t\tthis.index_size = 0;\n\t\t// reserved = byte & 0xF;\n\t}\n\tthis.items = [];\n\tvar item_count = 0;\n\tif (this.version < 2) {\n\t\titem_count = stream.readUint16();\n\t} else if (this.version === 2) {\n\t\titem_count = stream.readUint32();\n\t} else {\n\t\tthrow \"version of iloc box not supported\";\n\t}\n\tfor (var i = 0; i < item_count; i++) {\n\t\tvar item = {};\n\t\tthis.items.push(item);\n\t\tif (this.version < 2) {\n\t\t\titem.item_ID = stream.readUint16();\n\t\t} else if (this.version === 2) {\n\t\t\titem.item_ID = stream.readUint32();\n\t\t} else {\n\t\t\tthrow \"version of iloc box not supported\";\n\t\t}\n\t\tif (this.version === 1 || this.version === 2) {\n\t\t\titem.construction_method = (stream.readUint16() & 0xF);\n\t\t} else {\n\t\t\titem.construction_method = 0;\n\t\t}\n\t\titem.data_reference_index = stream.readUint16();\n\t\tswitch(this.base_offset_size) {\n\t\t\tcase 0:\n\t\t\t\titem.base_offset = 0;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\titem.base_offset = stream.readUint32();\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\titem.base_offset = stream.readUint64();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow \"Error reading base offset size\";\n\t\t}\n\t\tvar extent_count = stream.readUint16();\n\t\titem.extents = [];\n\t\tfor (var j=0; j < extent_count; j++) {\n\t\t\tvar extent = {};\n\t\t\titem.extents.push(extent);\n\t\t\tif (this.version === 1 || this.version === 2) {\n\t\t\t\tswitch(this.index_size) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\textent.extent_index = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\textent.extent_index = stream.readUint32();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\textent.extent_index = stream.readUint64();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow \"Error reading extent index\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(this.offset_size) {\n\t\t\t\tcase 0:\n\t\t\t\t\textent.extent_offset = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\textent.extent_offset = stream.readUint32();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\textent.extent_offset = stream.readUint64();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow \"Error reading extent index\";\n\t\t\t}\n\t\t\tswitch(this.length_size) {\n\t\t\t\tcase 0:\n\t\t\t\t\textent.extent_length = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\textent.extent_length = stream.readUint32();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\textent.extent_length = stream.readUint64();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow \"Error reading extent index\";\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/imir.js\nBoxParser.createBoxCtor(\"imir\", \"ImageMirror\", function(stream) {\n\tvar tmp = stream.readUint8();\n\tthis.reserved = tmp >> 7;\n\tthis.axis = tmp & 1;\n});// file:src/parsing/infe.js\nBoxParser.createFullBoxCtor(\"infe\", \"ItemInfoEntry\", function(stream) {\n\tif (this.version === 0 || this.version === 1) {\n\t\tthis.item_ID = stream.readUint16();\n\t\tthis.item_protection_index = stream.readUint16();\n\t\tthis.item_name = stream.readCString();\n\t\tthis.content_type = stream.readCString();\n\t\tthis.content_encoding = stream.readCString();\n\t}\n\tif (this.version === 1) {\n\t\tthis.extension_type = stream.readString(4);\n\t\tLog.warn(\"BoxParser\", \"Cannot parse extension type\");\n\t\tstream.seek(this.start+this.size);\n\t\treturn;\n\t}\n\tif (this.version >= 2) {\n\t\tif (this.version === 2) {\n\t\t\tthis.item_ID = stream.readUint16();\n\t\t} else if (this.version === 3) {\n\t\t\tthis.item_ID = stream.readUint32();\n\t\t}\n\t\tthis.item_protection_index = stream.readUint16();\n\t\tthis.item_type = stream.readString(4);\n\t\tthis.item_name = stream.readCString();\n\t\tif (this.item_type === \"mime\") {\n\t\t\tthis.content_type = stream.readCString();\n\t\t\tthis.content_encoding = stream.readCString();\n\t\t} else if (this.item_type === \"uri \") {\n\t\t\tthis.item_uri_type = stream.readCString();\n\t\t}\n\t}\n});\n// file:src/parsing/ipma.js\nBoxParser.createFullBoxCtor(\"ipma\", \"ItemPropertyAssociationBox\", function(stream) {\n\tvar i, j;\n\tentry_count = stream.readUint32();\n\tthis.associations = [];\n\tfor(i=0; i<entry_count; i++) {\n\t\tvar item_assoc = {};\n\t\tthis.associations.push(item_assoc);\n\t\tif (this.version < 1) {\n\t\t\titem_assoc.id = stream.readUint16();\n\t\t} else {\n\t\t\titem_assoc.id = stream.readUint32();\n\t\t}\n\t\tvar association_count = stream.readUint8();\n\t\titem_assoc.props = [];\n\t\tfor (j = 0; j < association_count; j++) {\n\t\t\tvar tmp = stream.readUint8();\n\t\t\tvar p = {};\n\t\t\titem_assoc.props.push(p);\n\t\t\tp.essential = ((tmp & 0x80) >> 7) === 1;\n\t\t\tif (this.flags & 0x1) {\n\t\t\t\tp.property_index = (tmp & 0x7F) << 8 | stream.readUint8();\n\t\t\t} else {\n\t\t\t\tp.property_index = (tmp & 0x7F);\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/iref.js\nBoxParser.createFullBoxCtor(\"iref\", \"ItemReferenceBox\", function(stream) {\n\tvar ret;\n\tvar entryCount;\n\tvar box;\n\tthis.references = [];\n\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, true, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tif (this.version === 0) {\n\t\t\t\tbox = new BoxParser.SingleItemTypeReferenceBox(ret.type, ret.size, ret.hdr_size, ret.start);\n\t\t\t} else {\n\t\t\t\tbox = new BoxParser.SingleItemTypeReferenceBoxLarge(ret.type, ret.size, ret.hdr_size, ret.start);\n\t\t\t}\n\t\t\tif (box.write === BoxParser.Box.prototype.write && box.type !== \"mdat\") {\n\t\t\t\tLog.warn(\"BoxParser\", box.type+\" box writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\t\t\tbox.parseDataAndRewind(stream);\n\t\t\t}\n\t\t\tbox.parse(stream);\n\t\t\tthis.references.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n// file:src/parsing/irot.js\nBoxParser.createBoxCtor(\"irot\", \"ImageRotation\", function(stream) {\n\tthis.angle = stream.readUint8() & 0x3;\n});\n\n// file:src/parsing/ispe.js\nBoxParser.createFullBoxCtor(\"ispe\", \"ImageSpatialExtentsProperty\", function(stream) {\n\tthis.image_width = stream.readUint32();\n\tthis.image_height = stream.readUint32();\n});// file:src/parsing/kind.js\nBoxParser.createFullBoxCtor(\"kind\", \"KindBox\", function(stream) {\n\tthis.schemeURI = stream.readCString();\n\tthis.value = stream.readCString();\n});\n// file:src/parsing/leva.js\nBoxParser.createFullBoxCtor(\"leva\", \"LevelAssignmentBox\", function(stream) {\n\tvar count = stream.readUint8();\n\tthis.levels = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tvar level = {};\n\t\tthis.levels[i] = level;\n\t\tlevel.track_ID = stream.readUint32();\n\t\tvar tmp_byte = stream.readUint8();\n\t\tlevel.padding_flag = tmp_byte >> 7;\n\t\tlevel.assignment_type = tmp_byte & 0x7F;\n\t\tswitch (level.assignment_type) {\n\t\t\tcase 0:\n\t\t\t\tlevel.grouping_type = stream.readString(4);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tlevel.grouping_type = stream.readString(4);\n\t\t\t\tlevel.grouping_type_parameter = stream.readUint32();\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tlevel.sub_track_id = stream.readUint32();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tLog.warn(\"BoxParser\", \"Unknown leva assignement type\");\n\t\t}\n\t}\n});\n\n// file:src/parsing/lhvC.js\nBoxParser.createBoxCtor(\"lhvC\", \"LHEVCConfigurationBox\", function(stream) {\n\tvar i, j;\n\tvar tmp_byte;\n\tthis.configurationVersion = stream.readUint8();\n\tthis.min_spatial_segmentation_idc = stream.readUint16() & 0xFFF;\n\tthis.parallelismType = (stream.readUint8() & 0x3);\n\ttmp_byte = stream.readUint8();\n\tthis.numTemporalLayers = (tmp_byte & 0XD) >> 3;\n\tthis.temporalIdNested = (tmp_byte & 0X4) >> 2;\n\tthis.lengthSizeMinusOne = (tmp_byte & 0X3);\n\n\tthis.nalu_arrays = [];\n\tthis.nalu_arrays.toString = function () {\n\t\tvar str = \"<table class='inner-table'>\";\n\t\tstr += \"<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>\";\n\t\tstr += \"<tbody>\";\n\n\t\tfor (var i=0; i<this.length; i++) {\n\t\t\tvar nalu_array = this[i];\n\t\t\tstr += \"<tr>\";\n\t\t\tstr += \"<td rowspan='\"+nalu_array.length+\"'>\"+nalu_array.completeness+\"</td>\";\n\t\t\tstr += \"<td rowspan='\"+nalu_array.length+\"'>\"+nalu_array.nalu_type+\"</td>\";\n\t\t\tfor (var j=0; j<nalu_array.length; j++) {\n\t\t\t\tvar nalu = nalu_array[j];\n\t\t\t\tif (j !== 0) str += \"<tr>\";\n\t\t\t\tstr += \"<td>\";\n\t\t\t\tstr += nalu.data.reduce(function(str, byte) {\n\t\t\t\t\treturn str + byte.toString(16).padStart(2, \"0\");\n\t\t\t\t}, \"0x\");\n\t\t\t\tstr += \"</td></tr>\";\n\t\t\t}\n\t\t}\n\t\tstr += \"</tbody></table>\";\n\t\treturn str;\n\t}\n\tvar numOfArrays = stream.readUint8();\n\tfor (i = 0; i < numOfArrays; i++) {\n\t\tvar nalu_array = [];\n\t\tthis.nalu_arrays.push(nalu_array);\n\t\ttmp_byte = stream.readUint8()\n\t\tnalu_array.completeness = (tmp_byte & 0x80) >> 7;\n\t\tnalu_array.nalu_type = tmp_byte & 0x3F;\n\t\tvar numNalus = stream.readUint16();\n\t\tfor (j = 0; j < numNalus; j++) {\n\t\t\tvar nalu = {}\n\t\t\tnalu_array.push(nalu);\n\t\t\tvar length = stream.readUint16();\n\t\t\tnalu.data  = stream.readUint8Array(length);\n\t\t}\n\t}\n});\n\n// file:src/parsing/lsel.js\nBoxParser.createBoxCtor(\"lsel\", \"LayerSelectorProperty\", function(stream) {\n\tthis.layer_id = stream.readUint16();\n});// file:src/parsing/maxr.js\nBoxParser.createBoxCtor(\"maxr\", \"hintmaxrate\", function(stream) {\n\tthis.period = stream.readUint32();\n\tthis.bytes = stream.readUint32();\n});\n\n// file:src/parsing/mdcv.js\nfunction ColorPoint(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nColorPoint.prototype.toString = function() {\n    return \"(\"+this.x+\",\"+this.y+\")\";\n}\n\nBoxParser.createBoxCtor(\"mdcv\", \"MasteringDisplayColourVolumeBox\", function(stream) {\n    this.display_primaries = [];\n    this.display_primaries[0] = new ColorPoint(stream.readUint16(),stream.readUint16());\n    this.display_primaries[1] = new ColorPoint(stream.readUint16(),stream.readUint16());\n    this.display_primaries[2] = new ColorPoint(stream.readUint16(),stream.readUint16());\n    this.white_point = new ColorPoint(stream.readUint16(),stream.readUint16());\n    this.max_display_mastering_luminance = stream.readUint32();\n    this.min_display_mastering_luminance = stream.readUint32();\n});\n\n// file:src/parsing/mdhd.js\nBoxParser.createFullBoxCtor(\"mdhd\", \"MediaHeaderBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.creation_time = stream.readUint64();\n\t\tthis.modification_time = stream.readUint64();\n\t\tthis.timescale = stream.readUint32();\n\t\tthis.duration = stream.readUint64();\n\t} else {\n\t\tthis.creation_time = stream.readUint32();\n\t\tthis.modification_time = stream.readUint32();\n\t\tthis.timescale = stream.readUint32();\n\t\tthis.duration = stream.readUint32();\n\t}\n\tthis.parseLanguage(stream);\n\tstream.readUint16();\n});\n\n// file:src/parsing/mehd.js\nBoxParser.createFullBoxCtor(\"mehd\", \"MovieExtendsHeaderBox\", function(stream) {\n\tif (this.flags & 0x1) {\n\t\tLog.warn(\"BoxParser\", \"mehd box incorrectly uses flags set to 1, converting version to 1\");\n\t\tthis.version = 1;\n\t}\n\tif (this.version == 1) {\n\t\tthis.fragment_duration = stream.readUint64();\n\t} else {\n\t\tthis.fragment_duration = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/meta.js\nBoxParser.createFullBoxCtor(\"meta\", \"MetaBox\", function(stream) {\n\tthis.boxes = [];\n\tBoxParser.ContainerBox.prototype.parse.call(this, stream);\n});\n// file:src/parsing/mfhd.js\nBoxParser.createFullBoxCtor(\"mfhd\", \"MovieFragmentHeaderBox\", function(stream) {\n\tthis.sequence_number = stream.readUint32();\n});\n\n// file:src/parsing/mfro.js\nBoxParser.createFullBoxCtor(\"mfro\", \"MovieFragmentRandomAccessOffsetBox\", function(stream) {\n\tthis._size = stream.readUint32();\n});\n\n// file:src/parsing/mskC.js\nBoxParser.createFullBoxCtor(\"mskC\", \"MaskConfigurationProperty\", function(stream) {\n    this.bits_per_pixel = stream.readUint8();\n});\n\n// file:src/parsing/mvhd.js\nBoxParser.createFullBoxCtor(\"mvhd\", \"MovieHeaderBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.creation_time = stream.readUint64();\n\t\tthis.modification_time = stream.readUint64();\n\t\tthis.timescale = stream.readUint32();\n\t\tthis.duration = stream.readUint64();\n\t} else {\n\t\tthis.creation_time = stream.readUint32();\n\t\tthis.modification_time = stream.readUint32();\n\t\tthis.timescale = stream.readUint32();\n\t\tthis.duration = stream.readUint32();\n\t}\n\tthis.rate = stream.readUint32();\n\tthis.volume = stream.readUint16()>>8;\n\tstream.readUint16();\n\tstream.readUint32Array(2);\n\tthis.matrix = stream.readUint32Array(9);\n\tstream.readUint32Array(6);\n\tthis.next_track_id = stream.readUint32();\n});\n// file:src/parsing/npck.js\nBoxParser.createBoxCtor(\"npck\", \"hintPacketsSent\", function(stream) {\n\tthis.packetssent = stream.readUint32();\n});\n\n// file:src/parsing/nump.js\nBoxParser.createBoxCtor(\"nump\", \"hintPacketsSent\", function(stream) {\n\tthis.packetssent = stream.readUint64();\n});\n\n// file:src/parsing/padb.js\nBoxParser.createFullBoxCtor(\"padb\", \"PaddingBitsBox\", function(stream) {\n\tvar sample_count = stream.readUint32();\n\tthis.padbits = [];\n\tfor (var i = 0; i < Math.floor((sample_count+1)/2); i++) {\n\t\tthis.padbits = stream.readUint8();\n\t}\n});\n\n// file:src/parsing/pasp.js\nBoxParser.createBoxCtor(\"pasp\", \"PixelAspectRatioBox\", function(stream) {\n\tthis.hSpacing = stream.readUint32();\n\tthis.vSpacing = stream.readUint32();\n});// file:src/parsing/payl.js\nBoxParser.createBoxCtor(\"payl\", \"CuePayloadBox\", function(stream) {\n\tthis.text = stream.readString(this.size - this.hdr_size);\n});\n\n// file:src/parsing/payt.js\nBoxParser.createBoxCtor(\"payt\", \"hintpayloadID\", function(stream) {\n\tthis.payloadID = stream.readUint32();\n\tvar count = stream.readUint8();\n\tthis.rtpmap_string = stream.readString(count);\n});\n\n// file:src/parsing/pdin.js\nBoxParser.createFullBoxCtor(\"pdin\", \"ProgressiveDownloadInfoBox\", function(stream) {\n\tvar count = (this.size - this.hdr_size)/8;\n\tthis.rate = [];\n\tthis.initial_delay = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.rate[i] = stream.readUint32();\n\t\tthis.initial_delay[i] = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/pitm.js\nBoxParser.createFullBoxCtor(\"pitm\", \"PrimaryItemBox\", function(stream) {\n\tif (this.version === 0) {\n\t\tthis.item_id = stream.readUint16();\n\t} else {\n\t\tthis.item_id = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/pixi.js\nBoxParser.createFullBoxCtor(\"pixi\", \"PixelInformationProperty\", function(stream) {\n\tvar i;\n\tthis.num_channels = stream.readUint8();\n\tthis.bits_per_channels = [];\n\tfor (i = 0; i < this.num_channels; i++) {\n\t\tthis.bits_per_channels[i] = stream.readUint8();\n\t}\n});\n\n// file:src/parsing/pmax.js\nBoxParser.createBoxCtor(\"pmax\", \"hintlargestpacket\", function(stream) {\n\tthis.bytes = stream.readUint32();\n});\n\n// file:src/parsing/prdi.js\nBoxParser.createFullBoxCtor(\"prdi\", \"ProgressiveDerivedImageItemInformationProperty\", function(stream) {\n\tthis.step_count = stream.readUint16();\n\tthis.item_count = [];\n\tif (this.flags & 0x2) {\n\t\tfor (var i = 0; i < this.step_count; i++) {\n\t\t\tthis.item_count[i] = stream.readUint16();\n\t\t}\n\t}\n});// file:src/parsing/prft.js\nBoxParser.createFullBoxCtor(\"prft\", \"ProducerReferenceTimeBox\", function(stream) {\n\tthis.ref_track_id = stream.readUint32();\n\tthis.ntp_timestamp = stream.readUint64();\n\tif (this.version === 0) {\n\t\tthis.media_time = stream.readUint32();\n\t} else {\n\t\tthis.media_time = stream.readUint64();\n\t}\n});\n\n// file:src/parsing/pssh.js\nBoxParser.createFullBoxCtor(\"pssh\", \"ProtectionSystemSpecificHeaderBox\", function(stream) {\n\tthis.system_id = BoxParser.parseHex16(stream);\n\tif (this.version > 0) {\n\t\tvar count = stream.readUint32();\n\t\tthis.kid = [];\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tthis.kid[i] = BoxParser.parseHex16(stream);\n\t\t}\n\t}\n\tvar datasize = stream.readUint32();\n\tif (datasize > 0) {\n\t\tthis.data = stream.readUint8Array(datasize);\n\t}\n});\n\n// file:src/parsing/qt/clef.js\nBoxParser.createFullBoxCtor(\"clef\", \"TrackCleanApertureDimensionsBox\", function(stream) {\n\tthis.width = stream.readUint32();\n\tthis.height = stream.readUint32();\n});// file:src/parsing/qt/enof.js\nBoxParser.createFullBoxCtor(\"enof\", \"TrackEncodedPixelsDimensionsBox\", function(stream) {\n\tthis.width = stream.readUint32();\n\tthis.height = stream.readUint32();\n});// file:src/parsing/qt/prof.js\nBoxParser.createFullBoxCtor(\"prof\", \"TrackProductionApertureDimensionsBox\", function(stream) {\n\tthis.width = stream.readUint32();\n\tthis.height = stream.readUint32();\n});// file:src/parsing/qt/tapt.js\nBoxParser.createContainerBoxCtor(\"tapt\", \"TrackApertureModeDimensionsBox\", null, [ \"clef\", \"prof\", \"enof\"]);// file:src/parsing/rtp.js\nBoxParser.createBoxCtor(\"rtp \", \"rtpmoviehintinformation\", function(stream) {\n\tthis.descriptionformat = stream.readString(4);\n\tthis.sdptext = stream.readString(this.size - this.hdr_size - 4);\n});\n\n// file:src/parsing/saio.js\nBoxParser.createFullBoxCtor(\"saio\", \"SampleAuxiliaryInformationOffsetsBox\", function(stream) {\n\tif (this.flags & 0x1) {\n\t\tthis.aux_info_type = stream.readString(4);\n\t\tthis.aux_info_type_parameter = stream.readUint32();\n\t}\n\tvar count = stream.readUint32();\n\tthis.offset = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tif (this.version === 0) {\n\t\t\tthis.offset[i] = stream.readUint32();\n\t\t} else {\n\t\t\tthis.offset[i] = stream.readUint64();\n\t\t}\n\t}\n});\n// file:src/parsing/saiz.js\nBoxParser.createFullBoxCtor(\"saiz\", \"SampleAuxiliaryInformationSizesBox\", function(stream) {\n\tif (this.flags & 0x1) {\n\t\tthis.aux_info_type = stream.readString(4);\n\t\tthis.aux_info_type_parameter = stream.readUint32();\n\t}\n\tthis.default_sample_info_size = stream.readUint8();\n\tthis.sample_count = stream.readUint32();\n\tthis.sample_info_size = [];\n\tif (this.default_sample_info_size === 0) {\n\t\tfor (var i = 0; i < this.sample_count; i++) {\n\t\t\tthis.sample_info_size[i] = stream.readUint8();\n\t\t}\n\t}\n});\n\n// file:src/parsing/sampleentries/mett.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA, \"mett\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.content_encoding = stream.readCString();\n\tthis.mime_format = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/metx.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA, \"metx\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.content_encoding = stream.readCString();\n\tthis.namespace = stream.readCString();\n\tthis.schema_location = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/sbtt.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \"sbtt\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.content_encoding = stream.readCString();\n\tthis.mime_format = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/stpp.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \"stpp\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.namespace = stream.readCString();\n\tthis.schema_location = stream.readCString();\n\tthis.auxiliary_mime_types = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/stxt.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \"stxt\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.content_encoding = stream.readCString();\n\tthis.mime_format = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/tx3g.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \"tx3g\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.displayFlags = stream.readUint32();\n\tthis.horizontal_justification = stream.readInt8();\n\tthis.vertical_justification = stream.readInt8();\n\tthis.bg_color_rgba = stream.readUint8Array(4);\n\tthis.box_record = stream.readInt16Array(4);\n\tthis.style_record = stream.readUint8Array(12);\n\tthis.parseFooter(stream);\n});\n// file:src/parsing/sampleentries/wvtt.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA, \"wvtt\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/samplegroups/alst.js\nBoxParser.createSampleGroupCtor(\"alst\", function(stream) {\n\tvar i;\n\tvar roll_count = stream.readUint16();\n\tthis.first_output_sample = stream.readUint16();\n\tthis.sample_offset = [];\n\tfor (i = 0; i < roll_count; i++) {\n\t\tthis.sample_offset[i] = stream.readUint32();\n\t}\n\tvar remaining = this.description_length - 4 - 4*roll_count;\n\tthis.num_output_samples = [];\n\tthis.num_total_samples = [];\n\tfor (i = 0; i < remaining/4; i++) {\n\t\tthis.num_output_samples[i] = stream.readUint16();\n\t\tthis.num_total_samples[i] = stream.readUint16();\n\t}\n});\n\n// file:src/parsing/samplegroups/avll.js\nBoxParser.createSampleGroupCtor(\"avll\", function(stream) {\n\tthis.layerNumber = stream.readUint8();\n\tthis.accurateStatisticsFlag = stream.readUint8();\n\tthis.avgBitRate = stream.readUint16();\n\tthis.avgFrameRate = stream.readUint16();\n});\n\n// file:src/parsing/samplegroups/avss.js\nBoxParser.createSampleGroupCtor(\"avss\", function(stream) {\n\tthis.subSequenceIdentifier = stream.readUint16();\n\tthis.layerNumber = stream.readUint8();\n\tvar tmp_byte = stream.readUint8();\n\tthis.durationFlag = tmp_byte >> 7;\n\tthis.avgRateFlag = (tmp_byte >> 6) & 0x1;\n\tif (this.durationFlag) {\n\t\tthis.duration = stream.readUint32();\n\t}\n\tif (this.avgRateFlag) {\n\t\tthis.accurateStatisticsFlag = stream.readUint8();\n\t\tthis.avgBitRate = stream.readUint16();\n\t\tthis.avgFrameRate = stream.readUint16();\n\t}\n\tthis.dependency = [];\n\tvar numReferences = stream.readUint8();\n\tfor (var i = 0; i < numReferences; i++) {\n\t\tvar dependencyInfo = {};\n\t\tthis.dependency.push(dependencyInfo);\n\t\tdependencyInfo.subSeqDirectionFlag = stream.readUint8();\n\t\tdependencyInfo.layerNumber = stream.readUint8();\n\t\tdependencyInfo.subSequenceIdentifier = stream.readUint16();\n\t}\n});\n\n// file:src/parsing/samplegroups/dtrt.js\nBoxParser.createSampleGroupCtor(\"dtrt\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/mvif.js\nBoxParser.createSampleGroupCtor(\"mvif\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/prol.js\nBoxParser.createSampleGroupCtor(\"prol\", function(stream) {\n\tthis.roll_distance = stream.readInt16();\n});\n\n// file:src/parsing/samplegroups/rap.js\nBoxParser.createSampleGroupCtor(\"rap \", function(stream) {\n\tvar tmp_byte = stream.readUint8();\n\tthis.num_leading_samples_known = tmp_byte >> 7;\n\tthis.num_leading_samples = tmp_byte & 0x7F;\n});\n\n// file:src/parsing/samplegroups/rash.js\nBoxParser.createSampleGroupCtor(\"rash\", function(stream) {\n\tthis.operation_point_count = stream.readUint16();\n\tif (this.description_length !== 2+(this.operation_point_count === 1?2:this.operation_point_count*6)+9) {\n\t\tLog.warn(\"BoxParser\", \"Mismatch in \"+this.grouping_type+\" sample group length\");\n\t\tthis.data =  stream.readUint8Array(this.description_length-2);\n\t} else {\n\t\tif (this.operation_point_count === 1) {\n\t\t\tthis.target_rate_share = stream.readUint16();\n\t\t} else {\n\t\t\tthis.target_rate_share = [];\n\t\t\tthis.available_bitrate = [];\n\t\t\tfor (var i = 0; i < this.operation_point_count; i++) {\n\t\t\t\tthis.available_bitrate[i] = stream.readUint32();\n\t\t\t\tthis.target_rate_share[i] = stream.readUint16();\n\t\t\t}\n\t\t}\n\t\tthis.maximum_bitrate = stream.readUint32();\n\t\tthis.minimum_bitrate = stream.readUint32();\n\t\tthis.discard_priority = stream.readUint8();\n\t}\n});\n\n// file:src/parsing/samplegroups/roll.js\nBoxParser.createSampleGroupCtor(\"roll\", function(stream) {\n\tthis.roll_distance = stream.readInt16();\n});\n\n// file:src/parsing/samplegroups/samplegroup.js\nBoxParser.SampleGroupEntry.prototype.parse = function(stream) {\n\tLog.warn(\"BoxParser\", \"Unknown Sample Group type: \"+this.grouping_type);\n\tthis.data =  stream.readUint8Array(this.description_length);\n}\n\n// file:src/parsing/samplegroups/scif.js\nBoxParser.createSampleGroupCtor(\"scif\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/scnm.js\nBoxParser.createSampleGroupCtor(\"scnm\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/seig.js\nBoxParser.createSampleGroupCtor(\"seig\", function(stream) {\n\tthis.reserved = stream.readUint8();\n\tvar tmp = stream.readUint8();\n\tthis.crypt_byte_block = tmp >> 4;\n\tthis.skip_byte_block = tmp & 0xF;\n\tthis.isProtected = stream.readUint8();\n\tthis.Per_Sample_IV_Size = stream.readUint8();\n\tthis.KID = BoxParser.parseHex16(stream);\n\tthis.constant_IV_size = 0;\n\tthis.constant_IV = 0;\n\tif (this.isProtected === 1 && this.Per_Sample_IV_Size === 0) {\n\t\tthis.constant_IV_size = stream.readUint8();\n\t\tthis.constant_IV = stream.readUint8Array(this.constant_IV_size);\n\t}\n});\n\n// file:src/parsing/samplegroups/stsa.js\nBoxParser.createSampleGroupCtor(\"stsa\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/sync.js\nBoxParser.createSampleGroupCtor(\"sync\", function(stream) {\n\tvar tmp_byte = stream.readUint8();\n\tthis.NAL_unit_type = tmp_byte & 0x3F;\n});\n\n// file:src/parsing/samplegroups/tele.js\nBoxParser.createSampleGroupCtor(\"tele\", function(stream) {\n\tvar tmp_byte = stream.readUint8();\n\tthis.level_independently_decodable = tmp_byte >> 7;\n});\n\n// file:src/parsing/samplegroups/tsas.js\nBoxParser.createSampleGroupCtor(\"tsas\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/tscl.js\nBoxParser.createSampleGroupCtor(\"tscl\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/vipr.js\nBoxParser.createSampleGroupCtor(\"vipr\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/sbgp.js\nBoxParser.createFullBoxCtor(\"sbgp\", \"SampleToGroupBox\", function(stream) {\n\tthis.grouping_type = stream.readString(4);\n\tif (this.version === 1) {\n\t\tthis.grouping_type_parameter = stream.readUint32();\n\t} else {\n\t\tthis.grouping_type_parameter = 0;\n\t}\n\tthis.entries = [];\n\tvar entry_count = stream.readUint32();\n\tfor (var i = 0; i < entry_count; i++) {\n\t\tvar entry = {};\n\t\tthis.entries.push(entry);\n\t\tentry.sample_count = stream.readInt32();\n\t\tentry.group_description_index = stream.readInt32();\n\t}\n});\n\n// file:src/parsing/sbpm.js\nfunction Pixel(row, col) {\n\tthis.bad_pixel_row = row;\n\tthis.bad_pixel_column = col;\n}\n\nPixel.prototype.toString = function pixelToString() {\n\treturn \"[row: \" + this.bad_pixel_row + \", column: \" + this.bad_pixel_column + \"]\";\n}\n\nBoxParser.createFullBoxCtor(\"sbpm\", \"SensorBadPixelsMapBox\", function(stream) {\n\tvar i;\n\tthis.component_count = stream.readUint16();\n    this.component_index = [];\n    for (i = 0; i < this.component_count; i++) {\n        this.component_index.push(stream.readUint16());\n    }\n\tvar flags = stream.readUint8();\n\tthis.correction_applied = (0x80 == (flags & 0x80));\n\tthis.num_bad_rows = stream.readUint32();\n\tthis.num_bad_cols = stream.readUint32();\n\tthis.num_bad_pixels = stream.readUint32();\n\tthis.bad_rows = [];\n\tthis.bad_columns = [];\n\tthis.bad_pixels = [];\n\tfor (i = 0; i < this.num_bad_rows; i++) {\n\t\tthis.bad_rows.push(stream.readUint32());\n\t}\n\tfor (i = 0; i < this.num_bad_cols; i++) {\n\t\tthis.bad_columns.push(stream.readUint32());\n\t}\n\tfor (i = 0; i < this.num_bad_pixels; i++) {\n\t\tvar row = stream.readUint32();\n\t\tvar col = stream.readUint32();\n\t\tthis.bad_pixels.push(new Pixel(row, col));\n\t}\n});\n\n// file:src/parsing/schm.js\nBoxParser.createFullBoxCtor(\"schm\", \"SchemeTypeBox\", function(stream) {\n\tthis.scheme_type = stream.readString(4);\n\tthis.scheme_version = stream.readUint32();\n\tif (this.flags & 0x000001) {\n\t\tthis.scheme_uri = stream.readString(this.size - this.hdr_size - 8);\n\t}\n});\n\n// file:src/parsing/sdp.js\nBoxParser.createBoxCtor(\"sdp \", \"rtptracksdphintinformation\", function(stream) {\n\tthis.sdptext = stream.readString(this.size - this.hdr_size);\n});\n\n// file:src/parsing/sdtp.js\nBoxParser.createFullBoxCtor(\"sdtp\", \"SampleDependencyTypeBox\", function(stream) {\n\tvar tmp_byte;\n\tvar count = (this.size - this.hdr_size);\n\tthis.is_leading = [];\n\tthis.sample_depends_on = [];\n\tthis.sample_is_depended_on = [];\n\tthis.sample_has_redundancy = [];\n\tfor (var i = 0; i < count; i++) {\n\t\ttmp_byte = stream.readUint8();\n\t\tthis.is_leading[i] = tmp_byte >> 6;\n\t\tthis.sample_depends_on[i] = (tmp_byte >> 4) & 0x3;\n\t\tthis.sample_is_depended_on[i] = (tmp_byte >> 2) & 0x3;\n\t\tthis.sample_has_redundancy[i] = tmp_byte & 0x3;\n\t}\n});\n\n// file:src/parsing/senc.js\n// Cannot be fully parsed because Per_Sample_IV_Size needs to be known\r\nBoxParser.createFullBoxCtor(\"senc\", \"SampleEncryptionBox\" /*, function(stream) {\r\n\tthis.parseFullHeader(stream);\r\n\tvar sample_count = stream.readUint32();\r\n\tthis.samples = [];\r\n\tfor (var i = 0; i < sample_count; i++) {\r\n\t\tvar sample = {};\r\n\t\t// tenc.default_Per_Sample_IV_Size or seig.Per_Sample_IV_Size\r\n\t\tsample.InitializationVector = this.readUint8Array(Per_Sample_IV_Size*8);\r\n\t\tif (this.flags & 0x2) {\r\n\t\t\tsample.subsamples = [];\r\n\t\t\tsubsample_count = stream.readUint16();\r\n\t\t\tfor (var j = 0; j < subsample_count; j++) {\r\n\t\t\t\tvar subsample = {};\r\n\t\t\t\tsubsample.BytesOfClearData = stream.readUint16();\r\n\t\t\t\tsubsample.BytesOfProtectedData = stream.readUint32();\r\n\t\t\t\tsample.subsamples.push(subsample);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// TODO\r\n\t\tthis.samples.push(sample);\r\n\t}\r\n}*/);\r\n// file:src/parsing/sgpd.js\nBoxParser.createFullBoxCtor(\"sgpd\", \"SampleGroupDescriptionBox\", function(stream) {\n\tthis.grouping_type = stream.readString(4);\n\tLog.debug(\"BoxParser\", \"Found Sample Groups of type \"+this.grouping_type);\n\tif (this.version === 1) {\n\t\tthis.default_length = stream.readUint32();\n\t} else {\n\t\tthis.default_length = 0;\n\t}\n\tif (this.version >= 2) {\n\t\tthis.default_group_description_index = stream.readUint32();\n\t}\n\tthis.entries = [];\n\tvar entry_count = stream.readUint32();\n\tfor (var i = 0; i < entry_count; i++) {\n\t\tvar entry;\n\t\tif (BoxParser[this.grouping_type+\"SampleGroupEntry\"]) {\n\t\t\tentry = new BoxParser[this.grouping_type+\"SampleGroupEntry\"](this.grouping_type);\n\t\t}  else {\n\t\t\tentry = new BoxParser.SampleGroupEntry(this.grouping_type);\n\t\t}\n\t\tthis.entries.push(entry);\n\t\tif (this.version === 1) {\n\t\t\tif (this.default_length === 0) {\n\t\t\t\tentry.description_length = stream.readUint32();\n\t\t\t} else {\n\t\t\t\tentry.description_length = this.default_length;\n\t\t\t}\n\t\t} else {\n\t\t\tentry.description_length = this.default_length;\n\t\t}\n\t\tif (entry.write === BoxParser.SampleGroupEntry.prototype.write) {\n\t\t\tLog.info(\"BoxParser\", \"SampleGroup for type \"+this.grouping_type+\" writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\t\t// storing data\n\t\t\tentry.data = stream.readUint8Array(entry.description_length);\n\t\t\t// rewinding\n\t\t\tstream.position -= entry.description_length;\n\t\t}\n\t\tentry.parse(stream);\n\t}\n});\n\n// file:src/parsing/sidx.js\nBoxParser.createFullBoxCtor(\"sidx\", \"CompressedSegmentIndexBox\", function(stream) {\n\tthis.reference_ID = stream.readUint32();\n\tthis.timescale = stream.readUint32();\n\tif (this.version === 0) {\n\t\tthis.earliest_presentation_time = stream.readUint32();\n\t\tthis.first_offset = stream.readUint32();\n\t} else {\n\t\tthis.earliest_presentation_time = stream.readUint64();\n\t\tthis.first_offset = stream.readUint64();\n\t}\n\tstream.readUint16();\n\tthis.references = [];\n\tvar count = stream.readUint16();\n\tfor (var i = 0; i < count; i++) {\n\t\tvar ref = {};\n\t\tthis.references.push(ref);\n\t\tvar tmp_32 = stream.readUint32();\n\t\tref.reference_type = (tmp_32 >> 31) & 0x1;\n\t\tref.referenced_size = tmp_32 & 0x7FFFFFFF;\n\t\tref.subsegment_duration = stream.readUint32();\n\t\ttmp_32 = stream.readUint32();\n\t\tref.starts_with_SAP = (tmp_32 >> 31) & 0x1;\n\t\tref.SAP_type = (tmp_32 >> 28) & 0x7;\n\t\tref.SAP_delta_time = tmp_32 & 0xFFFFFFF;\n\t}\n});\n\n// file:src/parsing/singleitemtypereference.js\nBoxParser.SingleItemTypeReferenceBox = function(type, size, hdr_size, start) {\n\tBoxParser.Box.call(this, type, size);\n\tthis.hdr_size = hdr_size;\n\tthis.start = start;\n}\nBoxParser.SingleItemTypeReferenceBox.prototype = new BoxParser.Box();\nBoxParser.SingleItemTypeReferenceBox.prototype.parse = function(stream) {\n\tthis.from_item_ID = stream.readUint16();\n\tvar count =  stream.readUint16();\n\tthis.references = [];\n\tfor(var i = 0; i < count; i++) {\n\t\tthis.references[i] = {};\n\t\tthis.references[i].to_item_ID = stream.readUint16();\n\t}\n}\n\n// file:src/parsing/singleitemtypereferencelarge.js\nBoxParser.SingleItemTypeReferenceBoxLarge = function(type, size, hdr_size, start) {\n\tBoxParser.Box.call(this, type, size);\n\tthis.hdr_size = hdr_size;\n\tthis.start = start;\n}\nBoxParser.SingleItemTypeReferenceBoxLarge.prototype = new BoxParser.Box();\nBoxParser.SingleItemTypeReferenceBoxLarge.prototype.parse = function(stream) {\n\tthis.from_item_ID = stream.readUint32();\n\tvar count =  stream.readUint16();\n\tthis.references = [];\n\tfor(var i = 0; i < count; i++) {\n\t\tthis.references[i] = {};\n\t\tthis.references[i].to_item_ID = stream.readUint32();\n\t}\n}\n\n// file:src/parsing/SmDm.js\nBoxParser.createFullBoxCtor(\"SmDm\", \"SMPTE2086MasteringDisplayMetadataBox\", function(stream) {\n\tthis.primaryRChromaticity_x = stream.readUint16();\n    this.primaryRChromaticity_y = stream.readUint16();\n    this.primaryGChromaticity_x = stream.readUint16();\n    this.primaryGChromaticity_y = stream.readUint16();\n    this.primaryBChromaticity_x = stream.readUint16();\n    this.primaryBChromaticity_y = stream.readUint16();\n    this.whitePointChromaticity_x = stream.readUint16();\n    this.whitePointChromaticity_y = stream.readUint16();\n    this.luminanceMax = stream.readUint32();\n    this.luminanceMin = stream.readUint32();\n});\n\n// file:src/parsing/smhd.js\nBoxParser.createFullBoxCtor(\"smhd\", \"SoundMediaHeaderBox\", function(stream) {\n\tthis.balance = stream.readUint16();\n\tstream.readUint16();\n});\n\n// file:src/parsing/ssix.js\nBoxParser.createFullBoxCtor(\"ssix\", \"CompressedSubsegmentIndexBox\", function(stream) {\n\tthis.subsegments = [];\n\tvar subsegment_count = stream.readUint32();\n\tfor (var i = 0; i < subsegment_count; i++) {\n\t\tvar subsegment = {};\n\t\tthis.subsegments.push(subsegment);\n\t\tsubsegment.ranges = [];\n\t\tvar range_count = stream.readUint32();\n\t\tfor (var j = 0; j < range_count; j++) {\n\t\t\tvar range = {};\n\t\t\tsubsegment.ranges.push(range);\n\t\t\trange.level = stream.readUint8();\n\t\t\trange.range_size = stream.readUint24();\n\t\t}\n\t}\n});\n\n// file:src/parsing/stco.js\nBoxParser.createFullBoxCtor(\"stco\", \"ChunkOffsetBox\", function(stream) {\n\tvar entry_count;\n\tentry_count = stream.readUint32();\n\tthis.chunk_offsets = [];\n\tif (this.version === 0) {\n\t\tfor (var i = 0; i < entry_count; i++) {\n\t\t\tthis.chunk_offsets.push(stream.readUint32());\n\t\t}\n\t}\n});\n\n// file:src/parsing/stdp.js\nBoxParser.createFullBoxCtor(\"stdp\", \"DegradationPriorityBox\", function(stream) {\n\tvar count = (this.size - this.hdr_size)/2;\n\tthis.priority = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.priority[i] = stream.readUint16();\n\t}\n});\n\n// file:src/parsing/sthd.js\nBoxParser.createFullBoxCtor(\"sthd\", \"SubtitleMediaHeaderBox\");\n\n// file:src/parsing/stri.js\nBoxParser.createFullBoxCtor(\"stri\", \"SubTrackInformationBox\", function(stream) {\n\tthis.switch_group = stream.readUint16();\n\tthis.alternate_group = stream.readUint16();\n\tthis.sub_track_id = stream.readUint32();\n\tvar count = (this.size - this.hdr_size - 8)/4;\n\tthis.attribute_list = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.attribute_list[i] = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/stsc.js\nBoxParser.createFullBoxCtor(\"stsc\", \"SampleToChunkBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tentry_count = stream.readUint32();\n\tthis.first_chunk = [];\n\tthis.samples_per_chunk = [];\n\tthis.sample_description_index = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.first_chunk.push(stream.readUint32());\n\t\t\tthis.samples_per_chunk.push(stream.readUint32());\n\t\t\tthis.sample_description_index.push(stream.readUint32());\n\t\t}\n\t}\n});\n\n// file:src/parsing/stsd.js\nBoxParser.createFullBoxCtor(\"stsd\", \"SampleDescriptionBox\", function(stream) {\n\tvar i;\n\tvar ret;\n\tvar entryCount;\n\tvar box;\n\tthis.entries = [];\n\tentryCount = stream.readUint32();\n\tfor (i = 1; i <= entryCount; i++) {\n\t\tret = BoxParser.parseOneBox(stream, true, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tif (BoxParser[ret.type+\"SampleEntry\"]) {\n\t\t\t\tbox = new BoxParser[ret.type+\"SampleEntry\"](ret.size);\n\t\t\t\tbox.hdr_size = ret.hdr_size;\n\t\t\t\tbox.start = ret.start;\n\t\t\t} else {\n\t\t\t\tLog.warn(\"BoxParser\", \"Unknown sample entry type: \"+ret.type);\n\t\t\t\tbox = new BoxParser.SampleEntry(ret.type, ret.size, ret.hdr_size, ret.start);\n\t\t\t}\n\t\t\tif (box.write === BoxParser.SampleEntry.prototype.write) {\n\t\t\t\tLog.info(\"BoxParser\", \"SampleEntry \"+box.type+\" box writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\t\t\tbox.parseDataAndRewind(stream);\n\t\t\t}\n\t\t\tbox.parse(stream);\n\t\t\tthis.entries.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/stsg.js\nBoxParser.createFullBoxCtor(\"stsg\", \"SubTrackSampleGroupBox\", function(stream) {\n\tthis.grouping_type = stream.readUint32();\n\tvar count = stream.readUint16();\n\tthis.group_description_index = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.group_description_index[i] = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/stsh.js\nBoxParser.createFullBoxCtor(\"stsh\", \"ShadowSyncSampleBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tentry_count = stream.readUint32();\n\tthis.shadowed_sample_numbers = [];\n\tthis.sync_sample_numbers = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.shadowed_sample_numbers.push(stream.readUint32());\n\t\t\tthis.sync_sample_numbers.push(stream.readUint32());\n\t\t}\n\t}\n});\n\n// file:src/parsing/stss.js\nBoxParser.createFullBoxCtor(\"stss\", \"SyncSampleBox\", function(stream) {\n\tvar i;\n\tvar entry_count;\n\tentry_count = stream.readUint32();\n\tif (this.version === 0) {\n\t\tthis.sample_numbers = [];\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.sample_numbers.push(stream.readUint32());\n\t\t}\n\t}\n});\n\n// file:src/parsing/stsz.js\nBoxParser.createFullBoxCtor(\"stsz\", \"SampleSizeBox\", function(stream) {\n\tvar i;\n\tthis.sample_sizes = [];\n\tif (this.version === 0) {\n\t\tthis.sample_size = stream.readUint32();\n\t\tthis.sample_count = stream.readUint32();\n\t\tfor (i = 0; i < this.sample_count; i++) {\n\t\t\tif (this.sample_size === 0) {\n\t\t\t\tthis.sample_sizes.push(stream.readUint32());\n\t\t\t} else {\n\t\t\t\tthis.sample_sizes[i] = this.sample_size;\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/stts.js\nBoxParser.createFullBoxCtor(\"stts\", \"TimeToSampleBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tvar delta;\n\tentry_count = stream.readUint32();\n\tthis.sample_counts = [];\n\tthis.sample_deltas = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.sample_counts.push(stream.readUint32());\n\t\t\tdelta = stream.readInt32();\n\t\t\tif (delta < 0) {\n\t\t\t\tLog.warn(\"BoxParser\", \"File uses negative stts sample delta, using value 1 instead, sync may be lost!\");\n\t\t\t\tdelta = 1;\n\t\t\t}\n\t\t\tthis.sample_deltas.push(delta);\n\t\t}\n\t}\n});\n\n// file:src/parsing/stvi.js\nBoxParser.createFullBoxCtor(\"stvi\", \"StereoVideoBox\", function(stream) {\n\tvar tmp32 = stream.readUint32();\n\tthis.single_view_allowed = tmp32 & 0x3;\n\tthis.stereo_scheme = stream.readUint32();\n\tvar length = stream.readUint32();\n\tthis.stereo_indication_type = stream.readString(length);\n\tvar ret;\n\tvar box;\n\tthis.boxes = [];\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = ret.box;\n\t\t\tthis.boxes.push(box);\n\t\t\tthis[box.type] = box;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/styp.js\nBoxParser.createBoxCtor(\"styp\", \"SegmentTypeBox\", function(stream) {\n\tBoxParser.ftypBox.prototype.parse.call(this, stream);\n});\n\n// file:src/parsing/stz2.js\nBoxParser.createFullBoxCtor(\"stz2\", \"CompactSampleSizeBox\", function(stream) {\n\tvar i;\n\tvar sample_size;\n\tvar sample_count;\n\tthis.sample_sizes = [];\n\tif (this.version === 0) {\n\t\tthis.reserved = stream.readUint24();\n\t\tthis.field_size = stream.readUint8();\n\t\tsample_count = stream.readUint32();\n\t\tif (this.field_size === 4) {\n\t\t\tfor (i = 0; i < sample_count; i+=2) {\n\t\t\t\tvar tmp = stream.readUint8();\n\t\t\t\tthis.sample_sizes[i] = (tmp >> 4) & 0xF;\n\t\t\t\tthis.sample_sizes[i+1] = tmp & 0xF;\n\t\t\t}\n\t\t} else if (this.field_size === 8) {\n\t\t\tfor (i = 0; i < sample_count; i++) {\n\t\t\t\tthis.sample_sizes[i] = stream.readUint8();\n\t\t\t}\n\t\t} else if (this.field_size === 16) {\n\t\t\tfor (i = 0; i < sample_count; i++) {\n\t\t\t\tthis.sample_sizes[i] = stream.readUint16();\n\t\t\t}\n\t\t} else {\n\t\t\tLog.error(\"BoxParser\", \"Error in length field in stz2 box\");\n\t\t}\n\t}\n});\n\n// file:src/parsing/subs.js\nBoxParser.createFullBoxCtor(\"subs\", \"SubSampleInformationBox\", function(stream) {\n\tvar i,j;\n\tvar entry_count;\n\tvar subsample_count;\n\tentry_count = stream.readUint32();\n\tthis.entries = [];\n\tfor (i = 0; i < entry_count; i++) {\n\t\tvar sampleInfo = {};\n\t\tthis.entries[i] = sampleInfo;\n\t\tsampleInfo.sample_delta = stream.readUint32();\n\t\tsampleInfo.subsamples = [];\n\t\tsubsample_count = stream.readUint16();\n\t\tif (subsample_count>0) {\n\t\t\tfor (j = 0; j < subsample_count; j++) {\n\t\t\t\tvar subsample = {};\n\t\t\t\tsampleInfo.subsamples.push(subsample);\n\t\t\t\tif (this.version == 1) {\n\t\t\t\t\tsubsample.size = stream.readUint32();\n\t\t\t\t} else {\n\t\t\t\t\tsubsample.size = stream.readUint16();\n\t\t\t\t}\n\t\t\t\tsubsample.priority = stream.readUint8();\n\t\t\t\tsubsample.discardable = stream.readUint8();\n\t\t\t\tsubsample.codec_specific_parameters = stream.readUint32();\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/tenc.js\nBoxParser.createFullBoxCtor(\"tenc\", \"TrackEncryptionBox\", function(stream) {\n\tstream.readUint8(); // reserved\n\tif (this.version === 0) {\n\t\tstream.readUint8();\n\t} else {\n\t\tvar tmp = stream.readUint8();\n\t\tthis.default_crypt_byte_block = (tmp >> 4) & 0xF;\n\t\tthis.default_skip_byte_block = tmp & 0xF;\n\t}\n\tthis.default_isProtected = stream.readUint8();\n\tthis.default_Per_Sample_IV_Size = stream.readUint8();\n\tthis.default_KID = BoxParser.parseHex16(stream);\n\tif (this.default_isProtected === 1 && this.default_Per_Sample_IV_Size === 0) {\n\t\tthis.default_constant_IV_size = stream.readUint8();\n\t\tthis.default_constant_IV = stream.readUint8Array(this.default_constant_IV_size);\n\t}\n});// file:src/parsing/tfdt.js\nBoxParser.createFullBoxCtor(\"tfdt\", \"TrackFragmentBaseMediaDecodeTimeBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.baseMediaDecodeTime = stream.readUint64();\n\t} else {\n\t\tthis.baseMediaDecodeTime = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/tfhd.js\nBoxParser.createFullBoxCtor(\"tfhd\", \"TrackFragmentHeaderBox\", function(stream) {\n\tvar readBytes = 0;\n\tthis.track_id = stream.readUint32();\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_BASE_DATA_OFFSET)) {\n\t\tthis.base_data_offset = stream.readUint64();\n\t\treadBytes += 8;\n\t} else {\n\t\tthis.base_data_offset = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DESC)) {\n\t\tthis.default_sample_description_index = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.default_sample_description_index = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DUR)) {\n\t\tthis.default_sample_duration = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.default_sample_duration = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_SAMPLE_SIZE)) {\n\t\tthis.default_sample_size = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.default_sample_size = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_SAMPLE_FLAGS)) {\n\t\tthis.default_sample_flags = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.default_sample_flags = 0;\n\t}\n});\n\n// file:src/parsing/tfra.js\nBoxParser.createFullBoxCtor(\"tfra\", \"TrackFragmentRandomAccessBox\", function(stream) {\n\tthis.track_ID = stream.readUint32();\n\tstream.readUint24();\n\tvar tmp_byte = stream.readUint8();\n\tthis.length_size_of_traf_num = (tmp_byte >> 4) & 0x3;\n\tthis.length_size_of_trun_num = (tmp_byte >> 2) & 0x3;\n\tthis.length_size_of_sample_num = (tmp_byte) & 0x3;\n\tthis.entries = [];\n\tvar number_of_entries = stream.readUint32();\n\tfor (var i = 0; i < number_of_entries; i++) {\n\t\tif (this.version === 1) {\n\t\t\tthis.time = stream.readUint64();\n\t\t\tthis.moof_offset = stream.readUint64();\n\t\t} else {\n\t\t\tthis.time = stream.readUint32();\n\t\t\tthis.moof_offset = stream.readUint32();\n\t\t}\n\t\tthis.traf_number = stream[\"readUint\"+(8*(this.length_size_of_traf_num+1))]();\n\t\tthis.trun_number = stream[\"readUint\"+(8*(this.length_size_of_trun_num+1))]();\n\t\tthis.sample_number = stream[\"readUint\"+(8*(this.length_size_of_sample_num+1))]();\n\t}\n});\n\n// file:src/parsing/tkhd.js\nBoxParser.createFullBoxCtor(\"tkhd\", \"TrackHeaderBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.creation_time = stream.readUint64();\n\t\tthis.modification_time = stream.readUint64();\n\t\tthis.track_id = stream.readUint32();\n\t\tstream.readUint32();\n\t\tthis.duration = stream.readUint64();\n\t} else {\n\t\tthis.creation_time = stream.readUint32();\n\t\tthis.modification_time = stream.readUint32();\n\t\tthis.track_id = stream.readUint32();\n\t\tstream.readUint32();\n\t\tthis.duration = stream.readUint32();\n\t}\n\tstream.readUint32Array(2);\n\tthis.layer = stream.readInt16();\n\tthis.alternate_group = stream.readInt16();\n\tthis.volume = stream.readInt16()>>8;\n\tstream.readUint16();\n\tthis.matrix = stream.readInt32Array(9);\n\tthis.width = stream.readUint32();\n\tthis.height = stream.readUint32();\n});\n\n// file:src/parsing/tmax.js\nBoxParser.createBoxCtor(\"tmax\", \"hintmaxrelativetime\", function(stream) {\n\tthis.time = stream.readUint32();\n});\n\n// file:src/parsing/tmin.js\nBoxParser.createBoxCtor(\"tmin\", \"hintminrelativetime\", function(stream) {\n\tthis.time = stream.readUint32();\n});\n\n// file:src/parsing/totl.js\nBoxParser.createBoxCtor(\"totl\", \"hintBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint32();\n});\n\n// file:src/parsing/tpay.js\nBoxParser.createBoxCtor(\"tpay\", \"hintBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint32();\n});\n\n// file:src/parsing/tpyl.js\nBoxParser.createBoxCtor(\"tpyl\", \"hintBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/TrackGroup.js\nBoxParser.TrackGroupTypeBox.prototype.parse = function(stream) {\n\tthis.parseFullHeader(stream);\n\tthis.track_group_id = stream.readUint32();\n}\n\n// file:src/parsing/trackgroups/msrc.js\nBoxParser.createTrackGroupCtor(\"msrc\");// file:src/parsing/TrakReference.js\nBoxParser.TrackReferenceTypeBox = function(type, size, hdr_size, start) {\n\tBoxParser.Box.call(this, type, size);\n\tthis.hdr_size = hdr_size;\n\tthis.start = start;\n}\nBoxParser.TrackReferenceTypeBox.prototype = new BoxParser.Box();\nBoxParser.TrackReferenceTypeBox.prototype.parse = function(stream) {\n\tthis.track_ids = stream.readUint32Array((this.size-this.hdr_size)/4);\n}\n\n// file:src/parsing/tref.js\nBoxParser.trefBox.prototype.parse = function(stream) {\n\tvar ret;\n\tvar box;\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, true, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = new BoxParser.TrackReferenceTypeBox(ret.type, ret.size, ret.hdr_size, ret.start);\n\t\t\tif (box.write === BoxParser.Box.prototype.write && box.type !== \"mdat\") {\n\t\t\t\tLog.info(\"BoxParser\", \"TrackReference \"+box.type+\" box writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\t\t\tbox.parseDataAndRewind(stream);\n\t\t\t}\n\t\t\tbox.parse(stream);\n\t\t\tthis.boxes.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n}\n\n// file:src/parsing/trep.js\nBoxParser.createFullBoxCtor(\"trep\", \"TrackExtensionPropertiesBox\", function(stream) {\n\tthis.track_ID = stream.readUint32();\n\tthis.boxes = [];\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = ret.box;\n\t\t\tthis.boxes.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/trex.js\nBoxParser.createFullBoxCtor(\"trex\", \"TrackExtendsBox\", function(stream) {\n\tthis.track_id = stream.readUint32();\n\tthis.default_sample_description_index = stream.readUint32();\n\tthis.default_sample_duration = stream.readUint32();\n\tthis.default_sample_size = stream.readUint32();\n\tthis.default_sample_flags = stream.readUint32();\n});\n\n// file:src/parsing/trpy.js\nBoxParser.createBoxCtor(\"trpy\", \"hintBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/trun.js\nBoxParser.createFullBoxCtor(\"trun\", \"TrackRunBox\", function(stream) {\n\tvar readBytes = 0;\n\tthis.sample_count = stream.readUint32();\n\treadBytes+= 4;\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TRUN_FLAGS_DATA_OFFSET) ) {\n\t\tthis.data_offset = stream.readInt32(); //signed\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.data_offset = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TRUN_FLAGS_FIRST_FLAG) ) {\n\t\tthis.first_sample_flags = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.first_sample_flags = 0;\n\t}\n\tthis.sample_duration = [];\n\tthis.sample_size = [];\n\tthis.sample_flags = [];\n\tthis.sample_composition_time_offset = [];\n\tif (this.size - this.hdr_size > readBytes) {\n\t\tfor (var i = 0; i < this.sample_count; i++) {\n\t\t\tif (this.flags & BoxParser.TRUN_FLAGS_DURATION) {\n\t\t\t\tthis.sample_duration[i] = stream.readUint32();\n\t\t\t}\n\t\t\tif (this.flags & BoxParser.TRUN_FLAGS_SIZE) {\n\t\t\t\tthis.sample_size[i] = stream.readUint32();\n\t\t\t}\n\t\t\tif (this.flags & BoxParser.TRUN_FLAGS_FLAGS) {\n\t\t\t\tthis.sample_flags[i] = stream.readUint32();\n\t\t\t}\n\t\t\tif (this.flags & BoxParser.TRUN_FLAGS_CTS_OFFSET) {\n\t\t\t\tif (this.version === 0) {\n\t\t\t\t\tthis.sample_composition_time_offset[i] = stream.readUint32();\n\t\t\t\t} else {\n\t\t\t\t\tthis.sample_composition_time_offset[i] = stream.readInt32(); //signed\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/tsel.js\nBoxParser.createFullBoxCtor(\"tsel\", \"TrackSelectionBox\", function(stream) {\n\tthis.switch_group = stream.readUint32();\n\tvar count = (this.size - this.hdr_size - 4)/4;\n\tthis.attribute_list = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.attribute_list[i] = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/txtC.js\nBoxParser.createFullBoxCtor(\"txtC\", \"TextConfigBox\", function(stream) {\n\tthis.config = stream.readCString();\n});\n\n// file:src/parsing/tyco.js\nBoxParser.createBoxCtor(\"tyco\", \"TypeCombinationBox\", function(stream) {\n\tvar count = (this.size - this.hdr_size) / 4;\n\tthis.compatible_brands = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.compatible_brands[i] = stream.readString(4);\n\t}\n});\n\n// file:src/parsing/udes.js\nBoxParser.createFullBoxCtor(\"udes\", \"UserDescriptionProperty\", function(stream) {\n\tthis.lang = stream.readCString();\n\tthis.name = stream.readCString();\n\tthis.description = stream.readCString();\n\tthis.tags = stream.readCString();\n});\n\n// file:src/parsing/uncC.js\nBoxParser.createFullBoxCtor(\"uncC\", \"UncompressedFrameConfigBox\", function(stream) {\n    var i;\n    this.profile = stream.readString(4);\n    if (this.version == 1) {\n        // Nothing - just the profile\n    } else if (this.version == 0) {\n        this.component_count = stream.readUint32();\n        this.component_index = [];\n        this.component_bit_depth_minus_one = [];\n        this.component_format = [];\n        this.component_align_size = [];\n        for (i = 0; i < this.component_count; i++) {\n            this.component_index.push(stream.readUint16());\n            this.component_bit_depth_minus_one.push(stream.readUint8());\n            this.component_format.push(stream.readUint8());\n            this.component_align_size.push(stream.readUint8());\n        }\n        this.sampling_type = stream.readUint8();\n        this.interleave_type = stream.readUint8();\n        this.block_size = stream.readUint8();\n        var flags = stream.readUint8();\n        this.component_little_endian = (flags >> 7) & 0x1;\n        this.block_pad_lsb = (flags >> 6) & 0x1;\n        this.block_little_endian = (flags >> 5) & 0x1;\n        this.block_reversed = (flags >> 4) & 0x1;\n        this.pad_unknown = (flags >> 3) & 0x1;\n        this.pixel_size = stream.readUint32();\n        this.row_align_size = stream.readUint32();\n        this.tile_align_size = stream.readUint32();\n        this.num_tile_cols_minus_one = stream.readUint32();\n        this.num_tile_rows_minus_one = stream.readUint32();\n    }\n});\n\n// file:src/parsing/url.js\nBoxParser.createFullBoxCtor(\"url \", \"DataEntryUrlBox\", function(stream) {\n\tif (this.flags !== 0x000001) {\n\t\tthis.location = stream.readCString();\n\t}\n});\n\n// file:src/parsing/urn.js\nBoxParser.createFullBoxCtor(\"urn \", \"DataEntryUrnBox\", function(stream) {\n\tthis.name = stream.readCString();\n\tif (this.size - this.hdr_size - this.name.length - 1 > 0) {\n\t\tthis.location = stream.readCString();\n\t}\n});\n\n// file:src/parsing/uuid/piff/piffLsm.js\nBoxParser.createUUIDBox(\"a5d40b30e81411ddba2f0800200c9a66\", \"LiveServerManifestBox\", true, false, function(stream) {\n    this.LiveServerManifest = stream.readString(this.size - this.hdr_size)\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#039;\");\n});// file:src/parsing/uuid/piff/piffPssh.js\nBoxParser.createUUIDBox(\"d08a4f1810f34a82b6c832d8aba183d3\", \"PiffProtectionSystemSpecificHeaderBox\", true, false, function(stream) {\n\tthis.system_id = BoxParser.parseHex16(stream);\n\tvar datasize = stream.readUint32();\n\tif (datasize > 0) {\n\t\tthis.data = stream.readUint8Array(datasize);\n\t}\n});\n\n// file:src/parsing/uuid/piff/piffSenc.js\nBoxParser.createUUIDBox(\"a2394f525a9b4f14a2446c427c648df4\", \"PiffSampleEncryptionBox\", true, false /*, function(stream) {\n\tif (this.flags & 0x1) {\n\t\tthis.AlgorithmID = stream.readUint24();\n\t\tthis.IV_size = stream.readUint8();\n\t\tthis.KID = BoxParser.parseHex16(stream);\n\t}\n\tvar sample_count = stream.readUint32();\n\tthis.samples = [];\n\tfor (var i = 0; i < sample_count; i++) {\n\t\tvar sample = {};\n\t\tsample.InitializationVector = this.readUint8Array(this.IV_size*8);\n\t\tif (this.flags & 0x2) {\n\t\t\tsample.subsamples = [];\n\t\t\tsample.NumberOfEntries = stream.readUint16();\n\t\t\tfor (var j = 0; j < sample.NumberOfEntries; j++) {\n\t\t\t\tvar subsample = {};\n\t\t\t\tsubsample.BytesOfClearData = stream.readUint16();\n\t\t\t\tsubsample.BytesOfProtectedData = stream.readUint32();\n\t\t\t\tsample.subsamples.push(subsample);\n\t\t\t}\n\t\t}\n\t\tthis.samples.push(sample);\n\t}\n}*/);\n// file:src/parsing/uuid/piff/piffTenc.js\nBoxParser.createUUIDBox(\"8974dbce7be74c5184f97148f9882554\", \"PiffTrackEncryptionBox\", true, false, function(stream) {\n\tthis.default_AlgorithmID = stream.readUint24();\n\tthis.default_IV_size = stream.readUint8();\n\tthis.default_KID = BoxParser.parseHex16(stream);\n});// file:src/parsing/uuid/piff/piffTfrf.js\nBoxParser.createUUIDBox(\"d4807ef2ca3946958e5426cb9e46a79f\", \"TfrfBox\", true, false, function(stream) {\n    this.fragment_count = stream.readUint8();\n    this.entries = [];\n\n    for (var i = 0; i < this.fragment_count; i++) {\n        var entry = {};\n        var absolute_time = 0;\n        var absolute_duration = 0;\n\n        if (this.version === 1) {\n            absolute_time = stream.readUint64();\n            absolute_duration = stream.readUint64();\n        } else {\n            absolute_time = stream.readUint32();\n            absolute_duration = stream.readUint32();\n        }\n\n        entry.absolute_time = absolute_time;\n        entry.absolute_duration = absolute_duration;\n\n        this.entries.push(entry);\n    }\n});// file:src/parsing/uuid/piff/piffTfxd.js\nBoxParser.createUUIDBox(\"6d1d9b0542d544e680e2141daff757b2\", \"TfxdBox\", true, false, function(stream) {\n    if (this.version === 1) {\n       this.absolute_time = stream.readUint64();\n       this.duration = stream.readUint64();\n    } else {\n       this.absolute_time = stream.readUint32();\n       this.duration = stream.readUint32();\n    }\n});// file:src/parsing/vmhd.js\nBoxParser.createFullBoxCtor(\"vmhd\", \"VideoMediaHeaderBox\", function(stream) {\n\tthis.graphicsmode = stream.readUint16();\n\tthis.opcolor = stream.readUint16Array(3);\n});\n\n// file:src/parsing/vpcC.js\nBoxParser.createFullBoxCtor(\"vpcC\", \"VPCodecConfigurationRecord\", function (stream) {\n\tvar tmp;\n\tif (this.version === 1) {\n\t\tthis.profile = stream.readUint8();\n\t\tthis.level = stream.readUint8();\n\t\ttmp = stream.readUint8();\n\t\tthis.bitDepth = tmp >> 4;\n\t\tthis.chromaSubsampling = (tmp >> 1) & 0x7;\n\t\tthis.videoFullRangeFlag = tmp & 0x1;\n\t\tthis.colourPrimaries = stream.readUint8();\n\t\tthis.transferCharacteristics = stream.readUint8();\n\t\tthis.matrixCoefficients = stream.readUint8();\n\t\tthis.codecIntializationDataSize = stream.readUint16();\n\t\tthis.codecIntializationData = stream.readUint8Array(this.codecIntializationDataSize);\n\t} else {\n\t\tthis.profile = stream.readUint8();\n\t\tthis.level = stream.readUint8();\n\t\ttmp = stream.readUint8();\n\t\tthis.bitDepth = (tmp >> 4) & 0xF;\n\t\tthis.colorSpace = tmp & 0xF;\n\t\ttmp = stream.readUint8();\n\t\tthis.chromaSubsampling = (tmp >> 4) & 0xF;\n\t\tthis.transferFunction = (tmp >> 1) & 0x7;\n\t\tthis.videoFullRangeFlag = tmp & 0x1;\n\t\tthis.codecIntializationDataSize = stream.readUint16();\n\t\tthis.codecIntializationData = stream.readUint8Array(this.codecIntializationDataSize);\n\t}\n});// file:src/parsing/vttC.js\nBoxParser.createBoxCtor(\"vttC\", \"WebVTTConfigurationBox\", function(stream) {\n\tthis.text = stream.readString(this.size - this.hdr_size);\n});\n\n// file:src/parsing/vvcC.js\nBoxParser.createFullBoxCtor(\"vvcC\", \"VvcConfigurationBox\", function (stream) {\n  var i, j;\n\n  // helper object to simplify extracting individual bits\n  var bitReader = {\n    held_bits: undefined,\n    num_held_bits: 0,\n\n    stream_read_1_bytes: function (strm) {\n      this.held_bits = strm.readUint8();\n      this.num_held_bits = 1 * 8;\n    },\n    stream_read_2_bytes: function (strm) {\n      this.held_bits = strm.readUint16();\n      this.num_held_bits = 2 * 8;\n    },\n\n    extract_bits: function (num_bits) {\n      var ret = (this.held_bits >> (this.num_held_bits - num_bits)) & ((1 << num_bits) - 1);\n      this.num_held_bits -= num_bits;\n      return ret;\n    }\n  };\n\n  // VvcDecoderConfigurationRecord\n  bitReader.stream_read_1_bytes(stream);\n  bitReader.extract_bits(5);  // reserved\n  this.lengthSizeMinusOne = bitReader.extract_bits(2);\n  this.ptl_present_flag = bitReader.extract_bits(1);\n\n  if (this.ptl_present_flag) {\n    bitReader.stream_read_2_bytes(stream);\n    this.ols_idx = bitReader.extract_bits(9);\n    this.num_sublayers = bitReader.extract_bits(3);\n    this.constant_frame_rate = bitReader.extract_bits(2);\n    this.chroma_format_idc = bitReader.extract_bits(2);\n\n    bitReader.stream_read_1_bytes(stream);\n    this.bit_depth_minus8 = bitReader.extract_bits(3);\n    bitReader.extract_bits(5);  // reserved\n\n    // VvcPTLRecord\n    {\n      bitReader.stream_read_2_bytes(stream);\n      bitReader.extract_bits(2);  // reserved\n      this.num_bytes_constraint_info = bitReader.extract_bits(6);\n      this.general_profile_idc = bitReader.extract_bits(7);\n      this.general_tier_flag = bitReader.extract_bits(1);\n\n      this.general_level_idc = stream.readUint8();\n\n      bitReader.stream_read_1_bytes(stream);\n      this.ptl_frame_only_constraint_flag = bitReader.extract_bits(1);\n      this.ptl_multilayer_enabled_flag = bitReader.extract_bits(1);\n\n      this.general_constraint_info = new Uint8Array(this.num_bytes_constraint_info);\n      if (this.num_bytes_constraint_info) {\n        for (i = 0; i < this.num_bytes_constraint_info - 1; i++) {\n          var cnstr1 = bitReader.extract_bits(6);\n          bitReader.stream_read_1_bytes(stream);\n          var cnstr2 = bitReader.extract_bits(2);\n\n          this.general_constraint_info[i] = ((cnstr1 << 2) | cnstr2);\n        }\n        this.general_constraint_info[this.num_bytes_constraint_info - 1] = bitReader.extract_bits(6);\n      } else {\n        //forbidden in spec!\n        bitReader.extract_bits(6);\n      }\n\n      if (this.num_sublayers > 1) {\n        bitReader.stream_read_1_bytes(stream);\n        this.ptl_sublayer_present_mask = 0;\n        for (j = this.num_sublayers - 2; j >= 0; --j) {\n          var val = bitReader.extract_bits(1);\n          this.ptl_sublayer_present_mask |= val << j;\n        }\n        for (j = this.num_sublayers; j <= 8 && this.num_sublayers > 1; ++j) {\n          bitReader.extract_bits(1);  // ptl_reserved_zero_bit\n        }\n\n        this.sublayer_level_idc = [];\n        for (j = this.num_sublayers - 2; j >= 0; --j) {\n          if (this.ptl_sublayer_present_mask & (1 << j)) {\n            this.sublayer_level_idc[j] = stream.readUint8();\n          }\n        }\n      }\n\n      this.ptl_num_sub_profiles = stream.readUint8();\n      this.general_sub_profile_idc = [];\n      if (this.ptl_num_sub_profiles) {\n        for (i = 0; i < this.ptl_num_sub_profiles; i++) {\n          this.general_sub_profile_idc.push(stream.readUint32());\n        }\n      }\n    }  // end VvcPTLRecord\n\n    this.max_picture_width = stream.readUint16();\n    this.max_picture_height = stream.readUint16();\n    this.avg_frame_rate = stream.readUint16();\n  }\n\n  var VVC_NALU_OPI = 12;\n  var VVC_NALU_DEC_PARAM = 13;\n\n  this.nalu_arrays = [];\n  var num_of_arrays = stream.readUint8();\n  for (i = 0; i < num_of_arrays; i++) {\n    var nalu_array = [];\n    this.nalu_arrays.push(nalu_array);\n\n    bitReader.stream_read_1_bytes(stream);\n    nalu_array.completeness = bitReader.extract_bits(1);\n    bitReader.extract_bits(2);  // reserved\n    nalu_array.nalu_type = bitReader.extract_bits(5);\n\n    var numNalus = 1;\n    if (nalu_array.nalu_type != VVC_NALU_DEC_PARAM && nalu_array.nalu_type != VVC_NALU_OPI) {\n      numNalus = stream.readUint16();\n    }\n\n    for (j = 0; j < numNalus; j++) {\n      var len = stream.readUint16();\n      nalu_array.push({\n        data: stream.readUint8Array(len),\n        length: len\n      });\n    }\n  }\n});\n// file:src/parsing/vvnC.js\nBoxParser.createFullBoxCtor(\"vvnC\", \"VvcNALUConfigBox\", function (stream) {\n  // VvcNALUConfigBox\n  var tmp = strm.readUint8();\n  this.lengthSizeMinusOne = (tmp & 0x3);\n});\n// file:src/box-codecs.js\nBoxParser.SampleEntry.prototype.isVideo = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.isAudio = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.isSubtitle = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.isMetadata = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.isHint = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.getCodec = function() {\n\treturn this.type.replace('.','');\n}\n\nBoxParser.SampleEntry.prototype.getWidth = function() {\n\treturn \"\";\n}\n\nBoxParser.SampleEntry.prototype.getHeight = function() {\n\treturn \"\";\n}\n\nBoxParser.SampleEntry.prototype.getChannelCount = function() {\n\treturn \"\";\n}\n\nBoxParser.SampleEntry.prototype.getSampleRate = function() {\n\treturn \"\";\n}\n\nBoxParser.SampleEntry.prototype.getSampleSize = function() {\n\treturn \"\";\n}\n\nBoxParser.VisualSampleEntry.prototype.isVideo = function() {\n\treturn true;\n}\n\nBoxParser.VisualSampleEntry.prototype.getWidth = function() {\n\treturn this.width;\n}\n\nBoxParser.VisualSampleEntry.prototype.getHeight = function() {\n\treturn this.height;\n}\n\nBoxParser.AudioSampleEntry.prototype.isAudio = function() {\n\treturn true;\n}\n\nBoxParser.AudioSampleEntry.prototype.getChannelCount = function() {\n\treturn this.channel_count;\n}\n\nBoxParser.AudioSampleEntry.prototype.getSampleRate = function() {\n\treturn this.samplerate;\n}\n\nBoxParser.AudioSampleEntry.prototype.getSampleSize = function() {\n\treturn this.samplesize;\n}\n\nBoxParser.SubtitleSampleEntry.prototype.isSubtitle = function() {\n\treturn true;\n}\n\nBoxParser.MetadataSampleEntry.prototype.isMetadata = function() {\n\treturn true;\n}\n\n\nBoxParser.decimalToHex = function(d, padding) {\n\tvar hex = Number(d).toString(16);\n\tpadding = typeof (padding) === \"undefined\" || padding === null ? padding = 2 : padding;\n\twhile (hex.length < padding) {\n\t\thex = \"0\" + hex;\n\t}\n\treturn hex;\n}\n\nBoxParser.avc1SampleEntry.prototype.getCodec =\nBoxParser.avc2SampleEntry.prototype.getCodec =\nBoxParser.avc3SampleEntry.prototype.getCodec =\nBoxParser.avc4SampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif (this.avcC) {\n\t\treturn baseCodec+\".\"+BoxParser.decimalToHex(this.avcC.AVCProfileIndication)+\n\t\t\t\t\t\t  \"\"+BoxParser.decimalToHex(this.avcC.profile_compatibility)+\n\t\t\t\t\t\t  \"\"+BoxParser.decimalToHex(this.avcC.AVCLevelIndication);\n\t} else {\n\t\treturn baseCodec;\n\t}\n}\n\nBoxParser.hev1SampleEntry.prototype.getCodec =\nBoxParser.hvc1SampleEntry.prototype.getCodec = function() {\n\tvar i;\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif (this.hvcC) {\n\t\tbaseCodec += '.';\n\t\tswitch (this.hvcC.general_profile_space) {\n\t\t\tcase 0:\n\t\t\t\tbaseCodec += '';\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tbaseCodec += 'A';\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tbaseCodec += 'B';\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tbaseCodec += 'C';\n\t\t\t\tbreak;\n\t\t}\n\t\tbaseCodec += this.hvcC.general_profile_idc;\n\t\tbaseCodec += '.';\n\t\tvar val = this.hvcC.general_profile_compatibility;\n\t\tvar reversed = 0;\n\t\tfor (i=0; i<32; i++) {\n\t\t\treversed |= val & 1;\n\t\t\tif (i==31) break;\n\t\t\treversed <<= 1;\n\t\t\tval >>=1;\n\t\t}\n\t\tbaseCodec += BoxParser.decimalToHex(reversed, 0);\n\t\tbaseCodec += '.';\n\t\tif (this.hvcC.general_tier_flag === 0) {\n\t\t\tbaseCodec += 'L';\n\t\t} else {\n\t\t\tbaseCodec += 'H';\n\t\t}\n\t\tbaseCodec += this.hvcC.general_level_idc;\n\t\tvar hasByte = false;\n\t\tvar constraint_string = \"\";\n\t\tfor (i = 5; i >= 0; i--) {\n\t\t\tif (this.hvcC.general_constraint_indicator[i] || hasByte) {\n\t\t\t\tconstraint_string = \".\"+BoxParser.decimalToHex(this.hvcC.general_constraint_indicator[i], 0)+constraint_string;\n\t\t\t\thasByte = true;\n\t\t\t}\n\t\t}\n\t\tbaseCodec += constraint_string;\n\t}\n\treturn baseCodec;\n}\n\nBoxParser.vvc1SampleEntry.prototype.getCodec =\nBoxParser.vvi1SampleEntry.prototype.getCodec = function () {\n\tvar i;\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif (this.vvcC) {\n\t\tbaseCodec += '.' + this.vvcC.general_profile_idc;\n\t\tif (this.vvcC.general_tier_flag) {\n\t\t\tbaseCodec += '.H';\n\t\t} else {\n\t\t\tbaseCodec += '.L';\n\t\t}\n\t\tbaseCodec += this.vvcC.general_level_idc;\n\n\t\tvar constraint_string = \"\";\n\t\tif (this.vvcC.general_constraint_info) {\n\t\t\tvar bytes = [];\n\t\t\tvar byte = 0;\n\t\t\tbyte |= this.vvcC.ptl_frame_only_constraint << 7;\n\t\t\tbyte |= this.vvcC.ptl_multilayer_enabled << 6;\n\t\t\tvar last_nonzero;\n\t\t\tfor (i = 0; i < this.vvcC.general_constraint_info.length; ++i) {\n\t\t\t\tbyte |= (this.vvcC.general_constraint_info[i] >> 2) & 0x3f;\n\t\t\t\tbytes.push(byte);\n\t\t\t\tif (byte) {\n\t\t\t\t\tlast_nonzero = i;\n\t\t\t\t}\n\n\t\t\t\tbyte = (this.vvcC.general_constraint_info[i] >> 2) & 0x03;\n\t\t\t}\n\n\t\t\tif (last_nonzero === undefined) {\n\t\t\t\tconstraint_string = \".CA\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconstraint_string = \".C\"\n\t\t\t\tvar base32_chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\n\t\t\t\tvar held_bits = 0;\n\t\t\t\tvar num_held_bits = 0;\n\t\t\t\tfor (i = 0; i <= last_nonzero; ++i) {\n\t\t\t\t\theld_bits = (held_bits << 8) | bytes[i];\n\t\t\t\t\tnum_held_bits += 8;\n\n\t\t\t\t\twhile (num_held_bits >= 5) {\n\t\t\t\t\t\tvar val = (held_bits >> (num_held_bits - 5)) & 0x1f;\n\t\t\t\t\t\tconstraint_string += base32_chars[val];\n\n\t\t\t\t\t\tnum_held_bits -= 5;\n\t\t\t\t\t\theld_bits &= (1 << num_held_bits) - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (num_held_bits) {\n\t\t\t\t\theld_bits <<= (5 - num_held_bits);  // right-pad with zeros to 5 bits (is this correct?)\n\t\t\t\t\tconstraint_string += base32_chars[held_bits & 0x1f];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tbaseCodec += constraint_string;\n\t}\n\treturn baseCodec;\n}\n\nBoxParser.mp4aSampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif (this.esds && this.esds.esd) {\n\t\tvar oti = this.esds.esd.getOTI();\n\t\tvar dsi = this.esds.esd.getAudioConfig();\n\t\treturn baseCodec+\".\"+BoxParser.decimalToHex(oti)+(dsi ? \".\"+dsi: \"\");\n\t} else {\n\t\treturn baseCodec;\n\t}\n}\n\nBoxParser.stxtSampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif(this.mime_format) {\n\t\treturn baseCodec + \".\" + this.mime_format;\n\t} else {\n\t\treturn baseCodec\n\t}\n}\n\nBoxParser.vp08SampleEntry.prototype.getCodec =\nBoxParser.vp09SampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tvar level = this.vpcC.level;\n\tif (level == 0) {\n\t\tlevel = \"00\";\n\t}\n\tvar bitDepth = this.vpcC.bitDepth;\n\tif (bitDepth == 8) {\n\t\tbitDepth = \"08\";\n\t}\n\treturn baseCodec + \".0\" + this.vpcC.profile + \".\" + level + \".\" + bitDepth;\n}\n\nBoxParser.av01SampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tvar level = this.av1C.seq_level_idx_0;\n\tif (level < 10) {\n\t\tlevel = \"0\" + level;\n\t}\n\tvar bitdepth;\n\tif (this.av1C.seq_profile === 2 && this.av1C.high_bitdepth === 1) {\n\t\tbitdepth = (this.av1C.twelve_bit === 1) ? \"12\" : \"10\";\n\t} else if ( this.av1C.seq_profile <= 2 ) {\n\t\tbitdepth = (this.av1C.high_bitdepth === 1) ? \"10\" : \"08\";\n\t}\n\t// TODO need to parse the SH to find color config\n\treturn baseCodec+\".\"+this.av1C.seq_profile+\".\"+level+(this.av1C.seq_tier_0?\"H\":\"M\")+\".\"+bitdepth;//+\".\"+this.av1C.monochrome+\".\"+this.av1C.chroma_subsampling_x+\"\"+this.av1C.chroma_subsampling_y+\"\"+this.av1C.chroma_sample_position;\n}\n// file:src/box-write.js\n/* \n * Copyright (c) Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nBoxParser.Box.prototype.writeHeader = function(stream, msg) {\n\tthis.size += 8;\n\tif (this.size > MAX_SIZE) {\n\t\tthis.size += 8;\n\t}\n\tif (this.type === \"uuid\") {\n\t\tthis.size += 16;\n\t}\n\tLog.debug(\"BoxWriter\", \"Writing box \"+this.type+\" of size: \"+this.size+\" at position \"+stream.getPosition()+(msg || \"\"));\n\tif (this.size > MAX_SIZE) {\n\t\tstream.writeUint32(1);\n\t} else {\n\t\tthis.sizePosition = stream.getPosition();\n\t\tstream.writeUint32(this.size);\n\t}\n\tstream.writeString(this.type, null, 4);\n\tif (this.type === \"uuid\") {\n\t\tstream.writeUint8Array(this.uuid);\n\t}\n\tif (this.size > MAX_SIZE) {\n\t\tstream.writeUint64(this.size);\n\t} \n}\n\nBoxParser.FullBox.prototype.writeHeader = function(stream) {\n\tthis.size += 4;\n\tBoxParser.Box.prototype.writeHeader.call(this, stream, \" v=\"+this.version+\" f=\"+this.flags);\n\tstream.writeUint8(this.version);\n\tstream.writeUint24(this.flags);\n}\n\nBoxParser.Box.prototype.write = function(stream) {\n\tif (this.type === \"mdat\") {\n\t\t/* TODO: fix this */\n\t\tif (this.data) {\n\t\t\tthis.size = this.data.length;\n\t\t\tthis.writeHeader(stream);\n\t\t\tstream.writeUint8Array(this.data);\n\t\t}\n\t} else {\n\t\tthis.size = (this.data ? this.data.length : 0);\n\t\tthis.writeHeader(stream);\n\t\tif (this.data) {\n\t\t\tstream.writeUint8Array(this.data);\n\t\t}\n\t}\n}\n\nBoxParser.ContainerBox.prototype.write = function(stream) {\n\tthis.size = 0;\n\tthis.writeHeader(stream);\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tif (this.boxes[i]) {\n\t\t\tthis.boxes[i].write(stream);\n\t\t\tthis.size += this.boxes[i].size;\n\t\t}\n\t}\n\t/* adjusting the size, now that all sub-boxes are known */\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\n}\n\nBoxParser.TrackReferenceTypeBox.prototype.write = function(stream) {\n\tthis.size = this.track_ids.length*4;\n\tthis.writeHeader(stream);\n\tstream.writeUint32Array(this.track_ids);\n}\n\n// file:src/writing/avcC.js\nBoxParser.avcCBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.size = 7;\n\tfor (i = 0; i < this.SPS.length; i++) {\n\t\tthis.size += 2+this.SPS[i].length;\n\t}\n\tfor (i = 0; i < this.PPS.length; i++) {\n\t\tthis.size += 2+this.PPS[i].length;\n\t}\n\tif (this.ext) {\n\t\tthis.size += this.ext.length;\n\t}\n\tthis.writeHeader(stream);\n\tstream.writeUint8(this.configurationVersion);\n\tstream.writeUint8(this.AVCProfileIndication);\n\tstream.writeUint8(this.profile_compatibility);\n\tstream.writeUint8(this.AVCLevelIndication);\n\tstream.writeUint8(this.lengthSizeMinusOne + (63<<2));\n\tstream.writeUint8(this.SPS.length + (7<<5));\n\tfor (i = 0; i < this.SPS.length; i++) {\n\t\tstream.writeUint16(this.SPS[i].length);\n\t\tstream.writeUint8Array(this.SPS[i].nalu);\n\t}\n\tstream.writeUint8(this.PPS.length);\n\tfor (i = 0; i < this.PPS.length; i++) {\n\t\tstream.writeUint16(this.PPS[i].length);\n\t\tstream.writeUint8Array(this.PPS[i].nalu);\n\t}\n\tif (this.ext) {\n\t\tstream.writeUint8Array(this.ext);\n\t}\n}\n\n// file:src/writing/co64.js\nBoxParser.co64Box.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+8*this.chunk_offsets.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.chunk_offsets.length);\n\tfor(i=0; i<this.chunk_offsets.length; i++) {\n\t\tstream.writeUint64(this.chunk_offsets[i]);\n\t}\n}\n\n// file:src/writing/cslg.js\nBoxParser.cslgBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4*5;\n\tthis.writeHeader(stream);\n\tstream.writeInt32(this.compositionToDTSShift);\n\tstream.writeInt32(this.leastDecodeToDisplayDelta);\n\tstream.writeInt32(this.greatestDecodeToDisplayDelta);\n\tstream.writeInt32(this.compositionStartTime);\n\tstream.writeInt32(this.compositionEndTime);\n}\n\n// file:src/writing/ctts.js\nBoxParser.cttsBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+8*this.sample_counts.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sample_counts.length);\n\tfor(i=0; i<this.sample_counts.length; i++) {\n\t\tstream.writeUint32(this.sample_counts[i]);\n\t\tif (this.version === 1) {\n\t\t\tstream.writeInt32(this.sample_offsets[i]); /* signed */\n\t\t} else {\t\t\t\n\t\t\tstream.writeUint32(this.sample_offsets[i]); /* unsigned */\n\t\t}\n\t}\n}\n\n// file:src/writing/dref.js\nBoxParser.drefBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4; //\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.entries.length);\n\tfor (var i = 0; i < this.entries.length; i++) {\n\t\tthis.entries[i].write(stream);\n\t\tthis.size += this.entries[i].size;\n\t}\t\n\t/* adjusting the size, now that all sub-boxes are known */\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\n}\n\n// file:src/writing/elng.js\nBoxParser.elngBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = this.extended_language.length;\n\tthis.writeHeader(stream);\n\tstream.writeString(this.extended_language);\n}\n\n// file:src/writing/elst.js\nBoxParser.elstBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = 4+12*this.entries.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.entries.length);\n\tfor (var i = 0; i < this.entries.length; i++) {\n\t\tvar entry = this.entries[i];\n\t\tstream.writeUint32(entry.segment_duration);\n\t\tstream.writeInt32(entry.media_time);\n\t\tstream.writeInt16(entry.media_rate_integer);\n\t\tstream.writeInt16(entry.media_rate_fraction);\n\t}\n}\n\n// file:src/writing/emsg.js\nBoxParser.emsgBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = 4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1);\n\tthis.writeHeader(stream);\n\tstream.writeCString(this.scheme_id_uri);\n\tstream.writeCString(this.value);\n\tstream.writeUint32(this.timescale);\n\tstream.writeUint32(this.presentation_time_delta);\n\tstream.writeUint32(this.event_duration);\n\tstream.writeUint32(this.id);\n\tstream.writeUint8Array(this.message_data);\n}\n\n// file:src/writing/ftyp.js\nBoxParser.ftypBox.prototype.write = function(stream) {\n\tthis.size = 8+4*this.compatible_brands.length;\n\tthis.writeHeader(stream);\n\tstream.writeString(this.major_brand, null, 4);\n\tstream.writeUint32(this.minor_version);\n\tfor (var i = 0; i < this.compatible_brands.length; i++) {\n\t\tstream.writeString(this.compatible_brands[i], null, 4);\n\t}\n}\n\n// file:src/writing/hdlr.js\nBoxParser.hdlrBox.prototype.write = function(stream) {\n\tthis.size = 5*4+this.name.length+1;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(0);\n\tstream.writeString(this.handler, null, 4);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeCString(this.name);\n}\n\n// file:src/writing/hvcC.js\nBoxParser.hvcCBox.prototype.write = function(stream) {\n    var i,j;\n    this.size = 23;\n\n    for (i = 0; i < this.nalu_arrays.length; i++) {\n      this.size += 3;\n      for (j = 0; j < this.nalu_arrays[i].length; j++) {\n        this.size += 2 + this.nalu_arrays[i][j].data.length;\n      }\n    }\n\n    this.writeHeader(stream);\n\n    stream.writeUint8(this.configurationVersion);\n    stream.writeUint8((this.general_profile_space << 6) +\n                      (this.general_tier_flag << 5) +\n                      this.general_profile_idc);\n    stream.writeUint32(this.general_profile_compatibility);\n    stream.writeUint8Array(this.general_constraint_indicator);\n    stream.writeUint8(this.general_level_idc);\n    stream.writeUint16(this.min_spatial_segmentation_idc + (15<<24));\n    stream.writeUint8(this.parallelismType + (63<<2));\n    stream.writeUint8(this.chroma_format_idc + (63<<2));\n    stream.writeUint8(this.bit_depth_luma_minus8 + (31<<3));\n    stream.writeUint8(this.bit_depth_chroma_minus8 + (31<<3));\n    stream.writeUint16(this.avgFrameRate);\n    stream.writeUint8((this.constantFrameRate<<6) +\n                   (this.numTemporalLayers<<3) +\n                   (this.temporalIdNested<<2) +\n                   this.lengthSizeMinusOne);\n    stream.writeUint8(this.nalu_arrays.length);\n    for (i = 0; i < this.nalu_arrays.length; i++) {\n      // bit(1) array_completeness + bit(1) reserved = 0 + bit(6) nal_unit_type\n      stream.writeUint8((this.nalu_arrays[i].completeness<<7) +\n                         this.nalu_arrays[i].nalu_type);\n      stream.writeUint16(this.nalu_arrays[i].length);\n      for (j = 0; j < this.nalu_arrays[i].length; j++) {\n        stream.writeUint16(this.nalu_arrays[i][j].data.length);\n        stream.writeUint8Array(this.nalu_arrays[i][j].data);\n      }\n    }\n}\n// file:src/writing/kind.js\nBoxParser.kindBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = (this.schemeURI.length+1)+(this.value.length+1);\n\tthis.writeHeader(stream);\n\tstream.writeCString(this.schemeURI);\n\tstream.writeCString(this.value);\n}\n\n// file:src/writing/mdhd.js\nBoxParser.mdhdBox.prototype.write = function(stream) {\n\tthis.size = 4*4+2*2;\n\tthis.flags = 0;\n\tthis.version = 0;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.creation_time);\n\tstream.writeUint32(this.modification_time);\n\tstream.writeUint32(this.timescale);\n\tstream.writeUint32(this.duration);\n\tstream.writeUint16(this.language);\n\tstream.writeUint16(0);\n}\n\n// file:src/writing/mehd.js\nBoxParser.mehdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.fragment_duration);\n}\n\n// file:src/writing/mfhd.js\nBoxParser.mfhdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sequence_number);\n}\n\n// file:src/writing/mvhd.js\nBoxParser.mvhdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 23*4+2*2;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.creation_time);\n\tstream.writeUint32(this.modification_time);\n\tstream.writeUint32(this.timescale);\n\tstream.writeUint32(this.duration);\n\tstream.writeUint32(this.rate);\n\tstream.writeUint16(this.volume<<8);\n\tstream.writeUint16(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32Array(this.matrix);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(this.next_track_id);\n}\n\n// file:src/writing/sampleentry.js\nBoxParser.SampleEntry.prototype.writeHeader = function(stream) {\n\tthis.size = 8;\n\tBoxParser.Box.prototype.writeHeader.call(this, stream);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint16(this.data_reference_index);\n}\n\nBoxParser.SampleEntry.prototype.writeFooter = function(stream) {\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tthis.boxes[i].write(stream);\n\t\tthis.size += this.boxes[i].size;\n\t}\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\t\n}\n\nBoxParser.SampleEntry.prototype.write = function(stream) {\n\tthis.writeHeader(stream);\n\tstream.writeUint8Array(this.data);\n\tthis.size += this.data.length;\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\t\n}\n\nBoxParser.VisualSampleEntry.prototype.write = function(stream) {\n\tthis.writeHeader(stream);\n\tthis.size += 2*7+6*4+32;\n\tstream.writeUint16(0); \n\tstream.writeUint16(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint16(this.width);\n\tstream.writeUint16(this.height);\n\tstream.writeUint32(this.horizresolution);\n\tstream.writeUint32(this.vertresolution);\n\tstream.writeUint32(0);\n\tstream.writeUint16(this.frame_count);\n\tstream.writeUint8(Math.min(31, this.compressorname.length));\n\tstream.writeString(this.compressorname, null, 31);\n\tstream.writeUint16(this.depth);\n\tstream.writeInt16(-1);\n\tthis.writeFooter(stream);\n}\n\nBoxParser.AudioSampleEntry.prototype.write = function(stream) {\n\tthis.writeHeader(stream);\n\tthis.size += 2*4+3*4;\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint16(this.channel_count);\n\tstream.writeUint16(this.samplesize);\n\tstream.writeUint16(0);\n\tstream.writeUint16(0);\n\tstream.writeUint32(this.samplerate<<16);\n\tthis.writeFooter(stream);\n}\n\nBoxParser.stppSampleEntry.prototype.write = function(stream) {\n\tthis.writeHeader(stream);\n\tthis.size += this.namespace.length+1+\n\t\t\t\t this.schema_location.length+1+\n\t\t\t\t this.auxiliary_mime_types.length+1;\n\tstream.writeCString(this.namespace);\n\tstream.writeCString(this.schema_location);\n\tstream.writeCString(this.auxiliary_mime_types);\n\tthis.writeFooter(stream);\n}\n\n// file:src/writing/samplegroups/samplegroup.js\nBoxParser.SampleGroupEntry.prototype.write = function(stream) {\n\tstream.writeUint8Array(this.data);\n}\n\n// file:src/writing/sbgp.js\nBoxParser.sbgpBox.prototype.write = function(stream) {\n\tthis.version = 1;\t\n\tthis.flags = 0;\n\tthis.size = 12+8*this.entries.length;\n\tthis.writeHeader(stream);\n\tstream.writeString(this.grouping_type, null, 4);\n\tstream.writeUint32(this.grouping_type_parameter);\n\tstream.writeUint32(this.entries.length);\n\tfor (var i = 0; i < this.entries.length; i++) {\n\t\tvar entry = this.entries[i];\n\t\tstream.writeInt32(entry.sample_count);\n\t\tstream.writeInt32(entry.group_description_index);\n\t}\n}\n\n// file:src/writing/sgpd.js\nBoxParser.sgpdBox.prototype.write = function(stream) {\n\tvar i;\n\tvar entry;\n\t// leave version as read\n\t// this.version;\n\tthis.flags = 0;\n\tthis.size = 12;\n\tfor (i = 0; i < this.entries.length; i++) {\n\t\tentry = this.entries[i];\n\t\tif (this.version === 1) {\n\t\t\tif (this.default_length === 0) {\n\t\t\t\tthis.size += 4;\n\t\t\t}\n\t\t\tthis.size += entry.data.length;\n\t\t}\n\t}\n\tthis.writeHeader(stream);\n\tstream.writeString(this.grouping_type, null, 4);\n\tif (this.version === 1) {\n\t\tstream.writeUint32(this.default_length);\n\t}\n\tif (this.version >= 2) {\n\t\tstream.writeUint32(this.default_sample_description_index);\n\t}\n\tstream.writeUint32(this.entries.length);\n\tfor (i = 0; i < this.entries.length; i++) {\n\t\tentry = this.entries[i];\n\t\tif (this.version === 1) {\n\t\t\tif (this.default_length === 0) {\n\t\t\t\tstream.writeUint32(entry.description_length);\n\t\t\t}\n\t\t}\n\t\tentry.write(stream);\n\t}\n}\n\n\n// file:src/writing/sidx.js\nBoxParser.sidxBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = 4*4+2+2+12*this.references.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.reference_ID);\n\tstream.writeUint32(this.timescale);\n\tstream.writeUint32(this.earliest_presentation_time);\n\tstream.writeUint32(this.first_offset);\n\tstream.writeUint16(0);\n\tstream.writeUint16(this.references.length);\n\tfor (var i = 0; i < this.references.length; i++) {\n\t\tvar ref = this.references[i];\n\t\tstream.writeUint32(ref.reference_type << 31 | ref.referenced_size);\n\t\tstream.writeUint32(ref.subsegment_duration);\n\t\tstream.writeUint32(ref.starts_with_SAP << 31 | ref.SAP_type << 28 | ref.SAP_delta_time);\n\t}\n}\n\n// file:src/writing/smhd.js\nBoxParser.smhdBox.prototype.write = function(stream) {\n  var i;\n  this.version = 0;\n  this.flags = 1;\n  this.size = 4;\n  this.writeHeader(stream);\n  stream.writeUint16(this.balance);\n  stream.writeUint16(0);\n}\n// file:src/writing/stco.js\nBoxParser.stcoBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+4*this.chunk_offsets.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.chunk_offsets.length);\n\tstream.writeUint32Array(this.chunk_offsets);\n}\n\n// file:src/writing/stsc.js\nBoxParser.stscBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+12*this.first_chunk.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.first_chunk.length);\n\tfor(i=0; i<this.first_chunk.length; i++) {\n\t\tstream.writeUint32(this.first_chunk[i]);\n\t\tstream.writeUint32(this.samples_per_chunk[i]);\n\t\tstream.writeUint32(this.sample_description_index[i]);\n\t}\n}\n\n// file:src/writing/stsd.js\nBoxParser.stsdBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 0;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.entries.length);\n\tthis.size += 4;\n\tfor (i = 0; i < this.entries.length; i++) {\n\t\tthis.entries[i].write(stream);\n\t\tthis.size += this.entries[i].size;\n\t}\n\t/* adjusting the size, now that all sub-boxes are known */\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\n}\n\n// file:src/writing/stsh.js\nBoxParser.stshBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+8*this.shadowed_sample_numbers.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.shadowed_sample_numbers.length);\n\tfor(i=0; i<this.shadowed_sample_numbers.length; i++) {\n\t\tstream.writeUint32(this.shadowed_sample_numbers[i]);\n\t\tstream.writeUint32(this.sync_sample_numbers[i]);\n\t}\n}\n\n// file:src/writing/stss.js\nBoxParser.stssBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+4*this.sample_numbers.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sample_numbers.length);\n\tstream.writeUint32Array(this.sample_numbers);\n}\n\n// file:src/writing/stsz.js\nBoxParser.stszBox.prototype.write = function(stream) {\n\tvar i;\n\tvar constant = true;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tif (this.sample_sizes.length > 0) {\n\t\ti = 0;\n\t\twhile (i+1 < this.sample_sizes.length) {\n\t\t\tif (this.sample_sizes[i+1] !==  this.sample_sizes[0]) {\n\t\t\t\tconstant = false;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconstant = false;\n\t}\n\tthis.size = 8;\n\tif (!constant) {\n\t\tthis.size += 4*this.sample_sizes.length;\n\t}\n\tthis.writeHeader(stream);\n\tif (!constant) {\n\t\tstream.writeUint32(0);\n\t} else {\n\t\tstream.writeUint32(this.sample_sizes[0]);\n\t}\n\tstream.writeUint32(this.sample_sizes.length);\n\tif (!constant) {\n\t\tstream.writeUint32Array(this.sample_sizes);\n\t}\t\n}\n\n// file:src/writing/stts.js\nBoxParser.sttsBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+8*this.sample_counts.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sample_counts.length);\n\tfor(i=0; i<this.sample_counts.length; i++) {\n\t\tstream.writeUint32(this.sample_counts[i]);\n\t\tstream.writeUint32(this.sample_deltas[i]);\n\t}\n}\n\n// file:src/writing/tfdt.js\nBoxParser.tfdtBox.prototype.write = function(stream) {\n\tvar UINT32_MAX = Math.pow(2, 32) - 1;\n\t// use version 1 if baseMediaDecodeTime does not fit 32 bits\n\tthis.version = this.baseMediaDecodeTime > UINT32_MAX ? 1 : 0;\n\tthis.flags = 0;\n\tthis.size = 4;\n\tif (this.version === 1) {\n\t\tthis.size += 4;\n\t}\n\tthis.writeHeader(stream);\n\tif (this.version === 1) {\n\t\tstream.writeUint64(this.baseMediaDecodeTime);\n\t} else {\n\t\tstream.writeUint32(this.baseMediaDecodeTime);\n\t}\n}\n\n// file:src/writing/tfhd.js\nBoxParser.tfhdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.size = 4;\n\tif (this.flags & BoxParser.TFHD_FLAG_BASE_DATA_OFFSET) {\n\t\tthis.size += 8;\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DESC) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DUR) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_SIZE) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_FLAGS) {\n\t\tthis.size += 4;\n\t}\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.track_id);\n\tif (this.flags & BoxParser.TFHD_FLAG_BASE_DATA_OFFSET) {\n\t\tstream.writeUint64(this.base_data_offset);\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DESC) {\n\t\tstream.writeUint32(this.default_sample_description_index);\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DUR) {\n\t\tstream.writeUint32(this.default_sample_duration);\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_SIZE) {\n\t\tstream.writeUint32(this.default_sample_size);\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_FLAGS) {\n\t\tstream.writeUint32(this.default_sample_flags);\n\t}\n}\n\n// file:src/writing/tkhd.js\nBoxParser.tkhdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\t//this.flags = 0;\n\tthis.size = 4*18+2*4;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.creation_time);\n\tstream.writeUint32(this.modification_time);\n\tstream.writeUint32(this.track_id);\n\tstream.writeUint32(0);\n\tstream.writeUint32(this.duration);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeInt16(this.layer);\n\tstream.writeInt16(this.alternate_group);\n\tstream.writeInt16(this.volume<<8);\n\tstream.writeUint16(0);\n\tstream.writeInt32Array(this.matrix);\n\tstream.writeUint32(this.width);\n\tstream.writeUint32(this.height);\n}\n\n// file:src/writing/trex.js\nBoxParser.trexBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4*5;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.track_id);\n\tstream.writeUint32(this.default_sample_description_index);\n\tstream.writeUint32(this.default_sample_duration);\n\tstream.writeUint32(this.default_sample_size);\n\tstream.writeUint32(this.default_sample_flags);\n}\n\n// file:src/writing/trun.js\nBoxParser.trunBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.size = 4;\n\tif (this.flags & BoxParser.TRUN_FLAGS_DATA_OFFSET) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_FIRST_FLAG) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_DURATION) {\n\t\tthis.size += 4*this.sample_duration.length;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_SIZE) {\n\t\tthis.size += 4*this.sample_size.length;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_FLAGS) {\n\t\tthis.size += 4*this.sample_flags.length;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_CTS_OFFSET) {\n\t\tthis.size += 4*this.sample_composition_time_offset.length;\n\t}\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sample_count);\n\tif (this.flags & BoxParser.TRUN_FLAGS_DATA_OFFSET) {\n\t\tthis.data_offset_position = stream.getPosition();\n\t\tstream.writeInt32(this.data_offset); //signed\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_FIRST_FLAG) {\n\t\tstream.writeUint32(this.first_sample_flags);\n\t}\n\tfor (var i = 0; i < this.sample_count; i++) {\n\t\tif (this.flags & BoxParser.TRUN_FLAGS_DURATION) {\n\t\t\tstream.writeUint32(this.sample_duration[i]);\n\t\t}\n\t\tif (this.flags & BoxParser.TRUN_FLAGS_SIZE) {\n\t\t\tstream.writeUint32(this.sample_size[i]);\n\t\t}\n\t\tif (this.flags & BoxParser.TRUN_FLAGS_FLAGS) {\n\t\t\tstream.writeUint32(this.sample_flags[i]);\n\t\t}\n\t\tif (this.flags & BoxParser.TRUN_FLAGS_CTS_OFFSET) {\n\t\t\tif (this.version === 0) {\n\t\t\t\tstream.writeUint32(this.sample_composition_time_offset[i]);\n\t\t\t} else {\n\t\t\t\tstream.writeInt32(this.sample_composition_time_offset[i]); //signed\n\t\t\t}\n\t\t}\n\t}\t\t\n}\n\n// file:src/writing/url.js\nBoxParser[\"url Box\"].prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tif (this.location) {\n\t\tthis.flags = 0;\n\t\tthis.size = this.location.length+1;\n\t} else {\n\t\tthis.flags = 0x000001;\n\t\tthis.size = 0;\n\t}\n\tthis.writeHeader(stream);\n\tif (this.location) {\n\t\tstream.writeCString(this.location);\n\t}\n}\n\n// file:src/writing/urn.js\nBoxParser[\"urn Box\"].prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = this.name.length+1+(this.location ? this.location.length+1 : 0);\n\tthis.writeHeader(stream);\n\tstream.writeCString(this.name);\n\tif (this.location) {\n\t\tstream.writeCString(this.location);\n\t}\n}\n\n// file:src/writing/vmhd.js\nBoxParser.vmhdBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 1;\n\tthis.size = 8;\n\tthis.writeHeader(stream);\n\tstream.writeUint16(this.graphicsmode);\n\tstream.writeUint16Array(this.opcolor);\n}\n\n// file:src/box-unpack.js\n/* \n * Copyright (c) Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nBoxParser.cttsBox.prototype.unpack = function(samples) {\n\tvar i, j, k;\n\tk = 0;\n\tfor (i = 0; i < this.sample_counts.length; i++) {\n\t\tfor (j = 0; j < this.sample_counts[i]; j++) {\n\t\t\tsamples[k].pts = samples[k].dts + this.sample_offsets[i];\n\t\t\tk++;\n\t\t}\n\t}\n}\n\nBoxParser.sttsBox.prototype.unpack = function(samples) {\n\tvar i, j, k;\n\tk = 0;\n\tfor (i = 0; i < this.sample_counts.length; i++) {\n\t\tfor (j = 0; j < this.sample_counts[i]; j++) {\n\t\t\tif (k === 0) {\n\t\t\t\tsamples[k].dts = 0;\n\t\t\t} else {\n\t\t\t\tsamples[k].dts = samples[k-1].dts + this.sample_deltas[i];\n\t\t\t}\n\t\t\tk++;\n\t\t}\n\t}\n}\n\nBoxParser.stcoBox.prototype.unpack = function(samples) {\n\tvar i;\n\tfor (i = 0; i < this.chunk_offsets.length; i++) {\n\t\tsamples[i].offset = this.chunk_offsets[i];\n\t}\n}\n\nBoxParser.stscBox.prototype.unpack = function(samples) {\n\tvar i, j, k, l, m;\n\tl = 0;\n\tm = 0;\n\tfor (i = 0; i < this.first_chunk.length; i++) {\n\t\tfor (j = 0; j < (i+1 < this.first_chunk.length ? this.first_chunk[i+1] : Infinity); j++) {\n\t\t\tm++;\n\t\t\tfor (k = 0; k < this.samples_per_chunk[i]; k++) {\n\t\t\t\tif (samples[l]) {\n\t\t\t\t\tsamples[l].description_index = this.sample_description_index[i];\n\t\t\t\t\tsamples[l].chunk_index = m;\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tl++;\n\t\t\t}\t\t\t\n\t\t}\n\t}\n}\n\nBoxParser.stszBox.prototype.unpack = function(samples) {\n\tvar i;\n\tfor (i = 0; i < this.sample_sizes.length; i++) {\n\t\tsamples[i].size = this.sample_sizes[i];\n\t}\n}\n// file:src/box-diff.js\n\nBoxParser.DIFF_BOXES_PROP_NAMES = [ \"boxes\", \"entries\", \"references\", \"subsamples\",\n\t\t\t\t\t \t \"items\", \"item_infos\", \"extents\", \"associations\",\n\t\t\t\t\t \t \"subsegments\", \"ranges\", \"seekLists\", \"seekPoints\",\n\t\t\t\t\t \t \"esd\", \"levels\"];\n\nBoxParser.DIFF_PRIMITIVE_ARRAY_PROP_NAMES = [ \"compatible_brands\", \"matrix\", \"opcolor\", \"sample_counts\", \"sample_deltas\",\n\"first_chunk\", \"samples_per_chunk\", \"sample_sizes\", \"chunk_offsets\", \"sample_offsets\", \"sample_description_index\", \"sample_duration\" ];\n\nBoxParser.boxEqualFields = function(box_a, box_b) {\n\tif (box_a && !box_b) return false;\n\tvar prop;\n\tfor (prop in box_a) {\n\t\tif (BoxParser.DIFF_BOXES_PROP_NAMES.indexOf(prop) > -1) {\n\t\t\tcontinue;\n\t\t// } else if (excluded_fields && excluded_fields.indexOf(prop) > -1) {\n\t\t// \tcontinue;\n\t\t} else if (box_a[prop] instanceof BoxParser.Box || box_b[prop] instanceof BoxParser.Box) {\n\t\t\tcontinue;\n\t\t} else if (typeof box_a[prop] === \"undefined\" || typeof box_b[prop] === \"undefined\") {\n\t\t\tcontinue;\n\t\t} else if (typeof box_a[prop] === \"function\" || typeof box_b[prop] === \"function\") {\n\t\t\tcontinue;\n\t\t} else if (\n\t\t\t(box_a.subBoxNames && box_a.subBoxNames.indexOf(prop.slice(0,4)) > -1) ||\n\t\t\t(box_b.subBoxNames && box_b.subBoxNames.indexOf(prop.slice(0,4)) > -1))  {\n\t\t\tcontinue;\n\t\t} else {\n\t\t\tif (prop === \"data\" || prop === \"start\" || prop === \"size\" || prop === \"creation_time\" || prop === \"modification_time\") {\n\t\t\t\tcontinue;\n\t\t\t} else if (BoxParser.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(prop) > -1) {\n\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\tif (box_a[prop] !== box_b[prop]) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n\nBoxParser.boxEqual = function(box_a, box_b) {\n\tif (!BoxParser.boxEqualFields(box_a, box_b)) {\n\t\treturn false;\n\t}\n\tfor (var j = 0; j < BoxParser.DIFF_BOXES_PROP_NAMES.length; j++) {\n\t\tvar name = BoxParser.DIFF_BOXES_PROP_NAMES[j];\n\t\tif (box_a[name] && box_b[name]) {\n\t\t\tif (!BoxParser.boxEqual(box_a[name], box_b[name])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n// file:src/text-mp4.js\n/* \n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar VTTin4Parser = function() {\t\n}\n\nVTTin4Parser.prototype.parseSample = function(data) {\n\tvar cues, cue;\n\tvar stream = new MP4BoxStream(data.buffer);\n\tcues = [];\n\twhile (!stream.isEos()) {\n\t\tcue = BoxParser.parseOneBox(stream, false);\n\t\tif (cue.code === BoxParser.OK && cue.box.type === \"vttc\") {\n\t\t\tcues.push(cue.box);\n\t\t}\t\t\n\t}\n\treturn cues;\n}\n\nVTTin4Parser.prototype.getText = function (startTime, endTime, data) {\n\tfunction pad(n, width, z) {\n\t  z = z || '0';\n\t  n = n + '';\n\t  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n\t}\n\tfunction secToTimestamp(insec) {\n\t\tvar h = Math.floor(insec/3600);\n\t\tvar m = Math.floor((insec - h*3600)/60);\n\t\tvar s = Math.floor(insec - h*3600 - m*60);\n\t\tvar ms = Math.floor((insec - h*3600 - m*60 - s)*1000);\n\t\treturn \"\"+pad(h, 2)+\":\"+pad(m,2)+\":\"+pad(s, 2)+\".\"+pad(ms, 3);\n\t}\n\tvar cues = this.parseSample(data);\n\tvar string = \"\";\n\tfor (var i = 0; i < cues.length; i++) {\n\t\tvar cueIn4 = cues[i];\n\t\tstring += secToTimestamp(startTime)+\" --> \"+secToTimestamp(endTime)+\"\\r\\n\";\n\t\tstring += cueIn4.payl.text;\n\t}\n\treturn string;\n}\n\nvar XMLSubtitlein4Parser = function() {\t\n}\n\nXMLSubtitlein4Parser.prototype.parseSample = function(sample) {\n\tvar res = {};\t\n\tvar i;\n\tres.resources = [];\n\tvar stream = new MP4BoxStream(sample.data.buffer);\n\tif (!sample.subsamples || sample.subsamples.length === 0) {\n\t\tres.documentString = stream.readString(sample.data.length);\n\t} else {\n\t\tres.documentString = stream.readString(sample.subsamples[0].size);\n\t\tif (sample.subsamples.length > 1) {\n\t\t\tfor (i = 1; i < sample.subsamples.length; i++) {\n\t\t\t\tres.resources[i] = stream.readUint8Array(sample.subsamples[i].size);\n\t\t\t}\n\t\t}\n\t}\n\tif (typeof (DOMParser) !== \"undefined\") {\n\t\tres.document = (new DOMParser()).parseFromString(res.documentString, \"application/xml\");\n\t}\n\treturn res;\n}\n\nvar Textin4Parser = function() {\t\n}\n\nTextin4Parser.prototype.parseSample = function(sample) {\n\tvar textString;\n\tvar stream = new MP4BoxStream(sample.data.buffer);\n\ttextString = stream.readString(sample.data.length);\n\treturn textString;\n}\n\nTextin4Parser.prototype.parseConfig = function(data) {\n\tvar textString;\n\tvar stream = new MP4BoxStream(data.buffer);\n\tstream.readUint32(); // version & flags\n\ttextString = stream.readCString();\n\treturn textString;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.VTTin4Parser = VTTin4Parser;\n\texports.XMLSubtitlein4Parser = XMLSubtitlein4Parser;\n\texports.Textin4Parser = Textin4Parser;\n}\n// file:src/isofile.js\n/*\n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar ISOFile = function (stream) {\n\t/* MutiBufferStream object used to parse boxes */\n\tthis.stream = stream || new MultiBufferStream();\n\t/* Array of all boxes (in order) found in the file */\n\tthis.boxes = [];\n\t/* Array of all mdats */\n\tthis.mdats = [];\n\t/* Array of all moofs */\n\tthis.moofs = [];\n\t/* Boolean indicating if the file is compatible with progressive parsing (moov first) */\n\tthis.isProgressive = false;\n\t/* Boolean used to fire moov start event only once */\n\tthis.moovStartFound = false;\n\t/* Callback called when the moov parsing starts */\n\tthis.onMoovStart = null;\n\t/* Boolean keeping track of the call to onMoovStart, to avoid double calls */\n\tthis.moovStartSent = false;\n\t/* Callback called when the moov is entirely parsed */\n\tthis.onReady = null;\n\t/* Boolean keeping track of the call to onReady, to avoid double calls */\n\tthis.readySent = false;\n\t/* Callback to call when segments are ready */\n\tthis.onSegment = null;\n\t/* Callback to call when samples are ready */\n\tthis.onSamples = null;\n\t/* Callback to call when there is an error in the parsing or processing of samples */\n\tthis.onError = null;\n\t/* Boolean indicating if the moov box run-length encoded tables of sample information have been processed */\n\tthis.sampleListBuilt = false;\n\t/* Array of Track objects for which fragmentation of samples is requested */\n\tthis.fragmentedTracks = [];\n\t/* Array of Track objects for which extraction of samples is requested */\n\tthis.extractedTracks = [];\n\t/* Boolean indicating that fragmention is ready */\n\tthis.isFragmentationInitialized = false;\n\t/* Boolean indicating that fragmented has started */\n\tthis.sampleProcessingStarted = false;\n\t/* Number of the next 'moof' to generate when fragmenting */\n\tthis.nextMoofNumber = 0;\n\t/* Boolean indicating if the initial list of items has been produced */\n\tthis.itemListBuilt = false;\n\t/* Array of items */\n\tthis.items = [];\n\t/* Array of entity groups */\n\tthis.entity_groups = [];\n\t/* Callback called when the sidx box is entirely parsed */\n\tthis.onSidx = null;\n\t/* Boolean keeping track of the call to onSidx, to avoid double calls */\n\tthis.sidxSent = false;\n}\n\nISOFile.prototype.setSegmentOptions = function(id, user, options) {\n\tvar trak = this.getTrackById(id);\n\tif (trak) {\n\t\tvar fragTrack = {};\n\t\tthis.fragmentedTracks.push(fragTrack);\n\t\tfragTrack.id = id;\n\t\tfragTrack.user = user;\n\t\tfragTrack.trak = trak;\n\t\ttrak.nextSample = 0;\n\t\tfragTrack.segmentStream = null;\n\t\tfragTrack.nb_samples = 1000;\n\t\tfragTrack.rapAlignement = true;\n\t\tif (options) {\n\t\t\tif (options.nbSamples) fragTrack.nb_samples = options.nbSamples;\n\t\t\tif (options.rapAlignement) fragTrack.rapAlignement = options.rapAlignement;\n\t\t}\n\t}\n}\n\nISOFile.prototype.unsetSegmentOptions = function(id) {\n\tvar index = -1;\n\tfor (var i = 0; i < this.fragmentedTracks.length; i++) {\n\t\tvar fragTrack = this.fragmentedTracks[i];\n\t\tif (fragTrack.id == id) {\n\t\t\tindex = i;\n\t\t}\n\t}\n\tif (index > -1) {\n\t\tthis.fragmentedTracks.splice(index, 1);\n\t}\n}\n\nISOFile.prototype.setExtractionOptions = function(id, user, options) {\n\tvar trak = this.getTrackById(id);\n\tif (trak) {\n\t\tvar extractTrack = {};\n\t\tthis.extractedTracks.push(extractTrack);\n\t\textractTrack.id = id;\n\t\textractTrack.user = user;\n\t\textractTrack.trak = trak;\n\t\ttrak.nextSample = 0;\n\t\textractTrack.nb_samples = 1000;\n\t\textractTrack.samples = [];\n\t\tif (options) {\n\t\t\tif (options.nbSamples) extractTrack.nb_samples = options.nbSamples;\n\t\t}\n\t}\n}\n\nISOFile.prototype.unsetExtractionOptions = function(id) {\n\tvar index = -1;\n\tfor (var i = 0; i < this.extractedTracks.length; i++) {\n\t\tvar extractTrack = this.extractedTracks[i];\n\t\tif (extractTrack.id == id) {\n\t\t\tindex = i;\n\t\t}\n\t}\n\tif (index > -1) {\n\t\tthis.extractedTracks.splice(index, 1);\n\t}\n}\n\nISOFile.prototype.parse = function() {\n\tvar found;\n\tvar ret;\n\tvar box;\n\tvar parseBoxHeadersOnly = false;\n\n\tif (this.restoreParsePosition)\t{\n\t\tif (!this.restoreParsePosition()) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\twhile (true) {\n\n\t\tif (this.hasIncompleteMdat && this.hasIncompleteMdat()) {\n\t\t\tif (this.processIncompleteMdat()) {\n\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.saveParsePosition)\t{\n\t\t\t\tthis.saveParsePosition();\n\t\t\t}\n\t\t\tret = BoxParser.parseOneBox(this.stream, parseBoxHeadersOnly);\n\t\t\tif (ret.code === BoxParser.ERR_NOT_ENOUGH_DATA) {\n\t\t\t\tif (this.processIncompleteBox) {\n\t\t\t\t\tif (this.processIncompleteBox(ret)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar box_type;\n\t\t\t\t/* the box is entirely parsed */\n\t\t\t\tbox = ret.box;\n\t\t\t\tbox_type = (box.type !== \"uuid\" ? box.type : box.uuid);\n\t\t\t\t/* store the box in the 'boxes' array to preserve box order (for file rewrite if needed)  */\n\t\t\t\tthis.boxes.push(box);\n\t\t\t\t/* but also store box in a property for more direct access */\n\t\t\t\tswitch (box_type) {\n\t\t\t\t\tcase \"mdat\":\n\t\t\t\t\t\tthis.mdats.push(box);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"moof\":\n\t\t\t\t\t\tthis.moofs.push(box);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"moov\":\n\t\t\t\t\t\tthis.moovStartFound = true;\n\t\t\t\t\t\tif (this.mdats.length === 0) {\n\t\t\t\t\t\t\tthis.isProgressive = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* no break */\n\t\t\t\t\t\t/* falls through */\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (this[box_type] !== undefined) {\n\t\t\t\t\t\t\tLog.warn(\"ISOFile\", \"Duplicate Box of type: \"+box_type+\", overriding previous occurrence\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis[box_type] = box;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (this.updateUsedBytes) {\n\t\t\t\t\tthis.updateUsedBytes(box, ret);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nISOFile.prototype.checkBuffer = function (ab) {\n\tif (ab === null || ab === undefined) {\n\t\tthrow(\"Buffer must be defined and non empty\");\n\t}\n\tif (ab.fileStart === undefined) {\n\t\tthrow(\"Buffer must have a fileStart property\");\n\t}\n\tif (ab.byteLength === 0) {\n\t\tLog.warn(\"ISOFile\", \"Ignoring empty buffer (fileStart: \"+ab.fileStart+\")\");\n\t\tthis.stream.logBufferLevel();\n\t\treturn false;\n\t}\n\tLog.info(\"ISOFile\", \"Processing buffer (fileStart: \"+ab.fileStart+\")\");\n\n\t/* mark the bytes in the buffer as not being used yet */\n\tab.usedBytes = 0;\n\tthis.stream.insertBuffer(ab);\n\tthis.stream.logBufferLevel();\n\n\tif (!this.stream.initialized()) {\n\t\tLog.warn(\"ISOFile\", \"Not ready to start parsing\");\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n/* Processes a new ArrayBuffer (with a fileStart property)\n   Returns the next expected file position, or undefined if not ready to parse */\nISOFile.prototype.appendBuffer = function(ab, last) {\n\tvar nextFileStart;\n\tif (!this.checkBuffer(ab)) {\n\t\treturn;\n\t}\n\n\t/* Parse whatever is in the existing buffers */\n\tthis.parse();\n\n\t/* Check if the moovStart callback needs to be called */\n\tif (this.moovStartFound && !this.moovStartSent) {\n\t\tthis.moovStartSent = true;\n\t\tif (this.onMoovStart) this.onMoovStart();\n\t}\n\n\tif (this.moov) {\n\t\t/* A moov box has been entirely parsed */\n\n\t\t/* if this is the first call after the moov is found we initialize the list of samples (may be empty in fragmented files) */\n\t\tif (!this.sampleListBuilt) {\n\t\t\tthis.buildSampleLists();\n\t\t\tthis.sampleListBuilt = true;\n\t\t}\n\n\t\t/* We update the sample information if there are any new moof boxes */\n\t\tthis.updateSampleLists();\n\n\t\t/* If the application needs to be informed that the 'moov' has been found,\n\t\t   we create the information object and callback the application */\n\t\tif (this.onReady && !this.readySent) {\n\t\t\tthis.readySent = true;\n\t\t\tthis.onReady(this.getInfo());\n\t\t}\n\n\t\t/* See if any sample extraction or segment creation needs to be done with the available samples */\n\t\tthis.processSamples(last);\n\n\t\t/* Inform about the best range to fetch next */\n\t\tif (this.nextSeekPosition) {\n\t\t\tnextFileStart = this.nextSeekPosition;\n\t\t\tthis.nextSeekPosition = undefined;\n\t\t} else {\n\t\t\tnextFileStart = this.nextParsePosition;\n\t\t}\n\t\tif (this.stream.getEndFilePositionAfter) {\n\t\t\tnextFileStart = this.stream.getEndFilePositionAfter(nextFileStart);\n\t\t}\n\t} else {\n\t\tif (this.nextParsePosition) {\n\t\t\t/* moov has not been parsed but the first buffer was received,\n\t\t\t   the next fetch should probably be the next box start */\n\t\t\tnextFileStart = this.nextParsePosition;\n\t\t} else {\n\t\t\t/* No valid buffer has been parsed yet, we cannot know what to parse next */\n\t\t\tnextFileStart = 0;\n\t\t}\n\t}\n\tif (this.sidx) {\n\t\tif (this.onSidx && !this.sidxSent) {\n\t\t\tthis.onSidx(this.sidx);\n\t\t\tthis.sidxSent = true;\n\t\t}\n\t}\n\tif (this.meta) {\n\t\tif (this.flattenItemInfo && !this.itemListBuilt) {\n\t\t\tthis.flattenItemInfo();\n\t\t\tthis.itemListBuilt = true;\n\t\t}\n\t\tif (this.processItems) {\n\t\t\tthis.processItems(this.onItem);\n\t\t}\n\t}\n\n\tif (this.stream.cleanBuffers) {\n\t\tLog.info(\"ISOFile\", \"Done processing buffer (fileStart: \"+ab.fileStart+\") - next buffer to fetch should have a fileStart position of \"+nextFileStart);\n\t\tthis.stream.logBufferLevel();\n\t\tthis.stream.cleanBuffers();\n\t\tthis.stream.logBufferLevel(true);\n\t\tLog.info(\"ISOFile\", \"Sample data size in memory: \"+this.getAllocatedSampleDataSize());\n\t}\n\treturn nextFileStart;\n}\n\nISOFile.prototype.getInfo = function() {\n\tvar i, j;\n\tvar movie = {};\n\tvar trak;\n\tvar track;\n\tvar ref;\n\tvar sample_desc;\n\tvar _1904 = (new Date('1904-01-01T00:00:00Z').getTime());\n\n\tif (this.moov) {\n\t\tmovie.hasMoov = true;\n\t\tmovie.duration = this.moov.mvhd.duration;\n\t\tmovie.timescale = this.moov.mvhd.timescale;\n\t\tmovie.isFragmented = (this.moov.mvex != null);\n\t\tif (movie.isFragmented && this.moov.mvex.mehd) {\n\t\t\tmovie.fragment_duration = this.moov.mvex.mehd.fragment_duration;\n\t\t}\n\t\tmovie.isProgressive = this.isProgressive;\n\t\tmovie.hasIOD = (this.moov.iods != null);\n\t\tmovie.brands = [];\n\t\tmovie.brands.push(this.ftyp.major_brand);\n\t\tmovie.brands = movie.brands.concat(this.ftyp.compatible_brands);\n\t\tmovie.created = new Date(_1904+this.moov.mvhd.creation_time*1000);\n\t\tmovie.modified = new Date(_1904+this.moov.mvhd.modification_time*1000);\n\t\tmovie.tracks = [];\n\t\tmovie.audioTracks = [];\n\t\tmovie.videoTracks = [];\n\t\tmovie.subtitleTracks = [];\n\t\tmovie.metadataTracks = [];\n\t\tmovie.hintTracks = [];\n\t\tmovie.otherTracks = [];\n\t\tfor (i = 0; i < this.moov.traks.length; i++) {\n\t\t\ttrak = this.moov.traks[i];\n\t\t\tsample_desc = trak.mdia.minf.stbl.stsd.entries[0];\n\t\t\ttrack = {};\n\t\t\tmovie.tracks.push(track);\n\t\t\ttrack.id = trak.tkhd.track_id;\n\t\t\ttrack.name = trak.mdia.hdlr.name;\n\t\t\ttrack.references = [];\n\t\t\tif (trak.tref) {\n\t\t\t\tfor (j = 0; j < trak.tref.boxes.length; j++) {\n\t\t\t\t\tref = {};\n\t\t\t\t\ttrack.references.push(ref);\n\t\t\t\t\tref.type = trak.tref.boxes[j].type;\n\t\t\t\t\tref.track_ids = trak.tref.boxes[j].track_ids;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (trak.edts) {\n\t\t\t\ttrack.edits = trak.edts.elst.entries;\n\t\t\t}\n\t\t\ttrack.created = new Date(_1904+trak.tkhd.creation_time*1000);\n\t\t\ttrack.modified = new Date(_1904+trak.tkhd.modification_time*1000);\n\t\t\ttrack.movie_duration = trak.tkhd.duration;\n\t\t\ttrack.movie_timescale = movie.timescale;\n\t\t\ttrack.layer = trak.tkhd.layer;\n\t\t\ttrack.alternate_group = trak.tkhd.alternate_group;\n\t\t\ttrack.volume = trak.tkhd.volume;\n\t\t\ttrack.matrix = trak.tkhd.matrix;\n\t\t\ttrack.track_width = trak.tkhd.width/(1<<16);\n\t\t\ttrack.track_height = trak.tkhd.height/(1<<16);\n\t\t\ttrack.timescale = trak.mdia.mdhd.timescale;\n\t\t\ttrack.cts_shift = trak.mdia.minf.stbl.cslg;\n\t\t\ttrack.duration = trak.mdia.mdhd.duration;\n\t\t\ttrack.samples_duration = trak.samples_duration;\n\t\t\ttrack.codec = sample_desc.getCodec();\n\t\t\ttrack.kind = (trak.udta && trak.udta.kinds.length ? trak.udta.kinds[0] : { schemeURI: \"\", value: \"\"});\n\t\t\ttrack.language = (trak.mdia.elng ? trak.mdia.elng.extended_language : trak.mdia.mdhd.languageString);\n\t\t\ttrack.nb_samples = trak.samples.length;\n\t\t\ttrack.size = trak.samples_size;\n\t\t\ttrack.bitrate = (track.size*8*track.timescale)/track.samples_duration;\n\t\t\tif (sample_desc.isAudio()) {\n\t\t\t\ttrack.type = \"audio\";\n\t\t\t\tmovie.audioTracks.push(track);\n\t\t\t\ttrack.audio = {};\n\t\t\t\ttrack.audio.sample_rate = sample_desc.getSampleRate();\n\t\t\t\ttrack.audio.channel_count = sample_desc.getChannelCount();\n\t\t\t\ttrack.audio.sample_size = sample_desc.getSampleSize();\n\t\t\t} else if (sample_desc.isVideo()) {\n\t\t\t\ttrack.type = \"video\";\n\t\t\t\tmovie.videoTracks.push(track);\n\t\t\t\ttrack.video = {};\n\t\t\t\ttrack.video.width = sample_desc.getWidth();\n\t\t\t\ttrack.video.height = sample_desc.getHeight();\n\t\t\t} else if (sample_desc.isSubtitle()) {\n\t\t\t\ttrack.type = \"subtitles\";\n\t\t\t\tmovie.subtitleTracks.push(track);\n\t\t\t} else if (sample_desc.isHint()) {\n\t\t\t\ttrack.type = \"metadata\";\n\t\t\t\tmovie.hintTracks.push(track);\n\t\t\t} else if (sample_desc.isMetadata()) {\n\t\t\t\ttrack.type = \"metadata\";\n\t\t\t\tmovie.metadataTracks.push(track);\n\t\t\t} else {\n\t\t\t\ttrack.type = \"metadata\";\n\t\t\t\tmovie.otherTracks.push(track);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tmovie.hasMoov = false;\n\t}\n\tmovie.mime = \"\";\n\tif (movie.hasMoov && movie.tracks) {\n\t\tif (movie.videoTracks && movie.videoTracks.length > 0) {\n\t\t\tmovie.mime += 'video/mp4; codecs=\\\"';\n\t\t} else if (movie.audioTracks && movie.audioTracks.length > 0) {\n\t\t\tmovie.mime += 'audio/mp4; codecs=\\\"';\n\t\t} else {\n\t\t\tmovie.mime += 'application/mp4; codecs=\\\"';\n\t\t}\n\t\tfor (i = 0; i < movie.tracks.length; i++) {\n\t\t\tif (i !== 0) movie.mime += ',';\n\t\t\tmovie.mime+= movie.tracks[i].codec;\n\t\t}\n\t\tmovie.mime += '\\\"; profiles=\\\"';\n\t\tmovie.mime += this.ftyp.compatible_brands.join();\n\t\tmovie.mime += '\\\"';\n\t}\n\treturn movie;\n}\n\nISOFile.prototype.setNextSeekPositionFromSample = function (sample) {\n\tif (!sample) {\n\t\treturn;\n\t}\n\tif (this.nextSeekPosition) {\n\t\tthis.nextSeekPosition = Math.min(sample.offset+sample.alreadyRead,this.nextSeekPosition);\n\t} else {\n\t\tthis.nextSeekPosition = sample.offset+sample.alreadyRead;\n\t}\n}\n\nISOFile.prototype.processSamples = function(last) {\n\tvar i;\n\tvar trak;\n\tif (!this.sampleProcessingStarted) return;\n\n\t/* For each track marked for fragmentation,\n\t   check if the next sample is there (i.e. if the sample information is known (i.e. moof has arrived) and if it has been downloaded)\n\t   and create a fragment with it */\n\tif (this.isFragmentationInitialized && this.onSegment !== null) {\n\t\tfor (i = 0; i < this.fragmentedTracks.length; i++) {\n\t\t\tvar fragTrak = this.fragmentedTracks[i];\n\t\t\ttrak = fragTrak.trak;\n\t\t\twhile (trak.nextSample < trak.samples.length && this.sampleProcessingStarted) {\n\t\t\t\t/* The sample information is there (either because the file is not fragmented and this is not the last sample,\n\t\t\t\tor because the file is fragmented and the moof for that sample has been received */\n\t\t\t\tLog.debug(\"ISOFile\", \"Creating media fragment on track #\"+fragTrak.id +\" for sample \"+trak.nextSample);\n\t\t\t\tvar result = this.createFragment(fragTrak.id, trak.nextSample, fragTrak.segmentStream);\n\t\t\t\tif (result) {\n\t\t\t\t\tfragTrak.segmentStream = result;\n\t\t\t\t\ttrak.nextSample++;\n\t\t\t\t} else {\n\t\t\t\t\t/* The fragment could not be created because the media data is not there (not downloaded), wait for it */\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t/* A fragment is created by sample, but the segment is the accumulation in the buffer of these fragments.\n\t\t\t\t   It is flushed only as requested by the application (nb_samples) to avoid too many callbacks */\n\t\t\t\tif (trak.nextSample % fragTrak.nb_samples === 0 || (last || trak.nextSample >= trak.samples.length)) {\n\t\t\t\t\tLog.info(\"ISOFile\", \"Sending fragmented data on track #\"+fragTrak.id+\" for samples [\"+Math.max(0,trak.nextSample-fragTrak.nb_samples)+\",\"+(trak.nextSample-1)+\"]\");\n\t\t\t\t\tLog.info(\"ISOFile\", \"Sample data size in memory: \"+this.getAllocatedSampleDataSize());\n\t\t\t\t\tif (this.onSegment) {\n\t\t\t\t\t\tthis.onSegment(fragTrak.id, fragTrak.user, fragTrak.segmentStream.buffer, trak.nextSample, (last || trak.nextSample >= trak.samples.length));\n\t\t\t\t\t}\n\t\t\t\t\t/* force the creation of a new buffer */\n\t\t\t\t\tfragTrak.segmentStream = null;\n\t\t\t\t\tif (fragTrak !== this.fragmentedTracks[i]) {\n\t\t\t\t\t\t/* make sure we can stop fragmentation if needed */\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (this.onSamples !== null) {\n\t\t/* For each track marked for data export,\n\t\t   check if the next sample is there (i.e. has been downloaded) and send it */\n\t\tfor (i = 0; i < this.extractedTracks.length; i++) {\n\t\t\tvar extractTrak = this.extractedTracks[i];\n\t\t\ttrak = extractTrak.trak;\n\t\t\twhile (trak.nextSample < trak.samples.length && this.sampleProcessingStarted) {\n\t\t\t\tLog.debug(\"ISOFile\", \"Exporting on track #\"+extractTrak.id +\" sample #\"+trak.nextSample);\n\t\t\t\tvar sample = this.getSample(trak, trak.nextSample);\n\t\t\t\tif (sample) {\n\t\t\t\t\ttrak.nextSample++;\n\t\t\t\t\textractTrak.samples.push(sample);\n\t\t\t\t} else {\n\t\t\t\t\tthis.setNextSeekPositionFromSample(trak.samples[trak.nextSample]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (trak.nextSample % extractTrak.nb_samples === 0 || trak.nextSample >= trak.samples.length) {\n\t\t\t\t\tLog.debug(\"ISOFile\", \"Sending samples on track #\"+extractTrak.id+\" for sample \"+trak.nextSample);\n\t\t\t\t\tif (this.onSamples) {\n\t\t\t\t\t\tthis.onSamples(extractTrak.id, extractTrak.user, extractTrak.samples);\n\t\t\t\t\t}\n\t\t\t\t\textractTrak.samples = [];\n\t\t\t\t\tif (extractTrak !== this.extractedTracks[i]) {\n\t\t\t\t\t\t/* check if the extraction needs to be stopped */\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/* Find and return specific boxes using recursion and early return */\nISOFile.prototype.getBox = function(type) {\n  var result = this.getBoxes(type, true);\n  return (result.length ? result[0] : null);\n}\n\nISOFile.prototype.getBoxes = function(type, returnEarly) {\n  var result = [];\n  ISOFile._sweep.call(this, type, result, returnEarly);\n  return result;\n}\n\nISOFile._sweep = function(type, result, returnEarly) {\n  if (this.type && this.type == type) result.push(this);\n  for (var box in this.boxes) {\n    if (result.length && returnEarly) return;\n    ISOFile._sweep.call(this.boxes[box], type, result, returnEarly);\n  }\n}\n\nISOFile.prototype.getTrackSamplesInfo = function(track_id) {\n\tvar track = this.getTrackById(track_id);\n\tif (track) {\n\t\treturn track.samples;\n\t} else {\n\t\treturn;\n\t}\n}\n\nISOFile.prototype.getTrackSample = function(track_id, number) {\n\tvar track = this.getTrackById(track_id);\n\tvar sample = this.getSample(track, number);\n\treturn sample;\n}\n\n/* Called by the application to release the resources associated to samples already forwarded to the application */\nISOFile.prototype.releaseUsedSamples = function (id, sampleNum) {\n\tvar size = 0;\n\tvar trak = this.getTrackById(id);\n\tif (!trak.lastValidSample) trak.lastValidSample = 0;\n\tfor (var i = trak.lastValidSample; i < sampleNum; i++) {\n\t\tsize+=this.releaseSample(trak, i);\n\t}\n\tLog.info(\"ISOFile\", \"Track #\"+id+\" released samples up to \"+sampleNum+\" (released size: \"+size+\", remaining: \"+this.samplesDataSize+\")\");\n\ttrak.lastValidSample = sampleNum;\n}\n\nISOFile.prototype.start = function() {\n\tthis.sampleProcessingStarted = true;\n\tthis.processSamples(false);\n}\n\nISOFile.prototype.stop = function() {\n\tthis.sampleProcessingStarted = false;\n}\n\n/* Called by the application to flush the remaining samples (e.g. once the download is finished or when no more samples will be added) */\nISOFile.prototype.flush = function() {\n\tLog.info(\"ISOFile\", \"Flushing remaining samples\");\n\tthis.updateSampleLists();\n\tthis.processSamples(true);\n\tthis.stream.cleanBuffers();\n\tthis.stream.logBufferLevel(true);\n}\n\n/* Finds the byte offset for a given time on a given track\n   also returns the time of the previous rap */\nISOFile.prototype.seekTrack = function(time, useRap, trak) {\n\tvar j;\n\tvar sample;\n\tvar seek_offset = Infinity;\n\tvar rap_seek_sample_num = 0;\n\tvar seek_sample_num = 0;\n\tvar timescale;\n\n\tif (trak.samples.length === 0) {\n\t\tLog.info(\"ISOFile\", \"No sample in track, cannot seek! Using time \"+Log.getDurationString(0, 1) +\" and offset: \"+0);\n\t\treturn { offset: 0, time: 0 };\n\t}\n\n\tfor (j = 0; j < trak.samples.length; j++) {\n\t\tsample = trak.samples[j];\n\t\tif (j === 0) {\n\t\t\tseek_sample_num = 0;\n\t\t\ttimescale = sample.timescale;\n\t\t} else if (sample.cts > time * sample.timescale) {\n\t\t\tseek_sample_num = j-1;\n\t\t\tbreak;\n\t\t}\n\t\tif (useRap && sample.is_sync) {\n\t\t\trap_seek_sample_num = j;\n\t\t}\n\t}\n\tif (useRap) {\n\t\tseek_sample_num = rap_seek_sample_num;\n\t}\n\ttime = trak.samples[seek_sample_num].cts;\n\ttrak.nextSample = seek_sample_num;\n\twhile (trak.samples[seek_sample_num].alreadyRead === trak.samples[seek_sample_num].size) {\n\t\t// No remaining samples to look for, all are downloaded.\n\t\tif (!trak.samples[seek_sample_num + 1]) {\n\t\t\tbreak;\n\t\t}\n\t\tseek_sample_num++;\n\t}\n\tseek_offset = trak.samples[seek_sample_num].offset+trak.samples[seek_sample_num].alreadyRead;\n\tLog.info(\"ISOFile\", \"Seeking to \"+(useRap ? \"RAP\": \"\")+\" sample #\"+trak.nextSample+\" on track \"+trak.tkhd.track_id+\", time \"+Log.getDurationString(time, timescale) +\" and offset: \"+seek_offset);\n\treturn { offset: seek_offset, time: time/timescale };\n}\n\nISOFile.prototype.getTrackDuration = function (trak) {\n\tvar sample;\n\n\tif (!trak.samples) {\n\t\treturn Infinity;\n\t}\n\tsample = trak.samples[trak.samples.length - 1];\n\treturn (sample.cts + sample.duration) / sample.timescale;\n}\n\n/* Finds the byte offset in the file corresponding to the given time or to the time of the previous RAP */\nISOFile.prototype.seek = function(time, useRap) {\n\tvar moov = this.moov;\n\tvar trak;\n\tvar trak_seek_info;\n\tvar i;\n\tvar seek_info = { offset: Infinity, time: Infinity };\n\tif (!this.moov) {\n\t\tthrow \"Cannot seek: moov not received!\";\n\t} else {\n\t\tfor (i = 0; i<moov.traks.length; i++) {\n\t\t\ttrak = moov.traks[i];\n\t\t\tif (time > this.getTrackDuration(trak)) { // skip tracks that already ended\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttrak_seek_info = this.seekTrack(time, useRap, trak);\n\t\t\tif (trak_seek_info.offset < seek_info.offset) {\n\t\t\t\tseek_info.offset = trak_seek_info.offset;\n\t\t\t}\n\t\t\tif (trak_seek_info.time < seek_info.time) {\n\t\t\t\tseek_info.time = trak_seek_info.time;\n\t\t\t}\n\t\t}\n\t\tLog.info(\"ISOFile\", \"Seeking at time \"+Log.getDurationString(seek_info.time, 1)+\" needs a buffer with a fileStart position of \"+seek_info.offset);\n\t\tif (seek_info.offset === Infinity) {\n\t\t\t/* No sample info, in all tracks, cannot seek */\n\t\t\tseek_info = { offset: this.nextParsePosition, time: 0 };\n\t\t} else {\n\t\t\t/* check if the seek position is already in some buffer and\n\t\t\t in that case return the end of that buffer (or of the last contiguous buffer) */\n\t\t\t/* TODO: Should wait until append operations are done */\n\t\t\tseek_info.offset = this.stream.getEndFilePositionAfter(seek_info.offset);\n\t\t}\n\t\tLog.info(\"ISOFile\", \"Adjusted seek position (after checking data already in buffer): \"+seek_info.offset);\n\t\treturn seek_info;\n\t}\n}\n\nISOFile.prototype.equal = function(b) {\n\tvar box_index = 0;\n\twhile (box_index < this.boxes.length && box_index < b.boxes.length) {\n\t\tvar a_box = this.boxes[box_index];\n\t\tvar b_box = b.boxes[box_index];\n\t\tif (!BoxParser.boxEqual(a_box, b_box)) {\n\t\t\treturn false;\n\t\t}\n\t\tbox_index++;\n\t}\n\treturn true;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.ISOFile = ISOFile;\n}\n// file:src/isofile-advanced-parsing.js\n/* position in the current buffer of the beginning of the last box parsed */\nISOFile.prototype.lastBoxStartPosition = 0;\n/* indicator if the parsing is stuck in the middle of an mdat box */\nISOFile.prototype.parsingMdat = null;\n/* next file position that the parser needs:\n    - 0 until the first buffer (i.e. fileStart ===0) has been received \n    - otherwise, the next box start until the moov box has been parsed\n    - otherwise, the position of the next sample to fetch\n */\nISOFile.prototype.nextParsePosition = 0;\n/* keep mdat data */\nISOFile.prototype.discardMdatData = false;\n\nISOFile.prototype.processIncompleteBox = function(ret) {\n\tvar box;\n\tvar merged;\n\tvar found;\n\t\n\t/* we did not have enough bytes in the current buffer to parse the entire box */\n\tif (ret.type === \"mdat\") { \n\t\t/* we had enough bytes to get its type and size and it's an 'mdat' */\n\t\t\n\t\t/* special handling for mdat boxes, since we don't actually need to parse it linearly \n\t\t   we create the box */\n\t\tbox = new BoxParser[ret.type+\"Box\"](ret.size);\t\n\t\tthis.parsingMdat = box;\n\t\tthis.boxes.push(box);\n\t\tthis.mdats.push(box);\t\t\t\n\t\tbox.start = ret.start;\n\t\tbox.hdr_size = ret.hdr_size;\n\t\tthis.stream.addUsedBytes(box.hdr_size);\n\n\t\t/* indicate that the parsing should start from the end of the box */\n\t\tthis.lastBoxStartPosition = box.start + box.size;\n \t\t/* let's see if we have the end of the box in the other buffers */\n\t\tfound = this.stream.seek(box.start + box.size, false, this.discardMdatData);\n\t\tif (found) {\n\t\t\t/* found the end of the box */\n\t\t\tthis.parsingMdat = null;\n\t\t\t/* let's see if we can parse more in this buffer */\n\t\t\treturn true;\n\t\t} else {\n\t\t\t/* 'mdat' end not found in the existing buffers */\n\t\t\t/* determine the next position in the file to start parsing from */\n\t\t\tif (!this.moovStartFound) {\n\t\t\t\t/* moov not find yet, \n\t\t\t\t   the file probably has 'mdat' at the beginning, and 'moov' at the end, \n\t\t\t\t   indicate that the downloader should not try to download those bytes now */\n\t\t\t\tthis.nextParsePosition = box.start + box.size;\n\t\t\t} else {\n\t\t\t\t/* we have the start of the moov box, \n\t\t\t\t   the next bytes should try to complete the current 'mdat' */\n\t\t\t\tthis.nextParsePosition = this.stream.findEndContiguousBuf();\n\t\t\t}\n\t\t\t/* not much we can do, wait for more buffers to arrive */\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\t/* box is incomplete, we may not even know its type */\n\t\tif (ret.type === \"moov\") { \n\t\t\t/* the incomplete box is a 'moov' box */\n\t\t\tthis.moovStartFound = true;\n\t\t\tif (this.mdats.length === 0) {\n\t\t\t\tthis.isProgressive = true;\n\t\t\t}\n\t\t}\n\t\t/* either it's not an mdat box (and we need to parse it, we cannot skip it)\n\t\t   (TODO: we could skip 'free' boxes ...)\n\t\t\t   or we did not have enough data to parse the type and size of the box, \n\t\t   we try to concatenate the current buffer with the next buffer to restart parsing */\n\t\tmerged = (this.stream.mergeNextBuffer ? this.stream.mergeNextBuffer() : false);\n\t\tif (merged) {\n\t\t\t/* The next buffer was contiguous, the merging succeeded,\n\t\t\t   we can now continue parsing, \n\t\t\t   the next best position to parse is at the end of this new buffer */\n\t\t\tthis.nextParsePosition = this.stream.getEndPosition();\n\t\t\treturn true;\n\t\t} else {\n\t\t\t/* we cannot concatenate existing buffers because they are not contiguous or because there is no additional buffer */\n\t\t\t/* The next best position to parse is still at the end of this old buffer */\n\t\t\tif (!ret.type) {\n\t\t\t\t/* There were not enough bytes in the buffer to parse the box type and length,\n\t\t\t\t   the next fetch should retrieve those missing bytes, i.e. the next bytes after this buffer */\n\t\t\t\tthis.nextParsePosition = this.stream.getEndPosition();\n\t\t\t} else {\n\t\t\t\t/* we had enough bytes to parse size and type of the incomplete box\n\t\t\t\t   if we haven't found yet the moov box, skip this one and try the next one \n\t\t\t\t   if we have found the moov box, let's continue linear parsing */\n\t\t\t\tif (this.moovStartFound) {\n\t\t\t\t\tthis.nextParsePosition = this.stream.getEndPosition();\n\t\t\t\t} else {\n\t\t\t\t\tthis.nextParsePosition = this.stream.getPosition() + ret.size;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\nISOFile.prototype.hasIncompleteMdat = function () {\n\treturn (this.parsingMdat !== null);\n}\n\nISOFile.prototype.processIncompleteMdat = function () {\n\tvar box;\n\tvar found;\n\t\n\t/* we are in the parsing of an incomplete mdat box */\n\tbox = this.parsingMdat;\n\n\tfound = this.stream.seek(box.start + box.size, false, this.discardMdatData);\n\tif (found) {\n\t\tLog.debug(\"ISOFile\", \"Found 'mdat' end in buffered data\");\n\t\t/* the end of the mdat has been found */ \n\t\tthis.parsingMdat = null;\n\t\t/* we can parse more in this buffer */\n\t\treturn true;\n\t} else {\n\t\t/* we don't have the end of this mdat yet, \n\t\t   indicate that the next byte to fetch is the end of the buffers we have so far, \n\t\t   return and wait for more buffer to come */\n\t\tthis.nextParsePosition = this.stream.findEndContiguousBuf();\n\t\treturn false;\n\t}\n}\n\nISOFile.prototype.restoreParsePosition = function() {\n\t/* Reposition at the start position of the previous box not entirely parsed */\n\treturn this.stream.seek(this.lastBoxStartPosition, true, this.discardMdatData);\n}\n\nISOFile.prototype.saveParsePosition = function() {\n\t/* remember the position of the box start in case we need to roll back (if the box is incomplete) */\n\tthis.lastBoxStartPosition = this.stream.getPosition();\t\n}\n\nISOFile.prototype.updateUsedBytes = function(box, ret) {\n\tif (this.stream.addUsedBytes) {\n\t\tif (box.type === \"mdat\") {\n\t\t\t/* for an mdat box, only its header is considered used, other bytes will be used when sample data is requested */\n\t\t\tthis.stream.addUsedBytes(box.hdr_size);\n\t\t\tif (this.discardMdatData) {\n\t\t\t\tthis.stream.addUsedBytes(box.size-box.hdr_size);\n\t\t\t}\n\t\t} else {\n\t\t\t/* for all other boxes, the entire box data is considered used */\n\t\t\tthis.stream.addUsedBytes(box.size);\n\t\t}\t\n\t}\n}\n// file:src/isofile-advanced-creation.js\nISOFile.prototype.add = BoxParser.Box.prototype.add;\nISOFile.prototype.addBox = BoxParser.Box.prototype.addBox;\n\nISOFile.prototype.init = function (_options) {\n\tvar options = _options || {}; \n\tvar ftyp = this.add(\"ftyp\").set(\"major_brand\", (options.brands && options.brands[0]) || \"iso4\")\n\t\t\t\t\t\t\t   .set(\"minor_version\", 0)\n\t\t\t\t\t\t\t   .set(\"compatible_brands\", options.brands || [\"iso4\"]);\n\tvar moov = this.add(\"moov\");\n\tmoov.add(\"mvhd\").set(\"timescale\", options.timescale || 600)\n\t\t\t\t\t.set(\"rate\", options.rate || 1<<16)\n\t\t\t\t\t.set(\"creation_time\", 0)\n\t\t\t\t\t.set(\"modification_time\", 0)\n\t\t\t\t\t.set(\"duration\", options.duration || 0)\n\t\t\t\t\t.set(\"volume\", (options.width) ? 0 : 0x0100)\n\t\t\t\t\t.set(\"matrix\", [ 1<<16, 0, 0, 0, 1<<16, 0, 0, 0, 0x40000000])\n\t\t\t\t\t.set(\"next_track_id\", 1);\n\tmoov.add(\"mvex\");\n\treturn this;\n}\n\nISOFile.prototype.addTrack = function (_options) {\n\tif (!this.moov) {\n\t\tthis.init(_options);\n\t}\n\n\tvar options = _options || {}; \n\toptions.width = options.width || 320;\n\toptions.height = options.height || 320;\n\toptions.id = options.id || this.moov.mvhd.next_track_id;\n\toptions.type = options.type || \"avc1\";\n\n\tvar trak = this.moov.add(\"trak\");\n\tthis.moov.mvhd.next_track_id = options.id+1;\n\ttrak.add(\"tkhd\").set(\"flags\",BoxParser.TKHD_FLAG_ENABLED | \n\t\t\t\t\t\t\t\t BoxParser.TKHD_FLAG_IN_MOVIE | \n\t\t\t\t\t\t\t\t BoxParser.TKHD_FLAG_IN_PREVIEW)\n\t\t\t\t\t.set(\"creation_time\",0)\n\t\t\t\t\t.set(\"modification_time\", 0)\n\t\t\t\t\t.set(\"track_id\", options.id)\n\t\t\t\t\t.set(\"duration\", options.duration || 0)\n\t\t\t\t\t.set(\"layer\", options.layer || 0)\n\t\t\t\t\t.set(\"alternate_group\", 0)\n\t\t\t\t\t.set(\"volume\", 1)\n\t\t\t\t\t.set(\"matrix\", [ 1<<16, 0, 0, 0, 1<<16, 0, 0, 0, 0x40000000 ])\n\t\t\t\t\t.set(\"width\", options.width << 16)\n\t\t\t\t\t.set(\"height\", options.height << 16);\n\n\tvar mdia = trak.add(\"mdia\");\n\tmdia.add(\"mdhd\").set(\"creation_time\", 0)\n\t\t\t\t\t.set(\"modification_time\", 0)\n\t\t\t\t\t.set(\"timescale\", options.timescale || 1)\n\t\t\t\t\t.set(\"duration\", options.media_duration || 0)\n\t\t\t\t\t.set(\"language\", options.language || \"und\");\n\n\tmdia.add(\"hdlr\").set(\"handler\", options.hdlr || \"vide\")\n\t\t\t\t\t.set(\"name\", options.name || \"Track created with MP4Box.js\");\n\n\tmdia.add(\"elng\").set(\"extended_language\", options.language || \"fr-FR\");\n\n\tvar minf = mdia.add(\"minf\");\n\tif (BoxParser[options.type+\"SampleEntry\"] === undefined) return;\n\tvar sample_description_entry = new BoxParser[options.type+\"SampleEntry\"]();\n\tsample_description_entry.data_reference_index = 1;\n\tvar media_type = \"\";\n\tfor (var mediaType in BoxParser.sampleEntryCodes) {\n\t\tvar codes = BoxParser.sampleEntryCodes[mediaType];\n\t\tfor (var i = 0; i < codes.length; i++) {\n\t\t\tif (codes.indexOf(options.type) > -1) {\n\t\t\t\tmedia_type = mediaType;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tswitch(media_type) {\n\t\tcase \"Visual\":\n\t\t\tminf.add(\"vmhd\").set(\"graphicsmode\",0).set(\"opcolor\", [ 0, 0, 0 ]);\n\t\t\tsample_description_entry.set(\"width\", options.width)\n\t\t\t\t\t\t.set(\"height\", options.height)\n\t\t\t\t\t\t.set(\"horizresolution\", 0x48<<16)\n\t\t\t\t\t\t.set(\"vertresolution\", 0x48<<16)\n\t\t\t\t\t\t.set(\"frame_count\", 1)\n\t\t\t\t\t\t.set(\"compressorname\", options.type+\" Compressor\")\n\t\t\t\t\t\t.set(\"depth\", 0x18);\n\t\t\tif (options.avcDecoderConfigRecord) {\n\t\t\t\tvar avcC = new BoxParser.avcCBox();\n\t\t\t\tavcC.parse(new MP4BoxStream(options.avcDecoderConfigRecord));\n\t\t\t\tsample_description_entry.addBox(avcC);\n\t\t\t} else if (options.hevcDecoderConfigRecord) {\n\t\t\t\tvar hvcC = new BoxParser.hvcCBox();\n\t\t\t\thvcC.parse(new MP4BoxStream(options.hevcDecoderConfigRecord));\n\t\t\t\tsample_description_entry.addBox(hvcC);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"Audio\":\n\t\t\tminf.add(\"smhd\").set(\"balance\", options.balance || 0);\n\t\t\tsample_description_entry.set(\"channel_count\", options.channel_count || 2)\n\t\t\t\t\t\t.set(\"samplesize\", options.samplesize || 16)\n\t\t\t\t\t\t.set(\"samplerate\", options.samplerate || 1<<16);\n\t\t\tbreak;\n\t\tcase \"Hint\":\n\t\t\tminf.add(\"hmhd\"); // TODO: add properties\n\t\t\tbreak;\n\t\tcase \"Subtitle\":\n\t\t\tminf.add(\"sthd\");\n\t\t\tswitch (options.type) {\n\t\t\t\tcase \"stpp\":\n\t\t\t\t\tsample_description_entry.set(\"namespace\", options.namespace || \"nonamespace\")\n\t\t\t\t\t\t\t\t.set(\"schema_location\", options.schema_location || \"\")\n\t\t\t\t\t\t\t\t.set(\"auxiliary_mime_types\", options.auxiliary_mime_types || \"\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"Metadata\":\n\t\t\tminf.add(\"nmhd\");\n\t\t\tbreak;\n\t\tcase \"System\":\n\t\t\tminf.add(\"nmhd\");\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tminf.add(\"nmhd\");\n\t\t\tbreak;\n\t}\n\tif (options.description) {\n\t\tsample_description_entry.addBox(options.description);\n\t}\n\tif (options.description_boxes) {\n\t\toptions.description_boxes.forEach(function (b) {\n\t\t\tsample_description_entry.addBox(b);\n\t\t});\n\t}\n\tminf.add(\"dinf\").add(\"dref\").addEntry((new BoxParser[\"url Box\"]()).set(\"flags\", 0x1));\n\tvar stbl = minf.add(\"stbl\");\n\tstbl.add(\"stsd\").addEntry(sample_description_entry);\n\tstbl.add(\"stts\").set(\"sample_counts\", [])\n\t\t\t\t\t.set(\"sample_deltas\", []);\n\tstbl.add(\"stsc\").set(\"first_chunk\", [])\n\t\t\t\t\t.set(\"samples_per_chunk\", [])\n\t\t\t\t\t.set(\"sample_description_index\", []);\n\tstbl.add(\"stco\").set(\"chunk_offsets\", []);\n\tstbl.add(\"stsz\").set(\"sample_sizes\", []);\n\n\tthis.moov.mvex.add(\"trex\").set(\"track_id\", options.id)\n\t\t\t\t\t\t\t  .set(\"default_sample_description_index\", options.default_sample_description_index || 1)\n\t\t\t\t\t\t\t  .set(\"default_sample_duration\", options.default_sample_duration || 0)\n\t\t\t\t\t\t\t  .set(\"default_sample_size\", options.default_sample_size || 0)\n\t\t\t\t\t\t\t  .set(\"default_sample_flags\", options.default_sample_flags || 0);\n\tthis.buildTrakSampleLists(trak);\n\treturn options.id;\n}\n\nBoxParser.Box.prototype.computeSize = function(stream_) {\n\tvar stream = stream_ || new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\tthis.write(stream);\n}\n\nISOFile.prototype.addSample = function (track_id, data, _options) {\n\tvar options = _options || {};\n\tvar sample = {};\n\tvar trak = this.getTrackById(track_id);\n\tif (trak === null) return;\n    sample.number = trak.samples.length;\n\tsample.track_id = trak.tkhd.track_id;\n\tsample.timescale = trak.mdia.mdhd.timescale;\n\tsample.description_index = (options.sample_description_index ? options.sample_description_index - 1: 0);\n\tsample.description = trak.mdia.minf.stbl.stsd.entries[sample.description_index];\n\tsample.data = data;\n\tsample.size = data.byteLength;\n\tsample.alreadyRead = sample.size;\n\tsample.duration = options.duration || 1;\n\tsample.cts = options.cts || 0;\n\tsample.dts = options.dts || 0;\n\tsample.is_sync = options.is_sync || false;\n\tsample.is_leading = options.is_leading || 0;\n\tsample.depends_on = options.depends_on || 0;\n\tsample.is_depended_on = options.is_depended_on || 0;\n\tsample.has_redundancy = options.has_redundancy || 0;\n\tsample.degradation_priority = options.degradation_priority || 0;\n\tsample.offset = 0;\n\tsample.subsamples = options.subsamples;\n\ttrak.samples.push(sample);\n\ttrak.samples_size += sample.size;\n\ttrak.samples_duration += sample.duration;\n\tif (trak.first_dts === undefined) {\n\t\ttrak.first_dts = options.dts;\n\t}\n\n\tthis.processSamples();\n\t\n\tvar moof = this.createSingleSampleMoof(sample);\n\tthis.addBox(moof);\n\tmoof.computeSize();\n\t/* adjusting the data_offset now that the moof size is known*/\n\tmoof.trafs[0].truns[0].data_offset = moof.size+8; //8 is mdat header\n\tthis.add(\"mdat\").data = new Uint8Array(data);\n\treturn sample;\n}\n\nISOFile.prototype.createSingleSampleMoof = function(sample) {\n\tvar sample_flags = 0;\n\tif (sample.is_sync)\n\t\tsample_flags = (1 << 25);  // sample_depends_on_none (I picture)\n\telse\n\t\tsample_flags = (1 << 16);  // non-sync\n\n\tvar moof = new BoxParser.moofBox();\n\tmoof.add(\"mfhd\").set(\"sequence_number\", this.nextMoofNumber);\n\tthis.nextMoofNumber++;\n\tvar traf = moof.add(\"traf\");\n\tvar trak = this.getTrackById(sample.track_id);\n\ttraf.add(\"tfhd\").set(\"track_id\", sample.track_id)\n\t\t\t\t\t.set(\"flags\", BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF);\n\ttraf.add(\"tfdt\").set(\"baseMediaDecodeTime\", (sample.dts - (trak.first_dts || 0)));\n\ttraf.add(\"trun\").set(\"flags\", BoxParser.TRUN_FLAGS_DATA_OFFSET | BoxParser.TRUN_FLAGS_DURATION | \n\t\t\t\t \t\t\t\t  BoxParser.TRUN_FLAGS_SIZE | BoxParser.TRUN_FLAGS_FLAGS | \n\t\t\t\t \t\t\t\t  BoxParser.TRUN_FLAGS_CTS_OFFSET)\n\t\t\t\t\t.set(\"data_offset\",0)\n\t\t\t\t\t.set(\"first_sample_flags\",0)\n\t\t\t\t\t.set(\"sample_count\",1)\n\t\t\t\t\t.set(\"sample_duration\",[sample.duration])\n\t\t\t\t\t.set(\"sample_size\",[sample.size])\n\t\t\t\t\t.set(\"sample_flags\",[sample_flags])\n\t\t\t\t\t.set(\"sample_composition_time_offset\", [sample.cts - sample.dts]);\n\treturn moof;\n}\n\n// file:src/isofile-sample-processing.js\n/* Index of the last moof box received */\nISOFile.prototype.lastMoofIndex = 0;\n\n/* size of the buffers allocated for samples */\nISOFile.prototype.samplesDataSize = 0;\n\n/* Resets all sample tables */\nISOFile.prototype.resetTables = function () {\n\tvar i;\n\tvar trak, stco, stsc, stsz, stts, ctts, stss;\n\tthis.initial_duration = this.moov.mvhd.duration;\n\tthis.moov.mvhd.duration = 0;\n\tfor (i = 0; i < this.moov.traks.length; i++) {\n\t\ttrak = this.moov.traks[i];\n\t\ttrak.tkhd.duration = 0;\n\t\ttrak.mdia.mdhd.duration = 0;\n\t\tstco = trak.mdia.minf.stbl.stco || trak.mdia.minf.stbl.co64;\n\t\tstco.chunk_offsets = [];\n\t\tstsc = trak.mdia.minf.stbl.stsc;\n\t\tstsc.first_chunk = [];\n\t\tstsc.samples_per_chunk = [];\n\t\tstsc.sample_description_index = [];\n\t\tstsz = trak.mdia.minf.stbl.stsz || trak.mdia.minf.stbl.stz2;\n\t\tstsz.sample_sizes = [];\n\t\tstts = trak.mdia.minf.stbl.stts;\n\t\tstts.sample_counts = [];\n\t\tstts.sample_deltas = [];\n\t\tctts = trak.mdia.minf.stbl.ctts;\n\t\tif (ctts) {\n\t\t\tctts.sample_counts = [];\n\t\t\tctts.sample_offsets = [];\n\t\t}\n\t\tstss = trak.mdia.minf.stbl.stss;\n\t\tvar k = trak.mdia.minf.stbl.boxes.indexOf(stss);\n\t\tif (k != -1) trak.mdia.minf.stbl.boxes[k] = null;\n\t}\n}\n\nISOFile.initSampleGroups = function(trak, traf, sbgps, trak_sgpds, traf_sgpds) {\n\tvar l;\n\tvar k;\n\tvar sample_groups_info;\n\tvar sample_group_info;\n\tvar sample_group_key;\n\tfunction SampleGroupInfo(_type, _parameter, _sbgp) {\n\t\tthis.grouping_type = _type;\n\t\tthis.grouping_type_parameter = _parameter;\n\t\tthis.sbgp = _sbgp;\n\t\tthis.last_sample_in_run = -1;\n\t\tthis.entry_index = -1;\t\t\n\t}\n\tif (traf) {\n\t\ttraf.sample_groups_info = [];\n\t} \n\tif (!trak.sample_groups_info) {\n\t\ttrak.sample_groups_info = [];\n\t}\n\tfor (k = 0; k < sbgps.length; k++) {\n\t\tsample_group_key = sbgps[k].grouping_type +\"/\"+ sbgps[k].grouping_type_parameter;\n\t\tsample_group_info = new SampleGroupInfo(sbgps[k].grouping_type, sbgps[k].grouping_type_parameter, sbgps[k]);\n\t\tif (traf) {\n\t\t\ttraf.sample_groups_info[sample_group_key] = sample_group_info;\n\t\t}\n\t\tif (!trak.sample_groups_info[sample_group_key]) {\n\t\t\ttrak.sample_groups_info[sample_group_key] = sample_group_info;\n\t\t}\n\t\tfor (l=0; l <trak_sgpds.length; l++) {\n\t\t\tif (trak_sgpds[l].grouping_type === sbgps[k].grouping_type) {\n\t\t\t\tsample_group_info.description = trak_sgpds[l];\n\t\t\t\tsample_group_info.description.used = true;\n\t\t\t}\n\t\t}\n\t\tif (traf_sgpds) {\n\t\t\tfor (l=0; l <traf_sgpds.length; l++) {\n\t\t\t\tif (traf_sgpds[l].grouping_type === sbgps[k].grouping_type) {\n\t\t\t\t\tsample_group_info.fragment_description = traf_sgpds[l];\n\t\t\t\t\tsample_group_info.fragment_description.used = true;\n\t\t\t\t\tsample_group_info.is_fragment = true;\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t}\n\t}\n\tif (!traf) {\n\t\tfor (k = 0; k < trak_sgpds.length; k++) {\n\t\t\tif (!trak_sgpds[k].used && trak_sgpds[k].version >= 2) {\n\t\t\t\tsample_group_key = trak_sgpds[k].grouping_type +\"/0\";\n\t\t\t\tsample_group_info = new SampleGroupInfo(trak_sgpds[k].grouping_type, 0);\n\t\t\t\tif (!trak.sample_groups_info[sample_group_key]) {\n\t\t\t\t\ttrak.sample_groups_info[sample_group_key] = sample_group_info;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (traf_sgpds) {\n\t\t\tfor (k = 0; k < traf_sgpds.length; k++) {\n\t\t\t\tif (!traf_sgpds[k].used && traf_sgpds[k].version >= 2) {\n\t\t\t\t\tsample_group_key = traf_sgpds[k].grouping_type +\"/0\";\n\t\t\t\t\tsample_group_info = new SampleGroupInfo(traf_sgpds[k].grouping_type, 0);\n\t\t\t\t\tsample_group_info.is_fragment = true;\n\t\t\t\t\tif (!traf.sample_groups_info[sample_group_key]) {\n\t\t\t\t\t\ttraf.sample_groups_info[sample_group_key] = sample_group_info;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nISOFile.setSampleGroupProperties = function(trak, sample, sample_number, sample_groups_info) {\n\tvar k;\n\tvar index;\n\tsample.sample_groups = [];\n\tfor (k in sample_groups_info) {\n\t\tsample.sample_groups[k] = {};\n\t\tsample.sample_groups[k].grouping_type = sample_groups_info[k].grouping_type;\n\t\tsample.sample_groups[k].grouping_type_parameter = sample_groups_info[k].grouping_type_parameter;\n\t\tif (sample_number >= sample_groups_info[k].last_sample_in_run) {\n\t\t\tif (sample_groups_info[k].last_sample_in_run < 0) {\n\t\t\t\tsample_groups_info[k].last_sample_in_run = 0;\n\t\t\t}\n\t\t\tsample_groups_info[k].entry_index++;\t\n\t\t\tif (sample_groups_info[k].entry_index <= sample_groups_info[k].sbgp.entries.length - 1) {\n\t\t\t\tsample_groups_info[k].last_sample_in_run += sample_groups_info[k].sbgp.entries[sample_groups_info[k].entry_index].sample_count;\n\t\t\t}\n\t\t}\n\t\tif (sample_groups_info[k].entry_index <= sample_groups_info[k].sbgp.entries.length - 1) {\n\t\t\tsample.sample_groups[k].group_description_index = sample_groups_info[k].sbgp.entries[sample_groups_info[k].entry_index].group_description_index;\n\t\t} else {\n\t\t\tsample.sample_groups[k].group_description_index = -1; // special value for not defined\n\t\t}\n\t\tif (sample.sample_groups[k].group_description_index !== 0) {\n\t\t\tvar description;\n\t\t\tif (sample_groups_info[k].fragment_description) {\n\t\t\t\tdescription = sample_groups_info[k].fragment_description;\n\t\t\t} else {\n\t\t\t\tdescription = sample_groups_info[k].description;\n\t\t\t}\n\t\t\tif (sample.sample_groups[k].group_description_index > 0) {\n\t\t\t\tif (sample.sample_groups[k].group_description_index > 65535) {\n\t\t\t\t\tindex = (sample.sample_groups[k].group_description_index >> 16)-1;\n\t\t\t\t} else {\n\t\t\t\t\tindex = sample.sample_groups[k].group_description_index-1;\n\t\t\t\t}\n\t\t\t\tif (description && index >= 0) {\n\t\t\t\t\tsample.sample_groups[k].description = description.entries[index];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (description && description.version >= 2) {\n\t\t\t\t\tif (description.default_group_description_index > 0) {\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tsample.sample_groups[k].description = description.entries[description.default_group_description_index-1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nISOFile.process_sdtp = function (sdtp, sample, number) {\n\tif (!sample) {\n\t\treturn;\n\t}\n\tif (sdtp) {\n\t\tsample.is_leading = sdtp.is_leading[number];\n\t\tsample.depends_on = sdtp.sample_depends_on[number];\n\t\tsample.is_depended_on = sdtp.sample_is_depended_on[number];\n\t\tsample.has_redundancy = sdtp.sample_has_redundancy[number];\n\t} else {\n\t\tsample.is_leading = 0;\n\t\tsample.depends_on = 0;\n\t\tsample.is_depended_on = 0\n\t\tsample.has_redundancy = 0;\n\t}\t\n}\n\n/* Build initial sample list from  sample tables */\nISOFile.prototype.buildSampleLists = function() {\t\n\tvar i;\n\tvar trak;\n\tfor (i = 0; i < this.moov.traks.length; i++) {\n\t\ttrak = this.moov.traks[i];\n\t\tthis.buildTrakSampleLists(trak);\n\t}\n}\n\nISOFile.prototype.buildTrakSampleLists = function(trak) {\t\n\tvar j, k;\n\tvar stco, stsc, stsz, stts, ctts, stss, stsd, subs, sbgps, sgpds, stdp;\n\tvar chunk_run_index, chunk_index, last_chunk_in_run, offset_in_chunk, last_sample_in_chunk;\n\tvar last_sample_in_stts_run, stts_run_index, last_sample_in_ctts_run, ctts_run_index, last_stss_index, last_subs_index, subs_entry_index, last_subs_sample_index;\n\n\ttrak.samples = [];\n\ttrak.samples_duration = 0;\n\ttrak.samples_size = 0;\n\tstco = trak.mdia.minf.stbl.stco || trak.mdia.minf.stbl.co64;\n\tstsc = trak.mdia.minf.stbl.stsc;\n\tstsz = trak.mdia.minf.stbl.stsz || trak.mdia.minf.stbl.stz2;\n\tstts = trak.mdia.minf.stbl.stts;\n\tctts = trak.mdia.minf.stbl.ctts;\n\tstss = trak.mdia.minf.stbl.stss;\n\tstsd = trak.mdia.minf.stbl.stsd;\n\tsubs = trak.mdia.minf.stbl.subs;\n\tstdp = trak.mdia.minf.stbl.stdp;\n\tsbgps = trak.mdia.minf.stbl.sbgps;\n\tsgpds = trak.mdia.minf.stbl.sgpds;\n\t\n\tlast_sample_in_stts_run = -1;\n\tstts_run_index = -1;\n\tlast_sample_in_ctts_run = -1;\n\tctts_run_index = -1;\n\tlast_stss_index = 0;\n\tsubs_entry_index = 0;\n\tlast_subs_sample_index = 0;\t\t\n\n\tISOFile.initSampleGroups(trak, null, sbgps, sgpds);\n\n\tif (typeof stsz === \"undefined\") {\n\t\treturn;\n\t}\n\n\t/* we build the samples one by one and compute their properties */\n\tfor (j = 0; j < stsz.sample_sizes.length; j++) {\n\t\tvar sample = {};\n\t\tsample.number = j;\n\t\tsample.track_id = trak.tkhd.track_id;\n\t\tsample.timescale = trak.mdia.mdhd.timescale;\n\t\tsample.alreadyRead = 0;\n\t\ttrak.samples[j] = sample;\n\t\t/* size can be known directly */\n\t\tsample.size = stsz.sample_sizes[j];\n\t\ttrak.samples_size += sample.size;\n\t\t/* computing chunk-based properties (offset, sample description index)*/\n\t\tif (j === 0) {\t\t\t\t\n\t\t\tchunk_index = 1; /* the first sample is in the first chunk (chunk indexes are 1-based) */\n\t\t\tchunk_run_index = 0; /* the first chunk is the first entry in the first_chunk table */\n\t\t\tsample.chunk_index = chunk_index;\n\t\t\tsample.chunk_run_index = chunk_run_index;\n\t\t\tlast_sample_in_chunk = stsc.samples_per_chunk[chunk_run_index];\n\t\t\toffset_in_chunk = 0;\n\n\t\t\t/* Is there another entry in the first_chunk table ? */\n\t\t\tif (chunk_run_index + 1 < stsc.first_chunk.length) {\n\t\t\t\t/* The last chunk in the run is the chunk before the next first chunk */\n\t\t\t\tlast_chunk_in_run = stsc.first_chunk[chunk_run_index+1]-1; \t\n\t\t\t} else {\n\t\t\t\t/* There is only one entry in the table, it is valid for all future chunks*/\n\t\t\t\tlast_chunk_in_run = Infinity;\n\t\t\t}\n\t\t} else {\n\t\t\tif (j < last_sample_in_chunk) {\n\t\t\t\t/* the sample is still in the current chunk */\n\t\t\t\tsample.chunk_index = chunk_index;\n\t\t\t\tsample.chunk_run_index = chunk_run_index;\n\t\t\t} else {\n\t\t\t\t/* the sample is in the next chunk */\n\t\t\t\tchunk_index++;\n\t\t\t\tsample.chunk_index = chunk_index;\n\t\t\t\t/* reset the accumulated offset in the chunk */\n\t\t\t\toffset_in_chunk = 0;\n\t\t\t\tif (chunk_index <= last_chunk_in_run) {\n\t\t\t\t\t/* stay in the same entry of the first_chunk table */\n\t\t\t\t\t/* chunk_run_index unmodified */\n\t\t\t\t} else {\n\t\t\t\t\tchunk_run_index++;\n\t\t\t\t\t/* Is there another entry in the first_chunk table ? */\n\t\t\t\t\tif (chunk_run_index + 1 < stsc.first_chunk.length) {\n\t\t\t\t\t\t/* The last chunk in the run is the chunk before the next first chunk */\n\t\t\t\t\t\tlast_chunk_in_run = stsc.first_chunk[chunk_run_index+1]-1; \t\n\t\t\t\t\t} else {\n\t\t\t\t\t\t/* There is only one entry in the table, it is valid for all future chunks*/\n\t\t\t\t\t\tlast_chunk_in_run = Infinity;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tsample.chunk_run_index = chunk_run_index;\n\t\t\t\tlast_sample_in_chunk += stsc.samples_per_chunk[chunk_run_index];\n\t\t\t}\n\t\t}\n\n\t\tsample.description_index = stsc.sample_description_index[sample.chunk_run_index]-1;\n\t\tsample.description = stsd.entries[sample.description_index];\n\t\tsample.offset = stco.chunk_offsets[sample.chunk_index-1] + offset_in_chunk; /* chunk indexes are 1-based */\n\t\toffset_in_chunk += sample.size;\n\n\t\t/* setting dts, cts, duration and rap flags */\n\t\tif (j > last_sample_in_stts_run) {\n\t\t\tstts_run_index++;\n\t\t\tif (last_sample_in_stts_run < 0) {\n\t\t\t\tlast_sample_in_stts_run = 0;\n\t\t\t}\n\t\t\tlast_sample_in_stts_run += stts.sample_counts[stts_run_index];\t\t\t\t\n\t\t}\n\t\tif (j > 0) {\n\t\t\ttrak.samples[j-1].duration = stts.sample_deltas[stts_run_index];\n\t\t\ttrak.samples_duration += trak.samples[j-1].duration;\n\t\t\tsample.dts = trak.samples[j-1].dts + trak.samples[j-1].duration;\n\t\t} else {\n\t\t\tsample.dts = 0;\n\t\t}\n\t\tif (ctts) {\n\t\t\tif (j >= last_sample_in_ctts_run) {\n\t\t\t\tctts_run_index++;\n\t\t\t\tif (last_sample_in_ctts_run < 0) {\n\t\t\t\t\tlast_sample_in_ctts_run = 0;\n\t\t\t\t}\n\t\t\t\tlast_sample_in_ctts_run += ctts.sample_counts[ctts_run_index];\t\t\t\t\n\t\t\t}\n\t\t\tsample.cts = trak.samples[j].dts + ctts.sample_offsets[ctts_run_index];\n\t\t} else {\n\t\t\tsample.cts = sample.dts;\n\t\t}\n\t\tif (stss) {\n\t\t\tif (j == stss.sample_numbers[last_stss_index] - 1) { // sample numbers are 1-based\n\t\t\t\tsample.is_sync = true;\n\t\t\t\tlast_stss_index++;\n\t\t\t} else {\n\t\t\t\tsample.is_sync = false;\t\t\t\t\n\t\t\t\tsample.degradation_priority = 0;\n\t\t\t}\n\t\t\tif (subs) {\n\t\t\t\tif (subs.entries[subs_entry_index].sample_delta + last_subs_sample_index == j+1) {\n\t\t\t\t\tsample.subsamples = subs.entries[subs_entry_index].subsamples;\n\t\t\t\t\tlast_subs_sample_index += subs.entries[subs_entry_index].sample_delta;\n\t\t\t\t\tsubs_entry_index++;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tsample.is_sync = true;\n\t\t}\n\t\tISOFile.process_sdtp(trak.mdia.minf.stbl.sdtp, sample, sample.number);\n\t\tif (stdp) {\n\t\t\tsample.degradation_priority = stdp.priority[j];\n\t\t} else {\n\t\t\tsample.degradation_priority = 0;\n\t\t}\n\t\tif (subs) {\n\t\t\tif (subs.entries[subs_entry_index].sample_delta + last_subs_sample_index == j) {\n\t\t\t\tsample.subsamples = subs.entries[subs_entry_index].subsamples;\n\t\t\t\tlast_subs_sample_index += subs.entries[subs_entry_index].sample_delta;\n\t\t\t}\n\t\t}\n\t\tif (sbgps.length > 0 || sgpds.length > 0) {\n\t\t\tISOFile.setSampleGroupProperties(trak, sample, j, trak.sample_groups_info);\n\t\t}\n\t}\n\tif (j>0) {\n\t\ttrak.samples[j-1].duration = Math.max(trak.mdia.mdhd.duration - trak.samples[j-1].dts, 0);\n\t\ttrak.samples_duration += trak.samples[j-1].duration;\n\t}\n}\n\n/* Update sample list when new 'moof' boxes are received */\nISOFile.prototype.updateSampleLists = function() {\t\n\tvar i, j, k;\n\tvar default_sample_description_index, default_sample_duration, default_sample_size, default_sample_flags;\n\tvar last_run_position;\n\tvar box, moof, traf, trak, trex;\n\tvar sample;\n\tvar sample_flags;\n\t\n\tif (this.moov === undefined) {\n\t\treturn;\n\t}\n\t/* if the input file is fragmented and fetched in multiple downloads, we need to update the list of samples */\n\twhile (this.lastMoofIndex < this.moofs.length) {\n\t\tbox = this.moofs[this.lastMoofIndex];\n\t\tthis.lastMoofIndex++;\n\t\tif (box.type == \"moof\") {\n\t\t\tmoof = box;\n\t\t\tfor (i = 0; i < moof.trafs.length; i++) {\n\t\t\t\ttraf = moof.trafs[i];\n\t\t\t\ttrak = this.getTrackById(traf.tfhd.track_id);\n\t\t\t\ttrex = this.getTrexById(traf.tfhd.track_id);\n\t\t\t\tif (traf.tfhd.flags & BoxParser.TFHD_FLAG_SAMPLE_DESC) {\n\t\t\t\t\tdefault_sample_description_index = traf.tfhd.default_sample_description_index;\n\t\t\t\t} else {\n\t\t\t\t\tdefault_sample_description_index = (trex ? trex.default_sample_description_index: 1);\n\t\t\t\t}\n\t\t\t\tif (traf.tfhd.flags & BoxParser.TFHD_FLAG_SAMPLE_DUR) {\n\t\t\t\t\tdefault_sample_duration = traf.tfhd.default_sample_duration;\n\t\t\t\t} else {\n\t\t\t\t\tdefault_sample_duration = (trex ? trex.default_sample_duration : 0);\n\t\t\t\t}\n\t\t\t\tif (traf.tfhd.flags & BoxParser.TFHD_FLAG_SAMPLE_SIZE) {\n\t\t\t\t\tdefault_sample_size = traf.tfhd.default_sample_size;\n\t\t\t\t} else {\n\t\t\t\t\tdefault_sample_size = (trex ? trex.default_sample_size : 0);\n\t\t\t\t}\n\t\t\t\tif (traf.tfhd.flags & BoxParser.TFHD_FLAG_SAMPLE_FLAGS) {\n\t\t\t\t\tdefault_sample_flags = traf.tfhd.default_sample_flags;\n\t\t\t\t} else {\n\t\t\t\t\tdefault_sample_flags = (trex ? trex.default_sample_flags : 0);\n\t\t\t\t}\n\t\t\t\ttraf.sample_number = 0;\n\t\t\t\t/* process sample groups */\n\t\t\t\tif (traf.sbgps.length > 0) {\n\t\t\t\t\tISOFile.initSampleGroups(trak, traf, traf.sbgps, trak.mdia.minf.stbl.sgpds, traf.sgpds);\n\t\t\t\t}\n\t\t\t\tfor (j = 0; j < traf.truns.length; j++) {\n\t\t\t\t\tvar trun = traf.truns[j];\n\t\t\t\t\tfor (k = 0; k < trun.sample_count; k++) {\n\t\t\t\t\t\tsample = {};\n\t\t\t\t\t\tsample.moof_number = this.lastMoofIndex;\n\t\t\t\t\t\tsample.number_in_traf = traf.sample_number;\n\t\t\t\t\t\ttraf.sample_number++;\n\t\t\t            sample.number = trak.samples.length;\n\t\t\t\t\t\ttraf.first_sample_index = trak.samples.length;\n\t\t\t\t\t\ttrak.samples.push(sample);\n\t\t\t\t\t\tsample.track_id = trak.tkhd.track_id;\n\t\t\t\t\t\tsample.timescale = trak.mdia.mdhd.timescale;\n\t\t\t\t\t\tsample.description_index = default_sample_description_index-1;\n\t\t\t\t\t\tsample.description = trak.mdia.minf.stbl.stsd.entries[sample.description_index];\n\t\t\t\t\t\tsample.size = default_sample_size;\n\t\t\t\t\t\tif (trun.flags & BoxParser.TRUN_FLAGS_SIZE) {\n\t\t\t\t\t\t\tsample.size = trun.sample_size[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrak.samples_size += sample.size;\n\t\t\t\t\t\tsample.duration = default_sample_duration;\n\t\t\t\t\t\tif (trun.flags & BoxParser.TRUN_FLAGS_DURATION) {\n\t\t\t\t\t\t\tsample.duration = trun.sample_duration[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrak.samples_duration += sample.duration;\n\t\t\t\t\t\tif (trak.first_traf_merged || k > 0) {\n\t\t\t\t\t\t\tsample.dts = trak.samples[trak.samples.length-2].dts+trak.samples[trak.samples.length-2].duration;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (traf.tfdt) {\n\t\t\t\t\t\t\t\tsample.dts = traf.tfdt.baseMediaDecodeTime;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsample.dts = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttrak.first_traf_merged = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsample.cts = sample.dts;\n\t\t\t\t\t\tif (trun.flags & BoxParser.TRUN_FLAGS_CTS_OFFSET) {\n\t\t\t\t\t\t\tsample.cts = sample.dts + trun.sample_composition_time_offset[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsample_flags = default_sample_flags;\n\t\t\t\t\t\tif (trun.flags & BoxParser.TRUN_FLAGS_FLAGS) {\n\t\t\t\t\t\t\tsample_flags = trun.sample_flags[k];\n\t\t\t\t\t\t} else if (k === 0 && (trun.flags & BoxParser.TRUN_FLAGS_FIRST_FLAG)) {\n\t\t\t\t\t\t\tsample_flags = trun.first_sample_flags;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsample.is_sync = ((sample_flags >> 16 & 0x1) ? false : true);\n\t\t\t\t\t\tsample.is_leading = (sample_flags >> 26 & 0x3);\n\t\t\t\t\t\tsample.depends_on = (sample_flags >> 24 & 0x3);\n\t\t\t\t\t\tsample.is_depended_on = (sample_flags >> 22 & 0x3);\n\t\t\t\t\t\tsample.has_redundancy = (sample_flags >> 20 & 0x3);\n\t\t\t\t\t\tsample.degradation_priority = (sample_flags & 0xFFFF);\n\t\t\t\t\t\t//ISOFile.process_sdtp(traf.sdtp, sample, sample.number_in_traf);\n\t\t\t\t\t\tvar bdop = (traf.tfhd.flags & BoxParser.TFHD_FLAG_BASE_DATA_OFFSET) ? true : false;\n\t\t\t\t\t\tvar dbim = (traf.tfhd.flags & BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF) ? true : false;\n\t\t\t\t\t\tvar dop = (trun.flags & BoxParser.TRUN_FLAGS_DATA_OFFSET) ? true : false;\n\t\t\t\t\t\tvar bdo = 0;\n\t\t\t\t\t\tif (!bdop) {\n\t\t\t\t\t\t\tif (!dbim) {\n\t\t\t\t\t\t\t\tif (j === 0) { // the first track in the movie fragment\n\t\t\t\t\t\t\t\t\tbdo = moof.start; // the position of the first byte of the enclosing Movie Fragment Box\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tbdo = last_run_position; // end of the data defined by the preceding *track* (irrespective of the track id) fragment in the moof\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbdo = moof.start;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbdo = traf.tfhd.base_data_offset;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j === 0 && k === 0) {\n\t\t\t\t\t\t\tif (dop) {\n\t\t\t\t\t\t\t\tsample.offset = bdo + trun.data_offset; // If the data-offset is present, it is relative to the base-data-offset established in the track fragment header\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsample.offset = bdo; // the data for this run starts the base-data-offset defined by the track fragment header\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsample.offset = last_run_position; // this run starts immediately after the data of the previous run\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlast_run_position = sample.offset + sample.size;\n\t\t\t\t\t\tif (traf.sbgps.length > 0 || traf.sgpds.length > 0 ||\n\t\t\t\t\t\t\ttrak.mdia.minf.stbl.sbgps.length > 0 || trak.mdia.minf.stbl.sgpds.length > 0) {\n\t\t\t\t\t\t\tISOFile.setSampleGroupProperties(trak, sample, sample.number_in_traf, traf.sample_groups_info);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (traf.subs) {\n\t\t\t\t\ttrak.has_fragment_subsamples = true;\n\t\t\t\t\tvar sample_index = traf.first_sample_index;\n\t\t\t\t\tfor (j = 0; j < traf.subs.entries.length; j++) {\n\t\t\t\t\t\tsample_index += traf.subs.entries[j].sample_delta;\n\t\t\t\t\t\tsample = trak.samples[sample_index-1];\n\t\t\t\t\t\tsample.subsamples = traf.subs.entries[j].subsamples;\n\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\t\n}\n\n/* Try to get sample data for a given sample:\n   returns null if not found\n   returns the same sample if already requested\n */\nISOFile.prototype.getSample = function(trak, sampleNum) {\t\n\tvar buffer;\n\tvar sample = trak.samples[sampleNum];\n\t\n\tif (!this.moov) {\n\t\treturn null;\n\t}\n\n\tif (!sample.data) {\n\t\t/* Not yet fetched */\n\t\tsample.data = new Uint8Array(sample.size);\n\t\tsample.alreadyRead = 0;\n\t\tthis.samplesDataSize += sample.size;\n\t\tLog.debug(\"ISOFile\", \"Allocating sample #\"+sampleNum+\" on track #\"+trak.tkhd.track_id+\" of size \"+sample.size+\" (total: \"+this.samplesDataSize+\")\");\n\t} else if (sample.alreadyRead == sample.size) {\n\t\t/* Already fetched entirely */\n\t\treturn sample;\n\t}\n\n\t/* The sample has only been partially fetched, we need to check in all buffers */\n\twhile(true) {\n\t\tvar index =\tthis.stream.findPosition(true, sample.offset + sample.alreadyRead, false);\n\t\tif (index > -1) {\n\t\t\tbuffer = this.stream.buffers[index];\n\t\t\tvar lengthAfterStart = buffer.byteLength - (sample.offset + sample.alreadyRead - buffer.fileStart);\n\t\t\tif (sample.size - sample.alreadyRead <= lengthAfterStart) {\n\t\t\t\t/* the (rest of the) sample is entirely contained in this buffer */\n\n\t\t\t\tLog.debug(\"ISOFile\",\"Getting sample #\"+sampleNum+\" data (alreadyRead: \"+sample.alreadyRead+\" offset: \"+\n\t\t\t\t\t(sample.offset+sample.alreadyRead - buffer.fileStart)+\" read size: \"+(sample.size - sample.alreadyRead)+\" full size: \"+sample.size+\")\");\n\n\t\t\t\tDataStream.memcpy(sample.data.buffer, sample.alreadyRead,\n\t\t\t\t                  buffer, sample.offset+sample.alreadyRead - buffer.fileStart, sample.size - sample.alreadyRead);\n\n\t\t\t\t/* update the number of bytes used in this buffer and check if it needs to be removed */\n\t\t\t\tbuffer.usedBytes += sample.size - sample.alreadyRead;\n\t\t\t\tthis.stream.logBufferLevel();\n\n\t\t\t\tsample.alreadyRead = sample.size;\n\n\t\t\t\treturn sample;\n\t\t\t} else {\n\t\t\t\t/* the sample does not end in this buffer */\n\n\t\t\t\tif (lengthAfterStart === 0) return null;\n\n\t\t\t\tLog.debug(\"ISOFile\",\"Getting sample #\"+sampleNum+\" partial data (alreadyRead: \"+sample.alreadyRead+\" offset: \"+\n\t\t\t\t\t(sample.offset+sample.alreadyRead - buffer.fileStart)+\" read size: \"+lengthAfterStart+\" full size: \"+sample.size+\")\");\n\n\t\t\t\tDataStream.memcpy(sample.data.buffer, sample.alreadyRead,\n\t\t\t\t                  buffer, sample.offset+sample.alreadyRead - buffer.fileStart, lengthAfterStart);\n\t\t\t\tsample.alreadyRead += lengthAfterStart;\n\n\t\t\t\t/* update the number of bytes used in this buffer and check if it needs to be removed */\n\t\t\t\tbuffer.usedBytes += lengthAfterStart;\n\t\t\t\tthis.stream.logBufferLevel();\n\n\t\t\t\t/* keep looking in the next buffer */\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\n/* Release the memory used to store the data of the sample */\nISOFile.prototype.releaseSample = function(trak, sampleNum) {\t\n\tvar sample = trak.samples[sampleNum];\n\tif (sample.data) {\n\t\tthis.samplesDataSize -= sample.size;\n\t\tsample.data = null;\n\t\tsample.alreadyRead = 0;\n\t\treturn sample.size;\n\t} else {\n\t\treturn 0;\n\t}\n}\n\nISOFile.prototype.getAllocatedSampleDataSize = function() {\n\treturn this.samplesDataSize;\n}\n\n/* Builds the MIME Type 'codecs' sub-parameters for the whole file */\nISOFile.prototype.getCodecs = function() {\t\n\tvar i;\n\tvar codecs = \"\";\n\tfor (i = 0; i < this.moov.traks.length; i++) {\n\t\tvar trak = this.moov.traks[i];\n\t\tif (i>0) {\n\t\t\tcodecs+=\",\"; \n\t\t}\n\t\tcodecs += trak.mdia.minf.stbl.stsd.entries[0].getCodec();\t\t\n\t}\n\treturn codecs;\n}\n\n/* Helper function */\nISOFile.prototype.getTrexById = function(id) {\t\n\tvar i;\n\tif (!this.moov || !this.moov.mvex) return null;\n\tfor (i = 0; i < this.moov.mvex.trexs.length; i++) {\n\t\tvar trex = this.moov.mvex.trexs[i];\n\t\tif (trex.track_id == id) return trex;\n\t}\n\treturn null;\n}\n\n/* Helper function */\nISOFile.prototype.getTrackById = function(id) {\n\tif (this.moov === undefined) {\n\t\treturn null;\n\t}\n\tfor (var j = 0; j < this.moov.traks.length; j++) {\n\t\tvar trak = this.moov.traks[j];\n\t\tif (trak.tkhd.track_id == id) return trak;\n\t}\n\treturn null;\n}\n// file:src/isofile-item-processing.js\n/* size of the buffers allocated for samples */\nISOFile.prototype.itemsDataSize = 0;\n\nISOFile.prototype.flattenItemInfo = function() {\t\n\tvar items = this.items;\n\tvar entity_groups = this.entity_groups;\n\tvar i, j;\n\tvar item;\n\tvar meta = this.meta;\n\tif (meta === null || meta === undefined) return;\n\tif (meta.hdlr === undefined) return;\n\tif (meta.iinf === undefined) return;\n\tfor (i = 0; i < meta.iinf.item_infos.length; i++) {\n\t\titem = {};\n\t\titem.id = meta.iinf.item_infos[i].item_ID;\n\t\titems[item.id] = item;\n\t\titem.ref_to = [];\n\t\titem.name = meta.iinf.item_infos[i].item_name;\n\t\tif (meta.iinf.item_infos[i].protection_index > 0) {\n\t\t\titem.protection = meta.ipro.protections[meta.iinf.item_infos[i].protection_index-1];\n\t\t}\n\t\tif (meta.iinf.item_infos[i].item_type) {\n\t\t\titem.type = meta.iinf.item_infos[i].item_type;\n\t\t} else {\n\t\t\titem.type = \"mime\";\n\t\t}\n\t\titem.content_type = meta.iinf.item_infos[i].content_type;\n\t\titem.content_encoding = meta.iinf.item_infos[i].content_encoding;\n\t\titem.item_uri_type = meta.iinf.item_infos[i].item_uri_type;\n\t}\n\tif (meta.grpl) {\n\t\tfor (i = 0; i < meta.grpl.boxes.length; i++) {\n\t\t\tentity_group = {};\n\t\t\tentity_group.id = meta.grpl.boxes[i].group_id;\n\t\t\tentity_group.entity_ids = meta.grpl.boxes[i].entity_ids;\n\t\t\tentity_group.type = meta.grpl.boxes[i].type;\n\t\t\tentity_groups[entity_group.id] = entity_group;\n\t\t}\n\t}\n\tif (meta.iloc) {\n\t\tfor(i = 0; i < meta.iloc.items.length; i++) {\n\t\t\tvar offset;\n\t\t\tvar itemloc = meta.iloc.items[i];\n\t\t\titem = items[itemloc.item_ID];\n\t\t\tif (itemloc.data_reference_index !== 0) {\n\t\t\t\tLog.warn(\"Item storage with reference to other files: not supported\");\n\t\t\t\titem.source = meta.dinf.boxes[itemloc.data_reference_index-1];\n\t\t\t}\n\t\t\tswitch(itemloc.construction_method) {\n\t\t\t\tcase 0: // offset into the file referenced by the data reference index\n\t\t\t\tbreak;\n\t\t\t\tcase 1: // offset into the idat box of this meta box\n\t\t\t\tbreak;\n\t\t\t\tcase 2: // offset into another item\n\t\t\t\tLog.warn(\"Item storage with construction_method : not supported\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\titem.extents = [];\n\t\t\titem.size = 0;\n\t\t\tfor (j = 0; j < itemloc.extents.length; j++) {\n\t\t\t\titem.extents[j] = {};\n\t\t\t\titem.extents[j].offset = itemloc.extents[j].extent_offset + itemloc.base_offset;\n\t\t\t\tif (itemloc.construction_method == 1) {\n\t\t\t\t\titem.extents[j].offset += meta.idat.start + meta.idat.hdr_size;\n\t\t\t\t}\n\t\t\t\titem.extents[j].length = itemloc.extents[j].extent_length;\n\t\t\t\titem.extents[j].alreadyRead = 0;\n\t\t\t\titem.size += item.extents[j].length;\n\t\t\t}\n\t\t}\n\t}\n\tif (meta.pitm) {\n\t\titems[meta.pitm.item_id].primary = true;\n\t}\n\tif (meta.iref) {\n\t\tfor (i=0; i <meta.iref.references.length; i++) {\n\t\t\tvar ref = meta.iref.references[i];\n\t\t\tfor (j=0; j<ref.references.length; j++) {\n\t\t\t\titems[ref.from_item_ID].ref_to.push({type: ref.type, id: ref.references[j]});\n\t\t\t}\n\t\t}\n\t}\n\tif (meta.iprp) {\n\t\tfor (var k = 0; k < meta.iprp.ipmas.length; k++) {\n\t\t\tvar ipma = meta.iprp.ipmas[k];\n\t\t\tfor (i = 0; i < ipma.associations.length; i++) {\n\t\t\t\tvar association = ipma.associations[i];\n\t\t\t\titem = items[association.id];\n\t\t\t\tif (!item) {\n\t\t\t\t\titem = entity_groups[association.id];\n\t\t\t\t}\n\t\t\t\tif (item) {\n\t\t\t\t\tif (item.properties === undefined) {\n\t\t\t\t\t\titem.properties = {};\n\t\t\t\t\t\titem.properties.boxes = [];\n\t\t\t\t\t}\n\t\t\t\t\tfor (j = 0; j < association.props.length; j++) {\n\t\t\t\t\t\tvar propEntry = association.props[j];\n\t\t\t\t\t\tif (propEntry.property_index > 0 && propEntry.property_index-1 < meta.iprp.ipco.boxes.length) {\n\t\t\t\t\t\t\tvar propbox = meta.iprp.ipco.boxes[propEntry.property_index-1];\n\t\t\t\t\t\t\titem.properties[propbox.type] = propbox;\n\t\t\t\t\t\t\titem.properties.boxes.push(propbox);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nISOFile.prototype.getItem = function(item_id) {\t\n\tvar buffer;\n\tvar item;\n\t\n\tif (!this.meta) {\n\t\treturn null;\n\t}\n\n \titem = this.items[item_id];\n\tif (!item.data && item.size) {\n\t\t/* Not yet fetched */\n\t\titem.data = new Uint8Array(item.size);\n\t\titem.alreadyRead = 0;\n\t\tthis.itemsDataSize += item.size;\n\t\tLog.debug(\"ISOFile\", \"Allocating item #\"+item_id+\" of size \"+item.size+\" (total: \"+this.itemsDataSize+\")\");\n\t} else if (item.alreadyRead === item.size) {\n\t\t/* Already fetched entirely */\n\t\treturn item;\n\t}\n\n\t/* The item has only been partially fetched, we need to check in all buffers to find the remaining extents*/\n\n\tfor (var i = 0; i < item.extents.length; i++) {\n\t\tvar extent = item.extents[i];\n\t\tif (extent.alreadyRead === extent.length) {\n\t\t\tcontinue;\n\t\t} else {\n\t\t\tvar index =\tthis.stream.findPosition(true, extent.offset + extent.alreadyRead, false);\n\t\t\tif (index > -1) {\n\t\t\t\tbuffer = this.stream.buffers[index];\n\t\t\t\tvar lengthAfterStart = buffer.byteLength - (extent.offset + extent.alreadyRead - buffer.fileStart);\n\t\t\t\tif (extent.length - extent.alreadyRead <= lengthAfterStart) {\n\t\t\t\t\t/* the (rest of the) extent is entirely contained in this buffer */\n\n\t\t\t\t\tLog.debug(\"ISOFile\",\"Getting item #\"+item_id+\" extent #\"+i+\" data (alreadyRead: \"+extent.alreadyRead+\n\t\t\t\t\t\t\" offset: \"+(extent.offset+extent.alreadyRead - buffer.fileStart)+\" read size: \"+(extent.length - extent.alreadyRead)+\n\t\t\t\t\t\t\" full extent size: \"+extent.length+\" full item size: \"+item.size+\")\");\n\n\t\t\t\t\tDataStream.memcpy(item.data.buffer, item.alreadyRead, \n\t\t\t\t\t                  buffer, extent.offset+extent.alreadyRead - buffer.fileStart, extent.length - extent.alreadyRead);\n\n\t\t\t\t\t/* update the number of bytes used in this buffer and check if it needs to be removed */\n\t\t\t\t\tbuffer.usedBytes += extent.length - extent.alreadyRead;\n\t\t\t\t\tthis.stream.logBufferLevel();\n\n\t\t\t\t\titem.alreadyRead += (extent.length - extent.alreadyRead);\n\t\t\t\t\textent.alreadyRead = extent.length;\n\t\t\t\t} else {\n\t\t\t\t\t/* the sample does not end in this buffer */\n\n\t\t\t\t\tLog.debug(\"ISOFile\",\"Getting item #\"+item_id+\" extent #\"+i+\" partial data (alreadyRead: \"+extent.alreadyRead+\" offset: \"+\n\t\t\t\t\t\t(extent.offset+extent.alreadyRead - buffer.fileStart)+\" read size: \"+lengthAfterStart+\n\t\t\t\t\t\t\" full extent size: \"+extent.length+\" full item size: \"+item.size+\")\");\n\n\t\t\t\t\tDataStream.memcpy(item.data.buffer, item.alreadyRead, \n\t\t\t\t\t                  buffer, extent.offset+extent.alreadyRead - buffer.fileStart, lengthAfterStart);\n\t\t\t\t\textent.alreadyRead += lengthAfterStart;\n\t\t\t\t\titem.alreadyRead += lengthAfterStart;\n\n\t\t\t\t\t/* update the number of bytes used in this buffer and check if it needs to be removed */\n\t\t\t\t\tbuffer.usedBytes += lengthAfterStart;\n\t\t\t\t\tthis.stream.logBufferLevel();\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\tif (item.alreadyRead === item.size) {\n\t\t/* fetched entirely */\n\t\treturn item;\n\t} else {\n\t\treturn null;\n\t}\n}\n\n/* Release the memory used to store the data of the item */\nISOFile.prototype.releaseItem = function(item_id) {\t\n\tvar item = this.items[item_id];\n\tif (item.data) {\n\t\tthis.itemsDataSize -= item.size;\n\t\titem.data = null;\n\t\titem.alreadyRead = 0;\n\t\tfor (var i = 0; i < item.extents.length; i++) {\n\t\t\tvar extent = item.extents[i];\n\t\t\textent.alreadyRead = 0;\n\t\t}\n\t\treturn item.size;\n\t} else {\n\t\treturn 0;\n\t}\n}\n\n\nISOFile.prototype.processItems = function(callback) {\n\tfor(var i in this.items) {\n\t\tvar item = this.items[i];\n\t\tthis.getItem(item.id);\n\t\tif (callback && !item.sent) {\n\t\t\tcallback(item);\n\t\t\titem.sent = true;\n\t\t\titem.data = null;\n\t\t}\n\t}\n}\n\nISOFile.prototype.hasItem = function(name) {\n\tfor(var i in this.items) {\n\t\tvar item = this.items[i];\n\t\tif (item.name === name) {\n\t\t\treturn item.id;\n\t\t}\n\t}\n\treturn -1;\n}\n\nISOFile.prototype.getMetaHandler = function() {\n\tif (!this.meta) {\n\t\treturn null;\n\t} else {\n\t\treturn this.meta.hdlr.handler;\t\t\n\t}\n}\n\nISOFile.prototype.getPrimaryItem = function() {\n\tif (!this.meta || !this.meta.pitm) {\n\t\treturn null;\n\t} else {\n\t\treturn this.getItem(this.meta.pitm.item_id);\n\t}\n}\n\nISOFile.prototype.itemToFragmentedTrackFile = function(_options) {\n\tvar options = _options || {};\n\tvar item = null;\n\tif (options.itemId) {\n\t\titem = this.getItem(options.itemId);\n\t} else {\n\t\titem = this.getPrimaryItem();\n\t}\n\tif (item == null) return null;\n\n\tvar file = new ISOFile();\n\tfile.discardMdatData = false;\n\t// assuming the track type is the same as the item type\n\tvar trackOptions = { type: item.type, description_boxes: item.properties.boxes};\n\tif (item.properties.ispe) {\n\t\ttrackOptions.width = item.properties.ispe.image_width;\n\t\ttrackOptions.height = item.properties.ispe.image_height;\n\t}\n\tvar trackId = file.addTrack(trackOptions);\n\tif (trackId) {\n\t\tfile.addSample(trackId, item.data);\n\t\treturn file;\n\t} else {\n\t\treturn null;\n\t}\n}\n\n// file:src/isofile-write.js\n/* Rewrite the entire file */\nISOFile.prototype.write = function(outstream) {\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tthis.boxes[i].write(outstream);\n\t}\n}\n\nISOFile.prototype.createFragment = function(track_id, sampleNumber, stream_) {\n\tvar trak = this.getTrackById(track_id);\n\tvar sample = this.getSample(trak, sampleNumber);\n\tif (sample == null) {\n\t\tthis.setNextSeekPositionFromSample(trak.samples[sampleNumber]);\n\t\treturn null;\n\t}\n\t\n\tvar stream = stream_ || new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\n\tvar moof = this.createSingleSampleMoof(sample);\n\tmoof.write(stream);\n\n\t/* adjusting the data_offset now that the moof size is known*/\n\tmoof.trafs[0].truns[0].data_offset = moof.size+8; //8 is mdat header\n\tLog.debug(\"MP4Box\", \"Adjusting data_offset with new value \"+moof.trafs[0].truns[0].data_offset);\n\tstream.adjustUint32(moof.trafs[0].truns[0].data_offset_position, moof.trafs[0].truns[0].data_offset);\n\t\t\n\tvar mdat = new BoxParser.mdatBox();\n\tmdat.data = sample.data;\n\tmdat.write(stream);\n\treturn stream;\n}\n\n/* Modify the file and create the initialization segment */\nISOFile.writeInitializationSegment = function(ftyp, moov, total_duration, sample_duration) {\n\tvar i;\n\tvar index;\n\tvar mehd;\n\tvar trex;\n\tvar box;\n\tLog.debug(\"ISOFile\", \"Generating initialization segment\");\n\n\tvar stream = new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\tftyp.write(stream);\n\t\n\t/* we can now create the new mvex box */\n\tvar mvex = moov.add(\"mvex\");\n\tif (total_duration) {\n\t\tmvex.add(\"mehd\").set(\"fragment_duration\", total_duration);\n\t}\n\tfor (i = 0; i < moov.traks.length; i++) {\n\t\tmvex.add(\"trex\").set(\"track_id\", moov.traks[i].tkhd.track_id)\n\t\t\t\t\t\t.set(\"default_sample_description_index\", 1)\n\t\t\t\t\t\t.set(\"default_sample_duration\", sample_duration)\n\t\t\t\t\t\t.set(\"default_sample_size\", 0)\n\t\t\t\t\t\t.set(\"default_sample_flags\", 1<<16)\n\t}\n\tmoov.write(stream);\n\n\treturn stream.buffer;\n\n}\n\nISOFile.prototype.save = function(name) {\n\tvar stream = new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\tthis.write(stream);\n\tstream.save(name);\t\n}\n\nISOFile.prototype.getBuffer = function() {\n\tvar stream = new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\tthis.write(stream);\n\treturn stream.buffer;\n}\n\nISOFile.prototype.initializeSegmentation = function() {\n\tvar i;\n\tvar j;\n\tvar box;\n\tvar initSegs;\n\tvar trak;\n\tvar seg;\n\tif (this.onSegment === null) {\n\t\tLog.warn(\"MP4Box\", \"No segmentation callback set!\");\n\t}\n\tif (!this.isFragmentationInitialized) {\n\t\tthis.isFragmentationInitialized = true;\t\t\n\t\tthis.nextMoofNumber = 0;\n\t\tthis.resetTables();\n\t}\t\n\tinitSegs = [];\t\n\tfor (i = 0; i < this.fragmentedTracks.length; i++) {\n\t\tvar moov = new BoxParser.moovBox();\n\t\tmoov.mvhd = this.moov.mvhd;\n\t    moov.boxes.push(moov.mvhd);\n\t\ttrak = this.getTrackById(this.fragmentedTracks[i].id);\n\t\tmoov.boxes.push(trak);\n\t\tmoov.traks.push(trak);\n\t\tseg = {};\n\t\tseg.id = trak.tkhd.track_id;\n\t\tseg.user = this.fragmentedTracks[i].user;\n\t\tseg.buffer = ISOFile.writeInitializationSegment(this.ftyp, moov, (this.moov.mvex && this.moov.mvex.mehd ? this.moov.mvex.mehd.fragment_duration: undefined), (this.moov.traks[i].samples.length>0 ? this.moov.traks[i].samples[0].duration: 0));\n\t\tinitSegs.push(seg);\n\t}\n\treturn initSegs;\n}\n\n// file:src/box-print.js\n/* \n * Copyright (c) Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nBoxParser.Box.prototype.printHeader = function(output) {\n\tthis.size += 8;\n\tif (this.size > MAX_SIZE) {\n\t\tthis.size += 8;\n\t}\n\tif (this.type === \"uuid\") {\n\t\tthis.size += 16;\n\t}\n\toutput.log(output.indent+\"size:\"+this.size);\n\toutput.log(output.indent+\"type:\"+this.type);\n}\n\nBoxParser.FullBox.prototype.printHeader = function(output) {\n\tthis.size += 4;\n\tBoxParser.Box.prototype.printHeader.call(this, output);\n\toutput.log(output.indent+\"version:\"+this.version);\n\toutput.log(output.indent+\"flags:\"+this.flags);\n}\n\nBoxParser.Box.prototype.print = function(output) {\n\tthis.printHeader(output);\n}\n\nBoxParser.ContainerBox.prototype.print = function(output) {\n\tthis.printHeader(output);\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tif (this.boxes[i]) {\n\t\t\tvar prev_indent = output.indent;\n\t\t\toutput.indent += \" \";\n\t\t\tthis.boxes[i].print(output);\n\t\t\toutput.indent = prev_indent;\n\t\t}\n\t}\n}\n\nISOFile.prototype.print = function(output) {\n\toutput.indent = \"\";\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tif (this.boxes[i]) {\n\t\t\tthis.boxes[i].print(output);\n\t\t}\n\t}\t\n}\n\nBoxParser.mvhdBox.prototype.print = function(output) {\n\tBoxParser.FullBox.prototype.printHeader.call(this, output);\n\toutput.log(output.indent+\"creation_time: \"+this.creation_time);\n\toutput.log(output.indent+\"modification_time: \"+this.modification_time);\n\toutput.log(output.indent+\"timescale: \"+this.timescale);\n\toutput.log(output.indent+\"duration: \"+this.duration);\n\toutput.log(output.indent+\"rate: \"+this.rate);\n\toutput.log(output.indent+\"volume: \"+(this.volume>>8));\n\toutput.log(output.indent+\"matrix: \"+this.matrix.join(\", \"));\n\toutput.log(output.indent+\"next_track_id: \"+this.next_track_id);\n}\n\nBoxParser.tkhdBox.prototype.print = function(output) {\n\tBoxParser.FullBox.prototype.printHeader.call(this, output);\n\toutput.log(output.indent+\"creation_time: \"+this.creation_time);\n\toutput.log(output.indent+\"modification_time: \"+this.modification_time);\n\toutput.log(output.indent+\"track_id: \"+this.track_id);\n\toutput.log(output.indent+\"duration: \"+this.duration);\n\toutput.log(output.indent+\"volume: \"+(this.volume>>8));\n\toutput.log(output.indent+\"matrix: \"+this.matrix.join(\", \"));\n\toutput.log(output.indent+\"layer: \"+this.layer);\n\toutput.log(output.indent+\"alternate_group: \"+this.alternate_group);\n\toutput.log(output.indent+\"width: \"+this.width);\n\toutput.log(output.indent+\"height: \"+this.height);\n}// file:src/mp4box.js\n/*\n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar MP4Box = {};\n\nMP4Box.createFile = function (_keepMdatData, _stream) {\n\t/* Boolean indicating if bytes containing media data should be kept in memory */\n\tvar keepMdatData = (_keepMdatData !== undefined ? _keepMdatData : true);\n\tvar file = new ISOFile(_stream);\n\tfile.discardMdatData = (keepMdatData ? false : true);\n\treturn file;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.createFile = MP4Box.createFile;\n}\n",null,null,null,null,null,null,null,null,null,null],"names":["MAX_U6","Math","pow","MAX_U14","MAX_U30","MAX_U53","Number","MAX_SAFE_INTEGER","MAX_U62","ImmutableBytesBuffer","buffer","offset","view","constructor","this","DataView","byteOffset","length","remaining","Uint8Array","slice","firstByteValue","getRemainingBuffer","subarray","getU8","Error","val","getUint8","getU16","getUint16","getU32","getUint32","getU64","getBigUint64","getVarInt","first","prefix","BigInt","getNumberVarInt","getBytes","len","getVarBytes","getUtf8String","TextDecoder","decode","MutableBytesBuffer","byteLength","enoughSpaceAvailable","required","newBuffer","x","set","putU8","v","setUint8","putU16","setUint16","putU32","setUint32","putU64","setBigUint64","putVarInt","value","shift","i","putBytes","putUtf8String","bytes","TextEncoder","encode","putLengthPrefixedByteArray","ReadableStreamBuffer","reader","readableStream","getReader","waitForBytes","Promise","resolve","fillTo","fill","result","read","done","temp","size","readAll","maxLength","undefined","getInt16","close","releaseLock","cancel","release","WritableStreamBuffer","writer","writableStream","getWriter","write","data","flush","clear","ReadableWritableStreamBuffer","readStreamBuffer","writeStreamBuffer","releaseAll","readBuffer","readStream","writeBuffer","writeStream","Tuple","TupleField","Location","KeyValuePairs","Parameters","GroupOrder","FilterType","Subscribe","SubscribeOk","SubscribeError","SubscribeUpdate","SubscribeNamespace","SubscribeNamespaceOk","SubscribeNamespaceError","Unsubscribe","Publish","PublishOk","PublishError","PublishDone","PublishNamespace","PublishNamespaceOk","PublishNamespaceError","PublishNamespaceDone","FetchType","StandaloneFetch","JoiningFetch","Fetch","FetchOk","FetchError","FetchCancel","GoAway","ClientSetup","ServerSetup","MaxRequestId","Version","ControlMessageType","RequestsBlocked","debug","msg","console","log","async","sleep","ms","setTimeout","serialize","tuple","buf","forEach","field","serialized","deserialize","push","encoded","location","group","object","valueIsVarInt","key","deserialize_with_size","pairs","Map","deserialize_with_reader","order","Publisher","Ascending","Descending","NextGroupStart","LargestObject","AbsoluteStart","AbsoluteRange","mainBuf","payloadBuf","id","namespace","name","subscriber_priority","group_order","forward","filter_type","start_location","end_group","params","track_alias","expires","content_exists","largest_location","code","reason","subscription_id","stream_count","Standalone","Relative","Absolute","end_location","r","start","fetch_type","standalone","joining","end_of_track","session_uri","versions","version","supportedVersionLen","toString","t","ReservedSetupV00","ControlStream","decoder","encoder","nextRequestId","remoteMaxRequestId","mutex","c","Decoder","Encoder","recv","message","send","unlock","lock","payload","p","then","incr","setRemoteMaxRequestId","messageType","advertisedLength","error","rawPayload","res","type","w","m","SubgroupHeader","SubgroupObject","SubgroupType","ObjectForwardingPreference","Status","ObjectDatagramType","ObjectDatagram","header","group_id","hasExplicitSubgroupId","subgroup_id","publisher_priority","obj","object_id","extension_headers","object_payload","status","try_from","Type0x10","Type0x11","Type0x12","Type0x13","Type0x14","Type0x15","Type0x18","Type0x19","Type0x1A","Type0x1B","Type0x1C","Type0x1D","isSubgroupIdPresent","isSubgroupIdZero","isSubgroupFirstObjectId","isExtensionPresent","contains_end_of_group","SubgroupWriter","stream","SubgroupReader","extHeaders","obj_payload_len","NORMAL","OBJECT_NULL","GROUP_END","TRACK_END","Type0x0","Type0x1","Type0x2","Type0x3","Type0x4","Type0x5","Type0x6","Type0x7","Type0x20","Type0x21","isEndOfGroup","hasExtensions","hasObjectId","hasStatus","alias","extHeadersLength","extHeadersData","Objects","quic","h","datagrams","writable","TrackWriter","createUnidirectionalStream","subgroupHeader","streams","incomingUnidirectionalStreams","subgroupType","e","asError","String","Deferred","promise","reject","pending","Watch","current","next","init","update","Function","Notify","wait","wake","Queue","closed","capacity","queue","CountQueuingStrategy","highWaterMark","TransformStream","readable","abort","err","control","migrationState","objects","publishedNamespaces","waitingPublishNamespaceRequests","subscribe","subscribeQueue","nextTrackAlias","activeSubscribersCount","state","startMigration","migrationDone","publish_namespace","has","join","publishNamespaceSend","PublishNamespaceSend","Control.ControlMessageType","subscribed","recvSubscribe","recvUnsubscribe","recvPublishNamespaceOk","recvPublishNamespaceError","get","onOk","onError","warn","trackAlias","SubscribeRecv","delete","ok","active","subscriberPriority","groupOrder","track","ack","acked","serve","props","priority","subgroup","Subscriber","publishedNamespacesQueue","trackToIDMap","aliasToSubscriptionMap","pendingTrack","unsubscribe","recvPublishNamespace","recvPublishNamespaceDone","recvSubscribeOk","recvSubscribeError","recvPublishDone","publishNamespace","PublishNamespaceRecv","_msg","subscribe_namespace","SubscribeSend","subscription_req","Control.GroupOrder","Control.FilterType","isMigrating","trackID","subscription","callback","onDone","recvObject","subscriptionId","onData","_code","_reason","streamCount","Connection","controlStream","publisher","subscriber","running","run","onMigration","closeCode","all","runControl","runObjects","closePublisher","sendGoAway","handleGoAway","handleMaxRequestId","migrateSession","Client","fingerprint","config","fetchFingerprint","catch","createQuic","sessionUri","options","serverCertificateHashes","uri","url","WebTransport","ready","prepareConnection","createBidirectionalStream","sendOrder","Control.Version","DRAFT_14","Control.ClientSetup","server","readServerSetup","Stream.ControlStream","connect","response","fetch","hexString","text","hexBytes","parseInt","algorithm","bufferLen","bufReader","readClientSetup","Segment","input","cache","timestamp","backpressure","ByteLengthQueuingStrategy","transport","transform","chunk","controller","max","duration","enqueue","chunks","tee","log_level","Log","Date","setLogLevel","level","info","module","getDurationString","_timescale","neg","pad","number","a","split","duration_sec","hours","floor","minutes","msec","printRanges","ranges","str","end","exports","MP4BoxStream","arrayBuffer","ArrayBuffer","dataview","position","prototype","getPosition","getEndPosition","getLength","seek","pos","npos","min","isNaN","isFinite","isEos","readAnyInt","signed","getInt8","getInt32","readUint8","readUint16","readUint24","readUint32","readUint64","readString","s","fromCharCode","readCString","arr","b","apply","readInt8","readInt16","readInt32","readInt64","readUint8Array","readInt16Array","Int16Array","readUint16Array","readUint32Array","Uint32Array","readInt32Array","Int32Array","DataStream","endianness","_byteOffset","dataView","LITTLE_ENDIAN","_realloc","extra","_dynamicSize","req","blen","_buffer","_byteLength","src","_trimAlloc","dst","BIG_ENDIAN","Object","defineProperty","_dataView","isEof","mapUint8Array","memcpy","BYTES_PER_ELEMENT","arrayToNative","readInt8Array","Int8Array","Uint16Array","readFloat64Array","Float64Array","readFloat32Array","Float32Array","readFloat32","getFloat32","readFloat64","getFloat64","dstOffset","srcOffset","dstU8","srcU8","array","arrayIsLittleEndian","flipArrayEndianness","nativeToEndian","littleEndian","u8","j","k","tmp","failurePosition","fromCharCodeUint8","uint8arr","encoding","MAX_SIZE","save","filename","blob","Blob","window","URL","createObjectURL","document","createElement","body","appendChild","setAttribute","click","revokeObjectURL","writeInt32Array","mapInt32Array","writeInt32","writeInt16Array","mapInt16Array","writeInt16","writeInt8Array","mapInt8Array","writeInt8","writeUint32Array","mapUint32Array","writeUint32","writeUint16Array","mapUint16Array","writeUint16","writeUint8Array","writeUint8","writeFloat64Array","mapFloat64Array","writeFloat64","writeFloat32Array","mapFloat32Array","writeFloat32","setInt32","setInt16","setInt8","setFloat32","setFloat64","writeUCS2String","lengthOverride","charCodeAt","writeString","substring","writeCString","writeStruct","structDefinition","struct","writeType","tp","Array","charset","test","ta","writeUint64","writeUint24","adjustUint32","MultiBufferStream","buffers","bufferIndex","insertBuffer","initialized","firstBuffer","fileStart","logBufferLevel","concat","buffer1","buffer2","reduceBuffer","newLength","smallB","usedBytes","ab","to_add","splice","used","total","range","bufferedString","cleanBuffers","mergeNextBuffer","next_buffer","oldLength","oldUsedBytes","oldFileStart","findPosition","fromStart","filePosition","markAsUsed","abuffer","index","findEndContiguousBuf","inputindex","currentBuf","nextBuf","getEndFilePositionAfter","addUsedBytes","nbBytes","setAllUsedBytes","MPEG4DescriptorParser","descTagToName","getDescriptorName","tag","that","classes","parseOneDescriptor","desc","byteRead","Descriptor","parse","_tag","_size","descs","findDescriptor","parseRemainingDescriptors","ES_Descriptor","call","ES_ID","flags","dependsOn_ES_ID","l","OCR_ES_ID","getOTI","dcd","oti","getAudioConfig","dsi","audioObjectType","DecoderConfigDescriptor","streamType","upStream","bufferSize","maxBitrate","avgBitrate","DecoderSpecificInfo","SLConfigDescriptor","BoxParser","ERR_INVALID_DATA","ERR_NOT_ENOUGH_DATA","OK","BASIC_BOXES","FULL_BOXES","CONTAINER_BOXES","boxCodes","fullBoxCodes","containerBoxCodes","sampleEntryCodes","sampleGroupEntryCodes","trackGroupTypes","UUIDBoxes","UUIDs","initialize","FullBox","Box","ContainerBox","SampleEntry","TrackGroupTypeBox","box","createBoxCtor","createFullBoxCtor","boxes","createContainerBoxCtor","_type","_name","_uuid","box_name","uuid","hdr_size","SampleGroupEntry","grouping_type","parseMethod","parseFullHeader","addSubBoxArrays","subBoxNames","nbSubBoxes","createMediaSampleEntryCtor","mediaType","createSampleEntryCtor","createEncryptedSampleEntryCtor","createSampleGroupCtor","createTrackGroupCtor","createUUIDBox","isFullBox","isContainerBox","printPS","ps","nalu","reduce","byte","padStart","ColorPoint","y","Pixel","row","col","bad_pixel_row","bad_pixel_column","TKHD_FLAG_ENABLED","TKHD_FLAG_IN_MOVIE","TKHD_FLAG_IN_PREVIEW","TFHD_FLAG_BASE_DATA_OFFSET","TFHD_FLAG_SAMPLE_DESC","TFHD_FLAG_SAMPLE_DUR","TFHD_FLAG_SAMPLE_SIZE","TFHD_FLAG_SAMPLE_FLAGS","TFHD_FLAG_DUR_EMPTY","TFHD_FLAG_DEFAULT_BASE_IS_MOOF","TRUN_FLAGS_DATA_OFFSET","TRUN_FLAGS_FIRST_FLAG","TRUN_FLAGS_DURATION","TRUN_FLAGS_SIZE","TRUN_FLAGS_FLAGS","TRUN_FLAGS_CTS_OFFSET","add","addBox","prop","addEntry","_prop","parseUUID","parseHex16","hex16","hex","parseOneBox","headerOnly","parentSize","diff","box_type","has_unparsed_data","parseDataAndRewind","ret","indexOf","parseLanguage","language","chars","languageString","SAMPLE_ENTRY_TYPE_VISUAL","SAMPLE_ENTRY_TYPE_AUDIO","SAMPLE_ENTRY_TYPE_HINT","SAMPLE_ENTRY_TYPE_METADATA","SAMPLE_ENTRY_TYPE_SUBTITLE","SAMPLE_ENTRY_TYPE_SYSTEM","SAMPLE_ENTRY_TYPE_TEXT","parseHeader","data_reference_index","parseFooter","compressorname_length","width","height","horizresolution","vertresolution","frame_count","compressorname","depth","channel_count","samplesize","samplerate","FieldLength","layer_size","op_index","aux_type","aux_subtype_length","aux_subtype","seq_profile","seq_level_idx_0","seq_tier_0","high_bitdepth","twelve_bit","monochrome","chroma_subsampling_x","chroma_subsampling_y","chroma_sample_position","reserved_1","initial_presentation_delay_present","initial_presentation_delay_minus_one","reserved_2","configOBUs_length","configOBUs","toparse","configurationVersion","AVCProfileIndication","profile_compatibility","AVCLevelIndication","lengthSizeMinusOne","nb_SPS_nalus","SPS","nb_PPS_nalus","PPS","ext","bufferSizeDB","all_ref_pics_intra","intra_pred_used","max_ref_per_pic","channel_indexes","channel_types","channel_associations","cleanApertureWidthN","cleanApertureWidthD","cleanApertureHeightN","cleanApertureHeightD","horizOffN","horizOffD","vertOffN","vertOffD","max_content_light_level","max_pic_average_light_level","pos_x","pos_y","pos_z","quat_x","quat_y","quat_z","focal_length_x","principal_point_x","principal_point_y","focal_length_y","skew_factor","component_count","component_types","component_type_urls","component_type","entry_count","chunk_offsets","maxCLL","maxFALL","colour_type","colour_primaries","transfer_characteristics","matrix_coefficients","full_range_flag","ICC_profile","notice","compositionToDTSShift","leastDecodeToDisplayDelta","greatestDecodeToDisplayDelta","compositionStartTime","compositionEndTime","sample_counts","sample_offsets","tmp_byte1","tmp_byte2","tmp_byte3","fscod","bsid","bsmod","acmod","lfeon","bit_rate_code","tmp_16","data_rate","num_ind_sub","ind_subs","ind_sub","num_dep_sub","chan_loc","boxesFound","knownBlockTypes","flagAndType","numMetadataBlocks","bytessent","time","OutputChannelCount","PreSkip","InputSampleRate","OutputGain","ChannelMappingFamily","StreamCount","CoupledCount","ChannelMapping","entries","extended_language","entry","segment_duration","media_time","media_rate_integer","media_rate_fraction","timescale","presentation_time","event_duration","scheme_id_uri","presentation_time_delta","message_size","message_data","createEntityToGroupCtor","num_entities_in_group","entity_ids","entity_id","tile_size_x","tile_size_y","layer_binning","tiles_in_layer_column_minus1","tiles_in_layer_row_minus1","esd_data","esd_parser","esd","fieldCount","fieldOrdering","data_format","major_brand","minor_version","compatible_brands","handler","tmp_byte","general_profile_space","general_tier_flag","general_profile_idc","general_profile_compatibility","general_constraint_indicator","general_level_idc","min_spatial_segmentation_idc","parallelismType","chroma_format_idc","bit_depth_luma_minus8","bit_depth_chroma_minus8","avgFrameRate","constantFrameRate","numTemporalLayers","temporalIdNested","nalu_arrays","nalu_array","completeness","nalu_type","numOfArrays","numNalus","item_infos","offset_size","length_size","base_offset_size","index_size","items","item_count","item","item_ID","construction_method","base_offset","extent_count","extents","extent","extent_index","extent_offset","extent_length","reserved","axis","item_protection_index","item_name","content_type","content_encoding","extension_type","item_type","item_uri_type","associations","item_assoc","association_count","essential","property_index","references","SingleItemTypeReferenceBox","SingleItemTypeReferenceBoxLarge","angle","image_width","image_height","schemeURI","count","levels","track_ID","padding_flag","assignment_type","grouping_type_parameter","sub_track_id","layer_id","period","display_primaries","white_point","max_display_mastering_luminance","min_display_mastering_luminance","creation_time","modification_time","fragment_duration","sequence_number","bits_per_pixel","rate","volume","matrix","next_track_id","packetssent","sample_count","padbits","hSpacing","vSpacing","payloadID","rtpmap_string","initial_delay","item_id","num_channels","bits_per_channels","step_count","ref_track_id","ntp_timestamp","system_id","kid","datasize","descriptionformat","sdptext","aux_info_type","aux_info_type_parameter","default_sample_info_size","sample_info_size","mime_format","schema_location","auxiliary_mime_types","displayFlags","horizontal_justification","vertical_justification","bg_color_rgba","box_record","style_record","roll_count","first_output_sample","sample_offset","description_length","num_output_samples","num_total_samples","layerNumber","accurateStatisticsFlag","avgBitRate","subSequenceIdentifier","durationFlag","avgRateFlag","dependency","numReferences","dependencyInfo","subSeqDirectionFlag","roll_distance","num_leading_samples_known","num_leading_samples","operation_point_count","target_rate_share","available_bitrate","maximum_bitrate","minimum_bitrate","discard_priority","crypt_byte_block","skip_byte_block","isProtected","Per_Sample_IV_Size","KID","constant_IV_size","constant_IV","NAL_unit_type","level_independently_decodable","group_description_index","component_index","correction_applied","num_bad_rows","num_bad_cols","num_bad_pixels","bad_rows","bad_columns","bad_pixels","scheme_type","scheme_version","scheme_uri","is_leading","sample_depends_on","sample_is_depended_on","sample_has_redundancy","default_length","default_group_description_index","reference_ID","earliest_presentation_time","first_offset","ref","tmp_32","reference_type","referenced_size","subsegment_duration","starts_with_SAP","SAP_type","SAP_delta_time","from_item_ID","to_item_ID","primaryRChromaticity_x","primaryRChromaticity_y","primaryGChromaticity_x","primaryGChromaticity_y","primaryBChromaticity_x","primaryBChromaticity_y","whitePointChromaticity_x","whitePointChromaticity_y","luminanceMax","luminanceMin","balance","subsegments","subsegment_count","subsegment","range_count","range_size","switch_group","alternate_group","attribute_list","first_chunk","samples_per_chunk","sample_description_index","entryCount","shadowed_sample_numbers","sync_sample_numbers","sample_numbers","sample_sizes","sample_size","delta","sample_deltas","tmp32","single_view_allowed","stereo_scheme","stereo_indication_type","ftypBox","field_size","subsample_count","sampleInfo","sample_delta","subsamples","subsample","discardable","codec_specific_parameters","default_crypt_byte_block","default_skip_byte_block","default_isProtected","default_Per_Sample_IV_Size","default_KID","default_constant_IV_size","default_constant_IV","baseMediaDecodeTime","readBytes","track_id","base_data_offset","default_sample_description_index","default_sample_duration","default_sample_size","default_sample_flags","length_size_of_traf_num","length_size_of_trun_num","length_size_of_sample_num","number_of_entries","moof_offset","traf_number","trun_number","sample_number","layer","track_group_id","TrackReferenceTypeBox","track_ids","trefBox","data_offset","first_sample_flags","sample_duration","sample_flags","sample_composition_time_offset","lang","description","tags","profile","component_bit_depth_minus_one","component_format","component_align_size","sampling_type","interleave_type","block_size","component_little_endian","block_pad_lsb","block_little_endian","block_reversed","pad_unknown","pixel_size","row_align_size","tile_align_size","num_tile_cols_minus_one","num_tile_rows_minus_one","LiveServerManifest","replace","default_AlgorithmID","default_IV_size","fragment_count","absolute_time","absolute_duration","graphicsmode","opcolor","bitDepth","chromaSubsampling","videoFullRangeFlag","colourPrimaries","transferCharacteristics","matrixCoefficients","codecIntializationDataSize","codecIntializationData","colorSpace","transferFunction","bitReader","held_bits","num_held_bits","stream_read_1_bytes","strm","stream_read_2_bytes","extract_bits","num_bits","ptl_present_flag","ols_idx","num_sublayers","constant_frame_rate","bit_depth_minus8","num_bytes_constraint_info","ptl_frame_only_constraint_flag","ptl_multilayer_enabled_flag","general_constraint_info","cnstr1","cnstr2","ptl_sublayer_present_mask","sublayer_level_idc","ptl_num_sub_profiles","general_sub_profile_idc","max_picture_width","max_picture_height","avg_frame_rate","num_of_arrays","isVideo","isAudio","isSubtitle","isMetadata","isHint","getCodec","getWidth","getHeight","getChannelCount","getSampleRate","getSampleSize","VisualSampleEntry","AudioSampleEntry","SubtitleSampleEntry","MetadataSampleEntry","decimalToHex","d","padding","avc1SampleEntry","avc2SampleEntry","avc3SampleEntry","avc4SampleEntry","baseCodec","avcC","hev1SampleEntry","hvc1SampleEntry","hvcC","reversed","hasByte","constraint_string","vvc1SampleEntry","vvi1SampleEntry","vvcC","last_nonzero","ptl_frame_only_constraint","ptl_multilayer_enabled","base32_chars","mp4aSampleEntry","esds","stxtSampleEntry","vp08SampleEntry","vp09SampleEntry","vpcC","av01SampleEntry","bitdepth","av1C","writeHeader","sizePosition","avcCBox","co64Box","cslgBox","cttsBox","drefBox","elngBox","elstBox","emsgBox","hdlrBox","hvcCBox","kindBox","mdhdBox","mehdBox","mfhdBox","mvhdBox","writeFooter","stppSampleEntry","sbgpBox","sgpdBox","sidxBox","smhdBox","stcoBox","stscBox","stsdBox","stshBox","stssBox","stszBox","constant","sttsBox","tfdtBox","UINT32_MAX","tfhdBox","tkhdBox","trexBox","trunBox","data_offset_position","vmhdBox","unpack","samples","pts","dts","Infinity","description_index","chunk_index","DIFF_BOXES_PROP_NAMES","DIFF_PRIMITIVE_ARRAY_PROP_NAMES","boxEqualFields","box_a","box_b","boxEqual","VTTin4Parser","parseSample","cues","cue","getText","startTime","endTime","n","z","secToTimestamp","insec","string","cueIn4","payl","XMLSubtitlein4Parser","sample","documentString","resources","DOMParser","parseFromString","Textin4Parser","parseConfig","ISOFile","mdats","moofs","isProgressive","moovStartFound","onMoovStart","moovStartSent","onReady","readySent","onSegment","onSamples","sampleListBuilt","fragmentedTracks","extractedTracks","isFragmentationInitialized","sampleProcessingStarted","nextMoofNumber","itemListBuilt","entity_groups","onSidx","sidxSent","setSegmentOptions","user","trak","getTrackById","fragTrack","nextSample","segmentStream","nb_samples","rapAlignement","nbSamples","unsetSegmentOptions","setExtractionOptions","extractTrack","unsetExtractionOptions","restoreParsePosition","hasIncompleteMdat","processIncompleteMdat","saveParsePosition","processIncompleteBox","updateUsedBytes","checkBuffer","appendBuffer","last","nextFileStart","moov","buildSampleLists","updateSampleLists","getInfo","processSamples","nextSeekPosition","nextParsePosition","sidx","meta","flattenItemInfo","processItems","onItem","getAllocatedSampleDataSize","sample_desc","movie","_1904","getTime","hasMoov","mvhd","isFragmented","mvex","mehd","hasIOD","iods","brands","ftyp","created","modified","tracks","audioTracks","videoTracks","subtitleTracks","metadataTracks","hintTracks","otherTracks","traks","mdia","minf","stbl","stsd","tkhd","hdlr","tref","edts","edits","elst","movie_duration","movie_timescale","track_width","track_height","mdhd","cts_shift","cslg","samples_duration","codec","kind","udta","kinds","elng","samples_size","bitrate","audio","sample_rate","video","mime","setNextSeekPositionFromSample","alreadyRead","fragTrak","createFragment","extractTrak","getSample","getBox","getBoxes","returnEarly","_sweep","getTrackSamplesInfo","getTrackSample","releaseUsedSamples","sampleNum","lastValidSample","releaseSample","samplesDataSize","stop","seekTrack","useRap","seek_offset","rap_seek_sample_num","seek_sample_num","cts","is_sync","getTrackDuration","trak_seek_info","seek_info","equal","box_index","a_box","b_box","lastBoxStartPosition","parsingMdat","discardMdatData","_options","addTrack","media_duration","sample_description_entry","media_type","codes","avcDecoderConfigRecord","hevcDecoderConfigRecord","description_boxes","buildTrakSampleLists","computeSize","stream_","addSample","depends_on","is_depended_on","has_redundancy","degradation_priority","first_dts","moof","createSingleSampleMoof","trafs","truns","moofBox","traf","lastMoofIndex","resetTables","stsc","stts","ctts","stss","initial_duration","stco","co64","stsz","stz2","initSampleGroups","sbgps","trak_sgpds","traf_sgpds","sample_group_info","sample_group_key","SampleGroupInfo","_parameter","_sbgp","sbgp","last_sample_in_run","entry_index","sample_groups_info","fragment_description","is_fragment","setSampleGroupProperties","sample_groups","process_sdtp","sdtp","subs","sgpds","stdp","chunk_run_index","last_chunk_in_run","offset_in_chunk","last_sample_in_chunk","last_sample_in_stts_run","stts_run_index","last_sample_in_ctts_run","ctts_run_index","last_stss_index","subs_entry_index","last_subs_sample_index","last_run_position","trex","tfhd","getTrexById","trun","moof_number","number_in_traf","first_sample_index","first_traf_merged","tfdt","bdop","dbim","dop","bdo","has_fragment_subsamples","sample_index","lengthAfterStart","getCodecs","codecs","trexs","itemsDataSize","iinf","ref_to","protection_index","protection","ipro","protections","grpl","entity_group","iloc","itemloc","source","dinf","idat","pitm","primary","iref","iprp","ipmas","ipma","association","properties","propEntry","ipco","propbox","getItem","releaseItem","sent","hasItem","getMetaHandler","getPrimaryItem","itemToFragmentedTrackFile","itemId","file","trackOptions","ispe","trackId","outstream","sampleNumber","mdat","mdatBox","writeInitializationSegment","total_duration","getBuffer","initializeSegmentation","initSegs","seg","moovBox","printHeader","output","indent","print","prev_indent","MP4Box","_keepMdatData","_stream","keepMdatData","createFile","MP4.BoxParser","dOpsBox","mapping","Container","mp4","frame","segment","MP4.ISOFile","isDecoderConfig","codedWidth","isVideoConfig","numberOfChannels","sampleRate","codedHeight","dops","MP4.Stream","copyTo","SUPPORTED","encoderConfig","decoderConfig","frames","bind","AudioEncoder","metadata","configure","isSupported","short","includes","isConfigSupported","supported","keyframeNext","keyframeCounter","bitrateMode","latencyMode","hardwareAcceleration","VideoEncoder","keyFrame","encodeQueueSize","framerate","Track","segments","notify","media","runAudio","isVideoTrack","runVideo","MediaStreamTrackProcessor","Audio.Encoder","container","WritableStream","pipeThrough","pipeTo","Video.Encoder","at","desiredSize","ReadableStream","pull","isAudioTrackSettings","settings","isVideoTrackSettings","Broadcast","catalog","connection","mediaTracks","getTracks","getSettings","audioContext","AudioContext","createMediaStreamSource","MediaStream","assign","initTrack","selectionParams","mimeType","frameRate","channelConfig","channelCount","streamingFormat","streamingFormatVersion","supportsDeltaUpdates","commonTrackFields","packaging","renderGroup","serveSubscribe","base","lastIndexOf","splitExt","serveCatalog","serveInit","serveTrack","JSON","stringify","Catalog.encode","serveSegment","attach","srcObject","isGoingAway","notGoingAway","values","PublisherApi","EventTarget","client","broadcast","opts","super","fingerprintUrl","publish","dispatchEvent","CustomEvent","detail","bcConfig","goingaway","PublisherMoq","HTMLElement","shadow","cameraSelect","microphoneSelect","previewVideo","connectButton","playbackUrlTextarea","mediaStream","isPublishing","attachShadow","mode","style","textContent","classList","autoplay","playsInline","muted","readOnly","rows","display","marginTop","append","handleDeviceChange","handleClick","navigator","mediaDevices","addEventListener","startPreview","connectedCallback","populateDeviceLists","disconnectedCallback","removeEventListener","devices","enumerateDevices","vids","filter","mics","innerHTML","o","deviceId","label","vidId","micId","videoConstraints","exact","ideal","audioConstraints","getUserMedia","stopPublishing","startPublishing","getAttribute","crypto","randomUUID","getAudioTracks","makeEven","videoConfig","videoWidth","videoHeight","audioConfig","event","handleReconnect","disabled","playbackBaseUrl","graceful","customElements","define"],"mappings":"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","x_google_ignoreList":[39]}