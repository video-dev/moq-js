{"version":3,"file":"moq-publisher.iife.js","sources":["../../transport/buffer.ts","../../transport/base_data.ts","../../transport/control/subscribe.ts","../../transport/control/subscribe_ok.ts","../../transport/control/subscribe_error.ts","../../transport/control/subscribe_update.ts","../../transport/control/subscribe_namespace.ts","../../transport/control/subscribe_namespace_ok.ts","../../transport/control/subscribe_namespace_error.ts","../../transport/control/unsubscribe.ts","../../transport/control/publish.ts","../../transport/control/publish_ok.ts","../../transport/control/publish_error.ts","../../transport/control/publish_done.ts","../../transport/control/publish_namespace.ts","../../transport/control/publish_namespace_ok.ts","../../transport/control/publish_namespace_error.ts","../../transport/control/publish_namespace_done.ts","../../transport/control/fetch.ts","../../transport/control/fetch_ok.ts","../../transport/control/fetch_error.ts","../../transport/control/fetch_cancel.ts","../../transport/control/go_away.ts","../../transport/control/client_setup.ts","../../transport/control/server_setup.ts","../../transport/control/max_request_id.ts","../../transport/control/index.ts","../../transport/utils.ts","../../transport/stream.ts","../../transport/subgroup.ts","../../transport/objects.ts","../../common/error.ts","../../common/async.ts","../../transport/publisher.ts","../../transport/subscriber.ts","../../transport/connection.ts","../../transport/client.ts","../../contribute/segment.ts","../../node_modules/mp4box/dist/mp4box.all.js","../../media/mp4/index.ts","../../contribute/container.ts","../../contribute/audio.ts","../../contribute/video.ts","../../contribute/track.ts","../../common/settings.ts","../../contribute/broadcast.ts","../../media/catalog/index.ts","../../publish/index.ts","../../moq-publisher/index.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"// file:src/log.js\n/* \n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar Log = (function (){\n\t\tvar start = new Date();\n\t\tvar LOG_LEVEL_ERROR \t= 4;\n\t\tvar LOG_LEVEL_WARNING \t= 3;\n\t\tvar LOG_LEVEL_INFO \t\t= 2;\n\t\tvar LOG_LEVEL_DEBUG\t\t= 1;\n\t\tvar log_level = LOG_LEVEL_ERROR;\n\t\tvar logObject = {\n\t\t\tsetLogLevel : function(level) {\n\t\t\t\tif (level == this.debug) log_level = LOG_LEVEL_DEBUG;\n\t\t\t\telse if (level == this.info) log_level = LOG_LEVEL_INFO;\n\t\t\t\telse if (level == this.warn) log_level = LOG_LEVEL_WARNING;\n\t\t\t\telse if (level == this.error) log_level = LOG_LEVEL_ERROR;\n\t\t\t\telse log_level = LOG_LEVEL_ERROR;\n\t\t\t},\n\t\t\tdebug : function(module, msg) {\n\t\t\t\tif (console.debug === undefined) {\n\t\t\t\t\tconsole.debug = console.log;\n\t\t\t\t}\n\t\t\t\tif (LOG_LEVEL_DEBUG >= log_level) {\n\t\t\t\t\tconsole.debug(\"[\"+Log.getDurationString(new Date()-start,1000)+\"]\",\"[\"+module+\"]\",msg);\n\t\t\t\t}\n\t\t\t},\n\t\t\tlog : function(module, msg) {\n\t\t\t\tthis.debug(module.msg)\n\t\t\t},\n\t\t\tinfo : function(module, msg) {\n\t\t\t\tif (LOG_LEVEL_INFO >= log_level) {\n\t\t\t\t\tconsole.info(\"[\"+Log.getDurationString(new Date()-start,1000)+\"]\",\"[\"+module+\"]\",msg);\n\t\t\t\t}\n\t\t\t},\n\t\t\twarn : function(module, msg) {\n\t\t\t\tif (LOG_LEVEL_WARNING >= log_level) {\n\t\t\t\t\tconsole.warn(\"[\"+Log.getDurationString(new Date()-start,1000)+\"]\",\"[\"+module+\"]\",msg);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror : function(module, msg) {\n\t\t\t\tif (LOG_LEVEL_ERROR >= log_level) {\n\t\t\t\t\tconsole.error(\"[\"+Log.getDurationString(new Date()-start,1000)+\"]\",\"[\"+module+\"]\",msg);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn logObject;\n\t})();\n\t\n/* Helper function to print a duration value in the form H:MM:SS.MS */\nLog.getDurationString = function(duration, _timescale) {\n\tvar neg;\n\t/* Helper function to print a number on a fixed number of digits */\n\tfunction pad(number, length) {\n\t\tvar str = '' + number;\n\t\tvar a = str.split('.');\t\t\n\t\twhile (a[0].length < length) {\n\t\t\ta[0] = '0' + a[0];\n\t\t}\n\t\treturn a.join('.');\n\t}\n\tif (duration < 0) {\n\t\tneg = true;\n\t\tduration = -duration;\n\t} else {\n\t\tneg = false;\t\n\t}\n\tvar timescale = _timescale || 1;\n\tvar duration_sec = duration/timescale;\n\tvar hours = Math.floor(duration_sec/3600);\n\tduration_sec -= hours * 3600;\n\tvar minutes = Math.floor(duration_sec/60);\n\tduration_sec -= minutes * 60;\t\t\n\tvar msec = duration_sec*1000;\n\tduration_sec = Math.floor(duration_sec);\n\tmsec -= duration_sec*1000;\n\tmsec = Math.floor(msec);\n\treturn (neg ? \"-\": \"\")+hours+\":\"+pad(minutes,2)+\":\"+pad(duration_sec,2)+\".\"+pad(msec,3);\n}\n\t\n/* Helper function to stringify HTML5 TimeRanges objects */\t\nLog.printRanges = function(ranges) {\n\tvar length = ranges.length;\n\tif (length > 0) {\n\t\tvar str = \"\";\n\t\tfor (var i = 0; i < length; i++) {\n\t\t  if (i > 0) str += \",\";\n\t\t  str += \"[\"+Log.getDurationString(ranges.start(i))+ \",\"+Log.getDurationString(ranges.end(i))+\"]\";\n\t\t}\n\t\treturn str;\n\t} else {\n\t\treturn \"(empty)\";\n\t}\n}\n\nif (typeof exports !== 'undefined') {\n\texports.Log = Log;\n}\n// file:src/stream.js\nvar MP4BoxStream = function(arrayBuffer) {\n  if (arrayBuffer instanceof ArrayBuffer) {\n    this.buffer = arrayBuffer;\n    this.dataview = new DataView(arrayBuffer);\n  } else {\n    throw (\"Needs an array buffer\");\n  }\n  this.position = 0;\n};\n\n/*************************************************************************\n  Common API between MultiBufferStream and SimpleStream\n *************************************************************************/\nMP4BoxStream.prototype.getPosition = function() {\n  return this.position;\n}\n\nMP4BoxStream.prototype.getEndPosition = function() {\n  return this.buffer.byteLength;\n}\n\nMP4BoxStream.prototype.getLength = function() {\n  return this.buffer.byteLength;\n}\n\nMP4BoxStream.prototype.seek = function (pos) {\n  var npos = Math.max(0, Math.min(this.buffer.byteLength, pos));\n  this.position = (isNaN(npos) || !isFinite(npos)) ? 0 : npos;\n  return true;\n}\n\nMP4BoxStream.prototype.isEos = function () {\n  return this.getPosition() >= this.getEndPosition();\n}\n\n/*************************************************************************\n  Read methods, simimar to DataStream but simpler\n *************************************************************************/\nMP4BoxStream.prototype.readAnyInt = function(size, signed) {\n  var res = 0;\n  if (this.position + size <= this.buffer.byteLength) {\n    switch (size) {\n      case 1:\n        if (signed) {\n          res = this.dataview.getInt8(this.position);\n        } else {\n          res = this.dataview.getUint8(this.position);\n        }\n        break;\n      case 2:\n        if (signed) {\n          res = this.dataview.getInt16(this.position);\n        } else {\n          res = this.dataview.getUint16(this.position);\n        }\n        break;\n      case 3:\n        if (signed) {\n          throw (\"No method for reading signed 24 bits values\");\n        } else {\n          res = this.dataview.getUint8(this.position) << 16;\n          res |= this.dataview.getUint8(this.position+1) << 8;\n          res |= this.dataview.getUint8(this.position+2);\n        }\n        break;\n      case 4:\n        if (signed) {\n          res = this.dataview.getInt32(this.position);\n        } else {\n          res = this.dataview.getUint32(this.position);\n        }\n        break;\n      case 8:\n        if (signed) {\n          throw (\"No method for reading signed 64 bits values\");\n        } else {\n          res = this.dataview.getUint32(this.position) << 32;\n          res |= this.dataview.getUint32(this.position+4);\n        }\n        break;\n      default:\n        throw (\"readInt method not implemented for size: \"+size);\n    }\n    this.position+= size;\n    return res;\n  } else {\n    throw (\"Not enough bytes in buffer\");\n  }\n}\n\nMP4BoxStream.prototype.readUint8 = function() {\n  return this.readAnyInt(1, false);\n}\n\nMP4BoxStream.prototype.readUint16 = function() {\n  return this.readAnyInt(2, false);\n}\n\nMP4BoxStream.prototype.readUint24 = function() {\n  return this.readAnyInt(3, false);\n}\n\nMP4BoxStream.prototype.readUint32 = function() {\n  return this.readAnyInt(4, false);\n}\n\nMP4BoxStream.prototype.readUint64 = function() {\n  return this.readAnyInt(8, false);\n}\n\nMP4BoxStream.prototype.readString = function(length) {\n  if (this.position + length <= this.buffer.byteLength) {\n    var s = \"\";\n    for (var i = 0; i < length; i++) {\n      s += String.fromCharCode(this.readUint8());\n    }\n    return s;\n  } else {\n    throw (\"Not enough bytes in buffer\");\n  }\n}\n\nMP4BoxStream.prototype.readCString = function() {\n  var arr = [];\n  while(true) {\n    var b = this.readUint8();\n    if (b !== 0) {\n      arr.push(b);\n    } else {\n      break;\n    }\n  }\n  return String.fromCharCode.apply(null, arr); \n}\n\nMP4BoxStream.prototype.readInt8 = function() {\n  return this.readAnyInt(1, true);\n}\n\nMP4BoxStream.prototype.readInt16 = function() {\n  return this.readAnyInt(2, true);\n}\n\nMP4BoxStream.prototype.readInt32 = function() {\n  return this.readAnyInt(4, true);\n}\n\nMP4BoxStream.prototype.readInt64 = function() {\n  return this.readAnyInt(8, false);\n}\n\nMP4BoxStream.prototype.readUint8Array = function(length) {\n  var arr = new Uint8Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readUint8();\n  }\n  return arr;\n}\n\nMP4BoxStream.prototype.readInt16Array = function(length) {\n  var arr = new Int16Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readInt16();\n  }\n  return arr;\n}\n\nMP4BoxStream.prototype.readUint16Array = function(length) {\n  var arr = new Int16Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readUint16();\n  }\n  return arr;\n}\n\nMP4BoxStream.prototype.readUint32Array = function(length) {\n  var arr = new Uint32Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readUint32();\n  }\n  return arr;\n}\n\nMP4BoxStream.prototype.readInt32Array = function(length) {\n  var arr = new Int32Array(length);\n  for (var i = 0; i < length; i++) {\n    arr[i] = this.readInt32();\n  }\n  return arr;\n}\n\nif (typeof exports !== 'undefined') {\n  exports.MP4BoxStream = MP4BoxStream;\n}// file:src/DataStream.js\n/**\n  DataStream reads scalars, arrays and structs of data from an ArrayBuffer.\n  It's like a file-like DataView on steroids.\n\n  @param {ArrayBuffer} arrayBuffer ArrayBuffer to read from.\n  @param {?Number} byteOffset Offset from arrayBuffer beginning for the DataStream.\n  @param {?Boolean} endianness DataStream.BIG_ENDIAN or DataStream.LITTLE_ENDIAN (the default).\n  */\nvar DataStream = function(arrayBuffer, byteOffset, endianness) {\n  this._byteOffset = byteOffset || 0;\n  if (arrayBuffer instanceof ArrayBuffer) {\n    this.buffer = arrayBuffer;\n  } else if (typeof arrayBuffer == \"object\") {\n    this.dataView = arrayBuffer;\n    if (byteOffset) {\n      this._byteOffset += byteOffset;\n    }\n  } else {\n    this.buffer = new ArrayBuffer(arrayBuffer || 0);\n  }\n  this.position = 0;\n  this.endianness = endianness == null ? DataStream.LITTLE_ENDIAN : endianness;\n};\nDataStream.prototype = {};\n\nDataStream.prototype.getPosition = function() {\n  return this.position;\n}\n\n/**\n  Internal function to resize the DataStream buffer when required.\n  @param {number} extra Number of bytes to add to the buffer allocation.\n  @return {null}\n  */\nDataStream.prototype._realloc = function(extra) {\n  if (!this._dynamicSize) {\n    return;\n  }\n  var req = this._byteOffset + this.position + extra;\n  var blen = this._buffer.byteLength;\n  if (req <= blen) {\n    if (req > this._byteLength) {\n      this._byteLength = req;\n    }\n    return;\n  }\n  if (blen < 1) {\n    blen = 1;\n  }\n  while (req > blen) {\n    blen *= 2;\n  }\n  var buf = new ArrayBuffer(blen);\n  var src = new Uint8Array(this._buffer);\n  var dst = new Uint8Array(buf, 0, src.length);\n  dst.set(src);\n  this.buffer = buf;\n  this._byteLength = req;\n};\n\n/**\n  Internal function to trim the DataStream buffer when required.\n  Used for stripping out the extra bytes from the backing buffer when\n  the virtual byteLength is smaller than the buffer byteLength (happens after\n  growing the buffer with writes and not filling the extra space completely).\n\n  @return {null}\n  */\nDataStream.prototype._trimAlloc = function() {\n  if (this._byteLength == this._buffer.byteLength) {\n    return;\n  }\n  var buf = new ArrayBuffer(this._byteLength);\n  var dst = new Uint8Array(buf);\n  var src = new Uint8Array(this._buffer, 0, dst.length);\n  dst.set(src);\n  this.buffer = buf;\n};\n\n\n/**\n  Big-endian const to use as default endianness.\n  @type {boolean}\n  */\nDataStream.BIG_ENDIAN = false;\n\n/**\n  Little-endian const to use as default endianness.\n  @type {boolean}\n  */\nDataStream.LITTLE_ENDIAN = true;\n\n/**\n  Virtual byte length of the DataStream backing buffer.\n  Updated to be max of original buffer size and last written size.\n  If dynamicSize is false is set to buffer size.\n  @type {number}\n  */\nDataStream.prototype._byteLength = 0;\n\n/**\n  Returns the byte length of the DataStream object.\n  @type {number}\n  */\nObject.defineProperty(DataStream.prototype, 'byteLength',\n  { get: function() {\n    return this._byteLength - this._byteOffset;\n  }});\n\n/**\n  Set/get the backing ArrayBuffer of the DataStream object.\n  The setter updates the DataView to point to the new buffer.\n  @type {Object}\n  */\nObject.defineProperty(DataStream.prototype, 'buffer',\n  { get: function() {\n      this._trimAlloc();\n      return this._buffer;\n    },\n    set: function(v) {\n      this._buffer = v;\n      this._dataView = new DataView(this._buffer, this._byteOffset);\n      this._byteLength = this._buffer.byteLength;\n    } });\n\n/**\n  Set/get the byteOffset of the DataStream object.\n  The setter updates the DataView to point to the new byteOffset.\n  @type {number}\n  */\nObject.defineProperty(DataStream.prototype, 'byteOffset',\n  { get: function() {\n      return this._byteOffset;\n    },\n    set: function(v) {\n      this._byteOffset = v;\n      this._dataView = new DataView(this._buffer, this._byteOffset);\n      this._byteLength = this._buffer.byteLength;\n    } });\n\n/**\n  Set/get the backing DataView of the DataStream object.\n  The setter updates the buffer and byteOffset to point to the DataView values.\n  @type {Object}\n  */\nObject.defineProperty(DataStream.prototype, 'dataView',\n  { get: function() {\n      return this._dataView;\n    },\n    set: function(v) {\n      this._byteOffset = v.byteOffset;\n      this._buffer = v.buffer;\n      this._dataView = new DataView(this._buffer, this._byteOffset);\n      this._byteLength = this._byteOffset + v.byteLength;\n    } });\n\n/**\n  Sets the DataStream read/write position to given position.\n  Clamps between 0 and DataStream length.\n\n  @param {number} pos Position to seek to.\n  @return {null}\n  */\nDataStream.prototype.seek = function(pos) {\n  var npos = Math.max(0, Math.min(this.byteLength, pos));\n  this.position = (isNaN(npos) || !isFinite(npos)) ? 0 : npos;\n};\n\n/**\n  Returns true if the DataStream seek pointer is at the end of buffer and\n  there's no more data to read.\n\n  @return {boolean} True if the seek pointer is at the end of the buffer.\n  */\nDataStream.prototype.isEof = function() {\n  return (this.position >= this._byteLength);\n};\n\n\n/**\n  Maps a Uint8Array into the DataStream buffer.\n\n  Nice for quickly reading in data.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Uint8Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapUint8Array = function(length) {\n  this._realloc(length * 1);\n  var arr = new Uint8Array(this._buffer, this.byteOffset+this.position, length);\n  this.position += length * 1;\n  return arr;\n};\n\n\n/**\n  Reads an Int32Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Int32Array.\n */\nDataStream.prototype.readInt32Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 4) : length;\n  var arr = new Int32Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads an Int16Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Int16Array.\n */\nDataStream.prototype.readInt16Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 2) : length;\n  var arr = new Int16Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads an Int8Array of desired length from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Int8Array.\n */\nDataStream.prototype.readInt8Array = function(length) {\n  length = length == null ? (this.byteLength-this.position) : length;\n  var arr = new Int8Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Uint32Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Uint32Array.\n */\nDataStream.prototype.readUint32Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 4) : length;\n  var arr = new Uint32Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Uint16Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Uint16Array.\n */\nDataStream.prototype.readUint16Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 2) : length;\n  var arr = new Uint16Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Uint8Array of desired length from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Uint8Array.\n */\nDataStream.prototype.readUint8Array = function(length) {\n  length = length == null ? (this.byteLength-this.position) : length;\n  var arr = new Uint8Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Float64Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Float64Array.\n */\nDataStream.prototype.readFloat64Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 8) : length;\n  var arr = new Float64Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n/**\n  Reads a Float32Array of desired length and endianness from the DataStream.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} The read Float32Array.\n */\nDataStream.prototype.readFloat32Array = function(length, e) {\n  length = length == null ? (this.byteLength-this.position / 4) : length;\n  var arr = new Float32Array(length);\n  DataStream.memcpy(arr.buffer, 0,\n                    this.buffer, this.byteOffset+this.position,\n                    length*arr.BYTES_PER_ELEMENT);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += arr.byteLength;\n  return arr;\n};\n\n\n/**\n  Reads a 32-bit int from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readInt32 = function(e) {\n  var v = this._dataView.getInt32(this.position, e == null ? this.endianness : e);\n  this.position += 4;\n  return v;\n};\n\n/**\n  Reads a 16-bit int from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readInt16 = function(e) {\n  var v = this._dataView.getInt16(this.position, e == null ? this.endianness : e);\n  this.position += 2;\n  return v;\n};\n\n/**\n  Reads an 8-bit int from the DataStream.\n\n  @return {number} The read number.\n */\nDataStream.prototype.readInt8 = function() {\n  var v = this._dataView.getInt8(this.position);\n  this.position += 1;\n  return v;\n};\n\n/**\n  Reads a 32-bit unsigned int from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readUint32 = function(e) {\n  var v = this._dataView.getUint32(this.position, e == null ? this.endianness : e);\n  this.position += 4;\n  return v;\n};\n\n/**\n  Reads a 16-bit unsigned int from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readUint16 = function(e) {\n  var v = this._dataView.getUint16(this.position, e == null ? this.endianness : e);\n  this.position += 2;\n  return v;\n};\n\n/**\n  Reads an 8-bit unsigned int from the DataStream.\n\n  @return {number} The read number.\n */\nDataStream.prototype.readUint8 = function() {\n  var v = this._dataView.getUint8(this.position);\n  this.position += 1;\n  return v;\n};\n\n/**\n  Reads a 32-bit float from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readFloat32 = function(e) {\n  var v = this._dataView.getFloat32(this.position, e == null ? this.endianness : e);\n  this.position += 4;\n  return v;\n};\n\n/**\n  Reads a 64-bit float from the DataStream with the desired endianness.\n\n  @param {?boolean} e Endianness of the number.\n  @return {number} The read number.\n */\nDataStream.prototype.readFloat64 = function(e) {\n  var v = this._dataView.getFloat64(this.position, e == null ? this.endianness : e);\n  this.position += 8;\n  return v;\n};\n\n/**\n  Native endianness. Either DataStream.BIG_ENDIAN or DataStream.LITTLE_ENDIAN\n  depending on the platform endianness.\n\n  @type {boolean}\n */\nDataStream.endianness = new Int8Array(new Int16Array([1]).buffer)[0] > 0;\n\n/**\n  Copies byteLength bytes from the src buffer at srcOffset to the\n  dst buffer at dstOffset.\n\n  @param {Object} dst Destination ArrayBuffer to write to.\n  @param {number} dstOffset Offset to the destination ArrayBuffer.\n  @param {Object} src Source ArrayBuffer to read from.\n  @param {number} srcOffset Offset to the source ArrayBuffer.\n  @param {number} byteLength Number of bytes to copy.\n */\nDataStream.memcpy = function(dst, dstOffset, src, srcOffset, byteLength) {\n  var dstU8 = new Uint8Array(dst, dstOffset, byteLength);\n  var srcU8 = new Uint8Array(src, srcOffset, byteLength);\n  dstU8.set(srcU8);\n};\n\n/**\n  Converts array to native endianness in-place.\n\n  @param {Object} array Typed array to convert.\n  @param {boolean} arrayIsLittleEndian True if the data in the array is\n                                       little-endian. Set false for big-endian.\n  @return {Object} The converted typed array.\n */\nDataStream.arrayToNative = function(array, arrayIsLittleEndian) {\n  if (arrayIsLittleEndian == this.endianness) {\n    return array;\n  } else {\n    return this.flipArrayEndianness(array);\n  }\n};\n\n/**\n  Converts native endianness array to desired endianness in-place.\n\n  @param {Object} array Typed array to convert.\n  @param {boolean} littleEndian True if the converted array should be\n                                little-endian. Set false for big-endian.\n  @return {Object} The converted typed array.\n */\nDataStream.nativeToEndian = function(array, littleEndian) {\n  if (this.endianness == littleEndian) {\n    return array;\n  } else {\n    return this.flipArrayEndianness(array);\n  }\n};\n\n/**\n  Flips typed array endianness in-place.\n\n  @param {Object} array Typed array to flip.\n  @return {Object} The converted typed array.\n */\nDataStream.flipArrayEndianness = function(array) {\n  var u8 = new Uint8Array(array.buffer, array.byteOffset, array.byteLength);\n  for (var i=0; i<array.byteLength; i+=array.BYTES_PER_ELEMENT) {\n    for (var j=i+array.BYTES_PER_ELEMENT-1, k=i; j>k; j--, k++) {\n      var tmp = u8[k];\n      u8[k] = u8[j];\n      u8[j] = tmp;\n    }\n  }\n  return array;\n};\n\n/**\n  Seek position where DataStream#readStruct ran into a problem.\n  Useful for debugging struct parsing.\n\n  @type {number}\n */\nDataStream.prototype.failurePosition = 0;\n\nString.fromCharCodeUint8 = function(uint8arr) {\n    var arr = [];\n    for (var i = 0; i < uint8arr.length; i++) {\n      arr[i] = uint8arr[i];\n    }\n    return String.fromCharCode.apply(null, arr);\n}\n/**\n  Read a string of desired length and encoding from the DataStream.\n\n  @param {number} length The length of the string to read in bytes.\n  @param {?string} encoding The encoding of the string data in the DataStream.\n                            Defaults to ASCII.\n  @return {string} The read string.\n */\nDataStream.prototype.readString = function(length, encoding) {\n  if (encoding == null || encoding == \"ASCII\") {\n    return String.fromCharCodeUint8.apply(null, [this.mapUint8Array(length == null ? this.byteLength-this.position : length)]);\n  } else {\n    return (new TextDecoder(encoding)).decode(this.mapUint8Array(length));\n  }\n};\n\n/**\n  Read null-terminated string of desired length from the DataStream. Truncates\n  the returned string so that the null byte is not a part of it.\n\n  @param {?number} length The length of the string to read.\n  @return {string} The read string.\n */\nDataStream.prototype.readCString = function(length) {\n  var blen = this.byteLength-this.position;\n  var u8 = new Uint8Array(this._buffer, this._byteOffset + this.position);\n  var len = blen;\n  if (length != null) {\n    len = Math.min(length, blen);\n  }\n  for (var i = 0; i < len && u8[i] !== 0; i++); // find first zero byte\n  var s = String.fromCharCodeUint8.apply(null, [this.mapUint8Array(i)]);\n  if (length != null) {\n    this.position += len-i;\n  } else if (i != blen) {\n    this.position += 1; // trailing zero if not at end of buffer\n  }\n  return s;\n};\n\n/* \n   TODO: fix endianness for 24/64-bit fields\n   TODO: check range/support for 64-bits numbers in JavaScript\n*/\nvar MAX_SIZE = Math.pow(2, 32);\n\nDataStream.prototype.readInt64 = function () {\n  return (this.readInt32()*MAX_SIZE)+this.readUint32();\n}\nDataStream.prototype.readUint64 = function () {\n\treturn (this.readUint32()*MAX_SIZE)+this.readUint32();\n}\n\nDataStream.prototype.readInt64 = function () {\n  return (this.readUint32()*MAX_SIZE)+this.readUint32();\n}\n\nDataStream.prototype.readUint24 = function () {\n\treturn (this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8();\n}\n\nif (typeof exports !== 'undefined') {\n  exports.DataStream = DataStream;  \n}\n// file:src/DataStream-write.js\n/**\n  Saves the DataStream contents to the given filename.\n  Uses Chrome's anchor download property to initiate download.\n \n  @param {string} filename Filename to save as.\n  @return {null}\n  */\nDataStream.prototype.save = function(filename) {\n  var blob = new Blob([this.buffer]);\n  if (window.URL && URL.createObjectURL) {\n      var url = window.URL.createObjectURL(blob);\n      var a = document.createElement('a');\n      // Required in Firefox:\n      document.body.appendChild(a);\n      a.setAttribute('href', url);\n      a.setAttribute('download', filename);\n      // Required in Firefox:\n      a.setAttribute('target', '_self');\n      a.click();\n      window.URL.revokeObjectURL(url);\n  } else {\n      throw(\"DataStream.save: Can't create object URL.\");\n  }\n};\n\n/**\n  Whether to extend DataStream buffer when trying to write beyond its size.\n  If set, the buffer is reallocated to twice its current size until the\n  requested write fits the buffer.\n  @type {boolean}\n  */\nDataStream.prototype._dynamicSize = true;\nObject.defineProperty(DataStream.prototype, 'dynamicSize',\n  { get: function() {\n      return this._dynamicSize;\n    },\n    set: function(v) {\n      if (!v) {\n        this._trimAlloc();\n      }\n      this._dynamicSize = v;\n    } });\n\n/**\n  Internal function to trim the DataStream buffer when required.\n  Used for stripping out the first bytes when not needed anymore.\n\n  @return {null}\n  */\nDataStream.prototype.shift = function(offset) {\n  var buf = new ArrayBuffer(this._byteLength-offset);\n  var dst = new Uint8Array(buf);\n  var src = new Uint8Array(this._buffer, offset, dst.length);\n  dst.set(src);\n  this.buffer = buf;\n  this.position -= offset;\n};\n\n/**\n  Writes an Int32Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeInt32Array = function(arr, e) {\n  this._realloc(arr.length * 4);\n  if (arr instanceof Int32Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapInt32Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeInt32(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes an Int16Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeInt16Array = function(arr, e) {\n  this._realloc(arr.length * 2);\n  if (arr instanceof Int16Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapInt16Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeInt16(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes an Int8Array to the DataStream.\n\n  @param {Object} arr The array to write.\n */\nDataStream.prototype.writeInt8Array = function(arr) {\n  this._realloc(arr.length * 1);\n  if (arr instanceof Int8Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapInt8Array(arr.length);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeInt8(arr[i]);\n    }\n  }\n};\n\n/**\n  Writes a Uint32Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeUint32Array = function(arr, e) {\n  this._realloc(arr.length * 4);\n  if (arr instanceof Uint32Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapUint32Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeUint32(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes a Uint16Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeUint16Array = function(arr, e) {\n  this._realloc(arr.length * 2);\n  if (arr instanceof Uint16Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapUint16Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeUint16(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes a Uint8Array to the DataStream.\n\n  @param {Object} arr The array to write.\n */\nDataStream.prototype.writeUint8Array = function(arr) {\n  this._realloc(arr.length * 1);\n  if (arr instanceof Uint8Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapUint8Array(arr.length);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeUint8(arr[i]);\n    }\n  }\n};\n\n/**\n  Writes a Float64Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeFloat64Array = function(arr, e) {\n  this._realloc(arr.length * 8);\n  if (arr instanceof Float64Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapFloat64Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeFloat64(arr[i], e);\n    }\n  }\n};\n\n/**\n  Writes a Float32Array of specified endianness to the DataStream.\n\n  @param {Object} arr The array to write.\n  @param {?boolean} e Endianness of the data to write.\n */\nDataStream.prototype.writeFloat32Array = function(arr, e) {\n  this._realloc(arr.length * 4);\n  if (arr instanceof Float32Array &&\n      this.byteOffset+this.position % arr.BYTES_PER_ELEMENT === 0) {\n    DataStream.memcpy(this._buffer, this.byteOffset+this.position,\n                      arr.buffer, 0,\n                      arr.byteLength);\n    this.mapFloat32Array(arr.length, e);\n  } else {\n    for (var i=0; i<arr.length; i++) {\n      this.writeFloat32(arr[i], e);\n    }\n  }\n};\n\n\n/**\n  Writes a 32-bit int to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeInt32 = function(v, e) {\n  this._realloc(4);\n  this._dataView.setInt32(this.position, v, e == null ? this.endianness : e);\n  this.position += 4;\n};\n\n/**\n  Writes a 16-bit int to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeInt16 = function(v, e) {\n  this._realloc(2);\n  this._dataView.setInt16(this.position, v, e == null ? this.endianness : e);\n  this.position += 2;\n};\n\n/**\n  Writes an 8-bit int to the DataStream.\n\n  @param {number} v Number to write.\n */\nDataStream.prototype.writeInt8 = function(v) {\n  this._realloc(1);\n  this._dataView.setInt8(this.position, v);\n  this.position += 1;\n};\n\n/**\n  Writes a 32-bit unsigned int to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeUint32 = function(v, e) {\n  this._realloc(4);\n  this._dataView.setUint32(this.position, v, e == null ? this.endianness : e);\n  this.position += 4;\n};\n\n/**\n  Writes a 16-bit unsigned int to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeUint16 = function(v, e) {\n  this._realloc(2);\n  this._dataView.setUint16(this.position, v, e == null ? this.endianness : e);\n  this.position += 2;\n};\n\n/**\n  Writes an 8-bit unsigned  int to the DataStream.\n\n  @param {number} v Number to write.\n */\nDataStream.prototype.writeUint8 = function(v) {\n  this._realloc(1);\n  this._dataView.setUint8(this.position, v);\n  this.position += 1;\n};\n\n/**\n  Writes a 32-bit float to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeFloat32 = function(v, e) {\n  this._realloc(4);\n  this._dataView.setFloat32(this.position, v, e == null ? this.endianness : e);\n  this.position += 4;\n};\n\n/**\n  Writes a 64-bit float to the DataStream with the desired endianness.\n\n  @param {number} v Number to write.\n  @param {?boolean} e Endianness of the number.\n */\nDataStream.prototype.writeFloat64 = function(v, e) {\n  this._realloc(8);\n  this._dataView.setFloat64(this.position, v, e == null ? this.endianness : e);\n  this.position += 8;\n};\n\n/**\n  Write a UCS-2 string of desired endianness to the DataStream. The\n  lengthOverride argument lets you define the number of characters to write.\n  If the string is shorter than lengthOverride, the extra space is padded with\n  zeroes.\n\n  @param {string} str The string to write.\n  @param {?boolean} endianness The endianness to use for the written string data.\n  @param {?number} lengthOverride The number of characters to write.\n */\nDataStream.prototype.writeUCS2String = function(str, endianness, lengthOverride) {\n  if (lengthOverride == null) {\n    lengthOverride = str.length;\n  }\n  for (var i = 0; i < str.length && i < lengthOverride; i++) {\n    this.writeUint16(str.charCodeAt(i), endianness);\n  }\n  for (; i<lengthOverride; i++) {\n    this.writeUint16(0);\n  }\n};\n\n/**\n  Writes a string of desired length and encoding to the DataStream.\n\n  @param {string} s The string to write.\n  @param {?string} encoding The encoding for the written string data.\n                            Defaults to ASCII.\n  @param {?number} length The number of characters to write.\n */\nDataStream.prototype.writeString = function(s, encoding, length) {\n  var i = 0;\n  if (encoding == null || encoding == \"ASCII\") {\n    if (length != null) {\n      var len = Math.min(s.length, length);\n      for (i=0; i<len; i++) {\n        this.writeUint8(s.charCodeAt(i));\n      }\n      for (; i<length; i++) {\n        this.writeUint8(0);\n      }\n    } else {\n      for (i=0; i<s.length; i++) {\n        this.writeUint8(s.charCodeAt(i));\n      }\n    }\n  } else {\n    this.writeUint8Array((new TextEncoder(encoding)).encode(s.substring(0, length)));\n  }\n};\n\n/**\n  Writes a null-terminated string to DataStream and zero-pads it to length\n  bytes. If length is not given, writes the string followed by a zero.\n  If string is longer than length, the written part of the string does not have\n  a trailing zero.\n\n  @param {string} s The string to write.\n  @param {?number} length The number of characters to write.\n */\nDataStream.prototype.writeCString = function(s, length) {\n  var i = 0;\n  if (length != null) {\n    var len = Math.min(s.length, length);\n    for (i=0; i<len; i++) {\n      this.writeUint8(s.charCodeAt(i));\n    }\n    for (; i<length; i++) {\n      this.writeUint8(0);\n    }\n  } else {\n    for (i=0; i<s.length; i++) {\n      this.writeUint8(s.charCodeAt(i));\n    }\n    this.writeUint8(0);\n  }\n};\n\n/**\n  Writes a struct to the DataStream. Takes a structDefinition that gives the\n  types and a struct object that gives the values. Refer to readStruct for the\n  structure of structDefinition.\n\n  @param {Object} structDefinition Type definition of the struct.\n  @param {Object} struct The struct data object.\n  */\nDataStream.prototype.writeStruct = function(structDefinition, struct) {\n  for (var i = 0; i < structDefinition.length; i+=2) {\n    var t = structDefinition[i+1];\n    this.writeType(t, struct[structDefinition[i]], struct);\n  }\n};\n\n/**\n  Writes object v of type t to the DataStream.\n\n  @param {Object} t Type of data to write.\n  @param {Object} v Value of data to write.\n  @param {Object} struct Struct to pass to write callback functions.\n  */\nDataStream.prototype.writeType = function(t, v, struct) {\n  var tp;\n  if (typeof t == \"function\") {\n    return t(this, v);\n  } else if (typeof t == \"object\" && !(t instanceof Array)) {\n    return t.set(this, v, struct);\n  }\n  var lengthOverride = null;\n  var charset = \"ASCII\";\n  var pos = this.position;\n  if (typeof(t) == 'string' && /:/.test(t)) {\n    tp = t.split(\":\");\n    t = tp[0];\n    lengthOverride = parseInt(tp[1]);\n  }\n  if (typeof t == 'string' && /,/.test(t)) {\n    tp = t.split(\",\");\n    t = tp[0];\n    charset = parseInt(tp[1]);\n  }\n\n  switch(t) {\n    case 'uint8':\n      this.writeUint8(v);\n      break;\n    case 'int8':\n      this.writeInt8(v);\n      break;\n\n    case 'uint16':\n      this.writeUint16(v, this.endianness);\n      break;\n    case 'int16':\n      this.writeInt16(v, this.endianness);\n      break;\n    case 'uint32':\n      this.writeUint32(v, this.endianness);\n      break;\n    case 'int32':\n      this.writeInt32(v, this.endianness);\n      break;\n    case 'float32':\n      this.writeFloat32(v, this.endianness);\n      break;\n    case 'float64':\n      this.writeFloat64(v, this.endianness);\n      break;\n\n    case 'uint16be':\n      this.writeUint16(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'int16be':\n      this.writeInt16(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'uint32be':\n      this.writeUint32(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'int32be':\n      this.writeInt32(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'float32be':\n      this.writeFloat32(v, DataStream.BIG_ENDIAN);\n      break;\n    case 'float64be':\n      this.writeFloat64(v, DataStream.BIG_ENDIAN);\n      break;\n\n    case 'uint16le':\n      this.writeUint16(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'int16le':\n      this.writeInt16(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'uint32le':\n      this.writeUint32(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'int32le':\n      this.writeInt32(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'float32le':\n      this.writeFloat32(v, DataStream.LITTLE_ENDIAN);\n      break;\n    case 'float64le':\n      this.writeFloat64(v, DataStream.LITTLE_ENDIAN);\n      break;\n\n    case 'cstring':\n      this.writeCString(v, lengthOverride);\n      break;\n\n    case 'string':\n      this.writeString(v, charset, lengthOverride);\n      break;\n\n    case 'u16string':\n      this.writeUCS2String(v, this.endianness, lengthOverride);\n      break;\n\n    case 'u16stringle':\n      this.writeUCS2String(v, DataStream.LITTLE_ENDIAN, lengthOverride);\n      break;\n\n    case 'u16stringbe':\n      this.writeUCS2String(v, DataStream.BIG_ENDIAN, lengthOverride);\n      break;\n\n    default:\n      if (t.length == 3) {\n        var ta = t[1];\n        for (var i=0; i<v.length; i++) {\n          this.writeType(ta, v[i]);\n        }\n        break;\n      } else {\n        this.writeStruct(t, v);\n        break;\n      }\n  }\n  if (lengthOverride != null) {\n    this.position = pos;\n    this._realloc(lengthOverride);\n    this.position = pos + lengthOverride;\n  }\n};\n\n\nDataStream.prototype.writeUint64 = function (v) {\n\tvar h = Math.floor(v / MAX_SIZE);\n\tthis.writeUint32(h);\n\tthis.writeUint32(v & 0xFFFFFFFF);\n}\n\nDataStream.prototype.writeUint24 = function (v) {\n\tthis.writeUint8((v & 0x00FF0000)>>16);\n\tthis.writeUint8((v & 0x0000FF00)>>8);\n\tthis.writeUint8((v & 0x000000FF));\n}\n\nDataStream.prototype.adjustUint32 = function(position, value) {\n\tvar pos = this.position;\n\tthis.seek(position);\n\tthis.writeUint32(value);\n\tthis.seek(pos);\n}\n// file:src/DataStream-map.js\n/**\n  Maps an Int32Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Int32Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapInt32Array = function(length, e) {\n  this._realloc(length * 4);\n  var arr = new Int32Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 4;\n  return arr;\n};\n\n/**\n  Maps an Int16Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Int16Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapInt16Array = function(length, e) {\n  this._realloc(length * 2);\n  var arr = new Int16Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 2;\n  return arr;\n};\n\n/**\n  Maps an Int8Array into the DataStream buffer.\n\n  Nice for quickly reading in data.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Int8Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapInt8Array = function(length) {\n  this._realloc(length * 1);\n  var arr = new Int8Array(this._buffer, this.byteOffset+this.position, length);\n  this.position += length * 1;\n  return arr;\n};\n\n/**\n  Maps a Uint32Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Uint32Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapUint32Array = function(length, e) {\n  this._realloc(length * 4);\n  var arr = new Uint32Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 4;\n  return arr;\n};\n\n/**\n  Maps a Uint16Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Uint16Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapUint16Array = function(length, e) {\n  this._realloc(length * 2);\n  var arr = new Uint16Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 2;\n  return arr;\n};\n\n/**\n  Maps a Float64Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Float64Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapFloat64Array = function(length, e) {\n  this._realloc(length * 8);\n  var arr = new Float64Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 8;\n  return arr;\n};\n\n/**\n  Maps a Float32Array into the DataStream buffer, swizzling it to native\n  endianness in-place. The current offset from the start of the buffer needs to\n  be a multiple of element size, just like with typed array views.\n\n  Nice for quickly reading in data. Warning: potentially modifies the buffer\n  contents.\n\n  @param {number} length Number of elements to map.\n  @param {?boolean} e Endianness of the data to read.\n  @return {Object} Float32Array to the DataStream backing buffer.\n  */\nDataStream.prototype.mapFloat32Array = function(length, e) {\n  this._realloc(length * 4);\n  var arr = new Float32Array(this._buffer, this.byteOffset+this.position, length);\n  DataStream.arrayToNative(arr, e == null ? this.endianness : e);\n  this.position += length * 4;\n  return arr;\n};\n// file:src/buffer.js\n/**\n * MultiBufferStream is a class that acts as a SimpleStream for parsing \n * It holds several, possibly non-contiguous ArrayBuffer objects, each with a fileStart property \n * containing the offset for the buffer data in an original/virtual file \n *\n * It inherits also from DataStream for all read/write/alloc operations\n */\n\n/**\n * Constructor\n */\nvar MultiBufferStream = function(buffer) {\n\t/* List of ArrayBuffers, with a fileStart property, sorted in fileStart order and non overlapping */\n\tthis.buffers = [];\t\n\tthis.bufferIndex = -1;\n\tif (buffer) {\n\t\tthis.insertBuffer(buffer);\n\t\tthis.bufferIndex = 0;\n\t}\n}\nMultiBufferStream.prototype = new DataStream(new ArrayBuffer(), 0, DataStream.BIG_ENDIAN);\n\n/************************************************************************************\n  Methods for the managnement of the buffers (insertion, removal, concatenation, ...)\n ***********************************************************************************/\n\nMultiBufferStream.prototype.initialized = function() {\n\tvar firstBuffer;\n\tif (this.bufferIndex > -1) {\n\t\treturn true;\n\t} else if (this.buffers.length > 0) {\n\t\tfirstBuffer = this.buffers[0];\n\t\tif (firstBuffer.fileStart === 0) {\n\t\t\tthis.buffer = firstBuffer;\n\t\t\tthis.bufferIndex = 0;\n\t\t\tLog.debug(\"MultiBufferStream\", \"Stream ready for parsing\");\n\t\t\treturn true;\n\t\t} else {\n\t\t\tLog.warn(\"MultiBufferStream\", \"The first buffer should have a fileStart of 0\");\n\t\t\tthis.logBufferLevel();\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\tLog.warn(\"MultiBufferStream\", \"No buffer to start parsing from\");\n\t\tthis.logBufferLevel();\n\t\treturn false;\n\t}\t\t\t\n}\n\n/**\n * helper functions to concatenate two ArrayBuffer objects\n * @param  {ArrayBuffer} buffer1 \n * @param  {ArrayBuffer} buffer2 \n * @return {ArrayBuffer} the concatenation of buffer1 and buffer2 in that order\n */\nArrayBuffer.concat = function(buffer1, buffer2) {\n  Log.debug(\"ArrayBuffer\", \"Trying to create a new buffer of size: \"+(buffer1.byteLength + buffer2.byteLength));\n  var tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\n  tmp.set(new Uint8Array(buffer1), 0);\n  tmp.set(new Uint8Array(buffer2), buffer1.byteLength);\n  return tmp.buffer;\n};\n\n/**\n * Reduces the size of a given buffer, but taking the part between offset and offset+newlength\n * @param  {ArrayBuffer} buffer    \n * @param  {Number}      offset    the start of new buffer\n * @param  {Number}      newLength the length of the new buffer\n * @return {ArrayBuffer}           the new buffer\n */\nMultiBufferStream.prototype.reduceBuffer = function(buffer, offset, newLength) {\n\tvar smallB;\n\tsmallB = new Uint8Array(newLength);\n\tsmallB.set(new Uint8Array(buffer, offset, newLength));\n\tsmallB.buffer.fileStart = buffer.fileStart+offset;\n\tsmallB.buffer.usedBytes = 0;\n\treturn smallB.buffer;\t\n}\n\n/**\n * Inserts the new buffer in the sorted list of buffers,\n *  making sure, it is not overlapping with existing ones (possibly reducing its size).\n *  if the new buffer overrides/replaces the 0-th buffer (for instance because it is bigger), \n *  updates the DataStream buffer for parsing \n*/\nMultiBufferStream.prototype.insertBuffer = function(ab) {\t\n\tvar to_add = true;\n\t/* TODO: improve insertion if many buffers */\n\tfor (var i = 0; i < this.buffers.length; i++) {\n\t\tvar b = this.buffers[i];\n\t\tif (ab.fileStart <= b.fileStart) {\n\t\t\t/* the insertion position is found */\n\t\t\tif (ab.fileStart === b.fileStart) {\n\t\t\t\t/* The new buffer overlaps with an existing buffer */\n\t\t\t\tif (ab.byteLength >  b.byteLength) {\n\t\t\t\t\t/* the new buffer is bigger than the existing one\n\t\t\t\t\t   remove the existing buffer and try again to insert \n\t\t\t\t\t   the new buffer to check overlap with the next ones */\n\t\t\t\t\tthis.buffers.splice(i, 1);\n\t\t\t\t\ti--; \n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\t/* the new buffer is smaller than the existing one, just drop it */\n\t\t\t\t\tLog.warn(\"MultiBufferStream\", \"Buffer (fileStart: \"+ab.fileStart+\" - Length: \"+ab.byteLength+\") already appended, ignoring\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t/* The beginning of the new buffer is not overlapping with an existing buffer\n\t\t\t\t   let's check the end of it */\n\t\t\t\tif (ab.fileStart + ab.byteLength <= b.fileStart) {\n\t\t\t\t\t/* no overlap, we can add it as is */\n\t\t\t\t} else {\n\t\t\t\t\t/* There is some overlap, cut the new buffer short, and add it*/\n\t\t\t\t\tab = this.reduceBuffer(ab, 0, b.fileStart - ab.fileStart);\n\t\t\t\t}\n\t\t\t\tLog.debug(\"MultiBufferStream\", \"Appending new buffer (fileStart: \"+ab.fileStart+\" - Length: \"+ab.byteLength+\")\");\n\t\t\t\tthis.buffers.splice(i, 0, ab);\n\t\t\t\t/* if this new buffer is inserted in the first place in the list of the buffer, \n\t\t\t\t   and the DataStream is initialized, make it the buffer used for parsing */\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tthis.buffer = ab;\n\t\t\t\t}\n\t\t\t}\n\t\t\tto_add = false;\n\t\t\tbreak;\n\t\t} else if (ab.fileStart < b.fileStart + b.byteLength) {\n\t\t\t/* the new buffer overlaps its beginning with the end of the current buffer */\n\t\t\tvar offset = b.fileStart + b.byteLength - ab.fileStart;\n\t\t\tvar newLength = ab.byteLength - offset;\n\t\t\tif (newLength > 0) {\n\t\t\t\t/* the new buffer is bigger than the current overlap, drop the overlapping part and try again inserting the remaining buffer */\n\t\t\t\tab = this.reduceBuffer(ab, offset, newLength);\n\t\t\t} else {\n\t\t\t\t/* the content of the new buffer is entirely contained in the existing buffer, drop it entirely */\n\t\t\t\tto_add = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t/* if the buffer has not been added, we can add it at the end */\n\tif (to_add) {\n\t\tLog.debug(\"MultiBufferStream\", \"Appending new buffer (fileStart: \"+ab.fileStart+\" - Length: \"+ab.byteLength+\")\");\n\t\tthis.buffers.push(ab);\n\t\t/* if this new buffer is inserted in the first place in the list of the buffer, \n\t\t   and the DataStream is initialized, make it the buffer used for parsing */\n\t\tif (i === 0) {\n\t\t\tthis.buffer = ab;\n\t\t}\n\t}\n}\n\n/**\n * Displays the status of the buffers (number and used bytes)\n * @param  {Object} info callback method for display\n */\nMultiBufferStream.prototype.logBufferLevel = function(info) {\n\tvar i;\n\tvar buffer;\n\tvar used, total;\n\tvar ranges = [];\n\tvar range;\n\tvar bufferedString = \"\";\n\tused = 0;\n\ttotal = 0;\n\tfor (i = 0; i < this.buffers.length; i++) {\n\t\tbuffer = this.buffers[i];\n\t\tif (i === 0) {\n\t\t\trange = {};\n\t\t\tranges.push(range);\n\t\t\trange.start = buffer.fileStart;\n\t\t\trange.end = buffer.fileStart+buffer.byteLength;\n\t\t\tbufferedString += \"[\"+range.start+\"-\";\n\t\t} else if (range.end === buffer.fileStart) {\n\t\t\trange.end = buffer.fileStart+buffer.byteLength;\n\t\t} else {\n\t\t\trange = {};\n\t\t\trange.start = buffer.fileStart;\n\t\t\tbufferedString += (ranges[ranges.length-1].end-1)+\"], [\"+range.start+\"-\";\n\t\t\trange.end = buffer.fileStart+buffer.byteLength;\n\t\t\tranges.push(range);\n\t\t}\n\t\tused += buffer.usedBytes;\n\t\ttotal += buffer.byteLength;\n\t}\n\tif (ranges.length > 0) {\n\t\tbufferedString += (range.end-1)+\"]\";\n\t}\n\tvar log = (info ? Log.info : Log.debug)\n\tif (this.buffers.length === 0) {\n\t\tlog(\"MultiBufferStream\", \"No more buffer in memory\");\n\t} else {\n\t\tlog(\"MultiBufferStream\", \"\"+this.buffers.length+\" stored buffer(s) (\"+used+\"/\"+total+\" bytes), continuous ranges: \"+bufferedString);\n\t}\n}\n\nMultiBufferStream.prototype.cleanBuffers = function () {\n\tvar i;\n\tvar buffer;\n\tfor (i = 0; i < this.buffers.length; i++) {\n\t\tbuffer = this.buffers[i];\n\t\tif (buffer.usedBytes === buffer.byteLength) {\n\t\t\tLog.debug(\"MultiBufferStream\", \"Removing buffer #\"+i);\n\t\t\tthis.buffers.splice(i, 1);\n\t\t\ti--;\n\t\t}\n\t}\n}\n\nMultiBufferStream.prototype.mergeNextBuffer = function() {\n\tvar next_buffer;\n\tif (this.bufferIndex+1 < this.buffers.length) {\n\t\tnext_buffer = this.buffers[this.bufferIndex+1];\n\t\tif (next_buffer.fileStart === this.buffer.fileStart + this.buffer.byteLength) {\n\t\t\tvar oldLength = this.buffer.byteLength;\n\t\t\tvar oldUsedBytes = this.buffer.usedBytes;\n\t\t\tvar oldFileStart = this.buffer.fileStart;\n\t\t\tthis.buffers[this.bufferIndex] = ArrayBuffer.concat(this.buffer, next_buffer);\n\t\t\tthis.buffer = this.buffers[this.bufferIndex];\n\t\t\tthis.buffers.splice(this.bufferIndex+1, 1);\n\t\t\tthis.buffer.usedBytes = oldUsedBytes; /* TODO: should it be += ? */\n\t\t\tthis.buffer.fileStart = oldFileStart;\n\t\t\tLog.debug(\"ISOFile\", \"Concatenating buffer for box parsing (length: \"+oldLength+\"->\"+this.buffer.byteLength+\")\");\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\treturn false;\n\t}\n}\n\n\n/*************************************************************************\n  Seek-related functions\n *************************************************************************/\n\n/**\n * Finds the buffer that holds the given file position\n * @param  {Boolean} fromStart    indicates if the search should start from the current buffer (false) \n *                                or from the first buffer (true)\n * @param  {Number}  filePosition position in the file to seek to\n * @param  {Boolean} markAsUsed   indicates if the bytes in between the current position and the seek position \n *                                should be marked as used for garbage collection\n * @return {Number}               the index of the buffer holding the seeked file position, -1 if not found.\n */\nMultiBufferStream.prototype.findPosition = function(fromStart, filePosition, markAsUsed) {\n\tvar i;\n\tvar abuffer = null;\n\tvar index = -1;\n\n\t/* find the buffer with the largest position smaller than the given position */\n\tif (fromStart === true) {\n\t   /* the reposition can be in the past, we need to check from the beginning of the list of buffers */\n\t\ti = 0;\n\t} else {\n\t\ti = this.bufferIndex;\n\t}\n\n\twhile (i < this.buffers.length) {\n\t\tabuffer = this.buffers[i];\n\t\tif (abuffer.fileStart <= filePosition) {\n\t\t\tindex = i;\n\t\t\tif (markAsUsed) {\n\t\t\t\tif (abuffer.fileStart + abuffer.byteLength <= filePosition) {\n\t\t\t\t\tabuffer.usedBytes = abuffer.byteLength;\t\n\t\t\t\t} else {\n\t\t\t\t\tabuffer.usedBytes = filePosition - abuffer.fileStart;\n\t\t\t\t}\t\t\n\t\t\t\tthis.logBufferLevel();\t\n\t\t\t}\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t\ti++;\n\t}\n\n\tif (index !== -1) {\n\t\tabuffer = this.buffers[index];\n\t\tif (abuffer.fileStart + abuffer.byteLength >= filePosition) {\t\t\t\n\t\t\tLog.debug(\"MultiBufferStream\", \"Found position in existing buffer #\"+index);\n\t\t\treturn index;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t} else {\n\t\treturn -1;\n\t}\n}\n\n/**\n * Finds the largest file position contained in a buffer or in the next buffers if they are contiguous (no gap)\n * starting from the given buffer index or from the current buffer if the index is not given\n *\n * @param  {Number} inputindex Index of the buffer to start from\n * @return {Number}            The largest file position found in the buffers\n */\nMultiBufferStream.prototype.findEndContiguousBuf = function(inputindex) {\n\tvar i;\n\tvar currentBuf;\n\tvar nextBuf;\n\tvar index = (inputindex !== undefined ? inputindex : this.bufferIndex);\n\tcurrentBuf = this.buffers[index];\n\t/* find the end of the contiguous range of data */\n\tif (this.buffers.length > index+1) {\n\t\tfor (i = index+1; i < this.buffers.length; i++) {\n\t\t\tnextBuf = this.buffers[i];\n\t\t\tif (nextBuf.fileStart === currentBuf.fileStart + currentBuf.byteLength) {\n\t\t\t\tcurrentBuf = nextBuf;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t/* return the position of last byte in the file that we have */\n\treturn currentBuf.fileStart + currentBuf.byteLength;\n}\n\n/**\n * Returns the largest file position contained in the buffers, larger than the given position\n * @param  {Number} pos the file position to start from\n * @return {Number}     the largest position in the current buffer or in the buffer and the next contiguous \n *                      buffer that holds the given position\n */\nMultiBufferStream.prototype.getEndFilePositionAfter = function(pos) {\n\tvar index = this.findPosition(true, pos, false);\n\tif (index !== -1) {\n\t\treturn this.findEndContiguousBuf(index);\n\t} else {\n\t\treturn pos;\n\t}\n}\n\n/*************************************************************************\n  Garbage collection related functions\n *************************************************************************/\n\n/**\n * Marks a given number of bytes as used in the current buffer for garbage collection\n * @param {Number} nbBytes \n */\nMultiBufferStream.prototype.addUsedBytes = function(nbBytes) {\n\tthis.buffer.usedBytes += nbBytes;\n\tthis.logBufferLevel();\n}\n\n/**\n * Marks the entire current buffer as used, ready for garbage collection\n */\nMultiBufferStream.prototype.setAllUsedBytes = function() {\n\tthis.buffer.usedBytes = this.buffer.byteLength;\n\tthis.logBufferLevel();\n}\n\n/*************************************************************************\n  Common API between MultiBufferStream and SimpleStream\n *************************************************************************/\n\n/**\n * Tries to seek to a given file position\n * if possible, repositions the parsing from there and returns true \n * if not possible, does not change anything and returns false \n * @param  {Number}  filePosition position in the file to seek to\n * @param  {Boolean} fromStart    indicates if the search should start from the current buffer (false) \n *                                or from the first buffer (true)\n * @param  {Boolean} markAsUsed   indicates if the bytes in between the current position and the seek position \n *                                should be marked as used for garbage collection\n * @return {Boolean}              true if the seek succeeded, false otherwise\n */\nMultiBufferStream.prototype.seek = function(filePosition, fromStart, markAsUsed) {\n\tvar index;\n\tindex = this.findPosition(fromStart, filePosition, markAsUsed);\n\tif (index !== -1) {\n\t\tthis.buffer = this.buffers[index];\n\t\tthis.bufferIndex = index;\n\t\tthis.position = filePosition - this.buffer.fileStart;\n\t\tLog.debug(\"MultiBufferStream\", \"Repositioning parser at buffer position: \"+this.position);\n\t\treturn true;\n\t} else {\n\t\tLog.debug(\"MultiBufferStream\", \"Position \"+filePosition+\" not found in buffered data\");\n\t\treturn false;\n\t}\n}\n\n/**\n * Returns the current position in the file\n * @return {Number} the position in the file\n */\nMultiBufferStream.prototype.getPosition = function() {\n\tif (this.bufferIndex === -1 || this.buffers[this.bufferIndex] === null) {\n\t\tthrow \"Error accessing position in the MultiBufferStream\";\n\t}\n\treturn this.buffers[this.bufferIndex].fileStart+this.position;\n}\n\n/**\n * Returns the length of the current buffer\n * @return {Number} the length of the current buffer\n */\nMultiBufferStream.prototype.getLength = function() {\n\treturn this.byteLength;\n}\n\nMultiBufferStream.prototype.getEndPosition = function() {\n\tif (this.bufferIndex === -1 || this.buffers[this.bufferIndex] === null) {\n\t\tthrow \"Error accessing position in the MultiBufferStream\";\n\t}\n\treturn this.buffers[this.bufferIndex].fileStart+this.byteLength;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.MultiBufferStream = MultiBufferStream;\n}// file:src/descriptor.js\n/*\n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar MPEG4DescriptorParser = function () {\n\tvar ES_DescrTag \t\t\t= 0x03;\n\tvar DecoderConfigDescrTag \t= 0x04;\n\tvar DecSpecificInfoTag \t\t= 0x05;\n\tvar SLConfigDescrTag \t\t= 0x06;\n\n\tvar descTagToName = [];\n\tdescTagToName[ES_DescrTag] \t\t\t\t= \"ES_Descriptor\";\n\tdescTagToName[DecoderConfigDescrTag] \t= \"DecoderConfigDescriptor\";\n\tdescTagToName[DecSpecificInfoTag] \t\t= \"DecoderSpecificInfo\";\n\tdescTagToName[SLConfigDescrTag] \t\t= \"SLConfigDescriptor\";\n\n\tthis.getDescriptorName = function(tag) {\n\t\treturn descTagToName[tag];\n\t}\n\n\tvar that = this;\n\tvar classes = {};\n\n\tthis.parseOneDescriptor = function (stream) {\n\t\tvar hdrSize = 0;\n\t\tvar size = 0;\n\t\tvar tag;\n\t\tvar desc;\n\t\tvar byteRead;\n\t\ttag = stream.readUint8();\n\t\thdrSize++;\n\t\tbyteRead = stream.readUint8();\n\t\thdrSize++;\n\t\twhile (byteRead & 0x80) {\n\t\t\tsize = (size << 7) + (byteRead & 0x7F);\n\t\t\tbyteRead = stream.readUint8();\n\t\t\thdrSize++;\n\t\t}\n\t\tsize = (size << 7) + (byteRead & 0x7F);\n\t\tLog.debug(\"MPEG4DescriptorParser\", \"Found \"+(descTagToName[tag] || \"Descriptor \"+tag)+\", size \"+size+\" at position \"+stream.getPosition());\n\t\tif (descTagToName[tag]) {\n\t\t\tdesc = new classes[descTagToName[tag]](size);\n\t\t} else {\n\t\t\tdesc = new classes.Descriptor(size);\n\t\t}\n\t\tdesc.parse(stream);\n\t\treturn desc;\n\t}\n\n\tclasses.Descriptor = function(_tag, _size) {\n\t\tthis.tag = _tag;\n\t\tthis.size = _size;\n\t\tthis.descs = [];\n\t}\n\n\tclasses.Descriptor.prototype.parse = function (stream) {\n\t\tthis.data = stream.readUint8Array(this.size);\n\t}\n\n\tclasses.Descriptor.prototype.findDescriptor = function (tag) {\n\t\tfor (var i = 0; i < this.descs.length; i++) {\n\t\t\tif (this.descs[i].tag == tag) {\n\t\t\t\treturn this.descs[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tclasses.Descriptor.prototype.parseRemainingDescriptors = function (stream) {\n\t\tvar start = stream.position;\n\t\twhile (stream.position < start+this.size) {\n\t\t\tvar desc = that.parseOneDescriptor(stream);\n\t\t\tthis.descs.push(desc);\n\t\t}\n\t}\n\n\tclasses.ES_Descriptor = function (size) {\n\t\tclasses.Descriptor.call(this, ES_DescrTag, size);\n\t}\n\n\tclasses.ES_Descriptor.prototype = new classes.Descriptor();\n\n\tclasses.ES_Descriptor.prototype.parse = function(stream) {\n\t\tthis.ES_ID = stream.readUint16();\n\t\tthis.flags = stream.readUint8();\n\t\tthis.size -= 3;\n\t\tif (this.flags & 0x80) {\n\t\t\tthis.dependsOn_ES_ID = stream.readUint16();\n\t\t\tthis.size -= 2;\n\t\t} else {\n\t\t\tthis.dependsOn_ES_ID = 0;\n\t\t}\n\t\tif (this.flags & 0x40) {\n\t\t\tvar l = stream.readUint8();\n\t\t\tthis.URL = stream.readString(l);\n\t\t\tthis.size -= l+1;\n\t\t} else {\n\t\t\tthis.URL = \"\";\n\t\t}\n\t\tif (this.flags & 0x20) {\n\t\t\tthis.OCR_ES_ID = stream.readUint16();\n\t\t\tthis.size -= 2;\n\t\t} else {\n\t\t\tthis.OCR_ES_ID = 0;\n\t\t}\n\t\tthis.parseRemainingDescriptors(stream);\n\t}\n\n\tclasses.ES_Descriptor.prototype.getOTI = function(stream) {\n\t\tvar dcd = this.findDescriptor(DecoderConfigDescrTag);\n\t\tif (dcd) {\n\t\t\treturn dcd.oti;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tclasses.ES_Descriptor.prototype.getAudioConfig = function(stream) {\n\t\tvar dcd = this.findDescriptor(DecoderConfigDescrTag);\n\t\tif (!dcd) return null;\n\t\tvar dsi = dcd.findDescriptor(DecSpecificInfoTag);\n\t\tif (dsi && dsi.data) {\n\t\t\tvar audioObjectType = (dsi.data[0]& 0xF8) >> 3;\n\t\t\tif (audioObjectType === 31 && dsi.data.length >= 2) {\n\t\t\t\taudioObjectType = 32 + ((dsi.data[0] & 0x7) << 3) + ((dsi.data[1] & 0xE0) >> 5);\n\t\t\t}\n\t\t\treturn audioObjectType;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tclasses.DecoderConfigDescriptor = function (size) {\n\t\tclasses.Descriptor.call(this, DecoderConfigDescrTag, size);\n\t}\n\tclasses.DecoderConfigDescriptor.prototype = new classes.Descriptor();\n\n\tclasses.DecoderConfigDescriptor.prototype.parse = function(stream) {\n\t\tthis.oti = stream.readUint8();\n\t\tthis.streamType = stream.readUint8();\n\t\tthis.upStream = ((this.streamType >> 1) & 1) !== 0;\n\t\tthis.streamType = this.streamType >>> 2;\n\t\tthis.bufferSize = stream.readUint24();\n\t\tthis.maxBitrate = stream.readUint32();\n\t\tthis.avgBitrate = stream.readUint32();\n\t\tthis.size -= 13;\n\t\tthis.parseRemainingDescriptors(stream);\n\t}\n\n\tclasses.DecoderSpecificInfo = function (size) {\n\t\tclasses.Descriptor.call(this, DecSpecificInfoTag, size);\n\t}\n\tclasses.DecoderSpecificInfo.prototype = new classes.Descriptor();\n\n\tclasses.SLConfigDescriptor = function (size) {\n\t\tclasses.Descriptor.call(this, SLConfigDescrTag, size);\n\t}\n\tclasses.SLConfigDescriptor.prototype = new classes.Descriptor();\n\n\treturn this;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.MPEG4DescriptorParser = MPEG4DescriptorParser;\n}\n// file:src/box.js\n/*\n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar BoxParser = {\n\tERR_INVALID_DATA : -1,\n\tERR_NOT_ENOUGH_DATA : 0,\n\tOK : 1,\n\n\t// Boxes to be created with default parsing\n\tBASIC_BOXES: [\n\t\t{type: \"mdat\", name: \"MediaDataBox\"},\n\t\t{type: \"idat\", name: \"ItemDataBox\"},\n\t\t{type: \"free\", name: \"FreeSpaceBox\"},\n\t\t{type: \"skip\", name: \"FreeSpaceBox\"},\n\t\t{type: \"meco\", name: \"AdditionalMetadataContainerBox\"},\n\t\t{type: \"strk\", name: \"SubTrackBox\"}\n\t],\n\tFULL_BOXES: [\n\t\t{type: \"hmhd\", name: \"HintMediaHeaderBox\"},\n\t\t{type: \"nmhd\", name: \"NullMediaHeaderBox\"},\n\t\t{type: \"iods\", name: \"ObjectDescriptorBox\"},\n\t\t{type: \"xml \", name: \"XMLBox\"},\n\t\t{type: \"bxml\", name: \"BinaryXMLBox\"},\n\t\t{type: \"ipro\", name: \"ItemProtectionBox\"},\n\t\t{type: \"mere\", name: \"MetaboxRelationBox\"}\n\t],\n\tCONTAINER_BOXES: [\n\t\t[{type: \"moov\", name: \"CompressedMovieBox\"}, [\"trak\", \"pssh\"]],\n\t\t[{type: \"trak\", name: \"TrackBox\"}],\n\t\t[{type: \"edts\", name: \"EditBox\"}],\n\t\t[{type: \"mdia\", name: \"MediaBox\"}],\n\t\t[{type: \"minf\", name: \"MediaInformationBox\"}],\n\t\t[{type: \"dinf\", name: \"DataInformationBox\"}],\n\t\t[{type: \"stbl\", name: \"SampleTableBox\"}, [\"sgpd\", \"sbgp\"]],\n\t\t[{type: \"mvex\", name: \"MovieExtendsBox\"}, [\"trex\"]],\n\t\t[{type: \"moof\", name: \"CompressedMovieFragmentBox\"}, [\"traf\"]],\n\t\t[{type: \"traf\", name: \"TrackFragmentBox\"}, [\"trun\", \"sgpd\", \"sbgp\"]],\n\t\t[{type: \"vttc\", name: \"VTTCueBox\"}],\n\t\t[{type: \"tref\", name: \"TrackReferenceBox\"}],\n\t\t[{type: \"iref\", name: \"ItemReferenceBox\"}],\n\t\t[{type: \"mfra\", name: \"MovieFragmentRandomAccessBox\"}, [\"tfra\"]],\n\t\t[{type: \"meco\", name: \"AdditionalMetadataContainerBox\"}],\n\t\t[{type: \"hnti\", name: \"trackhintinformation\"}],\n\t\t[{type: \"hinf\", name: \"hintstatisticsbox\"}],\n\t\t[{type: \"strk\", name: \"SubTrackBox\"}],\n\t\t[{type: \"strd\", name: \"SubTrackDefinitionBox\"}],\n\t\t[{type: \"sinf\", name: \"ProtectionSchemeInfoBox\"}],\n\t\t[{type: \"rinf\", name: \"RestrictedSchemeInfoBox\"}],\n\t\t[{type: \"schi\", name: \"SchemeInformationBox\"}],\n\t\t[{type: \"trgr\", name: \"TrackGroupBox\"}],\n\t\t[{type: \"udta\", name: \"UserDataBox\"}, [\"kind\"]],\n\t\t[{type: \"iprp\", name: \"ItemPropertiesBox\"}, [\"ipma\"]],\n\t\t[{type: \"ipco\", name: \"ItemPropertyContainerBox\"}],\n\t\t[{type: \"grpl\", name: \"GroupsListBox\"}],\n\t\t[{type: \"j2kH\", name: \"J2KHeaderInfoBox\"}],\n\t\t[{type: \"etyp\", name: \"ExtendedTypeBox\"}, [\"tyco\"]]\n\t],\n\t// Boxes effectively created\n\tboxCodes : [],\n\tfullBoxCodes : [],\n\tcontainerBoxCodes : [],\n\tsampleEntryCodes : {},\n\tsampleGroupEntryCodes: [],\n\ttrackGroupTypes: [],\n\tUUIDBoxes: {},\n\tUUIDs: [],\n\tinitialize: function() {\n\t\tBoxParser.FullBox.prototype = new BoxParser.Box();\n\t\tBoxParser.ContainerBox.prototype = new BoxParser.Box();\n\t\tBoxParser.SampleEntry.prototype = new BoxParser.Box();\n\t\tBoxParser.TrackGroupTypeBox.prototype = new BoxParser.FullBox();\n\n\t\t/* creating constructors for simple boxes */\n\t\tBoxParser.BASIC_BOXES.forEach(function(box) {\n\t\t\tBoxParser.createBoxCtor(box.type, box.name)\n\t\t});\n\t\tBoxParser.FULL_BOXES.forEach(function(box) {\n\t\t\tBoxParser.createFullBoxCtor(box.type, box.name);\n\t\t});\n\t\tBoxParser.CONTAINER_BOXES.forEach(function(boxes) {\n\t\t\tBoxParser.createContainerBoxCtor(boxes[0].type, boxes[0].name, null, boxes[1]);\n\t\t});\n\t},\n\tBox: function(_type, _size, _name, _uuid) {\n\t\tthis.type = _type;\n\t\tthis.box_name = _name;\n\t\tthis.size = _size;\n\t\tthis.uuid = _uuid;\n\t},\n\tFullBox: function(type, size, name, uuid) {\n\t\tBoxParser.Box.call(this, type, size, name, uuid);\n\t\tthis.flags = 0;\n\t\tthis.version = 0;\n\t},\n\tContainerBox: function(type, size, name, uuid) {\n\t\tBoxParser.Box.call(this, type, size, name, uuid);\n\t\tthis.boxes = [];\n\t},\n\tSampleEntry: function(type, size, hdr_size, start) {\n\t\tBoxParser.ContainerBox.call(this, type, size);\n\t\tthis.hdr_size = hdr_size;\n\t\tthis.start = start;\n\t},\n\tSampleGroupEntry: function(type) {\n\t\tthis.grouping_type = type;\n\t},\n\tTrackGroupTypeBox: function(type, size) {\n\t\tBoxParser.FullBox.call(this, type, size);\n\t},\n\tcreateBoxCtor: function(type, name, parseMethod){\n\t\tBoxParser.boxCodes.push(type);\n\t\tBoxParser[type+\"Box\"] = function(size) {\n\t\t\tBoxParser.Box.call(this, type, size, name);\n\t\t}\n\t\tBoxParser[type+\"Box\"].prototype = new BoxParser.Box();\n\t\tif (parseMethod) BoxParser[type+\"Box\"].prototype.parse = parseMethod;\n\t},\n\tcreateFullBoxCtor: function(type, name, parseMethod) {\n\t\t//BoxParser.fullBoxCodes.push(type);\n\t\tBoxParser[type+\"Box\"] = function(size) {\n\t\t\tBoxParser.FullBox.call(this, type, size, name);\n\t\t}\n\t\tBoxParser[type+\"Box\"].prototype = new BoxParser.FullBox();\n\t\tBoxParser[type+\"Box\"].prototype.parse = function(stream) {\n\t\t\tthis.parseFullHeader(stream);\n\t\t\tif (parseMethod) {\n\t\t\t\tparseMethod.call(this, stream);\n\t\t\t}\n\t\t};\n\t},\n\taddSubBoxArrays: function(subBoxNames) {\n\t\tif (subBoxNames) {\n\t\t\tthis.subBoxNames = subBoxNames;\n\t\t\tvar nbSubBoxes = subBoxNames.length;\n\t\t\tfor (var k = 0; k<nbSubBoxes; k++) {\n\t\t\t\tthis[subBoxNames[k]+\"s\"] = [];\n\t\t\t}\n\t\t}\n\t},\n\tcreateContainerBoxCtor: function(type, name, parseMethod, subBoxNames) {\n\t\t//BoxParser.containerBoxCodes.push(type);\n\t\tBoxParser[type+\"Box\"] = function(size) {\n\t\t\tBoxParser.ContainerBox.call(this, type, size, name);\n\t\t\tBoxParser.addSubBoxArrays.call(this, subBoxNames);\n\t\t}\n\t\tBoxParser[type+\"Box\"].prototype = new BoxParser.ContainerBox();\n\t\tif (parseMethod) BoxParser[type+\"Box\"].prototype.parse = parseMethod;\n\t},\n\tcreateMediaSampleEntryCtor: function(mediaType, parseMethod, subBoxNames) {\n\t\tBoxParser.sampleEntryCodes[mediaType] = [];\n\t\tBoxParser[mediaType+\"SampleEntry\"] = function(type, size) {\n\t\t\tBoxParser.SampleEntry.call(this, type, size);\n\t\t\tBoxParser.addSubBoxArrays.call(this, subBoxNames);\n\t\t};\n\t\tBoxParser[mediaType+\"SampleEntry\"].prototype = new BoxParser.SampleEntry();\n\t\tif (parseMethod) BoxParser[mediaType+\"SampleEntry\"].prototype .parse = parseMethod;\n\t},\n\tcreateSampleEntryCtor: function(mediaType, type, parseMethod, subBoxNames) {\n\t\tBoxParser.sampleEntryCodes[mediaType].push(type);\n\t\tBoxParser[type+\"SampleEntry\"] = function(size) {\n\t\t\tBoxParser[mediaType+\"SampleEntry\"].call(this, type, size);\n\t\t\tBoxParser.addSubBoxArrays.call(this, subBoxNames);\n\t\t};\n\t\tBoxParser[type+\"SampleEntry\"].prototype = new BoxParser[mediaType+\"SampleEntry\"]();\n\t\tif (parseMethod) BoxParser[type+\"SampleEntry\"].prototype.parse = parseMethod;\n\t},\n\tcreateEncryptedSampleEntryCtor: function(mediaType, type, parseMethod) {\n\t\tBoxParser.createSampleEntryCtor.call(this, mediaType, type, parseMethod, [\"sinf\"]);\n\t},\n\tcreateSampleGroupCtor: function(type, parseMethod) {\n\t\t//BoxParser.sampleGroupEntryCodes.push(type);\n\t\tBoxParser[type+\"SampleGroupEntry\"] = function(size) {\n\t\t\tBoxParser.SampleGroupEntry.call(this, type, size);\n\t\t}\n\t\tBoxParser[type+\"SampleGroupEntry\"].prototype = new BoxParser.SampleGroupEntry();\n\t\tif (parseMethod) BoxParser[type+\"SampleGroupEntry\"].prototype.parse = parseMethod;\n\t},\n\tcreateTrackGroupCtor: function(type, parseMethod) {\n\t\t//BoxParser.trackGroupTypes.push(type);\n\t\tBoxParser[type+\"TrackGroupTypeBox\"] = function(size) {\n\t\t\tBoxParser.TrackGroupTypeBox.call(this, type, size);\n\t\t}\n\t\tBoxParser[type+\"TrackGroupTypeBox\"].prototype = new BoxParser.TrackGroupTypeBox();\n\t\tif (parseMethod) BoxParser[type+\"TrackGroupTypeBox\"].prototype.parse = parseMethod;\n\t},\n\tcreateUUIDBox: function(uuid, name, isFullBox, isContainerBox, parseMethod) {\n\t\tBoxParser.UUIDs.push(uuid);\n\t\tBoxParser.UUIDBoxes[uuid] = function(size) {\n\t\t\tif (isFullBox) {\n\t\t\t\tBoxParser.FullBox.call(this, \"uuid\", size, name, uuid);\n\t\t\t} else {\n\t\t\t\tif (isContainerBox) {\n\t\t\t\t\tBoxParser.ContainerBox.call(this, \"uuid\", size, name, uuid);\n\t\t\t\t} else {\n\t\t\t\t\tBoxParser.Box.call(this, \"uuid\", size, name, uuid);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tBoxParser.UUIDBoxes[uuid].prototype = (isFullBox ? new BoxParser.FullBox() : (isContainerBox ? new BoxParser.ContainerBox() : new BoxParser.Box()));\n\t\tif (parseMethod) {\n\t\t\tif (isFullBox) {\n\t\t\t\tBoxParser.UUIDBoxes[uuid].prototype.parse = function(stream) {\n\t\t\t\t\tthis.parseFullHeader(stream);\n\t\t\t\t\tif (parseMethod) {\n\t\t\t\t\t\tparseMethod.call(this, stream);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tBoxParser.UUIDBoxes[uuid].prototype.parse = parseMethod;\n\t\t\t}\n\t\t}\n\t}\n}\n\nBoxParser.initialize();\n\nBoxParser.TKHD_FLAG_ENABLED    = 0x000001;\nBoxParser.TKHD_FLAG_IN_MOVIE   = 0x000002;\nBoxParser.TKHD_FLAG_IN_PREVIEW = 0x000004;\n\nBoxParser.TFHD_FLAG_BASE_DATA_OFFSET\t= 0x01;\nBoxParser.TFHD_FLAG_SAMPLE_DESC\t\t\t= 0x02;\nBoxParser.TFHD_FLAG_SAMPLE_DUR\t\t\t= 0x08;\nBoxParser.TFHD_FLAG_SAMPLE_SIZE\t\t\t= 0x10;\nBoxParser.TFHD_FLAG_SAMPLE_FLAGS\t\t= 0x20;\nBoxParser.TFHD_FLAG_DUR_EMPTY\t\t\t= 0x10000;\nBoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF= 0x20000;\n\nBoxParser.TRUN_FLAGS_DATA_OFFSET= 0x01;\nBoxParser.TRUN_FLAGS_FIRST_FLAG\t= 0x04;\nBoxParser.TRUN_FLAGS_DURATION\t= 0x100;\nBoxParser.TRUN_FLAGS_SIZE\t\t= 0x200;\nBoxParser.TRUN_FLAGS_FLAGS\t\t= 0x400;\nBoxParser.TRUN_FLAGS_CTS_OFFSET\t= 0x800;\n\nBoxParser.Box.prototype.add = function(name) {\n\treturn this.addBox(new BoxParser[name+\"Box\"]());\n}\n\nBoxParser.Box.prototype.addBox = function(box) {\n\tthis.boxes.push(box);\n\tif (this[box.type+\"s\"]) {\n\t\tthis[box.type+\"s\"].push(box);\n\t} else {\n\t\tthis[box.type] = box;\n\t}\n\treturn box;\n}\n\nBoxParser.Box.prototype.set = function(prop, value) {\n\tthis[prop] = value;\n\treturn this;\n}\n\nBoxParser.Box.prototype.addEntry = function(value, _prop) {\n\tvar prop = _prop || \"entries\";\n\tif (!this[prop]) {\n\t\tthis[prop] = [];\n\t}\n\tthis[prop].push(value);\n\treturn this;\n}\n\nif (typeof exports !== \"undefined\") {\n\texports.BoxParser = BoxParser;\n}\n// file:src/box-parse.js\n/* \n * Copyright (c) Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nBoxParser.parseUUID = function(stream) {\n\treturn BoxParser.parseHex16(stream);\n}\n\nBoxParser.parseHex16 = function(stream) {\n\tvar hex16 = \"\"\n\tfor (var i = 0; i <16; i++) {\n\t\tvar hex = stream.readUint8().toString(16);\n\t\thex16 += (hex.length === 1 ? \"0\"+hex : hex);\n\t}\n\treturn hex16;\n}\n\nBoxParser.parseOneBox = function(stream, headerOnly, parentSize) {\n\tvar box;\n\tvar start = stream.getPosition();\n\tvar hdr_size = 0;\n\tvar diff;\n\tvar uuid;\n\tif (stream.getEndPosition() - start < 8) {\n\t\tLog.debug(\"BoxParser\", \"Not enough data in stream to parse the type and size of the box\");\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA };\n\t}\n\tif (parentSize && parentSize < 8) {\n\t\tLog.debug(\"BoxParser\", \"Not enough bytes left in the parent box to parse a new box\");\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA };\n\t}\n\tvar size = stream.readUint32();\n\tvar type = stream.readString(4);\n\tvar box_type = type;\n\tLog.debug(\"BoxParser\", \"Found box of type '\"+type+\"' and size \"+size+\" at position \"+start);\n\thdr_size = 8;\n\tif (type == \"uuid\") {\n\t\tif ((stream.getEndPosition() - stream.getPosition() < 16) || (parentSize -hdr_size < 16)) {\n\t\t\tstream.seek(start);\n\t\t\tLog.debug(\"BoxParser\", \"Not enough bytes left in the parent box to parse a UUID box\");\n\t\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA };\n\t\t}\n\t\tuuid = BoxParser.parseUUID(stream);\n\t\thdr_size += 16;\n\t\tbox_type = uuid;\n\t}\n\tif (size == 1) {\n\t\tif ((stream.getEndPosition() - stream.getPosition() < 8) || (parentSize && (parentSize - hdr_size) < 8)) {\n\t\t\tstream.seek(start);\n\t\t\tLog.warn(\"BoxParser\", \"Not enough data in stream to parse the extended size of the \\\"\"+type+\"\\\" box\");\n\t\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA };\n\t\t}\n\t\tsize = stream.readUint64();\n\t\thdr_size += 8;\n\t} else if (size === 0) {\n\t\t/* box extends till the end of file or invalid file */\n\t\tif (parentSize) {\n\t\t\tsize = parentSize;\n\t\t} else {\n\t\t\t/* box extends till the end of file */\n\t\t\tif (type !== \"mdat\") {\n\t\t\t\tLog.error(\"BoxParser\", \"Unlimited box size not supported for type: '\"+type+\"'\");\n\t\t\t\tbox = new BoxParser.Box(type, size);\n\t\t\t\treturn { code: BoxParser.OK, box: box, size: box.size };\n\t\t\t}\n\t\t}\n\t}\n\tif (size !== 0 && size < hdr_size) {\n\t\tLog.error(\"BoxParser\", \"Box of type \"+type+\" has an invalid size \"+size+\" (too small to be a box)\");\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA, type: type, size: size, hdr_size: hdr_size, start: start };\n\t}\n\tif (size !== 0 && parentSize && size > parentSize) {\n\t\tLog.error(\"BoxParser\", \"Box of type '\"+type+\"' has a size \"+size+\" greater than its container size \"+parentSize);\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA, type: type, size: size, hdr_size: hdr_size, start: start };\n\t}\n\tif (size !== 0 && start + size > stream.getEndPosition()) {\n\t\tstream.seek(start);\n\t\tLog.info(\"BoxParser\", \"Not enough data in stream to parse the entire '\"+type+\"' box\");\n\t\treturn { code: BoxParser.ERR_NOT_ENOUGH_DATA, type: type, size: size, hdr_size: hdr_size, start: start };\n\t}\n\tif (headerOnly) {\n\t\treturn { code: BoxParser.OK, type: type, size: size, hdr_size: hdr_size, start: start };\n\t} else {\n\t\tif (BoxParser[type+\"Box\"]) {\n\t\t\tbox = new BoxParser[type+\"Box\"](size);\n\t\t} else {\n\t\t\tif (type !== \"uuid\") {\n\t\t\t\tLog.warn(\"BoxParser\", \"Unknown box type: '\"+type+\"'\");\n\t\t\t\tbox = new BoxParser.Box(type, size);\n\t\t\t\tbox.has_unparsed_data = true;\n\t\t\t} else {\n\t\t\t\tif (BoxParser.UUIDBoxes[uuid]) {\n\t\t\t\t\tbox = new BoxParser.UUIDBoxes[uuid](size);\n\t\t\t\t} else {\n\t\t\t\t\tLog.warn(\"BoxParser\", \"Unknown uuid type: '\"+uuid+\"'\");\n\t\t\t\t\tbox = new BoxParser.Box(type, size);\n\t\t\t\t\tbox.uuid = uuid;\n\t\t\t\t\tbox.has_unparsed_data = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tbox.hdr_size = hdr_size;\n\t/* recording the position of the box in the input stream */\n\tbox.start = start;\n\tif (box.write === BoxParser.Box.prototype.write && box.type !== \"mdat\") {\n\t\tLog.info(\"BoxParser\", \"'\"+box_type+\"' box writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\tbox.parseDataAndRewind(stream);\n\t}\n\tbox.parse(stream);\n\tdiff = stream.getPosition() - (box.start+box.size);\n\tif (diff < 0) {\n\t\tLog.warn(\"BoxParser\", \"Parsing of box '\"+box_type+\"' did not read the entire indicated box data size (missing \"+(-diff)+\" bytes), seeking forward\");\n\t\tstream.seek(box.start+box.size);\n\t} else if (diff > 0) {\n\t\tLog.error(\"BoxParser\", \"Parsing of box '\"+box_type+\"' read \"+diff+\" more bytes than the indicated box data size, seeking backwards\");\n\t\tif (box.size !== 0) stream.seek(box.start+box.size);\n\t}\n\treturn { code: BoxParser.OK, box: box, size: box.size };\n}\n\nBoxParser.Box.prototype.parse = function(stream) {\n\tif (this.type != \"mdat\") {\n\t\tthis.data = stream.readUint8Array(this.size-this.hdr_size);\n\t} else {\n\t\tif (this.size === 0) {\n\t\t\tstream.seek(stream.getEndPosition());\n\t\t} else {\n\t\t\tstream.seek(this.start+this.size);\n\t\t}\n\t}\n}\n\n/* Used to parse a box without consuming its data, to allow detailled parsing\n   Useful for boxes for which a write method is not yet implemented */\nBoxParser.Box.prototype.parseDataAndRewind = function(stream) {\n\tthis.data = stream.readUint8Array(this.size-this.hdr_size);\n\t// rewinding\n\tstream.position -= this.size-this.hdr_size;\n}\n\nBoxParser.FullBox.prototype.parseDataAndRewind = function(stream) {\n\tthis.parseFullHeader(stream);\n\tthis.data = stream.readUint8Array(this.size-this.hdr_size);\n\t// restore the header size as if the full header had not been parsed\n\tthis.hdr_size -= 4;\n\t// rewinding\n\tstream.position -= this.size-this.hdr_size;\n}\n\nBoxParser.FullBox.prototype.parseFullHeader = function (stream) {\n\tthis.version = stream.readUint8();\n\tthis.flags = stream.readUint24();\n\tthis.hdr_size += 4;\n}\n\nBoxParser.FullBox.prototype.parse = function (stream) {\n\tthis.parseFullHeader(stream);\n\tthis.data = stream.readUint8Array(this.size-this.hdr_size);\n}\n\nBoxParser.ContainerBox.prototype.parse = function(stream) {\n\tvar ret;\n\tvar box;\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = ret.box;\n\t\t\t/* store the box in the 'boxes' array to preserve box order (for offset) but also store box in a property for more direct access */\n\t\t\tthis.boxes.push(box);\n\t\t\tif (this.subBoxNames && this.subBoxNames.indexOf(box.type) != -1) {\n\t\t\t\tthis[this.subBoxNames[this.subBoxNames.indexOf(box.type)]+\"s\"].push(box);\n\t\t\t} else {\n\t\t\t\tvar box_type = box.type !== \"uuid\" ? box.type : box.uuid;\n\t\t\t\tif (this[box_type]) {\n\t\t\t\t\tLog.warn(\"Box of type \"+box_type+\" already stored in field of this type\");\n\t\t\t\t} else {\n\t\t\t\t\tthis[box_type] = box;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nBoxParser.Box.prototype.parseLanguage = function(stream) {\n\tthis.language = stream.readUint16();\n\tvar chars = [];\n\tchars[0] = (this.language>>10)&0x1F;\n\tchars[1] = (this.language>>5)&0x1F;\n\tchars[2] = (this.language)&0x1F;\n\tthis.languageString = String.fromCharCode(chars[0]+0x60, chars[1]+0x60, chars[2]+0x60);\n}\n\n// file:src/parsing/sampleentries/sampleentry.js\nBoxParser.SAMPLE_ENTRY_TYPE_VISUAL \t\t= \"Visual\";\nBoxParser.SAMPLE_ENTRY_TYPE_AUDIO \t\t= \"Audio\";\nBoxParser.SAMPLE_ENTRY_TYPE_HINT \t\t= \"Hint\";\nBoxParser.SAMPLE_ENTRY_TYPE_METADATA \t= \"Metadata\";\nBoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE \t= \"Subtitle\";\nBoxParser.SAMPLE_ENTRY_TYPE_SYSTEM \t\t= \"System\";\nBoxParser.SAMPLE_ENTRY_TYPE_TEXT \t\t= \"Text\";\n\nBoxParser.SampleEntry.prototype.parseHeader = function(stream) {\n\tstream.readUint8Array(6);\n\tthis.data_reference_index = stream.readUint16();\n\tthis.hdr_size += 8;\n}\n\nBoxParser.SampleEntry.prototype.parse = function(stream) {\n\tthis.parseHeader(stream);\n\tthis.data = stream.readUint8Array(this.size - this.hdr_size);\n}\n\nBoxParser.SampleEntry.prototype.parseDataAndRewind = function(stream) {\n\tthis.parseHeader(stream);\n\tthis.data = stream.readUint8Array(this.size - this.hdr_size);\n\t// restore the header size as if the sample entry header had not been parsed\n\tthis.hdr_size -= 8;\n\t// rewinding\n\tstream.position -= this.size-this.hdr_size;\n}\n\nBoxParser.SampleEntry.prototype.parseFooter = function(stream) {\n\tBoxParser.ContainerBox.prototype.parse.call(this, stream);\n}\n\n// Base SampleEntry types with default parsing\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_HINT);\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA);\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE);\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SYSTEM);\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_TEXT);\n\n//Base SampleEntry types for Audio and Video with specific parsing\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, function(stream) {\n\tvar compressorname_length;\n\tthis.parseHeader(stream);\n\tstream.readUint16();\n\tstream.readUint16();\n\tstream.readUint32Array(3);\n\tthis.width = stream.readUint16();\n\tthis.height = stream.readUint16();\n\tthis.horizresolution = stream.readUint32();\n\tthis.vertresolution = stream.readUint32();\n\tstream.readUint32();\n\tthis.frame_count = stream.readUint16();\n\tcompressorname_length = Math.min(31, stream.readUint8());\n\tthis.compressorname = stream.readString(compressorname_length);\n\tif (compressorname_length < 31) {\n\t\tstream.readString(31 - compressorname_length);\n\t}\n\tthis.depth = stream.readUint16();\n\tstream.readUint16();\n\tthis.parseFooter(stream);\n});\n\nBoxParser.createMediaSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, function(stream) {\n\tthis.parseHeader(stream);\n\tstream.readUint32Array(2);\n\tthis.channel_count = stream.readUint16();\n\tthis.samplesize = stream.readUint16();\n\tstream.readUint16();\n\tstream.readUint16();\n\tthis.samplerate = (stream.readUint32()/(1<<16));\n\tthis.parseFooter(stream);\n});\n\n// Sample entries inheriting from Audio and Video\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avc1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avc2\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avc3\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avc4\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"av01\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"dav1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"hvc1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"hev1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"hvt1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"lhe1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"dvh1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"dvhe\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vvc1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vvi1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vvs1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vvcN\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vp08\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"vp09\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"avs3\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"j2ki\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"mjp2\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \"mjpg\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL,\t\"uncv\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mp4a\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"ac-3\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"ac-4\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"ec-3\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"Opus\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mha1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mha2\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mhm1\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"mhm2\");\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"fLaC\");\n\n// Encrypted sample entries\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_VISUAL, \t\"encv\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_AUDIO, \t\"enca\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \t\"encu\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SYSTEM, \t\"encs\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_TEXT, \t\t\"enct\");\nBoxParser.createEncryptedSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA, \t\"encm\");\n// file:src/parsing/a1lx.js\nBoxParser.createBoxCtor(\"a1lx\", \"AV1LayeredImageIndexingProperty\", function(stream) {\n\tvar large_size = stream.readUint8() & 1;\n\tvar FieldLength = ((large_size & 1) + 1) * 16;\n\tthis.layer_size = [];\n\tfor (var i = 0; i < 3; i++) {\n\t\tif (FieldLength == 16) {\n\t\t\tthis.layer_size[i] = stream.readUint16();\n\t\t} else {\n\t\t\tthis.layer_size[i] = stream.readUint32();\n\t\t}\n\t}\n});// file:src/parsing/a1op.js\nBoxParser.createBoxCtor(\"a1op\", \"OperatingPointSelectorProperty\", function(stream) {\n\tthis.op_index = stream.readUint8();\n});// file:src/parsing/auxC.js\nBoxParser.createFullBoxCtor(\"auxC\", \"AuxiliaryTypeProperty\", function(stream) {\n\tthis.aux_type = stream.readCString();\n\tvar aux_subtype_length = this.size - this.hdr_size - (this.aux_type.length + 1);\n\tthis.aux_subtype = stream.readUint8Array(aux_subtype_length);\n});// file:src/parsing/av1C.js\nBoxParser.createBoxCtor(\"av1C\", \"AV1CodecConfigurationBox\", function(stream) {\n\tvar i;\n\tvar toparse;\n\tvar tmp = stream.readUint8();\n\tif ((tmp >> 7 & 0x1) !== 1) {\n\t\tLog.error(\"av1C marker problem\");\n\t\treturn;\n\t}\n\tthis.version = tmp & 0x7F;\n\tif (this.version !== 1) {\n\t\tLog.error(\"av1C version \"+this.version+\" not supported\");\n\t\treturn;\n\t}\n\ttmp = stream.readUint8();\n\tthis.seq_profile = (tmp >> 5) & 0x7;\n\tthis.seq_level_idx_0 = tmp & 0x1F;\n\ttmp = stream.readUint8();\n\tthis.seq_tier_0 = (tmp >> 7) & 0x1;\n\tthis.high_bitdepth = (tmp >> 6) & 0x1;\n\tthis.twelve_bit = (tmp >> 5) & 0x1;\n\tthis.monochrome = (tmp >> 4) & 0x1;\n\tthis.chroma_subsampling_x = (tmp >> 3) & 0x1;\n\tthis.chroma_subsampling_y = (tmp >> 2) & 0x1;\n\tthis.chroma_sample_position = (tmp & 0x3);\n\ttmp = stream.readUint8();\n\tthis.reserved_1 = (tmp >> 5) & 0x7;\n\tif (this.reserved_1 !== 0) {\n\t\tLog.error(\"av1C reserved_1 parsing problem\");\n\t\treturn;\n\t}\n\tthis.initial_presentation_delay_present = (tmp >> 4) & 0x1;\n\tif (this.initial_presentation_delay_present === 1) {\n\t\tthis.initial_presentation_delay_minus_one = (tmp & 0xF);\n\t} else {\n\t\tthis.reserved_2 = (tmp & 0xF);\n\t\tif (this.reserved_2 !== 0) {\n\t\t\tLog.error(\"av1C reserved_2 parsing problem\");\n\t\t\treturn;\n\t\t}\n\t}\n\n\tvar configOBUs_length = this.size - this.hdr_size - 4;\n\tthis.configOBUs = stream.readUint8Array(configOBUs_length);\n});\n\n// file:src/parsing/avcC.js\nfunction printPS(ps) {\n\tvar str = \"<table class='inner-table'>\";\n\tstr += \"<thead><tr><th>length</th><th>nalu_data</th></tr></thead>\";\n\tstr += \"<tbody>\";\n\n\tfor (var i=0; i < ps.length; i++) {\n\t\tvar nalu = ps[i];\n\t\tstr += \"<tr>\";\n\t\tstr += \"<td>\"+nalu.length+\"</td>\";\n\t\tstr += \"<td>\";\n\t\tstr += nalu.nalu.reduce(function(str, byte) {\n\t\t\treturn str + byte.toString(16).padStart(2, \"0\");\n\t\t}, \"0x\");\n\t\tstr += \"</td></tr>\";\n\t}\n\tstr += \"</tbody></table>\";\n\treturn str;\n}\n\nBoxParser.createBoxCtor(\"avcC\", \"AVCConfigurationBox\", function(stream) {\n\tvar i;\n\tvar toparse;\n\tthis.configurationVersion = stream.readUint8();\n\tthis.AVCProfileIndication = stream.readUint8();\n\tthis.profile_compatibility = stream.readUint8();\n\tthis.AVCLevelIndication = stream.readUint8();\n\tthis.lengthSizeMinusOne = (stream.readUint8() & 0x3);\n\tthis.nb_SPS_nalus = (stream.readUint8() & 0x1F);\n\ttoparse = this.size - this.hdr_size - 6;\n\tthis.SPS = [];\n\tthis.SPS.toString = function () {\n\t\treturn printPS(this);\n\t}\n\tfor (i = 0; i < this.nb_SPS_nalus; i++) {\n\t\tthis.SPS[i] = {};\n\t\tthis.SPS[i].length = stream.readUint16();\n\t\tthis.SPS[i].nalu = stream.readUint8Array(this.SPS[i].length);\n\t\ttoparse -= 2+this.SPS[i].length;\n\t}\n\tthis.nb_PPS_nalus = stream.readUint8();\n\ttoparse--;\n\tthis.PPS = [];\n\tthis.PPS.toString = function () {\n\t\treturn printPS(this);\n\t}\n\tfor (i = 0; i < this.nb_PPS_nalus; i++) {\n\t\tthis.PPS[i] = {};\n\t\tthis.PPS[i].length = stream.readUint16();\n\t\tthis.PPS[i].nalu = stream.readUint8Array(this.PPS[i].length);\n\t\ttoparse -= 2+this.PPS[i].length;\n\t}\n\tif (toparse>0) {\n\t\tthis.ext = stream.readUint8Array(toparse);\n\t}\n});\n\n// file:src/parsing/btrt.js\nBoxParser.createBoxCtor(\"btrt\", \"BitRateBox\", function(stream) {\n\tthis.bufferSizeDB = stream.readUint32();\n\tthis.maxBitrate = stream.readUint32();\n\tthis.avgBitrate = stream.readUint32();\n});\n\n// file:src/parsing/ccst.js\nBoxParser.createFullBoxCtor(\"ccst\", \"CodingConstraintsBox\", function(stream) {\n\tvar flags = stream.readUint8();\n\tthis.all_ref_pics_intra = ((flags & 0x80) == 0x80);\n\tthis.intra_pred_used = ((flags & 0x40) == 0x40);\n\tthis.max_ref_per_pic = ((flags & 0x3f) >> 2);\n\tstream.readUint24();\n});\n\n// file:src/parsing/cdef.js\nBoxParser.createBoxCtor(\"cdef\", \"ComponentDefinitionBox\", function(stream) {\n    var i;\n    this.channel_count = stream.readUint16();\n    this.channel_indexes = [];\n    this.channel_types = [];\n    this.channel_associations = [];\n    for (i = 0; i < this.channel_count; i++) {\n        this.channel_indexes.push(stream.readUint16());\n        this.channel_types.push(stream.readUint16());\n        this.channel_associations.push(stream.readUint16());\n    }\n});\n\n// file:src/parsing/clap.js\nBoxParser.createBoxCtor(\"clap\", \"CleanApertureBox\", function(stream) {\n\tthis.cleanApertureWidthN = stream.readUint32();\n\tthis.cleanApertureWidthD = stream.readUint32();\n\tthis.cleanApertureHeightN = stream.readUint32();\n\tthis.cleanApertureHeightD = stream.readUint32();\n\tthis.horizOffN = stream.readUint32();\n\tthis.horizOffD = stream.readUint32();\n\tthis.vertOffN = stream.readUint32();\n\tthis.vertOffD = stream.readUint32();\n});// file:src/parsing/clli.js\nBoxParser.createBoxCtor(\"clli\", \"ContentLightLevelBox\", function(stream) {\n\tthis.max_content_light_level = stream.readUint16();\n    this.max_pic_average_light_level = stream.readUint16();\n});\n\n// file:src/parsing/cmex.js\nBoxParser.createFullBoxCtor(\"cmex\", \"CameraExtrinsicMatrixProperty\", function(stream) {\n\tif (this.flags & 0x1) {\n\t\tthis.pos_x = stream.readInt32();\n\t}\n\tif (this.flags & 0x2) {\n\t\tthis.pos_y = stream.readInt32();\n\t}\n\tif (this.flags & 0x4) {\n\t\tthis.pos_z = stream.readInt32();\n\t}\n\tif (this.flags & 0x8) {\n\t\tif (this.version == 0) {\n\t\t\tif (this.flags & 0x10) {\n\t\t\t\tthis.quat_x = stream.readInt32();\n\t\t\t\tthis.quat_y = stream.readInt32();\n\t\t\t\tthis.quat_z = stream.readInt32();\n\t\t\t} else {\n\t\t\t\tthis.quat_x = stream.readInt16();\n\t\t\t\tthis.quat_y = stream.readInt16();\n\t\t\t\tthis.quat_z = stream.readInt16();\n\t\t\t}\n\t\t} else if (this.version == 1) {\n\t\t\t//ViewpointGlobalCoordinateSysRotationStruct rot;\n\t\t}\n\t}\n\tif (this.flags & 0x20) {\n\t\tthis.id = stream.readUint32();\n\t}\n});\n// file:src/parsing/cmin.js\nBoxParser.createFullBoxCtor(\"cmin\", \"CameraIntrinsicMatrixProperty\", function(stream) {\n\tthis.focal_length_x = stream.readInt32();\n\tthis.principal_point_x = stream.readInt32();\n\tthis.principal_point_y = stream.readInt32();\n\tif (this.flags & 0x1) {\n\t\tthis.focal_length_y = stream.readInt32();\n\t\tthis.skew_factor = stream.readInt32();\n\t}\n});// file:src/parsing/cmpd.js\nBoxParser.createBoxCtor(\"cmpd\", \"ComponentDefinitionBox\", function(stream) {\n\tthis.component_count = stream.readUint32();\n\tthis.component_types = [];\n\tthis.component_type_urls = [];\n\tfor (i = 0; i < this.component_count; i++) {\n\t\tvar component_type = stream.readUint16();\n\t\tthis.component_types.push(component_type);\n\t\tif (component_type >= 0x8000) {\n\t\t\tthis.component_type_urls.push(stream.readCString());\n\t\t}\n\t}\n});// file:src/parsing/co64.js\nBoxParser.createFullBoxCtor(\"co64\", \"ChunkLargeOffsetBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tentry_count = stream.readUint32();\n\tthis.chunk_offsets = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.chunk_offsets.push(stream.readUint64());\n\t\t}\n\t}\n});\n\n// file:src/parsing/CoLL.js\nBoxParser.createFullBoxCtor(\"CoLL\", \"ContentLightLevelBox\", function(stream) {\n\tthis.maxCLL = stream.readUint16();\n    this.maxFALL = stream.readUint16();\n});\n\n// file:src/parsing/colr.js\nBoxParser.createBoxCtor(\"colr\", \"ColourInformationBox\", function(stream) {\n\tthis.colour_type = stream.readString(4);\n\tif (this.colour_type === 'nclx') {\n\t\tthis.colour_primaries = stream.readUint16();\n\t\tthis.transfer_characteristics = stream.readUint16();\n\t\tthis.matrix_coefficients = stream.readUint16();\n\t\tvar tmp = stream.readUint8();\n\t\tthis.full_range_flag = tmp >> 7;\n\t} else if (this.colour_type === 'rICC') {\n\t\tthis.ICC_profile = stream.readUint8Array(this.size - 4);\n\t} else if (this.colour_type === 'prof') {\n\t\tthis.ICC_profile = stream.readUint8Array(this.size - 4);\n\t}\n});// file:src/parsing/cprt.js\nBoxParser.createFullBoxCtor(\"cprt\", \"CopyrightBox\", function (stream) {\n\tthis.parseLanguage(stream);\n\tthis.notice = stream.readCString();\n});\n\n// file:src/parsing/cslg.js\nBoxParser.createFullBoxCtor(\"cslg\", \"CompositionToDecodeBox\", function(stream) {\n\tvar entry_count;\n\tif (this.version === 0) {\n\t\tthis.compositionToDTSShift = stream.readInt32(); /* signed */\n\t\tthis.leastDecodeToDisplayDelta = stream.readInt32(); /* signed */\n\t\tthis.greatestDecodeToDisplayDelta = stream.readInt32(); /* signed */\n\t\tthis.compositionStartTime = stream.readInt32(); /* signed */\n\t\tthis.compositionEndTime = stream.readInt32(); /* signed */\n\t}\n});\n\n// file:src/parsing/ctts.js\nBoxParser.createFullBoxCtor(\"ctts\", \"CompositionOffsetBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tentry_count = stream.readUint32();\n\tthis.sample_counts = [];\n\tthis.sample_offsets = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.sample_counts.push(stream.readUint32());\n\t\t\t/* some files are buggy and declare version=0 while using signed offsets.\n\t\t\t   The likelyhood of using the most significant bit in a 32-bits time offset is very low,\n\t\t\t   so using signed value here as well */\n\t\t\t   var value = stream.readInt32();\n\t\t\t   if (value < 0) {\n\t\t\t   \t\tLog.warn(\"BoxParser\", \"ctts box uses negative values without using version 1\");\n\t\t\t   }\n\t\t\tthis.sample_offsets.push(value);\n\t\t}\n\t} else if (this.version == 1) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.sample_counts.push(stream.readUint32());\n\t\t\tthis.sample_offsets.push(stream.readInt32()); /* signed */\n\t\t}\n\t}\n});\n\n// file:src/parsing/dac3.js\nBoxParser.createBoxCtor(\"dac3\", \"AC3SpecificBox\", function(stream) {\n\tvar tmp_byte1 = stream.readUint8();\n\tvar tmp_byte2 = stream.readUint8();\n\tvar tmp_byte3 = stream.readUint8();\n\tthis.fscod = tmp_byte1 >> 6;\n\tthis.bsid  = ((tmp_byte1 >> 1) & 0x1F);\n\tthis.bsmod = ((tmp_byte1 & 0x1) <<  2) | ((tmp_byte2 >> 6) & 0x3);\n\tthis.acmod = ((tmp_byte2 >> 3) & 0x7);\n\tthis.lfeon = ((tmp_byte2 >> 2) & 0x1);\n\tthis.bit_rate_code = (tmp_byte2 & 0x3) | ((tmp_byte3 >> 5) & 0x7);\n});\n\n// file:src/parsing/dec3.js\nBoxParser.createBoxCtor(\"dec3\", \"EC3SpecificBox\", function(stream) {\n\tvar tmp_16 = stream.readUint16();\n\tthis.data_rate = tmp_16 >> 3;\n\tthis.num_ind_sub = tmp_16 & 0x7;\n\tthis.ind_subs = [];\n\tfor (var i = 0; i < this.num_ind_sub+1; i++) {\n\t\tvar ind_sub = {};\n\t\tthis.ind_subs.push(ind_sub);\n\t\tvar tmp_byte1 = stream.readUint8();\n\t\tvar tmp_byte2 = stream.readUint8();\n\t\tvar tmp_byte3 = stream.readUint8();\n\t\tind_sub.fscod = tmp_byte1 >> 6;\n\t\tind_sub.bsid  = ((tmp_byte1 >> 1) & 0x1F);\n\t\tind_sub.bsmod = ((tmp_byte1 & 0x1) << 4) | ((tmp_byte2 >> 4) & 0xF);\n\t\tind_sub.acmod = ((tmp_byte2 >> 1) & 0x7);\n\t\tind_sub.lfeon = (tmp_byte2 & 0x1);\n\t\tind_sub.num_dep_sub = ((tmp_byte3 >> 1) & 0xF);\n\t\tif (ind_sub.num_dep_sub > 0) {\n\t\t\tind_sub.chan_loc = ((tmp_byte3 & 0x1) << 8) | stream.readUint8();\n\t\t}\n\t}\n});\n\n// file:src/parsing/dfLa.js\nBoxParser.createFullBoxCtor(\"dfLa\", \"FLACSpecificBox\", function(stream) {\n    var BLOCKTYPE_MASK = 0x7F;\n    var LASTMETADATABLOCKFLAG_MASK = 0x80;\n\n    var boxesFound = [];\n    var knownBlockTypes = [\n        \"STREAMINFO\",\n        \"PADDING\",\n        \"APPLICATION\",\n        \"SEEKTABLE\",\n        \"VORBIS_COMMENT\",\n        \"CUESHEET\",\n        \"PICTURE\",\n        \"RESERVED\"\n    ];\n\n    // for (i=0; ; i++) { // to end of box\n    do {\n        var flagAndType = stream.readUint8();\n\n        var type = Math.min(\n            (flagAndType & BLOCKTYPE_MASK),\n            (knownBlockTypes.length - 1)\n        );\n\n        // if this is a STREAMINFO block, read the true samplerate since this\n        // can be different to the AudioSampleEntry samplerate.\n        if (!(type)) {\n            // read past all the other stuff\n            stream.readUint8Array(13);\n\n            // extract samplerate\n            this.samplerate = (stream.readUint32() >> 12);\n\n            // read to end of STREAMINFO\n            stream.readUint8Array(20);\n        } else {\n            // not interested in other block types so just discard length bytes\n            stream.readUint8Array(stream.readUint24());\n        }\n\n        boxesFound.push(knownBlockTypes[type]);\n\n        if (!!(flagAndType & LASTMETADATABLOCKFLAG_MASK)) {\n            break;\n        }\n    } while (true);\n\n    this.numMetadataBlocks =\n        boxesFound.length + \" (\" + boxesFound.join(\", \") + \")\";\n});\n// file:src/parsing/dimm.js\nBoxParser.createBoxCtor(\"dimm\", \"hintimmediateBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/dmax.js\nBoxParser.createBoxCtor(\"dmax\", \"hintlongestpacket\", function(stream) {\n\tthis.time = stream.readUint32();\n});\n\n// file:src/parsing/dmed.js\nBoxParser.createBoxCtor(\"dmed\", \"hintmediaBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/dOps.js\nBoxParser.createBoxCtor(\"dOps\", \"OpusSpecificBox\", function(stream) {\n\tthis.Version = stream.readUint8();\n\tthis.OutputChannelCount = stream.readUint8();\n\tthis.PreSkip = stream.readUint16();\n\tthis.InputSampleRate = stream.readUint32();\n\tthis.OutputGain = stream.readInt16();\n\tthis.ChannelMappingFamily = stream.readUint8();\n\tif (this.ChannelMappingFamily !== 0) {\n\t\tthis.StreamCount = stream.readUint8();\n\t\tthis.CoupledCount = stream.readUint8();\n\t\tthis.ChannelMapping = [];\n\t\tfor (var i = 0; i < this.OutputChannelCount; i++) {\n\t\t\tthis.ChannelMapping[i] = stream.readUint8();\n\t\t}\n\t}\n});\n\n// file:src/parsing/dref.js\nBoxParser.createFullBoxCtor(\"dref\", \"DataReferenceBox\", function(stream) {\n\tvar ret;\n\tvar box;\n\tthis.entries = [];\n\tvar entry_count = stream.readUint32();\n\tfor (var i = 0; i < entry_count; i++) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = ret.box;\n\t\t\tthis.entries.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/drep.js\nBoxParser.createBoxCtor(\"drep\", \"hintrepeatedBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/elng.js\nBoxParser.createFullBoxCtor(\"elng\", \"ExtendedLanguageBox\", function(stream) {\n\tthis.extended_language = stream.readString(this.size-this.hdr_size);\n});\n\n// file:src/parsing/elst.js\nBoxParser.createFullBoxCtor(\"elst\", \"EditListBox\", function(stream) {\n\tthis.entries = [];\n\tvar entry_count = stream.readUint32();\n\tfor (var i = 0; i < entry_count; i++) {\n\t\tvar entry = {};\n\t\tthis.entries.push(entry);\n\t\tif (this.version === 1) {\n\t\t\tentry.segment_duration = stream.readUint64();\n\t\t\tentry.media_time = stream.readInt64();\n\t\t} else {\n\t\t\tentry.segment_duration = stream.readUint32();\n\t\t\tentry.media_time = stream.readInt32();\n\t\t}\n\t\tentry.media_rate_integer = stream.readInt16();\n\t\tentry.media_rate_fraction = stream.readInt16();\n\t}\n});\n\n// file:src/parsing/emsg.js\nBoxParser.createFullBoxCtor(\"emsg\", \"EventMessageBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.timescale \t\t\t\t\t= stream.readUint32();\n\t\tthis.presentation_time \t\t\t= stream.readUint64();\n\t\tthis.event_duration\t\t\t \t= stream.readUint32();\n\t\tthis.id \t\t\t\t\t\t= stream.readUint32();\n\t\tthis.scheme_id_uri \t\t\t\t= stream.readCString();\n\t\tthis.value \t\t\t\t\t\t= stream.readCString();\n\t} else {\n\t\tthis.scheme_id_uri \t\t\t\t= stream.readCString();\n\t\tthis.value \t\t\t\t\t\t= stream.readCString();\n\t\tthis.timescale \t\t\t\t\t= stream.readUint32();\n\t\tthis.presentation_time_delta \t= stream.readUint32();\n\t\tthis.event_duration\t\t\t \t= stream.readUint32();\n\t\tthis.id \t\t\t\t\t\t= stream.readUint32();\n\t}\n\tvar message_size = this.size - this.hdr_size - (4*4 + (this.scheme_id_uri.length+1) + (this.value.length+1));\n\tif (this.version == 1) {\n\t\tmessage_size -= 4;\n\t}\n\tthis.message_data = stream.readUint8Array(message_size);\n});\n\n// file:src/parsing/EntityToGroup.js\n// ISO/IEC 14496-12:2022 Section 8.18.3 Entity to group box\nBoxParser.createEntityToGroupCtor = function(type, parseMethod) {\n    BoxParser[type+\"Box\"] = function(size) {\n        BoxParser.FullBox.call(this, type, size);\n    }\n    BoxParser[type+\"Box\"].prototype = new BoxParser.FullBox();\n    BoxParser[type+\"Box\"].prototype.parse = function(stream) {\n        this.parseFullHeader(stream);\n        if (parseMethod) {\n            parseMethod.call(this, stream);\n        } else {\n            this.group_id = stream.readUint32();\n            this.num_entities_in_group = stream.readUint32();\n            this.entity_ids = [];\n            for (i = 0; i < this.num_entities_in_group; i++) {\n                var entity_id = stream.readUint32();\n                this.entity_ids.push(entity_id);\n            }\n        }\n    };\n};\n\n// Auto exposure bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.2.1)\nBoxParser.createEntityToGroupCtor(\"aebr\");\n\n// Flash exposure bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.5.1)\nBoxParser.createEntityToGroupCtor(\"afbr\");\n\n// Album collection (ISO/IEC 23008-12:2022 Section 6.8.7.1)\nBoxParser.createEntityToGroupCtor(\"albc\");\n\n// Alternative entity (ISO/IEC 14496-12:2022 Section 8.18.3.1)\nBoxParser.createEntityToGroupCtor(\"altr\");\n\n// Burst image entity group (ISO/IEC 23008-12:2022 Section 6.8.2.2)\nBoxParser.createEntityToGroupCtor(\"brst\");\n\n// Depth of field bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.6.1)\nBoxParser.createEntityToGroupCtor(\"dobr\");\n\n// Equivalent entity (ISO/IEC 23008-12:2022 Section 6.8.1.1)\nBoxParser.createEntityToGroupCtor(\"eqiv\");\n\n// Favourites collection (ISO/IEC 23008-12:2022 Section 6.8.7.2)\nBoxParser.createEntityToGroupCtor(\"favc\");\n\n// Focus bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.4.1)\nBoxParser.createEntityToGroupCtor(\"fobr\");\n\n// Audio to image entity group (ISO/IEC 23008-12:2022 Section 6.8.4)\nBoxParser.createEntityToGroupCtor(\"iaug\");\n\n// Panorama (ISO/IEC 23008-12:2022 Section 6.8.8.1)\nBoxParser.createEntityToGroupCtor(\"pano\");\n\n// Slideshow (ISO/IEC 23008-12:2022 Section 6.8.9.1)\nBoxParser.createEntityToGroupCtor(\"slid\");\n\n// Stereo pair (ISO/IEC 23008-12:2022 Section 6.8.5)\nBoxParser.createEntityToGroupCtor(\"ster\");\n\n// Time-synchronised capture entity group (ISO/IEC 23008-12:2022 Section 6.8.3)\nBoxParser.createEntityToGroupCtor(\"tsyn\");\n\n// White balance bracketing (ISO/IEC 23008-12:2022 Section 6.8.6.3.1)\nBoxParser.createEntityToGroupCtor(\"wbbr\");\n\n// Alternative entity (ISO/IEC 23008-12:2022 AMD1 Section 6.8.10)\nBoxParser.createEntityToGroupCtor(\"prgr\");\n\n// Image Pyramid entity group (ISO/IEC 23008-12:20xx Section 6.8.11)\nBoxParser.createEntityToGroupCtor(\"pymd\", function(stream) {\n    this.group_id = stream.readUint32();\n    this.num_entities_in_group = stream.readUint32();\n    this.entity_ids = [];\n    for (var i = 0; i < this.num_entities_in_group; i++) {\n        var entity_id = stream.readUint32();\n        this.entity_ids.push(entity_id);\n    }\n    \n    this.tile_size_x = stream.readUint16();\n    this.tile_size_y = stream.readUint16();\n    this.layer_binning = [];\n    this.tiles_in_layer_column_minus1 = [];\n    this.tiles_in_layer_row_minus1 = [];\n    for (i = 0; i < this.num_entities_in_group; i++) {\n        this.layer_binning[i] = stream.readUint16();\n        this.tiles_in_layer_row_minus1[i] = stream.readUint16();\n        this.tiles_in_layer_column_minus1[i] = stream.readUint16();\n    }\n});\n\n// file:src/parsing/esds.js\nBoxParser.createFullBoxCtor(\"esds\", \"ElementaryStreamDescriptorBox\", function(stream) {\n\tvar esd_data = stream.readUint8Array(this.size-this.hdr_size);\n\tif (typeof MPEG4DescriptorParser !== \"undefined\") {\n\t\tvar esd_parser = new MPEG4DescriptorParser();\n\t\tthis.esd = esd_parser.parseOneDescriptor(new DataStream(esd_data.buffer, 0, DataStream.BIG_ENDIAN));\n\t}\n});\n\n// file:src/parsing/fiel.js\nBoxParser.createBoxCtor(\"fiel\", \"FieldHandlingBox\", function(stream) {\n\tthis.fieldCount = stream.readUint8();\n\tthis.fieldOrdering = stream.readUint8();\n});\n\n// file:src/parsing/frma.js\nBoxParser.createBoxCtor(\"frma\", \"OriginalFormatBox\", function(stream) {\n\tthis.data_format = stream.readString(4);\n});\n\n// file:src/parsing/ftyp.js\nBoxParser.createBoxCtor(\"ftyp\", \"FileTypeBox\", function(stream) {\n\tvar toparse = this.size - this.hdr_size;\n\tthis.major_brand = stream.readString(4);\n\tthis.minor_version = stream.readUint32();\n\ttoparse -= 8;\n\tthis.compatible_brands = [];\n\tvar i = 0;\n\twhile (toparse>=4) {\n\t\tthis.compatible_brands[i] = stream.readString(4);\n\t\ttoparse -= 4;\n\t\ti++;\n\t}\n});\n\n// file:src/parsing/hdlr.js\nBoxParser.createFullBoxCtor(\"hdlr\", \"HandlerBox\", function(stream) {\n\tif (this.version === 0) {\n\t\tstream.readUint32();\n\t\tthis.handler = stream.readString(4);\n\t\tstream.readUint32Array(3);\n\t\tthis.name = stream.readString(this.size-this.hdr_size-20);\n\t\tif (this.name[this.name.length-1]==='\\0') {\n\t\t\tthis.name = this.name.slice(0,-1);\n\t\t}\n\t}\n});\n\n// file:src/parsing/hvcC.js\nBoxParser.createBoxCtor(\"hvcC\", \"HEVCConfigurationBox\", function(stream) {\n\tvar i, j;\n\tvar nb_nalus;\n\tvar length;\n\tvar tmp_byte;\n\tthis.configurationVersion = stream.readUint8();\n\ttmp_byte = stream.readUint8();\n\tthis.general_profile_space = tmp_byte >> 6;\n\tthis.general_tier_flag = (tmp_byte & 0x20) >> 5;\n\tthis.general_profile_idc = (tmp_byte & 0x1F);\n\tthis.general_profile_compatibility = stream.readUint32();\n\tthis.general_constraint_indicator = stream.readUint8Array(6);\n\tthis.general_level_idc = stream.readUint8();\n\tthis.min_spatial_segmentation_idc = stream.readUint16() & 0xFFF;\n\tthis.parallelismType = (stream.readUint8() & 0x3);\n\tthis.chroma_format_idc = (stream.readUint8() & 0x3);\n\tthis.bit_depth_luma_minus8 = (stream.readUint8() & 0x7);\n\tthis.bit_depth_chroma_minus8 = (stream.readUint8() & 0x7);\n\tthis.avgFrameRate = stream.readUint16();\n\ttmp_byte = stream.readUint8();\n\tthis.constantFrameRate = (tmp_byte >> 6);\n\tthis.numTemporalLayers = (tmp_byte & 0XD) >> 3;\n\tthis.temporalIdNested = (tmp_byte & 0X4) >> 2;\n\tthis.lengthSizeMinusOne = (tmp_byte & 0X3);\n\n\tthis.nalu_arrays = [];\n\tthis.nalu_arrays.toString = function () {\n\t\tvar str = \"<table class='inner-table'>\";\n\t\tstr += \"<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>\";\n\t\tstr += \"<tbody>\";\n\n\t\tfor (var i=0; i<this.length; i++) {\n\t\t\tvar nalu_array = this[i];\n\t\t\tstr += \"<tr>\";\n\t\t\tstr += \"<td rowspan='\"+nalu_array.length+\"'>\"+nalu_array.completeness+\"</td>\";\n\t\t\tstr += \"<td rowspan='\"+nalu_array.length+\"'>\"+nalu_array.nalu_type+\"</td>\";\n\t\t\tfor (var j=0; j<nalu_array.length; j++) {\n\t\t\t\tvar nalu = nalu_array[j];\n\t\t\t\tif (j !== 0) str += \"<tr>\";\n\t\t\t\tstr += \"<td>\";\n\t\t\t\tstr += nalu.data.reduce(function(str, byte) {\n\t\t\t\t\treturn str + byte.toString(16).padStart(2, \"0\");\n\t\t\t\t}, \"0x\");\n\t\t\t\tstr += \"</td></tr>\";\n\t\t\t}\n\t\t}\n\t\tstr += \"</tbody></table>\";\n\t\treturn str;\n\t}\n\tvar numOfArrays = stream.readUint8();\n\tfor (i = 0; i < numOfArrays; i++) {\n\t\tvar nalu_array = [];\n\t\tthis.nalu_arrays.push(nalu_array);\n\t\ttmp_byte = stream.readUint8()\n\t\tnalu_array.completeness = (tmp_byte & 0x80) >> 7;\n\t\tnalu_array.nalu_type = tmp_byte & 0x3F;\n\t\tvar numNalus = stream.readUint16();\n\t\tfor (j = 0; j < numNalus; j++) {\n\t\t\tvar nalu = {}\n\t\t\tnalu_array.push(nalu);\n\t\t\tlength = stream.readUint16();\n\t\t\tnalu.data   = stream.readUint8Array(length);\n\t\t}\n\t}\n});\n\n// file:src/parsing/iinf.js\nBoxParser.createFullBoxCtor(\"iinf\", \"ItemInfoBox\", function(stream) {\n\tvar ret;\n\tif (this.version === 0) {\n\t\tthis.entry_count = stream.readUint16();\n\t} else {\n\t\tthis.entry_count = stream.readUint32();\n\t}\n\tthis.item_infos = [];\n\tfor (var i = 0; i < this.entry_count; i++) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tif (ret.box.type !== \"infe\") {\n\t\t\t\tLog.error(\"BoxParser\", \"Expected 'infe' box, got \"+ret.box.type);\n\t\t\t}\n\t\t\tthis.item_infos[i] = ret.box;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/iloc.js\nBoxParser.createFullBoxCtor(\"iloc\", \"ItemLocationBox\", function(stream) {\n\tvar byte;\n\tbyte = stream.readUint8();\n\tthis.offset_size = (byte >> 4) & 0xF;\n\tthis.length_size = byte & 0xF;\n\tbyte = stream.readUint8();\n\tthis.base_offset_size = (byte >> 4) & 0xF;\n\tif (this.version === 1 || this.version === 2) {\n\t\tthis.index_size = byte & 0xF;\n\t} else {\n\t\tthis.index_size = 0;\n\t\t// reserved = byte & 0xF;\n\t}\n\tthis.items = [];\n\tvar item_count = 0;\n\tif (this.version < 2) {\n\t\titem_count = stream.readUint16();\n\t} else if (this.version === 2) {\n\t\titem_count = stream.readUint32();\n\t} else {\n\t\tthrow \"version of iloc box not supported\";\n\t}\n\tfor (var i = 0; i < item_count; i++) {\n\t\tvar item = {};\n\t\tthis.items.push(item);\n\t\tif (this.version < 2) {\n\t\t\titem.item_ID = stream.readUint16();\n\t\t} else if (this.version === 2) {\n\t\t\titem.item_ID = stream.readUint32();\n\t\t} else {\n\t\t\tthrow \"version of iloc box not supported\";\n\t\t}\n\t\tif (this.version === 1 || this.version === 2) {\n\t\t\titem.construction_method = (stream.readUint16() & 0xF);\n\t\t} else {\n\t\t\titem.construction_method = 0;\n\t\t}\n\t\titem.data_reference_index = stream.readUint16();\n\t\tswitch(this.base_offset_size) {\n\t\t\tcase 0:\n\t\t\t\titem.base_offset = 0;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\titem.base_offset = stream.readUint32();\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\titem.base_offset = stream.readUint64();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow \"Error reading base offset size\";\n\t\t}\n\t\tvar extent_count = stream.readUint16();\n\t\titem.extents = [];\n\t\tfor (var j=0; j < extent_count; j++) {\n\t\t\tvar extent = {};\n\t\t\titem.extents.push(extent);\n\t\t\tif (this.version === 1 || this.version === 2) {\n\t\t\t\tswitch(this.index_size) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\textent.extent_index = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\textent.extent_index = stream.readUint32();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\textent.extent_index = stream.readUint64();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow \"Error reading extent index\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(this.offset_size) {\n\t\t\t\tcase 0:\n\t\t\t\t\textent.extent_offset = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\textent.extent_offset = stream.readUint32();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\textent.extent_offset = stream.readUint64();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow \"Error reading extent index\";\n\t\t\t}\n\t\t\tswitch(this.length_size) {\n\t\t\t\tcase 0:\n\t\t\t\t\textent.extent_length = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\textent.extent_length = stream.readUint32();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 8:\n\t\t\t\t\textent.extent_length = stream.readUint64();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow \"Error reading extent index\";\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/imir.js\nBoxParser.createBoxCtor(\"imir\", \"ImageMirror\", function(stream) {\n\tvar tmp = stream.readUint8();\n\tthis.reserved = tmp >> 7;\n\tthis.axis = tmp & 1;\n});// file:src/parsing/infe.js\nBoxParser.createFullBoxCtor(\"infe\", \"ItemInfoEntry\", function(stream) {\n\tif (this.version === 0 || this.version === 1) {\n\t\tthis.item_ID = stream.readUint16();\n\t\tthis.item_protection_index = stream.readUint16();\n\t\tthis.item_name = stream.readCString();\n\t\tthis.content_type = stream.readCString();\n\t\tthis.content_encoding = stream.readCString();\n\t}\n\tif (this.version === 1) {\n\t\tthis.extension_type = stream.readString(4);\n\t\tLog.warn(\"BoxParser\", \"Cannot parse extension type\");\n\t\tstream.seek(this.start+this.size);\n\t\treturn;\n\t}\n\tif (this.version >= 2) {\n\t\tif (this.version === 2) {\n\t\t\tthis.item_ID = stream.readUint16();\n\t\t} else if (this.version === 3) {\n\t\t\tthis.item_ID = stream.readUint32();\n\t\t}\n\t\tthis.item_protection_index = stream.readUint16();\n\t\tthis.item_type = stream.readString(4);\n\t\tthis.item_name = stream.readCString();\n\t\tif (this.item_type === \"mime\") {\n\t\t\tthis.content_type = stream.readCString();\n\t\t\tthis.content_encoding = stream.readCString();\n\t\t} else if (this.item_type === \"uri \") {\n\t\t\tthis.item_uri_type = stream.readCString();\n\t\t}\n\t}\n});\n// file:src/parsing/ipma.js\nBoxParser.createFullBoxCtor(\"ipma\", \"ItemPropertyAssociationBox\", function(stream) {\n\tvar i, j;\n\tentry_count = stream.readUint32();\n\tthis.associations = [];\n\tfor(i=0; i<entry_count; i++) {\n\t\tvar item_assoc = {};\n\t\tthis.associations.push(item_assoc);\n\t\tif (this.version < 1) {\n\t\t\titem_assoc.id = stream.readUint16();\n\t\t} else {\n\t\t\titem_assoc.id = stream.readUint32();\n\t\t}\n\t\tvar association_count = stream.readUint8();\n\t\titem_assoc.props = [];\n\t\tfor (j = 0; j < association_count; j++) {\n\t\t\tvar tmp = stream.readUint8();\n\t\t\tvar p = {};\n\t\t\titem_assoc.props.push(p);\n\t\t\tp.essential = ((tmp & 0x80) >> 7) === 1;\n\t\t\tif (this.flags & 0x1) {\n\t\t\t\tp.property_index = (tmp & 0x7F) << 8 | stream.readUint8();\n\t\t\t} else {\n\t\t\t\tp.property_index = (tmp & 0x7F);\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/iref.js\nBoxParser.createFullBoxCtor(\"iref\", \"ItemReferenceBox\", function(stream) {\n\tvar ret;\n\tvar entryCount;\n\tvar box;\n\tthis.references = [];\n\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, true, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tif (this.version === 0) {\n\t\t\t\tbox = new BoxParser.SingleItemTypeReferenceBox(ret.type, ret.size, ret.hdr_size, ret.start);\n\t\t\t} else {\n\t\t\t\tbox = new BoxParser.SingleItemTypeReferenceBoxLarge(ret.type, ret.size, ret.hdr_size, ret.start);\n\t\t\t}\n\t\t\tif (box.write === BoxParser.Box.prototype.write && box.type !== \"mdat\") {\n\t\t\t\tLog.warn(\"BoxParser\", box.type+\" box writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\t\t\tbox.parseDataAndRewind(stream);\n\t\t\t}\n\t\t\tbox.parse(stream);\n\t\t\tthis.references.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n// file:src/parsing/irot.js\nBoxParser.createBoxCtor(\"irot\", \"ImageRotation\", function(stream) {\n\tthis.angle = stream.readUint8() & 0x3;\n});\n\n// file:src/parsing/ispe.js\nBoxParser.createFullBoxCtor(\"ispe\", \"ImageSpatialExtentsProperty\", function(stream) {\n\tthis.image_width = stream.readUint32();\n\tthis.image_height = stream.readUint32();\n});// file:src/parsing/kind.js\nBoxParser.createFullBoxCtor(\"kind\", \"KindBox\", function(stream) {\n\tthis.schemeURI = stream.readCString();\n\tthis.value = stream.readCString();\n});\n// file:src/parsing/leva.js\nBoxParser.createFullBoxCtor(\"leva\", \"LevelAssignmentBox\", function(stream) {\n\tvar count = stream.readUint8();\n\tthis.levels = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tvar level = {};\n\t\tthis.levels[i] = level;\n\t\tlevel.track_ID = stream.readUint32();\n\t\tvar tmp_byte = stream.readUint8();\n\t\tlevel.padding_flag = tmp_byte >> 7;\n\t\tlevel.assignment_type = tmp_byte & 0x7F;\n\t\tswitch (level.assignment_type) {\n\t\t\tcase 0:\n\t\t\t\tlevel.grouping_type = stream.readString(4);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tlevel.grouping_type = stream.readString(4);\n\t\t\t\tlevel.grouping_type_parameter = stream.readUint32();\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tlevel.sub_track_id = stream.readUint32();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tLog.warn(\"BoxParser\", \"Unknown leva assignement type\");\n\t\t}\n\t}\n});\n\n// file:src/parsing/lhvC.js\nBoxParser.createBoxCtor(\"lhvC\", \"LHEVCConfigurationBox\", function(stream) {\n\tvar i, j;\n\tvar tmp_byte;\n\tthis.configurationVersion = stream.readUint8();\n\tthis.min_spatial_segmentation_idc = stream.readUint16() & 0xFFF;\n\tthis.parallelismType = (stream.readUint8() & 0x3);\n\ttmp_byte = stream.readUint8();\n\tthis.numTemporalLayers = (tmp_byte & 0XD) >> 3;\n\tthis.temporalIdNested = (tmp_byte & 0X4) >> 2;\n\tthis.lengthSizeMinusOne = (tmp_byte & 0X3);\n\n\tthis.nalu_arrays = [];\n\tthis.nalu_arrays.toString = function () {\n\t\tvar str = \"<table class='inner-table'>\";\n\t\tstr += \"<thead><tr><th>completeness</th><th>nalu_type</th><th>nalu_data</th></tr></thead>\";\n\t\tstr += \"<tbody>\";\n\n\t\tfor (var i=0; i<this.length; i++) {\n\t\t\tvar nalu_array = this[i];\n\t\t\tstr += \"<tr>\";\n\t\t\tstr += \"<td rowspan='\"+nalu_array.length+\"'>\"+nalu_array.completeness+\"</td>\";\n\t\t\tstr += \"<td rowspan='\"+nalu_array.length+\"'>\"+nalu_array.nalu_type+\"</td>\";\n\t\t\tfor (var j=0; j<nalu_array.length; j++) {\n\t\t\t\tvar nalu = nalu_array[j];\n\t\t\t\tif (j !== 0) str += \"<tr>\";\n\t\t\t\tstr += \"<td>\";\n\t\t\t\tstr += nalu.data.reduce(function(str, byte) {\n\t\t\t\t\treturn str + byte.toString(16).padStart(2, \"0\");\n\t\t\t\t}, \"0x\");\n\t\t\t\tstr += \"</td></tr>\";\n\t\t\t}\n\t\t}\n\t\tstr += \"</tbody></table>\";\n\t\treturn str;\n\t}\n\tvar numOfArrays = stream.readUint8();\n\tfor (i = 0; i < numOfArrays; i++) {\n\t\tvar nalu_array = [];\n\t\tthis.nalu_arrays.push(nalu_array);\n\t\ttmp_byte = stream.readUint8()\n\t\tnalu_array.completeness = (tmp_byte & 0x80) >> 7;\n\t\tnalu_array.nalu_type = tmp_byte & 0x3F;\n\t\tvar numNalus = stream.readUint16();\n\t\tfor (j = 0; j < numNalus; j++) {\n\t\t\tvar nalu = {}\n\t\t\tnalu_array.push(nalu);\n\t\t\tvar length = stream.readUint16();\n\t\t\tnalu.data  = stream.readUint8Array(length);\n\t\t}\n\t}\n});\n\n// file:src/parsing/lsel.js\nBoxParser.createBoxCtor(\"lsel\", \"LayerSelectorProperty\", function(stream) {\n\tthis.layer_id = stream.readUint16();\n});// file:src/parsing/maxr.js\nBoxParser.createBoxCtor(\"maxr\", \"hintmaxrate\", function(stream) {\n\tthis.period = stream.readUint32();\n\tthis.bytes = stream.readUint32();\n});\n\n// file:src/parsing/mdcv.js\nfunction ColorPoint(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nColorPoint.prototype.toString = function() {\n    return \"(\"+this.x+\",\"+this.y+\")\";\n}\n\nBoxParser.createBoxCtor(\"mdcv\", \"MasteringDisplayColourVolumeBox\", function(stream) {\n    this.display_primaries = [];\n    this.display_primaries[0] = new ColorPoint(stream.readUint16(),stream.readUint16());\n    this.display_primaries[1] = new ColorPoint(stream.readUint16(),stream.readUint16());\n    this.display_primaries[2] = new ColorPoint(stream.readUint16(),stream.readUint16());\n    this.white_point = new ColorPoint(stream.readUint16(),stream.readUint16());\n    this.max_display_mastering_luminance = stream.readUint32();\n    this.min_display_mastering_luminance = stream.readUint32();\n});\n\n// file:src/parsing/mdhd.js\nBoxParser.createFullBoxCtor(\"mdhd\", \"MediaHeaderBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.creation_time = stream.readUint64();\n\t\tthis.modification_time = stream.readUint64();\n\t\tthis.timescale = stream.readUint32();\n\t\tthis.duration = stream.readUint64();\n\t} else {\n\t\tthis.creation_time = stream.readUint32();\n\t\tthis.modification_time = stream.readUint32();\n\t\tthis.timescale = stream.readUint32();\n\t\tthis.duration = stream.readUint32();\n\t}\n\tthis.parseLanguage(stream);\n\tstream.readUint16();\n});\n\n// file:src/parsing/mehd.js\nBoxParser.createFullBoxCtor(\"mehd\", \"MovieExtendsHeaderBox\", function(stream) {\n\tif (this.flags & 0x1) {\n\t\tLog.warn(\"BoxParser\", \"mehd box incorrectly uses flags set to 1, converting version to 1\");\n\t\tthis.version = 1;\n\t}\n\tif (this.version == 1) {\n\t\tthis.fragment_duration = stream.readUint64();\n\t} else {\n\t\tthis.fragment_duration = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/meta.js\nBoxParser.createFullBoxCtor(\"meta\", \"MetaBox\", function(stream) {\n\tthis.boxes = [];\n\tBoxParser.ContainerBox.prototype.parse.call(this, stream);\n});\n// file:src/parsing/mfhd.js\nBoxParser.createFullBoxCtor(\"mfhd\", \"MovieFragmentHeaderBox\", function(stream) {\n\tthis.sequence_number = stream.readUint32();\n});\n\n// file:src/parsing/mfro.js\nBoxParser.createFullBoxCtor(\"mfro\", \"MovieFragmentRandomAccessOffsetBox\", function(stream) {\n\tthis._size = stream.readUint32();\n});\n\n// file:src/parsing/mskC.js\nBoxParser.createFullBoxCtor(\"mskC\", \"MaskConfigurationProperty\", function(stream) {\n    this.bits_per_pixel = stream.readUint8();\n});\n\n// file:src/parsing/mvhd.js\nBoxParser.createFullBoxCtor(\"mvhd\", \"MovieHeaderBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.creation_time = stream.readUint64();\n\t\tthis.modification_time = stream.readUint64();\n\t\tthis.timescale = stream.readUint32();\n\t\tthis.duration = stream.readUint64();\n\t} else {\n\t\tthis.creation_time = stream.readUint32();\n\t\tthis.modification_time = stream.readUint32();\n\t\tthis.timescale = stream.readUint32();\n\t\tthis.duration = stream.readUint32();\n\t}\n\tthis.rate = stream.readUint32();\n\tthis.volume = stream.readUint16()>>8;\n\tstream.readUint16();\n\tstream.readUint32Array(2);\n\tthis.matrix = stream.readUint32Array(9);\n\tstream.readUint32Array(6);\n\tthis.next_track_id = stream.readUint32();\n});\n// file:src/parsing/npck.js\nBoxParser.createBoxCtor(\"npck\", \"hintPacketsSent\", function(stream) {\n\tthis.packetssent = stream.readUint32();\n});\n\n// file:src/parsing/nump.js\nBoxParser.createBoxCtor(\"nump\", \"hintPacketsSent\", function(stream) {\n\tthis.packetssent = stream.readUint64();\n});\n\n// file:src/parsing/padb.js\nBoxParser.createFullBoxCtor(\"padb\", \"PaddingBitsBox\", function(stream) {\n\tvar sample_count = stream.readUint32();\n\tthis.padbits = [];\n\tfor (var i = 0; i < Math.floor((sample_count+1)/2); i++) {\n\t\tthis.padbits = stream.readUint8();\n\t}\n});\n\n// file:src/parsing/pasp.js\nBoxParser.createBoxCtor(\"pasp\", \"PixelAspectRatioBox\", function(stream) {\n\tthis.hSpacing = stream.readUint32();\n\tthis.vSpacing = stream.readUint32();\n});// file:src/parsing/payl.js\nBoxParser.createBoxCtor(\"payl\", \"CuePayloadBox\", function(stream) {\n\tthis.text = stream.readString(this.size - this.hdr_size);\n});\n\n// file:src/parsing/payt.js\nBoxParser.createBoxCtor(\"payt\", \"hintpayloadID\", function(stream) {\n\tthis.payloadID = stream.readUint32();\n\tvar count = stream.readUint8();\n\tthis.rtpmap_string = stream.readString(count);\n});\n\n// file:src/parsing/pdin.js\nBoxParser.createFullBoxCtor(\"pdin\", \"ProgressiveDownloadInfoBox\", function(stream) {\n\tvar count = (this.size - this.hdr_size)/8;\n\tthis.rate = [];\n\tthis.initial_delay = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.rate[i] = stream.readUint32();\n\t\tthis.initial_delay[i] = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/pitm.js\nBoxParser.createFullBoxCtor(\"pitm\", \"PrimaryItemBox\", function(stream) {\n\tif (this.version === 0) {\n\t\tthis.item_id = stream.readUint16();\n\t} else {\n\t\tthis.item_id = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/pixi.js\nBoxParser.createFullBoxCtor(\"pixi\", \"PixelInformationProperty\", function(stream) {\n\tvar i;\n\tthis.num_channels = stream.readUint8();\n\tthis.bits_per_channels = [];\n\tfor (i = 0; i < this.num_channels; i++) {\n\t\tthis.bits_per_channels[i] = stream.readUint8();\n\t}\n});\n\n// file:src/parsing/pmax.js\nBoxParser.createBoxCtor(\"pmax\", \"hintlargestpacket\", function(stream) {\n\tthis.bytes = stream.readUint32();\n});\n\n// file:src/parsing/prdi.js\nBoxParser.createFullBoxCtor(\"prdi\", \"ProgressiveDerivedImageItemInformationProperty\", function(stream) {\n\tthis.step_count = stream.readUint16();\n\tthis.item_count = [];\n\tif (this.flags & 0x2) {\n\t\tfor (var i = 0; i < this.step_count; i++) {\n\t\t\tthis.item_count[i] = stream.readUint16();\n\t\t}\n\t}\n});// file:src/parsing/prft.js\nBoxParser.createFullBoxCtor(\"prft\", \"ProducerReferenceTimeBox\", function(stream) {\n\tthis.ref_track_id = stream.readUint32();\n\tthis.ntp_timestamp = stream.readUint64();\n\tif (this.version === 0) {\n\t\tthis.media_time = stream.readUint32();\n\t} else {\n\t\tthis.media_time = stream.readUint64();\n\t}\n});\n\n// file:src/parsing/pssh.js\nBoxParser.createFullBoxCtor(\"pssh\", \"ProtectionSystemSpecificHeaderBox\", function(stream) {\n\tthis.system_id = BoxParser.parseHex16(stream);\n\tif (this.version > 0) {\n\t\tvar count = stream.readUint32();\n\t\tthis.kid = [];\n\t\tfor (var i = 0; i < count; i++) {\n\t\t\tthis.kid[i] = BoxParser.parseHex16(stream);\n\t\t}\n\t}\n\tvar datasize = stream.readUint32();\n\tif (datasize > 0) {\n\t\tthis.data = stream.readUint8Array(datasize);\n\t}\n});\n\n// file:src/parsing/qt/clef.js\nBoxParser.createFullBoxCtor(\"clef\", \"TrackCleanApertureDimensionsBox\", function(stream) {\n\tthis.width = stream.readUint32();\n\tthis.height = stream.readUint32();\n});// file:src/parsing/qt/enof.js\nBoxParser.createFullBoxCtor(\"enof\", \"TrackEncodedPixelsDimensionsBox\", function(stream) {\n\tthis.width = stream.readUint32();\n\tthis.height = stream.readUint32();\n});// file:src/parsing/qt/prof.js\nBoxParser.createFullBoxCtor(\"prof\", \"TrackProductionApertureDimensionsBox\", function(stream) {\n\tthis.width = stream.readUint32();\n\tthis.height = stream.readUint32();\n});// file:src/parsing/qt/tapt.js\nBoxParser.createContainerBoxCtor(\"tapt\", \"TrackApertureModeDimensionsBox\", null, [ \"clef\", \"prof\", \"enof\"]);// file:src/parsing/rtp.js\nBoxParser.createBoxCtor(\"rtp \", \"rtpmoviehintinformation\", function(stream) {\n\tthis.descriptionformat = stream.readString(4);\n\tthis.sdptext = stream.readString(this.size - this.hdr_size - 4);\n});\n\n// file:src/parsing/saio.js\nBoxParser.createFullBoxCtor(\"saio\", \"SampleAuxiliaryInformationOffsetsBox\", function(stream) {\n\tif (this.flags & 0x1) {\n\t\tthis.aux_info_type = stream.readString(4);\n\t\tthis.aux_info_type_parameter = stream.readUint32();\n\t}\n\tvar count = stream.readUint32();\n\tthis.offset = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tif (this.version === 0) {\n\t\t\tthis.offset[i] = stream.readUint32();\n\t\t} else {\n\t\t\tthis.offset[i] = stream.readUint64();\n\t\t}\n\t}\n});\n// file:src/parsing/saiz.js\nBoxParser.createFullBoxCtor(\"saiz\", \"SampleAuxiliaryInformationSizesBox\", function(stream) {\n\tif (this.flags & 0x1) {\n\t\tthis.aux_info_type = stream.readString(4);\n\t\tthis.aux_info_type_parameter = stream.readUint32();\n\t}\n\tthis.default_sample_info_size = stream.readUint8();\n\tthis.sample_count = stream.readUint32();\n\tthis.sample_info_size = [];\n\tif (this.default_sample_info_size === 0) {\n\t\tfor (var i = 0; i < this.sample_count; i++) {\n\t\t\tthis.sample_info_size[i] = stream.readUint8();\n\t\t}\n\t}\n});\n\n// file:src/parsing/sampleentries/mett.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA, \"mett\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.content_encoding = stream.readCString();\n\tthis.mime_format = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/metx.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA, \"metx\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.content_encoding = stream.readCString();\n\tthis.namespace = stream.readCString();\n\tthis.schema_location = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/sbtt.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \"sbtt\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.content_encoding = stream.readCString();\n\tthis.mime_format = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/stpp.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \"stpp\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.namespace = stream.readCString();\n\tthis.schema_location = stream.readCString();\n\tthis.auxiliary_mime_types = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/stxt.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \"stxt\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.content_encoding = stream.readCString();\n\tthis.mime_format = stream.readCString();\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/sampleentries/tx3g.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_SUBTITLE, \"tx3g\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.displayFlags = stream.readUint32();\n\tthis.horizontal_justification = stream.readInt8();\n\tthis.vertical_justification = stream.readInt8();\n\tthis.bg_color_rgba = stream.readUint8Array(4);\n\tthis.box_record = stream.readInt16Array(4);\n\tthis.style_record = stream.readUint8Array(12);\n\tthis.parseFooter(stream);\n});\n// file:src/parsing/sampleentries/wvtt.js\nBoxParser.createSampleEntryCtor(BoxParser.SAMPLE_ENTRY_TYPE_METADATA, \"wvtt\", function(stream) {\n\tthis.parseHeader(stream);\n\tthis.parseFooter(stream);\n});\n\n// file:src/parsing/samplegroups/alst.js\nBoxParser.createSampleGroupCtor(\"alst\", function(stream) {\n\tvar i;\n\tvar roll_count = stream.readUint16();\n\tthis.first_output_sample = stream.readUint16();\n\tthis.sample_offset = [];\n\tfor (i = 0; i < roll_count; i++) {\n\t\tthis.sample_offset[i] = stream.readUint32();\n\t}\n\tvar remaining = this.description_length - 4 - 4*roll_count;\n\tthis.num_output_samples = [];\n\tthis.num_total_samples = [];\n\tfor (i = 0; i < remaining/4; i++) {\n\t\tthis.num_output_samples[i] = stream.readUint16();\n\t\tthis.num_total_samples[i] = stream.readUint16();\n\t}\n});\n\n// file:src/parsing/samplegroups/avll.js\nBoxParser.createSampleGroupCtor(\"avll\", function(stream) {\n\tthis.layerNumber = stream.readUint8();\n\tthis.accurateStatisticsFlag = stream.readUint8();\n\tthis.avgBitRate = stream.readUint16();\n\tthis.avgFrameRate = stream.readUint16();\n});\n\n// file:src/parsing/samplegroups/avss.js\nBoxParser.createSampleGroupCtor(\"avss\", function(stream) {\n\tthis.subSequenceIdentifier = stream.readUint16();\n\tthis.layerNumber = stream.readUint8();\n\tvar tmp_byte = stream.readUint8();\n\tthis.durationFlag = tmp_byte >> 7;\n\tthis.avgRateFlag = (tmp_byte >> 6) & 0x1;\n\tif (this.durationFlag) {\n\t\tthis.duration = stream.readUint32();\n\t}\n\tif (this.avgRateFlag) {\n\t\tthis.accurateStatisticsFlag = stream.readUint8();\n\t\tthis.avgBitRate = stream.readUint16();\n\t\tthis.avgFrameRate = stream.readUint16();\n\t}\n\tthis.dependency = [];\n\tvar numReferences = stream.readUint8();\n\tfor (var i = 0; i < numReferences; i++) {\n\t\tvar dependencyInfo = {};\n\t\tthis.dependency.push(dependencyInfo);\n\t\tdependencyInfo.subSeqDirectionFlag = stream.readUint8();\n\t\tdependencyInfo.layerNumber = stream.readUint8();\n\t\tdependencyInfo.subSequenceIdentifier = stream.readUint16();\n\t}\n});\n\n// file:src/parsing/samplegroups/dtrt.js\nBoxParser.createSampleGroupCtor(\"dtrt\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/mvif.js\nBoxParser.createSampleGroupCtor(\"mvif\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/prol.js\nBoxParser.createSampleGroupCtor(\"prol\", function(stream) {\n\tthis.roll_distance = stream.readInt16();\n});\n\n// file:src/parsing/samplegroups/rap.js\nBoxParser.createSampleGroupCtor(\"rap \", function(stream) {\n\tvar tmp_byte = stream.readUint8();\n\tthis.num_leading_samples_known = tmp_byte >> 7;\n\tthis.num_leading_samples = tmp_byte & 0x7F;\n});\n\n// file:src/parsing/samplegroups/rash.js\nBoxParser.createSampleGroupCtor(\"rash\", function(stream) {\n\tthis.operation_point_count = stream.readUint16();\n\tif (this.description_length !== 2+(this.operation_point_count === 1?2:this.operation_point_count*6)+9) {\n\t\tLog.warn(\"BoxParser\", \"Mismatch in \"+this.grouping_type+\" sample group length\");\n\t\tthis.data =  stream.readUint8Array(this.description_length-2);\n\t} else {\n\t\tif (this.operation_point_count === 1) {\n\t\t\tthis.target_rate_share = stream.readUint16();\n\t\t} else {\n\t\t\tthis.target_rate_share = [];\n\t\t\tthis.available_bitrate = [];\n\t\t\tfor (var i = 0; i < this.operation_point_count; i++) {\n\t\t\t\tthis.available_bitrate[i] = stream.readUint32();\n\t\t\t\tthis.target_rate_share[i] = stream.readUint16();\n\t\t\t}\n\t\t}\n\t\tthis.maximum_bitrate = stream.readUint32();\n\t\tthis.minimum_bitrate = stream.readUint32();\n\t\tthis.discard_priority = stream.readUint8();\n\t}\n});\n\n// file:src/parsing/samplegroups/roll.js\nBoxParser.createSampleGroupCtor(\"roll\", function(stream) {\n\tthis.roll_distance = stream.readInt16();\n});\n\n// file:src/parsing/samplegroups/samplegroup.js\nBoxParser.SampleGroupEntry.prototype.parse = function(stream) {\n\tLog.warn(\"BoxParser\", \"Unknown Sample Group type: \"+this.grouping_type);\n\tthis.data =  stream.readUint8Array(this.description_length);\n}\n\n// file:src/parsing/samplegroups/scif.js\nBoxParser.createSampleGroupCtor(\"scif\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/scnm.js\nBoxParser.createSampleGroupCtor(\"scnm\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/seig.js\nBoxParser.createSampleGroupCtor(\"seig\", function(stream) {\n\tthis.reserved = stream.readUint8();\n\tvar tmp = stream.readUint8();\n\tthis.crypt_byte_block = tmp >> 4;\n\tthis.skip_byte_block = tmp & 0xF;\n\tthis.isProtected = stream.readUint8();\n\tthis.Per_Sample_IV_Size = stream.readUint8();\n\tthis.KID = BoxParser.parseHex16(stream);\n\tthis.constant_IV_size = 0;\n\tthis.constant_IV = 0;\n\tif (this.isProtected === 1 && this.Per_Sample_IV_Size === 0) {\n\t\tthis.constant_IV_size = stream.readUint8();\n\t\tthis.constant_IV = stream.readUint8Array(this.constant_IV_size);\n\t}\n});\n\n// file:src/parsing/samplegroups/stsa.js\nBoxParser.createSampleGroupCtor(\"stsa\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/sync.js\nBoxParser.createSampleGroupCtor(\"sync\", function(stream) {\n\tvar tmp_byte = stream.readUint8();\n\tthis.NAL_unit_type = tmp_byte & 0x3F;\n});\n\n// file:src/parsing/samplegroups/tele.js\nBoxParser.createSampleGroupCtor(\"tele\", function(stream) {\n\tvar tmp_byte = stream.readUint8();\n\tthis.level_independently_decodable = tmp_byte >> 7;\n});\n\n// file:src/parsing/samplegroups/tsas.js\nBoxParser.createSampleGroupCtor(\"tsas\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/tscl.js\nBoxParser.createSampleGroupCtor(\"tscl\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/samplegroups/vipr.js\nBoxParser.createSampleGroupCtor(\"vipr\", function(stream) {\n\tLog.warn(\"BoxParser\", \"Sample Group type: \"+this.grouping_type+\" not fully parsed\");\n});\n\n// file:src/parsing/sbgp.js\nBoxParser.createFullBoxCtor(\"sbgp\", \"SampleToGroupBox\", function(stream) {\n\tthis.grouping_type = stream.readString(4);\n\tif (this.version === 1) {\n\t\tthis.grouping_type_parameter = stream.readUint32();\n\t} else {\n\t\tthis.grouping_type_parameter = 0;\n\t}\n\tthis.entries = [];\n\tvar entry_count = stream.readUint32();\n\tfor (var i = 0; i < entry_count; i++) {\n\t\tvar entry = {};\n\t\tthis.entries.push(entry);\n\t\tentry.sample_count = stream.readInt32();\n\t\tentry.group_description_index = stream.readInt32();\n\t}\n});\n\n// file:src/parsing/sbpm.js\nfunction Pixel(row, col) {\n\tthis.bad_pixel_row = row;\n\tthis.bad_pixel_column = col;\n}\n\nPixel.prototype.toString = function pixelToString() {\n\treturn \"[row: \" + this.bad_pixel_row + \", column: \" + this.bad_pixel_column + \"]\";\n}\n\nBoxParser.createFullBoxCtor(\"sbpm\", \"SensorBadPixelsMapBox\", function(stream) {\n\tvar i;\n\tthis.component_count = stream.readUint16();\n    this.component_index = [];\n    for (i = 0; i < this.component_count; i++) {\n        this.component_index.push(stream.readUint16());\n    }\n\tvar flags = stream.readUint8();\n\tthis.correction_applied = (0x80 == (flags & 0x80));\n\tthis.num_bad_rows = stream.readUint32();\n\tthis.num_bad_cols = stream.readUint32();\n\tthis.num_bad_pixels = stream.readUint32();\n\tthis.bad_rows = [];\n\tthis.bad_columns = [];\n\tthis.bad_pixels = [];\n\tfor (i = 0; i < this.num_bad_rows; i++) {\n\t\tthis.bad_rows.push(stream.readUint32());\n\t}\n\tfor (i = 0; i < this.num_bad_cols; i++) {\n\t\tthis.bad_columns.push(stream.readUint32());\n\t}\n\tfor (i = 0; i < this.num_bad_pixels; i++) {\n\t\tvar row = stream.readUint32();\n\t\tvar col = stream.readUint32();\n\t\tthis.bad_pixels.push(new Pixel(row, col));\n\t}\n});\n\n// file:src/parsing/schm.js\nBoxParser.createFullBoxCtor(\"schm\", \"SchemeTypeBox\", function(stream) {\n\tthis.scheme_type = stream.readString(4);\n\tthis.scheme_version = stream.readUint32();\n\tif (this.flags & 0x000001) {\n\t\tthis.scheme_uri = stream.readString(this.size - this.hdr_size - 8);\n\t}\n});\n\n// file:src/parsing/sdp.js\nBoxParser.createBoxCtor(\"sdp \", \"rtptracksdphintinformation\", function(stream) {\n\tthis.sdptext = stream.readString(this.size - this.hdr_size);\n});\n\n// file:src/parsing/sdtp.js\nBoxParser.createFullBoxCtor(\"sdtp\", \"SampleDependencyTypeBox\", function(stream) {\n\tvar tmp_byte;\n\tvar count = (this.size - this.hdr_size);\n\tthis.is_leading = [];\n\tthis.sample_depends_on = [];\n\tthis.sample_is_depended_on = [];\n\tthis.sample_has_redundancy = [];\n\tfor (var i = 0; i < count; i++) {\n\t\ttmp_byte = stream.readUint8();\n\t\tthis.is_leading[i] = tmp_byte >> 6;\n\t\tthis.sample_depends_on[i] = (tmp_byte >> 4) & 0x3;\n\t\tthis.sample_is_depended_on[i] = (tmp_byte >> 2) & 0x3;\n\t\tthis.sample_has_redundancy[i] = tmp_byte & 0x3;\n\t}\n});\n\n// file:src/parsing/senc.js\n// Cannot be fully parsed because Per_Sample_IV_Size needs to be known\r\nBoxParser.createFullBoxCtor(\"senc\", \"SampleEncryptionBox\" /*, function(stream) {\r\n\tthis.parseFullHeader(stream);\r\n\tvar sample_count = stream.readUint32();\r\n\tthis.samples = [];\r\n\tfor (var i = 0; i < sample_count; i++) {\r\n\t\tvar sample = {};\r\n\t\t// tenc.default_Per_Sample_IV_Size or seig.Per_Sample_IV_Size\r\n\t\tsample.InitializationVector = this.readUint8Array(Per_Sample_IV_Size*8);\r\n\t\tif (this.flags & 0x2) {\r\n\t\t\tsample.subsamples = [];\r\n\t\t\tsubsample_count = stream.readUint16();\r\n\t\t\tfor (var j = 0; j < subsample_count; j++) {\r\n\t\t\t\tvar subsample = {};\r\n\t\t\t\tsubsample.BytesOfClearData = stream.readUint16();\r\n\t\t\t\tsubsample.BytesOfProtectedData = stream.readUint32();\r\n\t\t\t\tsample.subsamples.push(subsample);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// TODO\r\n\t\tthis.samples.push(sample);\r\n\t}\r\n}*/);\r\n// file:src/parsing/sgpd.js\nBoxParser.createFullBoxCtor(\"sgpd\", \"SampleGroupDescriptionBox\", function(stream) {\n\tthis.grouping_type = stream.readString(4);\n\tLog.debug(\"BoxParser\", \"Found Sample Groups of type \"+this.grouping_type);\n\tif (this.version === 1) {\n\t\tthis.default_length = stream.readUint32();\n\t} else {\n\t\tthis.default_length = 0;\n\t}\n\tif (this.version >= 2) {\n\t\tthis.default_group_description_index = stream.readUint32();\n\t}\n\tthis.entries = [];\n\tvar entry_count = stream.readUint32();\n\tfor (var i = 0; i < entry_count; i++) {\n\t\tvar entry;\n\t\tif (BoxParser[this.grouping_type+\"SampleGroupEntry\"]) {\n\t\t\tentry = new BoxParser[this.grouping_type+\"SampleGroupEntry\"](this.grouping_type);\n\t\t}  else {\n\t\t\tentry = new BoxParser.SampleGroupEntry(this.grouping_type);\n\t\t}\n\t\tthis.entries.push(entry);\n\t\tif (this.version === 1) {\n\t\t\tif (this.default_length === 0) {\n\t\t\t\tentry.description_length = stream.readUint32();\n\t\t\t} else {\n\t\t\t\tentry.description_length = this.default_length;\n\t\t\t}\n\t\t} else {\n\t\t\tentry.description_length = this.default_length;\n\t\t}\n\t\tif (entry.write === BoxParser.SampleGroupEntry.prototype.write) {\n\t\t\tLog.info(\"BoxParser\", \"SampleGroup for type \"+this.grouping_type+\" writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\t\t// storing data\n\t\t\tentry.data = stream.readUint8Array(entry.description_length);\n\t\t\t// rewinding\n\t\t\tstream.position -= entry.description_length;\n\t\t}\n\t\tentry.parse(stream);\n\t}\n});\n\n// file:src/parsing/sidx.js\nBoxParser.createFullBoxCtor(\"sidx\", \"CompressedSegmentIndexBox\", function(stream) {\n\tthis.reference_ID = stream.readUint32();\n\tthis.timescale = stream.readUint32();\n\tif (this.version === 0) {\n\t\tthis.earliest_presentation_time = stream.readUint32();\n\t\tthis.first_offset = stream.readUint32();\n\t} else {\n\t\tthis.earliest_presentation_time = stream.readUint64();\n\t\tthis.first_offset = stream.readUint64();\n\t}\n\tstream.readUint16();\n\tthis.references = [];\n\tvar count = stream.readUint16();\n\tfor (var i = 0; i < count; i++) {\n\t\tvar ref = {};\n\t\tthis.references.push(ref);\n\t\tvar tmp_32 = stream.readUint32();\n\t\tref.reference_type = (tmp_32 >> 31) & 0x1;\n\t\tref.referenced_size = tmp_32 & 0x7FFFFFFF;\n\t\tref.subsegment_duration = stream.readUint32();\n\t\ttmp_32 = stream.readUint32();\n\t\tref.starts_with_SAP = (tmp_32 >> 31) & 0x1;\n\t\tref.SAP_type = (tmp_32 >> 28) & 0x7;\n\t\tref.SAP_delta_time = tmp_32 & 0xFFFFFFF;\n\t}\n});\n\n// file:src/parsing/singleitemtypereference.js\nBoxParser.SingleItemTypeReferenceBox = function(type, size, hdr_size, start) {\n\tBoxParser.Box.call(this, type, size);\n\tthis.hdr_size = hdr_size;\n\tthis.start = start;\n}\nBoxParser.SingleItemTypeReferenceBox.prototype = new BoxParser.Box();\nBoxParser.SingleItemTypeReferenceBox.prototype.parse = function(stream) {\n\tthis.from_item_ID = stream.readUint16();\n\tvar count =  stream.readUint16();\n\tthis.references = [];\n\tfor(var i = 0; i < count; i++) {\n\t\tthis.references[i] = {};\n\t\tthis.references[i].to_item_ID = stream.readUint16();\n\t}\n}\n\n// file:src/parsing/singleitemtypereferencelarge.js\nBoxParser.SingleItemTypeReferenceBoxLarge = function(type, size, hdr_size, start) {\n\tBoxParser.Box.call(this, type, size);\n\tthis.hdr_size = hdr_size;\n\tthis.start = start;\n}\nBoxParser.SingleItemTypeReferenceBoxLarge.prototype = new BoxParser.Box();\nBoxParser.SingleItemTypeReferenceBoxLarge.prototype.parse = function(stream) {\n\tthis.from_item_ID = stream.readUint32();\n\tvar count =  stream.readUint16();\n\tthis.references = [];\n\tfor(var i = 0; i < count; i++) {\n\t\tthis.references[i] = {};\n\t\tthis.references[i].to_item_ID = stream.readUint32();\n\t}\n}\n\n// file:src/parsing/SmDm.js\nBoxParser.createFullBoxCtor(\"SmDm\", \"SMPTE2086MasteringDisplayMetadataBox\", function(stream) {\n\tthis.primaryRChromaticity_x = stream.readUint16();\n    this.primaryRChromaticity_y = stream.readUint16();\n    this.primaryGChromaticity_x = stream.readUint16();\n    this.primaryGChromaticity_y = stream.readUint16();\n    this.primaryBChromaticity_x = stream.readUint16();\n    this.primaryBChromaticity_y = stream.readUint16();\n    this.whitePointChromaticity_x = stream.readUint16();\n    this.whitePointChromaticity_y = stream.readUint16();\n    this.luminanceMax = stream.readUint32();\n    this.luminanceMin = stream.readUint32();\n});\n\n// file:src/parsing/smhd.js\nBoxParser.createFullBoxCtor(\"smhd\", \"SoundMediaHeaderBox\", function(stream) {\n\tthis.balance = stream.readUint16();\n\tstream.readUint16();\n});\n\n// file:src/parsing/ssix.js\nBoxParser.createFullBoxCtor(\"ssix\", \"CompressedSubsegmentIndexBox\", function(stream) {\n\tthis.subsegments = [];\n\tvar subsegment_count = stream.readUint32();\n\tfor (var i = 0; i < subsegment_count; i++) {\n\t\tvar subsegment = {};\n\t\tthis.subsegments.push(subsegment);\n\t\tsubsegment.ranges = [];\n\t\tvar range_count = stream.readUint32();\n\t\tfor (var j = 0; j < range_count; j++) {\n\t\t\tvar range = {};\n\t\t\tsubsegment.ranges.push(range);\n\t\t\trange.level = stream.readUint8();\n\t\t\trange.range_size = stream.readUint24();\n\t\t}\n\t}\n});\n\n// file:src/parsing/stco.js\nBoxParser.createFullBoxCtor(\"stco\", \"ChunkOffsetBox\", function(stream) {\n\tvar entry_count;\n\tentry_count = stream.readUint32();\n\tthis.chunk_offsets = [];\n\tif (this.version === 0) {\n\t\tfor (var i = 0; i < entry_count; i++) {\n\t\t\tthis.chunk_offsets.push(stream.readUint32());\n\t\t}\n\t}\n});\n\n// file:src/parsing/stdp.js\nBoxParser.createFullBoxCtor(\"stdp\", \"DegradationPriorityBox\", function(stream) {\n\tvar count = (this.size - this.hdr_size)/2;\n\tthis.priority = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.priority[i] = stream.readUint16();\n\t}\n});\n\n// file:src/parsing/sthd.js\nBoxParser.createFullBoxCtor(\"sthd\", \"SubtitleMediaHeaderBox\");\n\n// file:src/parsing/stri.js\nBoxParser.createFullBoxCtor(\"stri\", \"SubTrackInformationBox\", function(stream) {\n\tthis.switch_group = stream.readUint16();\n\tthis.alternate_group = stream.readUint16();\n\tthis.sub_track_id = stream.readUint32();\n\tvar count = (this.size - this.hdr_size - 8)/4;\n\tthis.attribute_list = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.attribute_list[i] = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/stsc.js\nBoxParser.createFullBoxCtor(\"stsc\", \"SampleToChunkBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tentry_count = stream.readUint32();\n\tthis.first_chunk = [];\n\tthis.samples_per_chunk = [];\n\tthis.sample_description_index = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.first_chunk.push(stream.readUint32());\n\t\t\tthis.samples_per_chunk.push(stream.readUint32());\n\t\t\tthis.sample_description_index.push(stream.readUint32());\n\t\t}\n\t}\n});\n\n// file:src/parsing/stsd.js\nBoxParser.createFullBoxCtor(\"stsd\", \"SampleDescriptionBox\", function(stream) {\n\tvar i;\n\tvar ret;\n\tvar entryCount;\n\tvar box;\n\tthis.entries = [];\n\tentryCount = stream.readUint32();\n\tfor (i = 1; i <= entryCount; i++) {\n\t\tret = BoxParser.parseOneBox(stream, true, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tif (BoxParser[ret.type+\"SampleEntry\"]) {\n\t\t\t\tbox = new BoxParser[ret.type+\"SampleEntry\"](ret.size);\n\t\t\t\tbox.hdr_size = ret.hdr_size;\n\t\t\t\tbox.start = ret.start;\n\t\t\t} else {\n\t\t\t\tLog.warn(\"BoxParser\", \"Unknown sample entry type: \"+ret.type);\n\t\t\t\tbox = new BoxParser.SampleEntry(ret.type, ret.size, ret.hdr_size, ret.start);\n\t\t\t}\n\t\t\tif (box.write === BoxParser.SampleEntry.prototype.write) {\n\t\t\t\tLog.info(\"BoxParser\", \"SampleEntry \"+box.type+\" box writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\t\t\tbox.parseDataAndRewind(stream);\n\t\t\t}\n\t\t\tbox.parse(stream);\n\t\t\tthis.entries.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/stsg.js\nBoxParser.createFullBoxCtor(\"stsg\", \"SubTrackSampleGroupBox\", function(stream) {\n\tthis.grouping_type = stream.readUint32();\n\tvar count = stream.readUint16();\n\tthis.group_description_index = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.group_description_index[i] = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/stsh.js\nBoxParser.createFullBoxCtor(\"stsh\", \"ShadowSyncSampleBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tentry_count = stream.readUint32();\n\tthis.shadowed_sample_numbers = [];\n\tthis.sync_sample_numbers = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.shadowed_sample_numbers.push(stream.readUint32());\n\t\t\tthis.sync_sample_numbers.push(stream.readUint32());\n\t\t}\n\t}\n});\n\n// file:src/parsing/stss.js\nBoxParser.createFullBoxCtor(\"stss\", \"SyncSampleBox\", function(stream) {\n\tvar i;\n\tvar entry_count;\n\tentry_count = stream.readUint32();\n\tif (this.version === 0) {\n\t\tthis.sample_numbers = [];\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.sample_numbers.push(stream.readUint32());\n\t\t}\n\t}\n});\n\n// file:src/parsing/stsz.js\nBoxParser.createFullBoxCtor(\"stsz\", \"SampleSizeBox\", function(stream) {\n\tvar i;\n\tthis.sample_sizes = [];\n\tif (this.version === 0) {\n\t\tthis.sample_size = stream.readUint32();\n\t\tthis.sample_count = stream.readUint32();\n\t\tfor (i = 0; i < this.sample_count; i++) {\n\t\t\tif (this.sample_size === 0) {\n\t\t\t\tthis.sample_sizes.push(stream.readUint32());\n\t\t\t} else {\n\t\t\t\tthis.sample_sizes[i] = this.sample_size;\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/stts.js\nBoxParser.createFullBoxCtor(\"stts\", \"TimeToSampleBox\", function(stream) {\n\tvar entry_count;\n\tvar i;\n\tvar delta;\n\tentry_count = stream.readUint32();\n\tthis.sample_counts = [];\n\tthis.sample_deltas = [];\n\tif (this.version === 0) {\n\t\tfor(i=0; i<entry_count; i++) {\n\t\t\tthis.sample_counts.push(stream.readUint32());\n\t\t\tdelta = stream.readInt32();\n\t\t\tif (delta < 0) {\n\t\t\t\tLog.warn(\"BoxParser\", \"File uses negative stts sample delta, using value 1 instead, sync may be lost!\");\n\t\t\t\tdelta = 1;\n\t\t\t}\n\t\t\tthis.sample_deltas.push(delta);\n\t\t}\n\t}\n});\n\n// file:src/parsing/stvi.js\nBoxParser.createFullBoxCtor(\"stvi\", \"StereoVideoBox\", function(stream) {\n\tvar tmp32 = stream.readUint32();\n\tthis.single_view_allowed = tmp32 & 0x3;\n\tthis.stereo_scheme = stream.readUint32();\n\tvar length = stream.readUint32();\n\tthis.stereo_indication_type = stream.readString(length);\n\tvar ret;\n\tvar box;\n\tthis.boxes = [];\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = ret.box;\n\t\t\tthis.boxes.push(box);\n\t\t\tthis[box.type] = box;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/styp.js\nBoxParser.createBoxCtor(\"styp\", \"SegmentTypeBox\", function(stream) {\n\tBoxParser.ftypBox.prototype.parse.call(this, stream);\n});\n\n// file:src/parsing/stz2.js\nBoxParser.createFullBoxCtor(\"stz2\", \"CompactSampleSizeBox\", function(stream) {\n\tvar i;\n\tvar sample_size;\n\tvar sample_count;\n\tthis.sample_sizes = [];\n\tif (this.version === 0) {\n\t\tthis.reserved = stream.readUint24();\n\t\tthis.field_size = stream.readUint8();\n\t\tsample_count = stream.readUint32();\n\t\tif (this.field_size === 4) {\n\t\t\tfor (i = 0; i < sample_count; i+=2) {\n\t\t\t\tvar tmp = stream.readUint8();\n\t\t\t\tthis.sample_sizes[i] = (tmp >> 4) & 0xF;\n\t\t\t\tthis.sample_sizes[i+1] = tmp & 0xF;\n\t\t\t}\n\t\t} else if (this.field_size === 8) {\n\t\t\tfor (i = 0; i < sample_count; i++) {\n\t\t\t\tthis.sample_sizes[i] = stream.readUint8();\n\t\t\t}\n\t\t} else if (this.field_size === 16) {\n\t\t\tfor (i = 0; i < sample_count; i++) {\n\t\t\t\tthis.sample_sizes[i] = stream.readUint16();\n\t\t\t}\n\t\t} else {\n\t\t\tLog.error(\"BoxParser\", \"Error in length field in stz2 box\");\n\t\t}\n\t}\n});\n\n// file:src/parsing/subs.js\nBoxParser.createFullBoxCtor(\"subs\", \"SubSampleInformationBox\", function(stream) {\n\tvar i,j;\n\tvar entry_count;\n\tvar subsample_count;\n\tentry_count = stream.readUint32();\n\tthis.entries = [];\n\tfor (i = 0; i < entry_count; i++) {\n\t\tvar sampleInfo = {};\n\t\tthis.entries[i] = sampleInfo;\n\t\tsampleInfo.sample_delta = stream.readUint32();\n\t\tsampleInfo.subsamples = [];\n\t\tsubsample_count = stream.readUint16();\n\t\tif (subsample_count>0) {\n\t\t\tfor (j = 0; j < subsample_count; j++) {\n\t\t\t\tvar subsample = {};\n\t\t\t\tsampleInfo.subsamples.push(subsample);\n\t\t\t\tif (this.version == 1) {\n\t\t\t\t\tsubsample.size = stream.readUint32();\n\t\t\t\t} else {\n\t\t\t\t\tsubsample.size = stream.readUint16();\n\t\t\t\t}\n\t\t\t\tsubsample.priority = stream.readUint8();\n\t\t\t\tsubsample.discardable = stream.readUint8();\n\t\t\t\tsubsample.codec_specific_parameters = stream.readUint32();\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/tenc.js\nBoxParser.createFullBoxCtor(\"tenc\", \"TrackEncryptionBox\", function(stream) {\n\tstream.readUint8(); // reserved\n\tif (this.version === 0) {\n\t\tstream.readUint8();\n\t} else {\n\t\tvar tmp = stream.readUint8();\n\t\tthis.default_crypt_byte_block = (tmp >> 4) & 0xF;\n\t\tthis.default_skip_byte_block = tmp & 0xF;\n\t}\n\tthis.default_isProtected = stream.readUint8();\n\tthis.default_Per_Sample_IV_Size = stream.readUint8();\n\tthis.default_KID = BoxParser.parseHex16(stream);\n\tif (this.default_isProtected === 1 && this.default_Per_Sample_IV_Size === 0) {\n\t\tthis.default_constant_IV_size = stream.readUint8();\n\t\tthis.default_constant_IV = stream.readUint8Array(this.default_constant_IV_size);\n\t}\n});// file:src/parsing/tfdt.js\nBoxParser.createFullBoxCtor(\"tfdt\", \"TrackFragmentBaseMediaDecodeTimeBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.baseMediaDecodeTime = stream.readUint64();\n\t} else {\n\t\tthis.baseMediaDecodeTime = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/tfhd.js\nBoxParser.createFullBoxCtor(\"tfhd\", \"TrackFragmentHeaderBox\", function(stream) {\n\tvar readBytes = 0;\n\tthis.track_id = stream.readUint32();\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_BASE_DATA_OFFSET)) {\n\t\tthis.base_data_offset = stream.readUint64();\n\t\treadBytes += 8;\n\t} else {\n\t\tthis.base_data_offset = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DESC)) {\n\t\tthis.default_sample_description_index = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.default_sample_description_index = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DUR)) {\n\t\tthis.default_sample_duration = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.default_sample_duration = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_SAMPLE_SIZE)) {\n\t\tthis.default_sample_size = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.default_sample_size = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TFHD_FLAG_SAMPLE_FLAGS)) {\n\t\tthis.default_sample_flags = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.default_sample_flags = 0;\n\t}\n});\n\n// file:src/parsing/tfra.js\nBoxParser.createFullBoxCtor(\"tfra\", \"TrackFragmentRandomAccessBox\", function(stream) {\n\tthis.track_ID = stream.readUint32();\n\tstream.readUint24();\n\tvar tmp_byte = stream.readUint8();\n\tthis.length_size_of_traf_num = (tmp_byte >> 4) & 0x3;\n\tthis.length_size_of_trun_num = (tmp_byte >> 2) & 0x3;\n\tthis.length_size_of_sample_num = (tmp_byte) & 0x3;\n\tthis.entries = [];\n\tvar number_of_entries = stream.readUint32();\n\tfor (var i = 0; i < number_of_entries; i++) {\n\t\tif (this.version === 1) {\n\t\t\tthis.time = stream.readUint64();\n\t\t\tthis.moof_offset = stream.readUint64();\n\t\t} else {\n\t\t\tthis.time = stream.readUint32();\n\t\t\tthis.moof_offset = stream.readUint32();\n\t\t}\n\t\tthis.traf_number = stream[\"readUint\"+(8*(this.length_size_of_traf_num+1))]();\n\t\tthis.trun_number = stream[\"readUint\"+(8*(this.length_size_of_trun_num+1))]();\n\t\tthis.sample_number = stream[\"readUint\"+(8*(this.length_size_of_sample_num+1))]();\n\t}\n});\n\n// file:src/parsing/tkhd.js\nBoxParser.createFullBoxCtor(\"tkhd\", \"TrackHeaderBox\", function(stream) {\n\tif (this.version == 1) {\n\t\tthis.creation_time = stream.readUint64();\n\t\tthis.modification_time = stream.readUint64();\n\t\tthis.track_id = stream.readUint32();\n\t\tstream.readUint32();\n\t\tthis.duration = stream.readUint64();\n\t} else {\n\t\tthis.creation_time = stream.readUint32();\n\t\tthis.modification_time = stream.readUint32();\n\t\tthis.track_id = stream.readUint32();\n\t\tstream.readUint32();\n\t\tthis.duration = stream.readUint32();\n\t}\n\tstream.readUint32Array(2);\n\tthis.layer = stream.readInt16();\n\tthis.alternate_group = stream.readInt16();\n\tthis.volume = stream.readInt16()>>8;\n\tstream.readUint16();\n\tthis.matrix = stream.readInt32Array(9);\n\tthis.width = stream.readUint32();\n\tthis.height = stream.readUint32();\n});\n\n// file:src/parsing/tmax.js\nBoxParser.createBoxCtor(\"tmax\", \"hintmaxrelativetime\", function(stream) {\n\tthis.time = stream.readUint32();\n});\n\n// file:src/parsing/tmin.js\nBoxParser.createBoxCtor(\"tmin\", \"hintminrelativetime\", function(stream) {\n\tthis.time = stream.readUint32();\n});\n\n// file:src/parsing/totl.js\nBoxParser.createBoxCtor(\"totl\", \"hintBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint32();\n});\n\n// file:src/parsing/tpay.js\nBoxParser.createBoxCtor(\"tpay\", \"hintBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint32();\n});\n\n// file:src/parsing/tpyl.js\nBoxParser.createBoxCtor(\"tpyl\", \"hintBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/TrackGroup.js\nBoxParser.TrackGroupTypeBox.prototype.parse = function(stream) {\n\tthis.parseFullHeader(stream);\n\tthis.track_group_id = stream.readUint32();\n}\n\n// file:src/parsing/trackgroups/msrc.js\nBoxParser.createTrackGroupCtor(\"msrc\");// file:src/parsing/TrakReference.js\nBoxParser.TrackReferenceTypeBox = function(type, size, hdr_size, start) {\n\tBoxParser.Box.call(this, type, size);\n\tthis.hdr_size = hdr_size;\n\tthis.start = start;\n}\nBoxParser.TrackReferenceTypeBox.prototype = new BoxParser.Box();\nBoxParser.TrackReferenceTypeBox.prototype.parse = function(stream) {\n\tthis.track_ids = stream.readUint32Array((this.size-this.hdr_size)/4);\n}\n\n// file:src/parsing/tref.js\nBoxParser.trefBox.prototype.parse = function(stream) {\n\tvar ret;\n\tvar box;\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, true, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = new BoxParser.TrackReferenceTypeBox(ret.type, ret.size, ret.hdr_size, ret.start);\n\t\t\tif (box.write === BoxParser.Box.prototype.write && box.type !== \"mdat\") {\n\t\t\t\tLog.info(\"BoxParser\", \"TrackReference \"+box.type+\" box writing not yet implemented, keeping unparsed data in memory for later write\");\n\t\t\t\tbox.parseDataAndRewind(stream);\n\t\t\t}\n\t\t\tbox.parse(stream);\n\t\t\tthis.boxes.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n}\n\n// file:src/parsing/trep.js\nBoxParser.createFullBoxCtor(\"trep\", \"TrackExtensionPropertiesBox\", function(stream) {\n\tthis.track_ID = stream.readUint32();\n\tthis.boxes = [];\n\twhile (stream.getPosition() < this.start+this.size) {\n\t\tret = BoxParser.parseOneBox(stream, false, this.size - (stream.getPosition() - this.start));\n\t\tif (ret.code === BoxParser.OK) {\n\t\t\tbox = ret.box;\n\t\t\tthis.boxes.push(box);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t}\n});\n\n// file:src/parsing/trex.js\nBoxParser.createFullBoxCtor(\"trex\", \"TrackExtendsBox\", function(stream) {\n\tthis.track_id = stream.readUint32();\n\tthis.default_sample_description_index = stream.readUint32();\n\tthis.default_sample_duration = stream.readUint32();\n\tthis.default_sample_size = stream.readUint32();\n\tthis.default_sample_flags = stream.readUint32();\n});\n\n// file:src/parsing/trpy.js\nBoxParser.createBoxCtor(\"trpy\", \"hintBytesSent\", function(stream) {\n\tthis.bytessent = stream.readUint64();\n});\n\n// file:src/parsing/trun.js\nBoxParser.createFullBoxCtor(\"trun\", \"TrackRunBox\", function(stream) {\n\tvar readBytes = 0;\n\tthis.sample_count = stream.readUint32();\n\treadBytes+= 4;\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TRUN_FLAGS_DATA_OFFSET) ) {\n\t\tthis.data_offset = stream.readInt32(); //signed\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.data_offset = 0;\n\t}\n\tif (this.size - this.hdr_size > readBytes && (this.flags & BoxParser.TRUN_FLAGS_FIRST_FLAG) ) {\n\t\tthis.first_sample_flags = stream.readUint32();\n\t\treadBytes += 4;\n\t} else {\n\t\tthis.first_sample_flags = 0;\n\t}\n\tthis.sample_duration = [];\n\tthis.sample_size = [];\n\tthis.sample_flags = [];\n\tthis.sample_composition_time_offset = [];\n\tif (this.size - this.hdr_size > readBytes) {\n\t\tfor (var i = 0; i < this.sample_count; i++) {\n\t\t\tif (this.flags & BoxParser.TRUN_FLAGS_DURATION) {\n\t\t\t\tthis.sample_duration[i] = stream.readUint32();\n\t\t\t}\n\t\t\tif (this.flags & BoxParser.TRUN_FLAGS_SIZE) {\n\t\t\t\tthis.sample_size[i] = stream.readUint32();\n\t\t\t}\n\t\t\tif (this.flags & BoxParser.TRUN_FLAGS_FLAGS) {\n\t\t\t\tthis.sample_flags[i] = stream.readUint32();\n\t\t\t}\n\t\t\tif (this.flags & BoxParser.TRUN_FLAGS_CTS_OFFSET) {\n\t\t\t\tif (this.version === 0) {\n\t\t\t\t\tthis.sample_composition_time_offset[i] = stream.readUint32();\n\t\t\t\t} else {\n\t\t\t\t\tthis.sample_composition_time_offset[i] = stream.readInt32(); //signed\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n// file:src/parsing/tsel.js\nBoxParser.createFullBoxCtor(\"tsel\", \"TrackSelectionBox\", function(stream) {\n\tthis.switch_group = stream.readUint32();\n\tvar count = (this.size - this.hdr_size - 4)/4;\n\tthis.attribute_list = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.attribute_list[i] = stream.readUint32();\n\t}\n});\n\n// file:src/parsing/txtC.js\nBoxParser.createFullBoxCtor(\"txtC\", \"TextConfigBox\", function(stream) {\n\tthis.config = stream.readCString();\n});\n\n// file:src/parsing/tyco.js\nBoxParser.createBoxCtor(\"tyco\", \"TypeCombinationBox\", function(stream) {\n\tvar count = (this.size - this.hdr_size) / 4;\n\tthis.compatible_brands = [];\n\tfor (var i = 0; i < count; i++) {\n\t\tthis.compatible_brands[i] = stream.readString(4);\n\t}\n});\n\n// file:src/parsing/udes.js\nBoxParser.createFullBoxCtor(\"udes\", \"UserDescriptionProperty\", function(stream) {\n\tthis.lang = stream.readCString();\n\tthis.name = stream.readCString();\n\tthis.description = stream.readCString();\n\tthis.tags = stream.readCString();\n});\n\n// file:src/parsing/uncC.js\nBoxParser.createFullBoxCtor(\"uncC\", \"UncompressedFrameConfigBox\", function(stream) {\n    var i;\n    this.profile = stream.readString(4);\n    if (this.version == 1) {\n        // Nothing - just the profile\n    } else if (this.version == 0) {\n        this.component_count = stream.readUint32();\n        this.component_index = [];\n        this.component_bit_depth_minus_one = [];\n        this.component_format = [];\n        this.component_align_size = [];\n        for (i = 0; i < this.component_count; i++) {\n            this.component_index.push(stream.readUint16());\n            this.component_bit_depth_minus_one.push(stream.readUint8());\n            this.component_format.push(stream.readUint8());\n            this.component_align_size.push(stream.readUint8());\n        }\n        this.sampling_type = stream.readUint8();\n        this.interleave_type = stream.readUint8();\n        this.block_size = stream.readUint8();\n        var flags = stream.readUint8();\n        this.component_little_endian = (flags >> 7) & 0x1;\n        this.block_pad_lsb = (flags >> 6) & 0x1;\n        this.block_little_endian = (flags >> 5) & 0x1;\n        this.block_reversed = (flags >> 4) & 0x1;\n        this.pad_unknown = (flags >> 3) & 0x1;\n        this.pixel_size = stream.readUint32();\n        this.row_align_size = stream.readUint32();\n        this.tile_align_size = stream.readUint32();\n        this.num_tile_cols_minus_one = stream.readUint32();\n        this.num_tile_rows_minus_one = stream.readUint32();\n    }\n});\n\n// file:src/parsing/url.js\nBoxParser.createFullBoxCtor(\"url \", \"DataEntryUrlBox\", function(stream) {\n\tif (this.flags !== 0x000001) {\n\t\tthis.location = stream.readCString();\n\t}\n});\n\n// file:src/parsing/urn.js\nBoxParser.createFullBoxCtor(\"urn \", \"DataEntryUrnBox\", function(stream) {\n\tthis.name = stream.readCString();\n\tif (this.size - this.hdr_size - this.name.length - 1 > 0) {\n\t\tthis.location = stream.readCString();\n\t}\n});\n\n// file:src/parsing/uuid/piff/piffLsm.js\nBoxParser.createUUIDBox(\"a5d40b30e81411ddba2f0800200c9a66\", \"LiveServerManifestBox\", true, false, function(stream) {\n    this.LiveServerManifest = stream.readString(this.size - this.hdr_size)\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#039;\");\n});// file:src/parsing/uuid/piff/piffPssh.js\nBoxParser.createUUIDBox(\"d08a4f1810f34a82b6c832d8aba183d3\", \"PiffProtectionSystemSpecificHeaderBox\", true, false, function(stream) {\n\tthis.system_id = BoxParser.parseHex16(stream);\n\tvar datasize = stream.readUint32();\n\tif (datasize > 0) {\n\t\tthis.data = stream.readUint8Array(datasize);\n\t}\n});\n\n// file:src/parsing/uuid/piff/piffSenc.js\nBoxParser.createUUIDBox(\"a2394f525a9b4f14a2446c427c648df4\", \"PiffSampleEncryptionBox\", true, false /*, function(stream) {\n\tif (this.flags & 0x1) {\n\t\tthis.AlgorithmID = stream.readUint24();\n\t\tthis.IV_size = stream.readUint8();\n\t\tthis.KID = BoxParser.parseHex16(stream);\n\t}\n\tvar sample_count = stream.readUint32();\n\tthis.samples = [];\n\tfor (var i = 0; i < sample_count; i++) {\n\t\tvar sample = {};\n\t\tsample.InitializationVector = this.readUint8Array(this.IV_size*8);\n\t\tif (this.flags & 0x2) {\n\t\t\tsample.subsamples = [];\n\t\t\tsample.NumberOfEntries = stream.readUint16();\n\t\t\tfor (var j = 0; j < sample.NumberOfEntries; j++) {\n\t\t\t\tvar subsample = {};\n\t\t\t\tsubsample.BytesOfClearData = stream.readUint16();\n\t\t\t\tsubsample.BytesOfProtectedData = stream.readUint32();\n\t\t\t\tsample.subsamples.push(subsample);\n\t\t\t}\n\t\t}\n\t\tthis.samples.push(sample);\n\t}\n}*/);\n// file:src/parsing/uuid/piff/piffTenc.js\nBoxParser.createUUIDBox(\"8974dbce7be74c5184f97148f9882554\", \"PiffTrackEncryptionBox\", true, false, function(stream) {\n\tthis.default_AlgorithmID = stream.readUint24();\n\tthis.default_IV_size = stream.readUint8();\n\tthis.default_KID = BoxParser.parseHex16(stream);\n});// file:src/parsing/uuid/piff/piffTfrf.js\nBoxParser.createUUIDBox(\"d4807ef2ca3946958e5426cb9e46a79f\", \"TfrfBox\", true, false, function(stream) {\n    this.fragment_count = stream.readUint8();\n    this.entries = [];\n\n    for (var i = 0; i < this.fragment_count; i++) {\n        var entry = {};\n        var absolute_time = 0;\n        var absolute_duration = 0;\n\n        if (this.version === 1) {\n            absolute_time = stream.readUint64();\n            absolute_duration = stream.readUint64();\n        } else {\n            absolute_time = stream.readUint32();\n            absolute_duration = stream.readUint32();\n        }\n\n        entry.absolute_time = absolute_time;\n        entry.absolute_duration = absolute_duration;\n\n        this.entries.push(entry);\n    }\n});// file:src/parsing/uuid/piff/piffTfxd.js\nBoxParser.createUUIDBox(\"6d1d9b0542d544e680e2141daff757b2\", \"TfxdBox\", true, false, function(stream) {\n    if (this.version === 1) {\n       this.absolute_time = stream.readUint64();\n       this.duration = stream.readUint64();\n    } else {\n       this.absolute_time = stream.readUint32();\n       this.duration = stream.readUint32();\n    }\n});// file:src/parsing/vmhd.js\nBoxParser.createFullBoxCtor(\"vmhd\", \"VideoMediaHeaderBox\", function(stream) {\n\tthis.graphicsmode = stream.readUint16();\n\tthis.opcolor = stream.readUint16Array(3);\n});\n\n// file:src/parsing/vpcC.js\nBoxParser.createFullBoxCtor(\"vpcC\", \"VPCodecConfigurationRecord\", function (stream) {\n\tvar tmp;\n\tif (this.version === 1) {\n\t\tthis.profile = stream.readUint8();\n\t\tthis.level = stream.readUint8();\n\t\ttmp = stream.readUint8();\n\t\tthis.bitDepth = tmp >> 4;\n\t\tthis.chromaSubsampling = (tmp >> 1) & 0x7;\n\t\tthis.videoFullRangeFlag = tmp & 0x1;\n\t\tthis.colourPrimaries = stream.readUint8();\n\t\tthis.transferCharacteristics = stream.readUint8();\n\t\tthis.matrixCoefficients = stream.readUint8();\n\t\tthis.codecIntializationDataSize = stream.readUint16();\n\t\tthis.codecIntializationData = stream.readUint8Array(this.codecIntializationDataSize);\n\t} else {\n\t\tthis.profile = stream.readUint8();\n\t\tthis.level = stream.readUint8();\n\t\ttmp = stream.readUint8();\n\t\tthis.bitDepth = (tmp >> 4) & 0xF;\n\t\tthis.colorSpace = tmp & 0xF;\n\t\ttmp = stream.readUint8();\n\t\tthis.chromaSubsampling = (tmp >> 4) & 0xF;\n\t\tthis.transferFunction = (tmp >> 1) & 0x7;\n\t\tthis.videoFullRangeFlag = tmp & 0x1;\n\t\tthis.codecIntializationDataSize = stream.readUint16();\n\t\tthis.codecIntializationData = stream.readUint8Array(this.codecIntializationDataSize);\n\t}\n});// file:src/parsing/vttC.js\nBoxParser.createBoxCtor(\"vttC\", \"WebVTTConfigurationBox\", function(stream) {\n\tthis.text = stream.readString(this.size - this.hdr_size);\n});\n\n// file:src/parsing/vvcC.js\nBoxParser.createFullBoxCtor(\"vvcC\", \"VvcConfigurationBox\", function (stream) {\n  var i, j;\n\n  // helper object to simplify extracting individual bits\n  var bitReader = {\n    held_bits: undefined,\n    num_held_bits: 0,\n\n    stream_read_1_bytes: function (strm) {\n      this.held_bits = strm.readUint8();\n      this.num_held_bits = 1 * 8;\n    },\n    stream_read_2_bytes: function (strm) {\n      this.held_bits = strm.readUint16();\n      this.num_held_bits = 2 * 8;\n    },\n\n    extract_bits: function (num_bits) {\n      var ret = (this.held_bits >> (this.num_held_bits - num_bits)) & ((1 << num_bits) - 1);\n      this.num_held_bits -= num_bits;\n      return ret;\n    }\n  };\n\n  // VvcDecoderConfigurationRecord\n  bitReader.stream_read_1_bytes(stream);\n  bitReader.extract_bits(5);  // reserved\n  this.lengthSizeMinusOne = bitReader.extract_bits(2);\n  this.ptl_present_flag = bitReader.extract_bits(1);\n\n  if (this.ptl_present_flag) {\n    bitReader.stream_read_2_bytes(stream);\n    this.ols_idx = bitReader.extract_bits(9);\n    this.num_sublayers = bitReader.extract_bits(3);\n    this.constant_frame_rate = bitReader.extract_bits(2);\n    this.chroma_format_idc = bitReader.extract_bits(2);\n\n    bitReader.stream_read_1_bytes(stream);\n    this.bit_depth_minus8 = bitReader.extract_bits(3);\n    bitReader.extract_bits(5);  // reserved\n\n    // VvcPTLRecord\n    {\n      bitReader.stream_read_2_bytes(stream);\n      bitReader.extract_bits(2);  // reserved\n      this.num_bytes_constraint_info = bitReader.extract_bits(6);\n      this.general_profile_idc = bitReader.extract_bits(7);\n      this.general_tier_flag = bitReader.extract_bits(1);\n\n      this.general_level_idc = stream.readUint8();\n\n      bitReader.stream_read_1_bytes(stream);\n      this.ptl_frame_only_constraint_flag = bitReader.extract_bits(1);\n      this.ptl_multilayer_enabled_flag = bitReader.extract_bits(1);\n\n      this.general_constraint_info = new Uint8Array(this.num_bytes_constraint_info);\n      if (this.num_bytes_constraint_info) {\n        for (i = 0; i < this.num_bytes_constraint_info - 1; i++) {\n          var cnstr1 = bitReader.extract_bits(6);\n          bitReader.stream_read_1_bytes(stream);\n          var cnstr2 = bitReader.extract_bits(2);\n\n          this.general_constraint_info[i] = ((cnstr1 << 2) | cnstr2);\n        }\n        this.general_constraint_info[this.num_bytes_constraint_info - 1] = bitReader.extract_bits(6);\n      } else {\n        //forbidden in spec!\n        bitReader.extract_bits(6);\n      }\n\n      if (this.num_sublayers > 1) {\n        bitReader.stream_read_1_bytes(stream);\n        this.ptl_sublayer_present_mask = 0;\n        for (j = this.num_sublayers - 2; j >= 0; --j) {\n          var val = bitReader.extract_bits(1);\n          this.ptl_sublayer_present_mask |= val << j;\n        }\n        for (j = this.num_sublayers; j <= 8 && this.num_sublayers > 1; ++j) {\n          bitReader.extract_bits(1);  // ptl_reserved_zero_bit\n        }\n\n        this.sublayer_level_idc = [];\n        for (j = this.num_sublayers - 2; j >= 0; --j) {\n          if (this.ptl_sublayer_present_mask & (1 << j)) {\n            this.sublayer_level_idc[j] = stream.readUint8();\n          }\n        }\n      }\n\n      this.ptl_num_sub_profiles = stream.readUint8();\n      this.general_sub_profile_idc = [];\n      if (this.ptl_num_sub_profiles) {\n        for (i = 0; i < this.ptl_num_sub_profiles; i++) {\n          this.general_sub_profile_idc.push(stream.readUint32());\n        }\n      }\n    }  // end VvcPTLRecord\n\n    this.max_picture_width = stream.readUint16();\n    this.max_picture_height = stream.readUint16();\n    this.avg_frame_rate = stream.readUint16();\n  }\n\n  var VVC_NALU_OPI = 12;\n  var VVC_NALU_DEC_PARAM = 13;\n\n  this.nalu_arrays = [];\n  var num_of_arrays = stream.readUint8();\n  for (i = 0; i < num_of_arrays; i++) {\n    var nalu_array = [];\n    this.nalu_arrays.push(nalu_array);\n\n    bitReader.stream_read_1_bytes(stream);\n    nalu_array.completeness = bitReader.extract_bits(1);\n    bitReader.extract_bits(2);  // reserved\n    nalu_array.nalu_type = bitReader.extract_bits(5);\n\n    var numNalus = 1;\n    if (nalu_array.nalu_type != VVC_NALU_DEC_PARAM && nalu_array.nalu_type != VVC_NALU_OPI) {\n      numNalus = stream.readUint16();\n    }\n\n    for (j = 0; j < numNalus; j++) {\n      var len = stream.readUint16();\n      nalu_array.push({\n        data: stream.readUint8Array(len),\n        length: len\n      });\n    }\n  }\n});\n// file:src/parsing/vvnC.js\nBoxParser.createFullBoxCtor(\"vvnC\", \"VvcNALUConfigBox\", function (stream) {\n  // VvcNALUConfigBox\n  var tmp = strm.readUint8();\n  this.lengthSizeMinusOne = (tmp & 0x3);\n});\n// file:src/box-codecs.js\nBoxParser.SampleEntry.prototype.isVideo = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.isAudio = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.isSubtitle = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.isMetadata = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.isHint = function() {\n\treturn false;\n}\n\nBoxParser.SampleEntry.prototype.getCodec = function() {\n\treturn this.type.replace('.','');\n}\n\nBoxParser.SampleEntry.prototype.getWidth = function() {\n\treturn \"\";\n}\n\nBoxParser.SampleEntry.prototype.getHeight = function() {\n\treturn \"\";\n}\n\nBoxParser.SampleEntry.prototype.getChannelCount = function() {\n\treturn \"\";\n}\n\nBoxParser.SampleEntry.prototype.getSampleRate = function() {\n\treturn \"\";\n}\n\nBoxParser.SampleEntry.prototype.getSampleSize = function() {\n\treturn \"\";\n}\n\nBoxParser.VisualSampleEntry.prototype.isVideo = function() {\n\treturn true;\n}\n\nBoxParser.VisualSampleEntry.prototype.getWidth = function() {\n\treturn this.width;\n}\n\nBoxParser.VisualSampleEntry.prototype.getHeight = function() {\n\treturn this.height;\n}\n\nBoxParser.AudioSampleEntry.prototype.isAudio = function() {\n\treturn true;\n}\n\nBoxParser.AudioSampleEntry.prototype.getChannelCount = function() {\n\treturn this.channel_count;\n}\n\nBoxParser.AudioSampleEntry.prototype.getSampleRate = function() {\n\treturn this.samplerate;\n}\n\nBoxParser.AudioSampleEntry.prototype.getSampleSize = function() {\n\treturn this.samplesize;\n}\n\nBoxParser.SubtitleSampleEntry.prototype.isSubtitle = function() {\n\treturn true;\n}\n\nBoxParser.MetadataSampleEntry.prototype.isMetadata = function() {\n\treturn true;\n}\n\n\nBoxParser.decimalToHex = function(d, padding) {\n\tvar hex = Number(d).toString(16);\n\tpadding = typeof (padding) === \"undefined\" || padding === null ? padding = 2 : padding;\n\twhile (hex.length < padding) {\n\t\thex = \"0\" + hex;\n\t}\n\treturn hex;\n}\n\nBoxParser.avc1SampleEntry.prototype.getCodec =\nBoxParser.avc2SampleEntry.prototype.getCodec =\nBoxParser.avc3SampleEntry.prototype.getCodec =\nBoxParser.avc4SampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif (this.avcC) {\n\t\treturn baseCodec+\".\"+BoxParser.decimalToHex(this.avcC.AVCProfileIndication)+\n\t\t\t\t\t\t  \"\"+BoxParser.decimalToHex(this.avcC.profile_compatibility)+\n\t\t\t\t\t\t  \"\"+BoxParser.decimalToHex(this.avcC.AVCLevelIndication);\n\t} else {\n\t\treturn baseCodec;\n\t}\n}\n\nBoxParser.hev1SampleEntry.prototype.getCodec =\nBoxParser.hvc1SampleEntry.prototype.getCodec = function() {\n\tvar i;\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif (this.hvcC) {\n\t\tbaseCodec += '.';\n\t\tswitch (this.hvcC.general_profile_space) {\n\t\t\tcase 0:\n\t\t\t\tbaseCodec += '';\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tbaseCodec += 'A';\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tbaseCodec += 'B';\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tbaseCodec += 'C';\n\t\t\t\tbreak;\n\t\t}\n\t\tbaseCodec += this.hvcC.general_profile_idc;\n\t\tbaseCodec += '.';\n\t\tvar val = this.hvcC.general_profile_compatibility;\n\t\tvar reversed = 0;\n\t\tfor (i=0; i<32; i++) {\n\t\t\treversed |= val & 1;\n\t\t\tif (i==31) break;\n\t\t\treversed <<= 1;\n\t\t\tval >>=1;\n\t\t}\n\t\tbaseCodec += BoxParser.decimalToHex(reversed, 0);\n\t\tbaseCodec += '.';\n\t\tif (this.hvcC.general_tier_flag === 0) {\n\t\t\tbaseCodec += 'L';\n\t\t} else {\n\t\t\tbaseCodec += 'H';\n\t\t}\n\t\tbaseCodec += this.hvcC.general_level_idc;\n\t\tvar hasByte = false;\n\t\tvar constraint_string = \"\";\n\t\tfor (i = 5; i >= 0; i--) {\n\t\t\tif (this.hvcC.general_constraint_indicator[i] || hasByte) {\n\t\t\t\tconstraint_string = \".\"+BoxParser.decimalToHex(this.hvcC.general_constraint_indicator[i], 0)+constraint_string;\n\t\t\t\thasByte = true;\n\t\t\t}\n\t\t}\n\t\tbaseCodec += constraint_string;\n\t}\n\treturn baseCodec;\n}\n\nBoxParser.vvc1SampleEntry.prototype.getCodec =\nBoxParser.vvi1SampleEntry.prototype.getCodec = function () {\n\tvar i;\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif (this.vvcC) {\n\t\tbaseCodec += '.' + this.vvcC.general_profile_idc;\n\t\tif (this.vvcC.general_tier_flag) {\n\t\t\tbaseCodec += '.H';\n\t\t} else {\n\t\t\tbaseCodec += '.L';\n\t\t}\n\t\tbaseCodec += this.vvcC.general_level_idc;\n\n\t\tvar constraint_string = \"\";\n\t\tif (this.vvcC.general_constraint_info) {\n\t\t\tvar bytes = [];\n\t\t\tvar byte = 0;\n\t\t\tbyte |= this.vvcC.ptl_frame_only_constraint << 7;\n\t\t\tbyte |= this.vvcC.ptl_multilayer_enabled << 6;\n\t\t\tvar last_nonzero;\n\t\t\tfor (i = 0; i < this.vvcC.general_constraint_info.length; ++i) {\n\t\t\t\tbyte |= (this.vvcC.general_constraint_info[i] >> 2) & 0x3f;\n\t\t\t\tbytes.push(byte);\n\t\t\t\tif (byte) {\n\t\t\t\t\tlast_nonzero = i;\n\t\t\t\t}\n\n\t\t\t\tbyte = (this.vvcC.general_constraint_info[i] >> 2) & 0x03;\n\t\t\t}\n\n\t\t\tif (last_nonzero === undefined) {\n\t\t\t\tconstraint_string = \".CA\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconstraint_string = \".C\"\n\t\t\t\tvar base32_chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\n\t\t\t\tvar held_bits = 0;\n\t\t\t\tvar num_held_bits = 0;\n\t\t\t\tfor (i = 0; i <= last_nonzero; ++i) {\n\t\t\t\t\theld_bits = (held_bits << 8) | bytes[i];\n\t\t\t\t\tnum_held_bits += 8;\n\n\t\t\t\t\twhile (num_held_bits >= 5) {\n\t\t\t\t\t\tvar val = (held_bits >> (num_held_bits - 5)) & 0x1f;\n\t\t\t\t\t\tconstraint_string += base32_chars[val];\n\n\t\t\t\t\t\tnum_held_bits -= 5;\n\t\t\t\t\t\theld_bits &= (1 << num_held_bits) - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (num_held_bits) {\n\t\t\t\t\theld_bits <<= (5 - num_held_bits);  // right-pad with zeros to 5 bits (is this correct?)\n\t\t\t\t\tconstraint_string += base32_chars[held_bits & 0x1f];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tbaseCodec += constraint_string;\n\t}\n\treturn baseCodec;\n}\n\nBoxParser.mp4aSampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif (this.esds && this.esds.esd) {\n\t\tvar oti = this.esds.esd.getOTI();\n\t\tvar dsi = this.esds.esd.getAudioConfig();\n\t\treturn baseCodec+\".\"+BoxParser.decimalToHex(oti)+(dsi ? \".\"+dsi: \"\");\n\t} else {\n\t\treturn baseCodec;\n\t}\n}\n\nBoxParser.stxtSampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tif(this.mime_format) {\n\t\treturn baseCodec + \".\" + this.mime_format;\n\t} else {\n\t\treturn baseCodec\n\t}\n}\n\nBoxParser.vp08SampleEntry.prototype.getCodec =\nBoxParser.vp09SampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tvar level = this.vpcC.level;\n\tif (level == 0) {\n\t\tlevel = \"00\";\n\t}\n\tvar bitDepth = this.vpcC.bitDepth;\n\tif (bitDepth == 8) {\n\t\tbitDepth = \"08\";\n\t}\n\treturn baseCodec + \".0\" + this.vpcC.profile + \".\" + level + \".\" + bitDepth;\n}\n\nBoxParser.av01SampleEntry.prototype.getCodec = function() {\n\tvar baseCodec = BoxParser.SampleEntry.prototype.getCodec.call(this);\n\tvar level = this.av1C.seq_level_idx_0;\n\tif (level < 10) {\n\t\tlevel = \"0\" + level;\n\t}\n\tvar bitdepth;\n\tif (this.av1C.seq_profile === 2 && this.av1C.high_bitdepth === 1) {\n\t\tbitdepth = (this.av1C.twelve_bit === 1) ? \"12\" : \"10\";\n\t} else if ( this.av1C.seq_profile <= 2 ) {\n\t\tbitdepth = (this.av1C.high_bitdepth === 1) ? \"10\" : \"08\";\n\t}\n\t// TODO need to parse the SH to find color config\n\treturn baseCodec+\".\"+this.av1C.seq_profile+\".\"+level+(this.av1C.seq_tier_0?\"H\":\"M\")+\".\"+bitdepth;//+\".\"+this.av1C.monochrome+\".\"+this.av1C.chroma_subsampling_x+\"\"+this.av1C.chroma_subsampling_y+\"\"+this.av1C.chroma_sample_position;\n}\n// file:src/box-write.js\n/* \n * Copyright (c) Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nBoxParser.Box.prototype.writeHeader = function(stream, msg) {\n\tthis.size += 8;\n\tif (this.size > MAX_SIZE) {\n\t\tthis.size += 8;\n\t}\n\tif (this.type === \"uuid\") {\n\t\tthis.size += 16;\n\t}\n\tLog.debug(\"BoxWriter\", \"Writing box \"+this.type+\" of size: \"+this.size+\" at position \"+stream.getPosition()+(msg || \"\"));\n\tif (this.size > MAX_SIZE) {\n\t\tstream.writeUint32(1);\n\t} else {\n\t\tthis.sizePosition = stream.getPosition();\n\t\tstream.writeUint32(this.size);\n\t}\n\tstream.writeString(this.type, null, 4);\n\tif (this.type === \"uuid\") {\n\t\tstream.writeUint8Array(this.uuid);\n\t}\n\tif (this.size > MAX_SIZE) {\n\t\tstream.writeUint64(this.size);\n\t} \n}\n\nBoxParser.FullBox.prototype.writeHeader = function(stream) {\n\tthis.size += 4;\n\tBoxParser.Box.prototype.writeHeader.call(this, stream, \" v=\"+this.version+\" f=\"+this.flags);\n\tstream.writeUint8(this.version);\n\tstream.writeUint24(this.flags);\n}\n\nBoxParser.Box.prototype.write = function(stream) {\n\tif (this.type === \"mdat\") {\n\t\t/* TODO: fix this */\n\t\tif (this.data) {\n\t\t\tthis.size = this.data.length;\n\t\t\tthis.writeHeader(stream);\n\t\t\tstream.writeUint8Array(this.data);\n\t\t}\n\t} else {\n\t\tthis.size = (this.data ? this.data.length : 0);\n\t\tthis.writeHeader(stream);\n\t\tif (this.data) {\n\t\t\tstream.writeUint8Array(this.data);\n\t\t}\n\t}\n}\n\nBoxParser.ContainerBox.prototype.write = function(stream) {\n\tthis.size = 0;\n\tthis.writeHeader(stream);\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tif (this.boxes[i]) {\n\t\t\tthis.boxes[i].write(stream);\n\t\t\tthis.size += this.boxes[i].size;\n\t\t}\n\t}\n\t/* adjusting the size, now that all sub-boxes are known */\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\n}\n\nBoxParser.TrackReferenceTypeBox.prototype.write = function(stream) {\n\tthis.size = this.track_ids.length*4;\n\tthis.writeHeader(stream);\n\tstream.writeUint32Array(this.track_ids);\n}\n\n// file:src/writing/avcC.js\nBoxParser.avcCBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.size = 7;\n\tfor (i = 0; i < this.SPS.length; i++) {\n\t\tthis.size += 2+this.SPS[i].length;\n\t}\n\tfor (i = 0; i < this.PPS.length; i++) {\n\t\tthis.size += 2+this.PPS[i].length;\n\t}\n\tif (this.ext) {\n\t\tthis.size += this.ext.length;\n\t}\n\tthis.writeHeader(stream);\n\tstream.writeUint8(this.configurationVersion);\n\tstream.writeUint8(this.AVCProfileIndication);\n\tstream.writeUint8(this.profile_compatibility);\n\tstream.writeUint8(this.AVCLevelIndication);\n\tstream.writeUint8(this.lengthSizeMinusOne + (63<<2));\n\tstream.writeUint8(this.SPS.length + (7<<5));\n\tfor (i = 0; i < this.SPS.length; i++) {\n\t\tstream.writeUint16(this.SPS[i].length);\n\t\tstream.writeUint8Array(this.SPS[i].nalu);\n\t}\n\tstream.writeUint8(this.PPS.length);\n\tfor (i = 0; i < this.PPS.length; i++) {\n\t\tstream.writeUint16(this.PPS[i].length);\n\t\tstream.writeUint8Array(this.PPS[i].nalu);\n\t}\n\tif (this.ext) {\n\t\tstream.writeUint8Array(this.ext);\n\t}\n}\n\n// file:src/writing/co64.js\nBoxParser.co64Box.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+8*this.chunk_offsets.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.chunk_offsets.length);\n\tfor(i=0; i<this.chunk_offsets.length; i++) {\n\t\tstream.writeUint64(this.chunk_offsets[i]);\n\t}\n}\n\n// file:src/writing/cslg.js\nBoxParser.cslgBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4*5;\n\tthis.writeHeader(stream);\n\tstream.writeInt32(this.compositionToDTSShift);\n\tstream.writeInt32(this.leastDecodeToDisplayDelta);\n\tstream.writeInt32(this.greatestDecodeToDisplayDelta);\n\tstream.writeInt32(this.compositionStartTime);\n\tstream.writeInt32(this.compositionEndTime);\n}\n\n// file:src/writing/ctts.js\nBoxParser.cttsBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+8*this.sample_counts.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sample_counts.length);\n\tfor(i=0; i<this.sample_counts.length; i++) {\n\t\tstream.writeUint32(this.sample_counts[i]);\n\t\tif (this.version === 1) {\n\t\t\tstream.writeInt32(this.sample_offsets[i]); /* signed */\n\t\t} else {\t\t\t\n\t\t\tstream.writeUint32(this.sample_offsets[i]); /* unsigned */\n\t\t}\n\t}\n}\n\n// file:src/writing/dref.js\nBoxParser.drefBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4; //\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.entries.length);\n\tfor (var i = 0; i < this.entries.length; i++) {\n\t\tthis.entries[i].write(stream);\n\t\tthis.size += this.entries[i].size;\n\t}\t\n\t/* adjusting the size, now that all sub-boxes are known */\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\n}\n\n// file:src/writing/elng.js\nBoxParser.elngBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = this.extended_language.length;\n\tthis.writeHeader(stream);\n\tstream.writeString(this.extended_language);\n}\n\n// file:src/writing/elst.js\nBoxParser.elstBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = 4+12*this.entries.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.entries.length);\n\tfor (var i = 0; i < this.entries.length; i++) {\n\t\tvar entry = this.entries[i];\n\t\tstream.writeUint32(entry.segment_duration);\n\t\tstream.writeInt32(entry.media_time);\n\t\tstream.writeInt16(entry.media_rate_integer);\n\t\tstream.writeInt16(entry.media_rate_fraction);\n\t}\n}\n\n// file:src/writing/emsg.js\nBoxParser.emsgBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = 4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1);\n\tthis.writeHeader(stream);\n\tstream.writeCString(this.scheme_id_uri);\n\tstream.writeCString(this.value);\n\tstream.writeUint32(this.timescale);\n\tstream.writeUint32(this.presentation_time_delta);\n\tstream.writeUint32(this.event_duration);\n\tstream.writeUint32(this.id);\n\tstream.writeUint8Array(this.message_data);\n}\n\n// file:src/writing/ftyp.js\nBoxParser.ftypBox.prototype.write = function(stream) {\n\tthis.size = 8+4*this.compatible_brands.length;\n\tthis.writeHeader(stream);\n\tstream.writeString(this.major_brand, null, 4);\n\tstream.writeUint32(this.minor_version);\n\tfor (var i = 0; i < this.compatible_brands.length; i++) {\n\t\tstream.writeString(this.compatible_brands[i], null, 4);\n\t}\n}\n\n// file:src/writing/hdlr.js\nBoxParser.hdlrBox.prototype.write = function(stream) {\n\tthis.size = 5*4+this.name.length+1;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(0);\n\tstream.writeString(this.handler, null, 4);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeCString(this.name);\n}\n\n// file:src/writing/hvcC.js\nBoxParser.hvcCBox.prototype.write = function(stream) {\n    var i,j;\n    this.size = 23;\n\n    for (i = 0; i < this.nalu_arrays.length; i++) {\n      this.size += 3;\n      for (j = 0; j < this.nalu_arrays[i].length; j++) {\n        this.size += 2 + this.nalu_arrays[i][j].data.length;\n      }\n    }\n\n    this.writeHeader(stream);\n\n    stream.writeUint8(this.configurationVersion);\n    stream.writeUint8((this.general_profile_space << 6) +\n                      (this.general_tier_flag << 5) +\n                      this.general_profile_idc);\n    stream.writeUint32(this.general_profile_compatibility);\n    stream.writeUint8Array(this.general_constraint_indicator);\n    stream.writeUint8(this.general_level_idc);\n    stream.writeUint16(this.min_spatial_segmentation_idc + (15<<24));\n    stream.writeUint8(this.parallelismType + (63<<2));\n    stream.writeUint8(this.chroma_format_idc + (63<<2));\n    stream.writeUint8(this.bit_depth_luma_minus8 + (31<<3));\n    stream.writeUint8(this.bit_depth_chroma_minus8 + (31<<3));\n    stream.writeUint16(this.avgFrameRate);\n    stream.writeUint8((this.constantFrameRate<<6) +\n                   (this.numTemporalLayers<<3) +\n                   (this.temporalIdNested<<2) +\n                   this.lengthSizeMinusOne);\n    stream.writeUint8(this.nalu_arrays.length);\n    for (i = 0; i < this.nalu_arrays.length; i++) {\n      // bit(1) array_completeness + bit(1) reserved = 0 + bit(6) nal_unit_type\n      stream.writeUint8((this.nalu_arrays[i].completeness<<7) +\n                         this.nalu_arrays[i].nalu_type);\n      stream.writeUint16(this.nalu_arrays[i].length);\n      for (j = 0; j < this.nalu_arrays[i].length; j++) {\n        stream.writeUint16(this.nalu_arrays[i][j].data.length);\n        stream.writeUint8Array(this.nalu_arrays[i][j].data);\n      }\n    }\n}\n// file:src/writing/kind.js\nBoxParser.kindBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = (this.schemeURI.length+1)+(this.value.length+1);\n\tthis.writeHeader(stream);\n\tstream.writeCString(this.schemeURI);\n\tstream.writeCString(this.value);\n}\n\n// file:src/writing/mdhd.js\nBoxParser.mdhdBox.prototype.write = function(stream) {\n\tthis.size = 4*4+2*2;\n\tthis.flags = 0;\n\tthis.version = 0;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.creation_time);\n\tstream.writeUint32(this.modification_time);\n\tstream.writeUint32(this.timescale);\n\tstream.writeUint32(this.duration);\n\tstream.writeUint16(this.language);\n\tstream.writeUint16(0);\n}\n\n// file:src/writing/mehd.js\nBoxParser.mehdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.fragment_duration);\n}\n\n// file:src/writing/mfhd.js\nBoxParser.mfhdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sequence_number);\n}\n\n// file:src/writing/mvhd.js\nBoxParser.mvhdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 23*4+2*2;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.creation_time);\n\tstream.writeUint32(this.modification_time);\n\tstream.writeUint32(this.timescale);\n\tstream.writeUint32(this.duration);\n\tstream.writeUint32(this.rate);\n\tstream.writeUint16(this.volume<<8);\n\tstream.writeUint16(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32Array(this.matrix);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(this.next_track_id);\n}\n\n// file:src/writing/sampleentry.js\nBoxParser.SampleEntry.prototype.writeHeader = function(stream) {\n\tthis.size = 8;\n\tBoxParser.Box.prototype.writeHeader.call(this, stream);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint8(0);\n\tstream.writeUint16(this.data_reference_index);\n}\n\nBoxParser.SampleEntry.prototype.writeFooter = function(stream) {\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tthis.boxes[i].write(stream);\n\t\tthis.size += this.boxes[i].size;\n\t}\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\t\n}\n\nBoxParser.SampleEntry.prototype.write = function(stream) {\n\tthis.writeHeader(stream);\n\tstream.writeUint8Array(this.data);\n\tthis.size += this.data.length;\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\t\n}\n\nBoxParser.VisualSampleEntry.prototype.write = function(stream) {\n\tthis.writeHeader(stream);\n\tthis.size += 2*7+6*4+32;\n\tstream.writeUint16(0); \n\tstream.writeUint16(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint16(this.width);\n\tstream.writeUint16(this.height);\n\tstream.writeUint32(this.horizresolution);\n\tstream.writeUint32(this.vertresolution);\n\tstream.writeUint32(0);\n\tstream.writeUint16(this.frame_count);\n\tstream.writeUint8(Math.min(31, this.compressorname.length));\n\tstream.writeString(this.compressorname, null, 31);\n\tstream.writeUint16(this.depth);\n\tstream.writeInt16(-1);\n\tthis.writeFooter(stream);\n}\n\nBoxParser.AudioSampleEntry.prototype.write = function(stream) {\n\tthis.writeHeader(stream);\n\tthis.size += 2*4+3*4;\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeUint16(this.channel_count);\n\tstream.writeUint16(this.samplesize);\n\tstream.writeUint16(0);\n\tstream.writeUint16(0);\n\tstream.writeUint32(this.samplerate<<16);\n\tthis.writeFooter(stream);\n}\n\nBoxParser.stppSampleEntry.prototype.write = function(stream) {\n\tthis.writeHeader(stream);\n\tthis.size += this.namespace.length+1+\n\t\t\t\t this.schema_location.length+1+\n\t\t\t\t this.auxiliary_mime_types.length+1;\n\tstream.writeCString(this.namespace);\n\tstream.writeCString(this.schema_location);\n\tstream.writeCString(this.auxiliary_mime_types);\n\tthis.writeFooter(stream);\n}\n\n// file:src/writing/samplegroups/samplegroup.js\nBoxParser.SampleGroupEntry.prototype.write = function(stream) {\n\tstream.writeUint8Array(this.data);\n}\n\n// file:src/writing/sbgp.js\nBoxParser.sbgpBox.prototype.write = function(stream) {\n\tthis.version = 1;\t\n\tthis.flags = 0;\n\tthis.size = 12+8*this.entries.length;\n\tthis.writeHeader(stream);\n\tstream.writeString(this.grouping_type, null, 4);\n\tstream.writeUint32(this.grouping_type_parameter);\n\tstream.writeUint32(this.entries.length);\n\tfor (var i = 0; i < this.entries.length; i++) {\n\t\tvar entry = this.entries[i];\n\t\tstream.writeInt32(entry.sample_count);\n\t\tstream.writeInt32(entry.group_description_index);\n\t}\n}\n\n// file:src/writing/sgpd.js\nBoxParser.sgpdBox.prototype.write = function(stream) {\n\tvar i;\n\tvar entry;\n\t// leave version as read\n\t// this.version;\n\tthis.flags = 0;\n\tthis.size = 12;\n\tfor (i = 0; i < this.entries.length; i++) {\n\t\tentry = this.entries[i];\n\t\tif (this.version === 1) {\n\t\t\tif (this.default_length === 0) {\n\t\t\t\tthis.size += 4;\n\t\t\t}\n\t\t\tthis.size += entry.data.length;\n\t\t}\n\t}\n\tthis.writeHeader(stream);\n\tstream.writeString(this.grouping_type, null, 4);\n\tif (this.version === 1) {\n\t\tstream.writeUint32(this.default_length);\n\t}\n\tif (this.version >= 2) {\n\t\tstream.writeUint32(this.default_sample_description_index);\n\t}\n\tstream.writeUint32(this.entries.length);\n\tfor (i = 0; i < this.entries.length; i++) {\n\t\tentry = this.entries[i];\n\t\tif (this.version === 1) {\n\t\t\tif (this.default_length === 0) {\n\t\t\t\tstream.writeUint32(entry.description_length);\n\t\t\t}\n\t\t}\n\t\tentry.write(stream);\n\t}\n}\n\n\n// file:src/writing/sidx.js\nBoxParser.sidxBox.prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = 4*4+2+2+12*this.references.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.reference_ID);\n\tstream.writeUint32(this.timescale);\n\tstream.writeUint32(this.earliest_presentation_time);\n\tstream.writeUint32(this.first_offset);\n\tstream.writeUint16(0);\n\tstream.writeUint16(this.references.length);\n\tfor (var i = 0; i < this.references.length; i++) {\n\t\tvar ref = this.references[i];\n\t\tstream.writeUint32(ref.reference_type << 31 | ref.referenced_size);\n\t\tstream.writeUint32(ref.subsegment_duration);\n\t\tstream.writeUint32(ref.starts_with_SAP << 31 | ref.SAP_type << 28 | ref.SAP_delta_time);\n\t}\n}\n\n// file:src/writing/smhd.js\nBoxParser.smhdBox.prototype.write = function(stream) {\n  var i;\n  this.version = 0;\n  this.flags = 1;\n  this.size = 4;\n  this.writeHeader(stream);\n  stream.writeUint16(this.balance);\n  stream.writeUint16(0);\n}\n// file:src/writing/stco.js\nBoxParser.stcoBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+4*this.chunk_offsets.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.chunk_offsets.length);\n\tstream.writeUint32Array(this.chunk_offsets);\n}\n\n// file:src/writing/stsc.js\nBoxParser.stscBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+12*this.first_chunk.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.first_chunk.length);\n\tfor(i=0; i<this.first_chunk.length; i++) {\n\t\tstream.writeUint32(this.first_chunk[i]);\n\t\tstream.writeUint32(this.samples_per_chunk[i]);\n\t\tstream.writeUint32(this.sample_description_index[i]);\n\t}\n}\n\n// file:src/writing/stsd.js\nBoxParser.stsdBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 0;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.entries.length);\n\tthis.size += 4;\n\tfor (i = 0; i < this.entries.length; i++) {\n\t\tthis.entries[i].write(stream);\n\t\tthis.size += this.entries[i].size;\n\t}\n\t/* adjusting the size, now that all sub-boxes are known */\n\tLog.debug(\"BoxWriter\", \"Adjusting box \"+this.type+\" with new size \"+this.size);\n\tstream.adjustUint32(this.sizePosition, this.size);\n}\n\n// file:src/writing/stsh.js\nBoxParser.stshBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+8*this.shadowed_sample_numbers.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.shadowed_sample_numbers.length);\n\tfor(i=0; i<this.shadowed_sample_numbers.length; i++) {\n\t\tstream.writeUint32(this.shadowed_sample_numbers[i]);\n\t\tstream.writeUint32(this.sync_sample_numbers[i]);\n\t}\n}\n\n// file:src/writing/stss.js\nBoxParser.stssBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+4*this.sample_numbers.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sample_numbers.length);\n\tstream.writeUint32Array(this.sample_numbers);\n}\n\n// file:src/writing/stsz.js\nBoxParser.stszBox.prototype.write = function(stream) {\n\tvar i;\n\tvar constant = true;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tif (this.sample_sizes.length > 0) {\n\t\ti = 0;\n\t\twhile (i+1 < this.sample_sizes.length) {\n\t\t\tif (this.sample_sizes[i+1] !==  this.sample_sizes[0]) {\n\t\t\t\tconstant = false;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconstant = false;\n\t}\n\tthis.size = 8;\n\tif (!constant) {\n\t\tthis.size += 4*this.sample_sizes.length;\n\t}\n\tthis.writeHeader(stream);\n\tif (!constant) {\n\t\tstream.writeUint32(0);\n\t} else {\n\t\tstream.writeUint32(this.sample_sizes[0]);\n\t}\n\tstream.writeUint32(this.sample_sizes.length);\n\tif (!constant) {\n\t\tstream.writeUint32Array(this.sample_sizes);\n\t}\t\n}\n\n// file:src/writing/stts.js\nBoxParser.sttsBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4+8*this.sample_counts.length;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sample_counts.length);\n\tfor(i=0; i<this.sample_counts.length; i++) {\n\t\tstream.writeUint32(this.sample_counts[i]);\n\t\tstream.writeUint32(this.sample_deltas[i]);\n\t}\n}\n\n// file:src/writing/tfdt.js\nBoxParser.tfdtBox.prototype.write = function(stream) {\n\tvar UINT32_MAX = Math.pow(2, 32) - 1;\n\t// use version 1 if baseMediaDecodeTime does not fit 32 bits\n\tthis.version = this.baseMediaDecodeTime > UINT32_MAX ? 1 : 0;\n\tthis.flags = 0;\n\tthis.size = 4;\n\tif (this.version === 1) {\n\t\tthis.size += 4;\n\t}\n\tthis.writeHeader(stream);\n\tif (this.version === 1) {\n\t\tstream.writeUint64(this.baseMediaDecodeTime);\n\t} else {\n\t\tstream.writeUint32(this.baseMediaDecodeTime);\n\t}\n}\n\n// file:src/writing/tfhd.js\nBoxParser.tfhdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.size = 4;\n\tif (this.flags & BoxParser.TFHD_FLAG_BASE_DATA_OFFSET) {\n\t\tthis.size += 8;\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DESC) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DUR) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_SIZE) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_FLAGS) {\n\t\tthis.size += 4;\n\t}\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.track_id);\n\tif (this.flags & BoxParser.TFHD_FLAG_BASE_DATA_OFFSET) {\n\t\tstream.writeUint64(this.base_data_offset);\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DESC) {\n\t\tstream.writeUint32(this.default_sample_description_index);\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_DUR) {\n\t\tstream.writeUint32(this.default_sample_duration);\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_SIZE) {\n\t\tstream.writeUint32(this.default_sample_size);\n\t}\n\tif (this.flags & BoxParser.TFHD_FLAG_SAMPLE_FLAGS) {\n\t\tstream.writeUint32(this.default_sample_flags);\n\t}\n}\n\n// file:src/writing/tkhd.js\nBoxParser.tkhdBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\t//this.flags = 0;\n\tthis.size = 4*18+2*4;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.creation_time);\n\tstream.writeUint32(this.modification_time);\n\tstream.writeUint32(this.track_id);\n\tstream.writeUint32(0);\n\tstream.writeUint32(this.duration);\n\tstream.writeUint32(0);\n\tstream.writeUint32(0);\n\tstream.writeInt16(this.layer);\n\tstream.writeInt16(this.alternate_group);\n\tstream.writeInt16(this.volume<<8);\n\tstream.writeUint16(0);\n\tstream.writeInt32Array(this.matrix);\n\tstream.writeUint32(this.width);\n\tstream.writeUint32(this.height);\n}\n\n// file:src/writing/trex.js\nBoxParser.trexBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.flags = 0;\n\tthis.size = 4*5;\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.track_id);\n\tstream.writeUint32(this.default_sample_description_index);\n\tstream.writeUint32(this.default_sample_duration);\n\tstream.writeUint32(this.default_sample_size);\n\tstream.writeUint32(this.default_sample_flags);\n}\n\n// file:src/writing/trun.js\nBoxParser.trunBox.prototype.write = function(stream) {\n\tthis.version = 0;\n\tthis.size = 4;\n\tif (this.flags & BoxParser.TRUN_FLAGS_DATA_OFFSET) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_FIRST_FLAG) {\n\t\tthis.size += 4;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_DURATION) {\n\t\tthis.size += 4*this.sample_duration.length;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_SIZE) {\n\t\tthis.size += 4*this.sample_size.length;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_FLAGS) {\n\t\tthis.size += 4*this.sample_flags.length;\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_CTS_OFFSET) {\n\t\tthis.size += 4*this.sample_composition_time_offset.length;\n\t}\n\tthis.writeHeader(stream);\n\tstream.writeUint32(this.sample_count);\n\tif (this.flags & BoxParser.TRUN_FLAGS_DATA_OFFSET) {\n\t\tthis.data_offset_position = stream.getPosition();\n\t\tstream.writeInt32(this.data_offset); //signed\n\t}\n\tif (this.flags & BoxParser.TRUN_FLAGS_FIRST_FLAG) {\n\t\tstream.writeUint32(this.first_sample_flags);\n\t}\n\tfor (var i = 0; i < this.sample_count; i++) {\n\t\tif (this.flags & BoxParser.TRUN_FLAGS_DURATION) {\n\t\t\tstream.writeUint32(this.sample_duration[i]);\n\t\t}\n\t\tif (this.flags & BoxParser.TRUN_FLAGS_SIZE) {\n\t\t\tstream.writeUint32(this.sample_size[i]);\n\t\t}\n\t\tif (this.flags & BoxParser.TRUN_FLAGS_FLAGS) {\n\t\t\tstream.writeUint32(this.sample_flags[i]);\n\t\t}\n\t\tif (this.flags & BoxParser.TRUN_FLAGS_CTS_OFFSET) {\n\t\t\tif (this.version === 0) {\n\t\t\t\tstream.writeUint32(this.sample_composition_time_offset[i]);\n\t\t\t} else {\n\t\t\t\tstream.writeInt32(this.sample_composition_time_offset[i]); //signed\n\t\t\t}\n\t\t}\n\t}\t\t\n}\n\n// file:src/writing/url.js\nBoxParser[\"url Box\"].prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tif (this.location) {\n\t\tthis.flags = 0;\n\t\tthis.size = this.location.length+1;\n\t} else {\n\t\tthis.flags = 0x000001;\n\t\tthis.size = 0;\n\t}\n\tthis.writeHeader(stream);\n\tif (this.location) {\n\t\tstream.writeCString(this.location);\n\t}\n}\n\n// file:src/writing/urn.js\nBoxParser[\"urn Box\"].prototype.write = function(stream) {\n\tthis.version = 0;\t\n\tthis.flags = 0;\n\tthis.size = this.name.length+1+(this.location ? this.location.length+1 : 0);\n\tthis.writeHeader(stream);\n\tstream.writeCString(this.name);\n\tif (this.location) {\n\t\tstream.writeCString(this.location);\n\t}\n}\n\n// file:src/writing/vmhd.js\nBoxParser.vmhdBox.prototype.write = function(stream) {\n\tvar i;\n\tthis.version = 0;\n\tthis.flags = 1;\n\tthis.size = 8;\n\tthis.writeHeader(stream);\n\tstream.writeUint16(this.graphicsmode);\n\tstream.writeUint16Array(this.opcolor);\n}\n\n// file:src/box-unpack.js\n/* \n * Copyright (c) Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nBoxParser.cttsBox.prototype.unpack = function(samples) {\n\tvar i, j, k;\n\tk = 0;\n\tfor (i = 0; i < this.sample_counts.length; i++) {\n\t\tfor (j = 0; j < this.sample_counts[i]; j++) {\n\t\t\tsamples[k].pts = samples[k].dts + this.sample_offsets[i];\n\t\t\tk++;\n\t\t}\n\t}\n}\n\nBoxParser.sttsBox.prototype.unpack = function(samples) {\n\tvar i, j, k;\n\tk = 0;\n\tfor (i = 0; i < this.sample_counts.length; i++) {\n\t\tfor (j = 0; j < this.sample_counts[i]; j++) {\n\t\t\tif (k === 0) {\n\t\t\t\tsamples[k].dts = 0;\n\t\t\t} else {\n\t\t\t\tsamples[k].dts = samples[k-1].dts + this.sample_deltas[i];\n\t\t\t}\n\t\t\tk++;\n\t\t}\n\t}\n}\n\nBoxParser.stcoBox.prototype.unpack = function(samples) {\n\tvar i;\n\tfor (i = 0; i < this.chunk_offsets.length; i++) {\n\t\tsamples[i].offset = this.chunk_offsets[i];\n\t}\n}\n\nBoxParser.stscBox.prototype.unpack = function(samples) {\n\tvar i, j, k, l, m;\n\tl = 0;\n\tm = 0;\n\tfor (i = 0; i < this.first_chunk.length; i++) {\n\t\tfor (j = 0; j < (i+1 < this.first_chunk.length ? this.first_chunk[i+1] : Infinity); j++) {\n\t\t\tm++;\n\t\t\tfor (k = 0; k < this.samples_per_chunk[i]; k++) {\n\t\t\t\tif (samples[l]) {\n\t\t\t\t\tsamples[l].description_index = this.sample_description_index[i];\n\t\t\t\t\tsamples[l].chunk_index = m;\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tl++;\n\t\t\t}\t\t\t\n\t\t}\n\t}\n}\n\nBoxParser.stszBox.prototype.unpack = function(samples) {\n\tvar i;\n\tfor (i = 0; i < this.sample_sizes.length; i++) {\n\t\tsamples[i].size = this.sample_sizes[i];\n\t}\n}\n// file:src/box-diff.js\n\nBoxParser.DIFF_BOXES_PROP_NAMES = [ \"boxes\", \"entries\", \"references\", \"subsamples\",\n\t\t\t\t\t \t \"items\", \"item_infos\", \"extents\", \"associations\",\n\t\t\t\t\t \t \"subsegments\", \"ranges\", \"seekLists\", \"seekPoints\",\n\t\t\t\t\t \t \"esd\", \"levels\"];\n\nBoxParser.DIFF_PRIMITIVE_ARRAY_PROP_NAMES = [ \"compatible_brands\", \"matrix\", \"opcolor\", \"sample_counts\", \"sample_deltas\",\n\"first_chunk\", \"samples_per_chunk\", \"sample_sizes\", \"chunk_offsets\", \"sample_offsets\", \"sample_description_index\", \"sample_duration\" ];\n\nBoxParser.boxEqualFields = function(box_a, box_b) {\n\tif (box_a && !box_b) return false;\n\tvar prop;\n\tfor (prop in box_a) {\n\t\tif (BoxParser.DIFF_BOXES_PROP_NAMES.indexOf(prop) > -1) {\n\t\t\tcontinue;\n\t\t// } else if (excluded_fields && excluded_fields.indexOf(prop) > -1) {\n\t\t// \tcontinue;\n\t\t} else if (box_a[prop] instanceof BoxParser.Box || box_b[prop] instanceof BoxParser.Box) {\n\t\t\tcontinue;\n\t\t} else if (typeof box_a[prop] === \"undefined\" || typeof box_b[prop] === \"undefined\") {\n\t\t\tcontinue;\n\t\t} else if (typeof box_a[prop] === \"function\" || typeof box_b[prop] === \"function\") {\n\t\t\tcontinue;\n\t\t} else if (\n\t\t\t(box_a.subBoxNames && box_a.subBoxNames.indexOf(prop.slice(0,4)) > -1) ||\n\t\t\t(box_b.subBoxNames && box_b.subBoxNames.indexOf(prop.slice(0,4)) > -1))  {\n\t\t\tcontinue;\n\t\t} else {\n\t\t\tif (prop === \"data\" || prop === \"start\" || prop === \"size\" || prop === \"creation_time\" || prop === \"modification_time\") {\n\t\t\t\tcontinue;\n\t\t\t} else if (BoxParser.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(prop) > -1) {\n\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\tif (box_a[prop] !== box_b[prop]) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n\nBoxParser.boxEqual = function(box_a, box_b) {\n\tif (!BoxParser.boxEqualFields(box_a, box_b)) {\n\t\treturn false;\n\t}\n\tfor (var j = 0; j < BoxParser.DIFF_BOXES_PROP_NAMES.length; j++) {\n\t\tvar name = BoxParser.DIFF_BOXES_PROP_NAMES[j];\n\t\tif (box_a[name] && box_b[name]) {\n\t\t\tif (!BoxParser.boxEqual(box_a[name], box_b[name])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n// file:src/text-mp4.js\n/* \n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar VTTin4Parser = function() {\t\n}\n\nVTTin4Parser.prototype.parseSample = function(data) {\n\tvar cues, cue;\n\tvar stream = new MP4BoxStream(data.buffer);\n\tcues = [];\n\twhile (!stream.isEos()) {\n\t\tcue = BoxParser.parseOneBox(stream, false);\n\t\tif (cue.code === BoxParser.OK && cue.box.type === \"vttc\") {\n\t\t\tcues.push(cue.box);\n\t\t}\t\t\n\t}\n\treturn cues;\n}\n\nVTTin4Parser.prototype.getText = function (startTime, endTime, data) {\n\tfunction pad(n, width, z) {\n\t  z = z || '0';\n\t  n = n + '';\n\t  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n\t}\n\tfunction secToTimestamp(insec) {\n\t\tvar h = Math.floor(insec/3600);\n\t\tvar m = Math.floor((insec - h*3600)/60);\n\t\tvar s = Math.floor(insec - h*3600 - m*60);\n\t\tvar ms = Math.floor((insec - h*3600 - m*60 - s)*1000);\n\t\treturn \"\"+pad(h, 2)+\":\"+pad(m,2)+\":\"+pad(s, 2)+\".\"+pad(ms, 3);\n\t}\n\tvar cues = this.parseSample(data);\n\tvar string = \"\";\n\tfor (var i = 0; i < cues.length; i++) {\n\t\tvar cueIn4 = cues[i];\n\t\tstring += secToTimestamp(startTime)+\" --> \"+secToTimestamp(endTime)+\"\\r\\n\";\n\t\tstring += cueIn4.payl.text;\n\t}\n\treturn string;\n}\n\nvar XMLSubtitlein4Parser = function() {\t\n}\n\nXMLSubtitlein4Parser.prototype.parseSample = function(sample) {\n\tvar res = {};\t\n\tvar i;\n\tres.resources = [];\n\tvar stream = new MP4BoxStream(sample.data.buffer);\n\tif (!sample.subsamples || sample.subsamples.length === 0) {\n\t\tres.documentString = stream.readString(sample.data.length);\n\t} else {\n\t\tres.documentString = stream.readString(sample.subsamples[0].size);\n\t\tif (sample.subsamples.length > 1) {\n\t\t\tfor (i = 1; i < sample.subsamples.length; i++) {\n\t\t\t\tres.resources[i] = stream.readUint8Array(sample.subsamples[i].size);\n\t\t\t}\n\t\t}\n\t}\n\tif (typeof (DOMParser) !== \"undefined\") {\n\t\tres.document = (new DOMParser()).parseFromString(res.documentString, \"application/xml\");\n\t}\n\treturn res;\n}\n\nvar Textin4Parser = function() {\t\n}\n\nTextin4Parser.prototype.parseSample = function(sample) {\n\tvar textString;\n\tvar stream = new MP4BoxStream(sample.data.buffer);\n\ttextString = stream.readString(sample.data.length);\n\treturn textString;\n}\n\nTextin4Parser.prototype.parseConfig = function(data) {\n\tvar textString;\n\tvar stream = new MP4BoxStream(data.buffer);\n\tstream.readUint32(); // version & flags\n\ttextString = stream.readCString();\n\treturn textString;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.VTTin4Parser = VTTin4Parser;\n\texports.XMLSubtitlein4Parser = XMLSubtitlein4Parser;\n\texports.Textin4Parser = Textin4Parser;\n}\n// file:src/isofile.js\n/*\n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar ISOFile = function (stream) {\n\t/* MutiBufferStream object used to parse boxes */\n\tthis.stream = stream || new MultiBufferStream();\n\t/* Array of all boxes (in order) found in the file */\n\tthis.boxes = [];\n\t/* Array of all mdats */\n\tthis.mdats = [];\n\t/* Array of all moofs */\n\tthis.moofs = [];\n\t/* Boolean indicating if the file is compatible with progressive parsing (moov first) */\n\tthis.isProgressive = false;\n\t/* Boolean used to fire moov start event only once */\n\tthis.moovStartFound = false;\n\t/* Callback called when the moov parsing starts */\n\tthis.onMoovStart = null;\n\t/* Boolean keeping track of the call to onMoovStart, to avoid double calls */\n\tthis.moovStartSent = false;\n\t/* Callback called when the moov is entirely parsed */\n\tthis.onReady = null;\n\t/* Boolean keeping track of the call to onReady, to avoid double calls */\n\tthis.readySent = false;\n\t/* Callback to call when segments are ready */\n\tthis.onSegment = null;\n\t/* Callback to call when samples are ready */\n\tthis.onSamples = null;\n\t/* Callback to call when there is an error in the parsing or processing of samples */\n\tthis.onError = null;\n\t/* Boolean indicating if the moov box run-length encoded tables of sample information have been processed */\n\tthis.sampleListBuilt = false;\n\t/* Array of Track objects for which fragmentation of samples is requested */\n\tthis.fragmentedTracks = [];\n\t/* Array of Track objects for which extraction of samples is requested */\n\tthis.extractedTracks = [];\n\t/* Boolean indicating that fragmention is ready */\n\tthis.isFragmentationInitialized = false;\n\t/* Boolean indicating that fragmented has started */\n\tthis.sampleProcessingStarted = false;\n\t/* Number of the next 'moof' to generate when fragmenting */\n\tthis.nextMoofNumber = 0;\n\t/* Boolean indicating if the initial list of items has been produced */\n\tthis.itemListBuilt = false;\n\t/* Array of items */\n\tthis.items = [];\n\t/* Array of entity groups */\n\tthis.entity_groups = [];\n\t/* Callback called when the sidx box is entirely parsed */\n\tthis.onSidx = null;\n\t/* Boolean keeping track of the call to onSidx, to avoid double calls */\n\tthis.sidxSent = false;\n}\n\nISOFile.prototype.setSegmentOptions = function(id, user, options) {\n\tvar trak = this.getTrackById(id);\n\tif (trak) {\n\t\tvar fragTrack = {};\n\t\tthis.fragmentedTracks.push(fragTrack);\n\t\tfragTrack.id = id;\n\t\tfragTrack.user = user;\n\t\tfragTrack.trak = trak;\n\t\ttrak.nextSample = 0;\n\t\tfragTrack.segmentStream = null;\n\t\tfragTrack.nb_samples = 1000;\n\t\tfragTrack.rapAlignement = true;\n\t\tif (options) {\n\t\t\tif (options.nbSamples) fragTrack.nb_samples = options.nbSamples;\n\t\t\tif (options.rapAlignement) fragTrack.rapAlignement = options.rapAlignement;\n\t\t}\n\t}\n}\n\nISOFile.prototype.unsetSegmentOptions = function(id) {\n\tvar index = -1;\n\tfor (var i = 0; i < this.fragmentedTracks.length; i++) {\n\t\tvar fragTrack = this.fragmentedTracks[i];\n\t\tif (fragTrack.id == id) {\n\t\t\tindex = i;\n\t\t}\n\t}\n\tif (index > -1) {\n\t\tthis.fragmentedTracks.splice(index, 1);\n\t}\n}\n\nISOFile.prototype.setExtractionOptions = function(id, user, options) {\n\tvar trak = this.getTrackById(id);\n\tif (trak) {\n\t\tvar extractTrack = {};\n\t\tthis.extractedTracks.push(extractTrack);\n\t\textractTrack.id = id;\n\t\textractTrack.user = user;\n\t\textractTrack.trak = trak;\n\t\ttrak.nextSample = 0;\n\t\textractTrack.nb_samples = 1000;\n\t\textractTrack.samples = [];\n\t\tif (options) {\n\t\t\tif (options.nbSamples) extractTrack.nb_samples = options.nbSamples;\n\t\t}\n\t}\n}\n\nISOFile.prototype.unsetExtractionOptions = function(id) {\n\tvar index = -1;\n\tfor (var i = 0; i < this.extractedTracks.length; i++) {\n\t\tvar extractTrack = this.extractedTracks[i];\n\t\tif (extractTrack.id == id) {\n\t\t\tindex = i;\n\t\t}\n\t}\n\tif (index > -1) {\n\t\tthis.extractedTracks.splice(index, 1);\n\t}\n}\n\nISOFile.prototype.parse = function() {\n\tvar found;\n\tvar ret;\n\tvar box;\n\tvar parseBoxHeadersOnly = false;\n\n\tif (this.restoreParsePosition)\t{\n\t\tif (!this.restoreParsePosition()) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\twhile (true) {\n\n\t\tif (this.hasIncompleteMdat && this.hasIncompleteMdat()) {\n\t\t\tif (this.processIncompleteMdat()) {\n\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.saveParsePosition)\t{\n\t\t\t\tthis.saveParsePosition();\n\t\t\t}\n\t\t\tret = BoxParser.parseOneBox(this.stream, parseBoxHeadersOnly);\n\t\t\tif (ret.code === BoxParser.ERR_NOT_ENOUGH_DATA) {\n\t\t\t\tif (this.processIncompleteBox) {\n\t\t\t\t\tif (this.processIncompleteBox(ret)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar box_type;\n\t\t\t\t/* the box is entirely parsed */\n\t\t\t\tbox = ret.box;\n\t\t\t\tbox_type = (box.type !== \"uuid\" ? box.type : box.uuid);\n\t\t\t\t/* store the box in the 'boxes' array to preserve box order (for file rewrite if needed)  */\n\t\t\t\tthis.boxes.push(box);\n\t\t\t\t/* but also store box in a property for more direct access */\n\t\t\t\tswitch (box_type) {\n\t\t\t\t\tcase \"mdat\":\n\t\t\t\t\t\tthis.mdats.push(box);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"moof\":\n\t\t\t\t\t\tthis.moofs.push(box);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"moov\":\n\t\t\t\t\t\tthis.moovStartFound = true;\n\t\t\t\t\t\tif (this.mdats.length === 0) {\n\t\t\t\t\t\t\tthis.isProgressive = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* no break */\n\t\t\t\t\t\t/* falls through */\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (this[box_type] !== undefined) {\n\t\t\t\t\t\t\tLog.warn(\"ISOFile\", \"Duplicate Box of type: \"+box_type+\", overriding previous occurrence\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis[box_type] = box;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (this.updateUsedBytes) {\n\t\t\t\t\tthis.updateUsedBytes(box, ret);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nISOFile.prototype.checkBuffer = function (ab) {\n\tif (ab === null || ab === undefined) {\n\t\tthrow(\"Buffer must be defined and non empty\");\n\t}\n\tif (ab.fileStart === undefined) {\n\t\tthrow(\"Buffer must have a fileStart property\");\n\t}\n\tif (ab.byteLength === 0) {\n\t\tLog.warn(\"ISOFile\", \"Ignoring empty buffer (fileStart: \"+ab.fileStart+\")\");\n\t\tthis.stream.logBufferLevel();\n\t\treturn false;\n\t}\n\tLog.info(\"ISOFile\", \"Processing buffer (fileStart: \"+ab.fileStart+\")\");\n\n\t/* mark the bytes in the buffer as not being used yet */\n\tab.usedBytes = 0;\n\tthis.stream.insertBuffer(ab);\n\tthis.stream.logBufferLevel();\n\n\tif (!this.stream.initialized()) {\n\t\tLog.warn(\"ISOFile\", \"Not ready to start parsing\");\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n/* Processes a new ArrayBuffer (with a fileStart property)\n   Returns the next expected file position, or undefined if not ready to parse */\nISOFile.prototype.appendBuffer = function(ab, last) {\n\tvar nextFileStart;\n\tif (!this.checkBuffer(ab)) {\n\t\treturn;\n\t}\n\n\t/* Parse whatever is in the existing buffers */\n\tthis.parse();\n\n\t/* Check if the moovStart callback needs to be called */\n\tif (this.moovStartFound && !this.moovStartSent) {\n\t\tthis.moovStartSent = true;\n\t\tif (this.onMoovStart) this.onMoovStart();\n\t}\n\n\tif (this.moov) {\n\t\t/* A moov box has been entirely parsed */\n\n\t\t/* if this is the first call after the moov is found we initialize the list of samples (may be empty in fragmented files) */\n\t\tif (!this.sampleListBuilt) {\n\t\t\tthis.buildSampleLists();\n\t\t\tthis.sampleListBuilt = true;\n\t\t}\n\n\t\t/* We update the sample information if there are any new moof boxes */\n\t\tthis.updateSampleLists();\n\n\t\t/* If the application needs to be informed that the 'moov' has been found,\n\t\t   we create the information object and callback the application */\n\t\tif (this.onReady && !this.readySent) {\n\t\t\tthis.readySent = true;\n\t\t\tthis.onReady(this.getInfo());\n\t\t}\n\n\t\t/* See if any sample extraction or segment creation needs to be done with the available samples */\n\t\tthis.processSamples(last);\n\n\t\t/* Inform about the best range to fetch next */\n\t\tif (this.nextSeekPosition) {\n\t\t\tnextFileStart = this.nextSeekPosition;\n\t\t\tthis.nextSeekPosition = undefined;\n\t\t} else {\n\t\t\tnextFileStart = this.nextParsePosition;\n\t\t}\n\t\tif (this.stream.getEndFilePositionAfter) {\n\t\t\tnextFileStart = this.stream.getEndFilePositionAfter(nextFileStart);\n\t\t}\n\t} else {\n\t\tif (this.nextParsePosition) {\n\t\t\t/* moov has not been parsed but the first buffer was received,\n\t\t\t   the next fetch should probably be the next box start */\n\t\t\tnextFileStart = this.nextParsePosition;\n\t\t} else {\n\t\t\t/* No valid buffer has been parsed yet, we cannot know what to parse next */\n\t\t\tnextFileStart = 0;\n\t\t}\n\t}\n\tif (this.sidx) {\n\t\tif (this.onSidx && !this.sidxSent) {\n\t\t\tthis.onSidx(this.sidx);\n\t\t\tthis.sidxSent = true;\n\t\t}\n\t}\n\tif (this.meta) {\n\t\tif (this.flattenItemInfo && !this.itemListBuilt) {\n\t\t\tthis.flattenItemInfo();\n\t\t\tthis.itemListBuilt = true;\n\t\t}\n\t\tif (this.processItems) {\n\t\t\tthis.processItems(this.onItem);\n\t\t}\n\t}\n\n\tif (this.stream.cleanBuffers) {\n\t\tLog.info(\"ISOFile\", \"Done processing buffer (fileStart: \"+ab.fileStart+\") - next buffer to fetch should have a fileStart position of \"+nextFileStart);\n\t\tthis.stream.logBufferLevel();\n\t\tthis.stream.cleanBuffers();\n\t\tthis.stream.logBufferLevel(true);\n\t\tLog.info(\"ISOFile\", \"Sample data size in memory: \"+this.getAllocatedSampleDataSize());\n\t}\n\treturn nextFileStart;\n}\n\nISOFile.prototype.getInfo = function() {\n\tvar i, j;\n\tvar movie = {};\n\tvar trak;\n\tvar track;\n\tvar ref;\n\tvar sample_desc;\n\tvar _1904 = (new Date('1904-01-01T00:00:00Z').getTime());\n\n\tif (this.moov) {\n\t\tmovie.hasMoov = true;\n\t\tmovie.duration = this.moov.mvhd.duration;\n\t\tmovie.timescale = this.moov.mvhd.timescale;\n\t\tmovie.isFragmented = (this.moov.mvex != null);\n\t\tif (movie.isFragmented && this.moov.mvex.mehd) {\n\t\t\tmovie.fragment_duration = this.moov.mvex.mehd.fragment_duration;\n\t\t}\n\t\tmovie.isProgressive = this.isProgressive;\n\t\tmovie.hasIOD = (this.moov.iods != null);\n\t\tmovie.brands = [];\n\t\tmovie.brands.push(this.ftyp.major_brand);\n\t\tmovie.brands = movie.brands.concat(this.ftyp.compatible_brands);\n\t\tmovie.created = new Date(_1904+this.moov.mvhd.creation_time*1000);\n\t\tmovie.modified = new Date(_1904+this.moov.mvhd.modification_time*1000);\n\t\tmovie.tracks = [];\n\t\tmovie.audioTracks = [];\n\t\tmovie.videoTracks = [];\n\t\tmovie.subtitleTracks = [];\n\t\tmovie.metadataTracks = [];\n\t\tmovie.hintTracks = [];\n\t\tmovie.otherTracks = [];\n\t\tfor (i = 0; i < this.moov.traks.length; i++) {\n\t\t\ttrak = this.moov.traks[i];\n\t\t\tsample_desc = trak.mdia.minf.stbl.stsd.entries[0];\n\t\t\ttrack = {};\n\t\t\tmovie.tracks.push(track);\n\t\t\ttrack.id = trak.tkhd.track_id;\n\t\t\ttrack.name = trak.mdia.hdlr.name;\n\t\t\ttrack.references = [];\n\t\t\tif (trak.tref) {\n\t\t\t\tfor (j = 0; j < trak.tref.boxes.length; j++) {\n\t\t\t\t\tref = {};\n\t\t\t\t\ttrack.references.push(ref);\n\t\t\t\t\tref.type = trak.tref.boxes[j].type;\n\t\t\t\t\tref.track_ids = trak.tref.boxes[j].track_ids;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (trak.edts) {\n\t\t\t\ttrack.edits = trak.edts.elst.entries;\n\t\t\t}\n\t\t\ttrack.created = new Date(_1904+trak.tkhd.creation_time*1000);\n\t\t\ttrack.modified = new Date(_1904+trak.tkhd.modification_time*1000);\n\t\t\ttrack.movie_duration = trak.tkhd.duration;\n\t\t\ttrack.movie_timescale = movie.timescale;\n\t\t\ttrack.layer = trak.tkhd.layer;\n\t\t\ttrack.alternate_group = trak.tkhd.alternate_group;\n\t\t\ttrack.volume = trak.tkhd.volume;\n\t\t\ttrack.matrix = trak.tkhd.matrix;\n\t\t\ttrack.track_width = trak.tkhd.width/(1<<16);\n\t\t\ttrack.track_height = trak.tkhd.height/(1<<16);\n\t\t\ttrack.timescale = trak.mdia.mdhd.timescale;\n\t\t\ttrack.cts_shift = trak.mdia.minf.stbl.cslg;\n\t\t\ttrack.duration = trak.mdia.mdhd.duration;\n\t\t\ttrack.samples_duration = trak.samples_duration;\n\t\t\ttrack.codec = sample_desc.getCodec();\n\t\t\ttrack.kind = (trak.udta && trak.udta.kinds.length ? trak.udta.kinds[0] : { schemeURI: \"\", value: \"\"});\n\t\t\ttrack.language = (trak.mdia.elng ? trak.mdia.elng.extended_language : trak.mdia.mdhd.languageString);\n\t\t\ttrack.nb_samples = trak.samples.length;\n\t\t\ttrack.size = trak.samples_size;\n\t\t\ttrack.bitrate = (track.size*8*track.timescale)/track.samples_duration;\n\t\t\tif (sample_desc.isAudio()) {\n\t\t\t\ttrack.type = \"audio\";\n\t\t\t\tmovie.audioTracks.push(track);\n\t\t\t\ttrack.audio = {};\n\t\t\t\ttrack.audio.sample_rate = sample_desc.getSampleRate();\n\t\t\t\ttrack.audio.channel_count = sample_desc.getChannelCount();\n\t\t\t\ttrack.audio.sample_size = sample_desc.getSampleSize();\n\t\t\t} else if (sample_desc.isVideo()) {\n\t\t\t\ttrack.type = \"video\";\n\t\t\t\tmovie.videoTracks.push(track);\n\t\t\t\ttrack.video = {};\n\t\t\t\ttrack.video.width = sample_desc.getWidth();\n\t\t\t\ttrack.video.height = sample_desc.getHeight();\n\t\t\t} else if (sample_desc.isSubtitle()) {\n\t\t\t\ttrack.type = \"subtitles\";\n\t\t\t\tmovie.subtitleTracks.push(track);\n\t\t\t} else if (sample_desc.isHint()) {\n\t\t\t\ttrack.type = \"metadata\";\n\t\t\t\tmovie.hintTracks.push(track);\n\t\t\t} else if (sample_desc.isMetadata()) {\n\t\t\t\ttrack.type = \"metadata\";\n\t\t\t\tmovie.metadataTracks.push(track);\n\t\t\t} else {\n\t\t\t\ttrack.type = \"metadata\";\n\t\t\t\tmovie.otherTracks.push(track);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tmovie.hasMoov = false;\n\t}\n\tmovie.mime = \"\";\n\tif (movie.hasMoov && movie.tracks) {\n\t\tif (movie.videoTracks && movie.videoTracks.length > 0) {\n\t\t\tmovie.mime += 'video/mp4; codecs=\\\"';\n\t\t} else if (movie.audioTracks && movie.audioTracks.length > 0) {\n\t\t\tmovie.mime += 'audio/mp4; codecs=\\\"';\n\t\t} else {\n\t\t\tmovie.mime += 'application/mp4; codecs=\\\"';\n\t\t}\n\t\tfor (i = 0; i < movie.tracks.length; i++) {\n\t\t\tif (i !== 0) movie.mime += ',';\n\t\t\tmovie.mime+= movie.tracks[i].codec;\n\t\t}\n\t\tmovie.mime += '\\\"; profiles=\\\"';\n\t\tmovie.mime += this.ftyp.compatible_brands.join();\n\t\tmovie.mime += '\\\"';\n\t}\n\treturn movie;\n}\n\nISOFile.prototype.setNextSeekPositionFromSample = function (sample) {\n\tif (!sample) {\n\t\treturn;\n\t}\n\tif (this.nextSeekPosition) {\n\t\tthis.nextSeekPosition = Math.min(sample.offset+sample.alreadyRead,this.nextSeekPosition);\n\t} else {\n\t\tthis.nextSeekPosition = sample.offset+sample.alreadyRead;\n\t}\n}\n\nISOFile.prototype.processSamples = function(last) {\n\tvar i;\n\tvar trak;\n\tif (!this.sampleProcessingStarted) return;\n\n\t/* For each track marked for fragmentation,\n\t   check if the next sample is there (i.e. if the sample information is known (i.e. moof has arrived) and if it has been downloaded)\n\t   and create a fragment with it */\n\tif (this.isFragmentationInitialized && this.onSegment !== null) {\n\t\tfor (i = 0; i < this.fragmentedTracks.length; i++) {\n\t\t\tvar fragTrak = this.fragmentedTracks[i];\n\t\t\ttrak = fragTrak.trak;\n\t\t\twhile (trak.nextSample < trak.samples.length && this.sampleProcessingStarted) {\n\t\t\t\t/* The sample information is there (either because the file is not fragmented and this is not the last sample,\n\t\t\t\tor because the file is fragmented and the moof for that sample has been received */\n\t\t\t\tLog.debug(\"ISOFile\", \"Creating media fragment on track #\"+fragTrak.id +\" for sample \"+trak.nextSample);\n\t\t\t\tvar result = this.createFragment(fragTrak.id, trak.nextSample, fragTrak.segmentStream);\n\t\t\t\tif (result) {\n\t\t\t\t\tfragTrak.segmentStream = result;\n\t\t\t\t\ttrak.nextSample++;\n\t\t\t\t} else {\n\t\t\t\t\t/* The fragment could not be created because the media data is not there (not downloaded), wait for it */\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t/* A fragment is created by sample, but the segment is the accumulation in the buffer of these fragments.\n\t\t\t\t   It is flushed only as requested by the application (nb_samples) to avoid too many callbacks */\n\t\t\t\tif (trak.nextSample % fragTrak.nb_samples === 0 || (last || trak.nextSample >= trak.samples.length)) {\n\t\t\t\t\tLog.info(\"ISOFile\", \"Sending fragmented data on track #\"+fragTrak.id+\" for samples [\"+Math.max(0,trak.nextSample-fragTrak.nb_samples)+\",\"+(trak.nextSample-1)+\"]\");\n\t\t\t\t\tLog.info(\"ISOFile\", \"Sample data size in memory: \"+this.getAllocatedSampleDataSize());\n\t\t\t\t\tif (this.onSegment) {\n\t\t\t\t\t\tthis.onSegment(fragTrak.id, fragTrak.user, fragTrak.segmentStream.buffer, trak.nextSample, (last || trak.nextSample >= trak.samples.length));\n\t\t\t\t\t}\n\t\t\t\t\t/* force the creation of a new buffer */\n\t\t\t\t\tfragTrak.segmentStream = null;\n\t\t\t\t\tif (fragTrak !== this.fragmentedTracks[i]) {\n\t\t\t\t\t\t/* make sure we can stop fragmentation if needed */\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (this.onSamples !== null) {\n\t\t/* For each track marked for data export,\n\t\t   check if the next sample is there (i.e. has been downloaded) and send it */\n\t\tfor (i = 0; i < this.extractedTracks.length; i++) {\n\t\t\tvar extractTrak = this.extractedTracks[i];\n\t\t\ttrak = extractTrak.trak;\n\t\t\twhile (trak.nextSample < trak.samples.length && this.sampleProcessingStarted) {\n\t\t\t\tLog.debug(\"ISOFile\", \"Exporting on track #\"+extractTrak.id +\" sample #\"+trak.nextSample);\n\t\t\t\tvar sample = this.getSample(trak, trak.nextSample);\n\t\t\t\tif (sample) {\n\t\t\t\t\ttrak.nextSample++;\n\t\t\t\t\textractTrak.samples.push(sample);\n\t\t\t\t} else {\n\t\t\t\t\tthis.setNextSeekPositionFromSample(trak.samples[trak.nextSample]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (trak.nextSample % extractTrak.nb_samples === 0 || trak.nextSample >= trak.samples.length) {\n\t\t\t\t\tLog.debug(\"ISOFile\", \"Sending samples on track #\"+extractTrak.id+\" for sample \"+trak.nextSample);\n\t\t\t\t\tif (this.onSamples) {\n\t\t\t\t\t\tthis.onSamples(extractTrak.id, extractTrak.user, extractTrak.samples);\n\t\t\t\t\t}\n\t\t\t\t\textractTrak.samples = [];\n\t\t\t\t\tif (extractTrak !== this.extractedTracks[i]) {\n\t\t\t\t\t\t/* check if the extraction needs to be stopped */\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/* Find and return specific boxes using recursion and early return */\nISOFile.prototype.getBox = function(type) {\n  var result = this.getBoxes(type, true);\n  return (result.length ? result[0] : null);\n}\n\nISOFile.prototype.getBoxes = function(type, returnEarly) {\n  var result = [];\n  ISOFile._sweep.call(this, type, result, returnEarly);\n  return result;\n}\n\nISOFile._sweep = function(type, result, returnEarly) {\n  if (this.type && this.type == type) result.push(this);\n  for (var box in this.boxes) {\n    if (result.length && returnEarly) return;\n    ISOFile._sweep.call(this.boxes[box], type, result, returnEarly);\n  }\n}\n\nISOFile.prototype.getTrackSamplesInfo = function(track_id) {\n\tvar track = this.getTrackById(track_id);\n\tif (track) {\n\t\treturn track.samples;\n\t} else {\n\t\treturn;\n\t}\n}\n\nISOFile.prototype.getTrackSample = function(track_id, number) {\n\tvar track = this.getTrackById(track_id);\n\tvar sample = this.getSample(track, number);\n\treturn sample;\n}\n\n/* Called by the application to release the resources associated to samples already forwarded to the application */\nISOFile.prototype.releaseUsedSamples = function (id, sampleNum) {\n\tvar size = 0;\n\tvar trak = this.getTrackById(id);\n\tif (!trak.lastValidSample) trak.lastValidSample = 0;\n\tfor (var i = trak.lastValidSample; i < sampleNum; i++) {\n\t\tsize+=this.releaseSample(trak, i);\n\t}\n\tLog.info(\"ISOFile\", \"Track #\"+id+\" released samples up to \"+sampleNum+\" (released size: \"+size+\", remaining: \"+this.samplesDataSize+\")\");\n\ttrak.lastValidSample = sampleNum;\n}\n\nISOFile.prototype.start = function() {\n\tthis.sampleProcessingStarted = true;\n\tthis.processSamples(false);\n}\n\nISOFile.prototype.stop = function() {\n\tthis.sampleProcessingStarted = false;\n}\n\n/* Called by the application to flush the remaining samples (e.g. once the download is finished or when no more samples will be added) */\nISOFile.prototype.flush = function() {\n\tLog.info(\"ISOFile\", \"Flushing remaining samples\");\n\tthis.updateSampleLists();\n\tthis.processSamples(true);\n\tthis.stream.cleanBuffers();\n\tthis.stream.logBufferLevel(true);\n}\n\n/* Finds the byte offset for a given time on a given track\n   also returns the time of the previous rap */\nISOFile.prototype.seekTrack = function(time, useRap, trak) {\n\tvar j;\n\tvar sample;\n\tvar seek_offset = Infinity;\n\tvar rap_seek_sample_num = 0;\n\tvar seek_sample_num = 0;\n\tvar timescale;\n\n\tif (trak.samples.length === 0) {\n\t\tLog.info(\"ISOFile\", \"No sample in track, cannot seek! Using time \"+Log.getDurationString(0, 1) +\" and offset: \"+0);\n\t\treturn { offset: 0, time: 0 };\n\t}\n\n\tfor (j = 0; j < trak.samples.length; j++) {\n\t\tsample = trak.samples[j];\n\t\tif (j === 0) {\n\t\t\tseek_sample_num = 0;\n\t\t\ttimescale = sample.timescale;\n\t\t} else if (sample.cts > time * sample.timescale) {\n\t\t\tseek_sample_num = j-1;\n\t\t\tbreak;\n\t\t}\n\t\tif (useRap && sample.is_sync) {\n\t\t\trap_seek_sample_num = j;\n\t\t}\n\t}\n\tif (useRap) {\n\t\tseek_sample_num = rap_seek_sample_num;\n\t}\n\ttime = trak.samples[seek_sample_num].cts;\n\ttrak.nextSample = seek_sample_num;\n\twhile (trak.samples[seek_sample_num].alreadyRead === trak.samples[seek_sample_num].size) {\n\t\t// No remaining samples to look for, all are downloaded.\n\t\tif (!trak.samples[seek_sample_num + 1]) {\n\t\t\tbreak;\n\t\t}\n\t\tseek_sample_num++;\n\t}\n\tseek_offset = trak.samples[seek_sample_num].offset+trak.samples[seek_sample_num].alreadyRead;\n\tLog.info(\"ISOFile\", \"Seeking to \"+(useRap ? \"RAP\": \"\")+\" sample #\"+trak.nextSample+\" on track \"+trak.tkhd.track_id+\", time \"+Log.getDurationString(time, timescale) +\" and offset: \"+seek_offset);\n\treturn { offset: seek_offset, time: time/timescale };\n}\n\nISOFile.prototype.getTrackDuration = function (trak) {\n\tvar sample;\n\n\tif (!trak.samples) {\n\t\treturn Infinity;\n\t}\n\tsample = trak.samples[trak.samples.length - 1];\n\treturn (sample.cts + sample.duration) / sample.timescale;\n}\n\n/* Finds the byte offset in the file corresponding to the given time or to the time of the previous RAP */\nISOFile.prototype.seek = function(time, useRap) {\n\tvar moov = this.moov;\n\tvar trak;\n\tvar trak_seek_info;\n\tvar i;\n\tvar seek_info = { offset: Infinity, time: Infinity };\n\tif (!this.moov) {\n\t\tthrow \"Cannot seek: moov not received!\";\n\t} else {\n\t\tfor (i = 0; i<moov.traks.length; i++) {\n\t\t\ttrak = moov.traks[i];\n\t\t\tif (time > this.getTrackDuration(trak)) { // skip tracks that already ended\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttrak_seek_info = this.seekTrack(time, useRap, trak);\n\t\t\tif (trak_seek_info.offset < seek_info.offset) {\n\t\t\t\tseek_info.offset = trak_seek_info.offset;\n\t\t\t}\n\t\t\tif (trak_seek_info.time < seek_info.time) {\n\t\t\t\tseek_info.time = trak_seek_info.time;\n\t\t\t}\n\t\t}\n\t\tLog.info(\"ISOFile\", \"Seeking at time \"+Log.getDurationString(seek_info.time, 1)+\" needs a buffer with a fileStart position of \"+seek_info.offset);\n\t\tif (seek_info.offset === Infinity) {\n\t\t\t/* No sample info, in all tracks, cannot seek */\n\t\t\tseek_info = { offset: this.nextParsePosition, time: 0 };\n\t\t} else {\n\t\t\t/* check if the seek position is already in some buffer and\n\t\t\t in that case return the end of that buffer (or of the last contiguous buffer) */\n\t\t\t/* TODO: Should wait until append operations are done */\n\t\t\tseek_info.offset = this.stream.getEndFilePositionAfter(seek_info.offset);\n\t\t}\n\t\tLog.info(\"ISOFile\", \"Adjusted seek position (after checking data already in buffer): \"+seek_info.offset);\n\t\treturn seek_info;\n\t}\n}\n\nISOFile.prototype.equal = function(b) {\n\tvar box_index = 0;\n\twhile (box_index < this.boxes.length && box_index < b.boxes.length) {\n\t\tvar a_box = this.boxes[box_index];\n\t\tvar b_box = b.boxes[box_index];\n\t\tif (!BoxParser.boxEqual(a_box, b_box)) {\n\t\t\treturn false;\n\t\t}\n\t\tbox_index++;\n\t}\n\treturn true;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.ISOFile = ISOFile;\n}\n// file:src/isofile-advanced-parsing.js\n/* position in the current buffer of the beginning of the last box parsed */\nISOFile.prototype.lastBoxStartPosition = 0;\n/* indicator if the parsing is stuck in the middle of an mdat box */\nISOFile.prototype.parsingMdat = null;\n/* next file position that the parser needs:\n    - 0 until the first buffer (i.e. fileStart ===0) has been received \n    - otherwise, the next box start until the moov box has been parsed\n    - otherwise, the position of the next sample to fetch\n */\nISOFile.prototype.nextParsePosition = 0;\n/* keep mdat data */\nISOFile.prototype.discardMdatData = false;\n\nISOFile.prototype.processIncompleteBox = function(ret) {\n\tvar box;\n\tvar merged;\n\tvar found;\n\t\n\t/* we did not have enough bytes in the current buffer to parse the entire box */\n\tif (ret.type === \"mdat\") { \n\t\t/* we had enough bytes to get its type and size and it's an 'mdat' */\n\t\t\n\t\t/* special handling for mdat boxes, since we don't actually need to parse it linearly \n\t\t   we create the box */\n\t\tbox = new BoxParser[ret.type+\"Box\"](ret.size);\t\n\t\tthis.parsingMdat = box;\n\t\tthis.boxes.push(box);\n\t\tthis.mdats.push(box);\t\t\t\n\t\tbox.start = ret.start;\n\t\tbox.hdr_size = ret.hdr_size;\n\t\tthis.stream.addUsedBytes(box.hdr_size);\n\n\t\t/* indicate that the parsing should start from the end of the box */\n\t\tthis.lastBoxStartPosition = box.start + box.size;\n \t\t/* let's see if we have the end of the box in the other buffers */\n\t\tfound = this.stream.seek(box.start + box.size, false, this.discardMdatData);\n\t\tif (found) {\n\t\t\t/* found the end of the box */\n\t\t\tthis.parsingMdat = null;\n\t\t\t/* let's see if we can parse more in this buffer */\n\t\t\treturn true;\n\t\t} else {\n\t\t\t/* 'mdat' end not found in the existing buffers */\n\t\t\t/* determine the next position in the file to start parsing from */\n\t\t\tif (!this.moovStartFound) {\n\t\t\t\t/* moov not find yet, \n\t\t\t\t   the file probably has 'mdat' at the beginning, and 'moov' at the end, \n\t\t\t\t   indicate that the downloader should not try to download those bytes now */\n\t\t\t\tthis.nextParsePosition = box.start + box.size;\n\t\t\t} else {\n\t\t\t\t/* we have the start of the moov box, \n\t\t\t\t   the next bytes should try to complete the current 'mdat' */\n\t\t\t\tthis.nextParsePosition = this.stream.findEndContiguousBuf();\n\t\t\t}\n\t\t\t/* not much we can do, wait for more buffers to arrive */\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\t/* box is incomplete, we may not even know its type */\n\t\tif (ret.type === \"moov\") { \n\t\t\t/* the incomplete box is a 'moov' box */\n\t\t\tthis.moovStartFound = true;\n\t\t\tif (this.mdats.length === 0) {\n\t\t\t\tthis.isProgressive = true;\n\t\t\t}\n\t\t}\n\t\t/* either it's not an mdat box (and we need to parse it, we cannot skip it)\n\t\t   (TODO: we could skip 'free' boxes ...)\n\t\t\t   or we did not have enough data to parse the type and size of the box, \n\t\t   we try to concatenate the current buffer with the next buffer to restart parsing */\n\t\tmerged = (this.stream.mergeNextBuffer ? this.stream.mergeNextBuffer() : false);\n\t\tif (merged) {\n\t\t\t/* The next buffer was contiguous, the merging succeeded,\n\t\t\t   we can now continue parsing, \n\t\t\t   the next best position to parse is at the end of this new buffer */\n\t\t\tthis.nextParsePosition = this.stream.getEndPosition();\n\t\t\treturn true;\n\t\t} else {\n\t\t\t/* we cannot concatenate existing buffers because they are not contiguous or because there is no additional buffer */\n\t\t\t/* The next best position to parse is still at the end of this old buffer */\n\t\t\tif (!ret.type) {\n\t\t\t\t/* There were not enough bytes in the buffer to parse the box type and length,\n\t\t\t\t   the next fetch should retrieve those missing bytes, i.e. the next bytes after this buffer */\n\t\t\t\tthis.nextParsePosition = this.stream.getEndPosition();\n\t\t\t} else {\n\t\t\t\t/* we had enough bytes to parse size and type of the incomplete box\n\t\t\t\t   if we haven't found yet the moov box, skip this one and try the next one \n\t\t\t\t   if we have found the moov box, let's continue linear parsing */\n\t\t\t\tif (this.moovStartFound) {\n\t\t\t\t\tthis.nextParsePosition = this.stream.getEndPosition();\n\t\t\t\t} else {\n\t\t\t\t\tthis.nextParsePosition = this.stream.getPosition() + ret.size;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\nISOFile.prototype.hasIncompleteMdat = function () {\n\treturn (this.parsingMdat !== null);\n}\n\nISOFile.prototype.processIncompleteMdat = function () {\n\tvar box;\n\tvar found;\n\t\n\t/* we are in the parsing of an incomplete mdat box */\n\tbox = this.parsingMdat;\n\n\tfound = this.stream.seek(box.start + box.size, false, this.discardMdatData);\n\tif (found) {\n\t\tLog.debug(\"ISOFile\", \"Found 'mdat' end in buffered data\");\n\t\t/* the end of the mdat has been found */ \n\t\tthis.parsingMdat = null;\n\t\t/* we can parse more in this buffer */\n\t\treturn true;\n\t} else {\n\t\t/* we don't have the end of this mdat yet, \n\t\t   indicate that the next byte to fetch is the end of the buffers we have so far, \n\t\t   return and wait for more buffer to come */\n\t\tthis.nextParsePosition = this.stream.findEndContiguousBuf();\n\t\treturn false;\n\t}\n}\n\nISOFile.prototype.restoreParsePosition = function() {\n\t/* Reposition at the start position of the previous box not entirely parsed */\n\treturn this.stream.seek(this.lastBoxStartPosition, true, this.discardMdatData);\n}\n\nISOFile.prototype.saveParsePosition = function() {\n\t/* remember the position of the box start in case we need to roll back (if the box is incomplete) */\n\tthis.lastBoxStartPosition = this.stream.getPosition();\t\n}\n\nISOFile.prototype.updateUsedBytes = function(box, ret) {\n\tif (this.stream.addUsedBytes) {\n\t\tif (box.type === \"mdat\") {\n\t\t\t/* for an mdat box, only its header is considered used, other bytes will be used when sample data is requested */\n\t\t\tthis.stream.addUsedBytes(box.hdr_size);\n\t\t\tif (this.discardMdatData) {\n\t\t\t\tthis.stream.addUsedBytes(box.size-box.hdr_size);\n\t\t\t}\n\t\t} else {\n\t\t\t/* for all other boxes, the entire box data is considered used */\n\t\t\tthis.stream.addUsedBytes(box.size);\n\t\t}\t\n\t}\n}\n// file:src/isofile-advanced-creation.js\nISOFile.prototype.add = BoxParser.Box.prototype.add;\nISOFile.prototype.addBox = BoxParser.Box.prototype.addBox;\n\nISOFile.prototype.init = function (_options) {\n\tvar options = _options || {}; \n\tvar ftyp = this.add(\"ftyp\").set(\"major_brand\", (options.brands && options.brands[0]) || \"iso4\")\n\t\t\t\t\t\t\t   .set(\"minor_version\", 0)\n\t\t\t\t\t\t\t   .set(\"compatible_brands\", options.brands || [\"iso4\"]);\n\tvar moov = this.add(\"moov\");\n\tmoov.add(\"mvhd\").set(\"timescale\", options.timescale || 600)\n\t\t\t\t\t.set(\"rate\", options.rate || 1<<16)\n\t\t\t\t\t.set(\"creation_time\", 0)\n\t\t\t\t\t.set(\"modification_time\", 0)\n\t\t\t\t\t.set(\"duration\", options.duration || 0)\n\t\t\t\t\t.set(\"volume\", (options.width) ? 0 : 0x0100)\n\t\t\t\t\t.set(\"matrix\", [ 1<<16, 0, 0, 0, 1<<16, 0, 0, 0, 0x40000000])\n\t\t\t\t\t.set(\"next_track_id\", 1);\n\tmoov.add(\"mvex\");\n\treturn this;\n}\n\nISOFile.prototype.addTrack = function (_options) {\n\tif (!this.moov) {\n\t\tthis.init(_options);\n\t}\n\n\tvar options = _options || {}; \n\toptions.width = options.width || 320;\n\toptions.height = options.height || 320;\n\toptions.id = options.id || this.moov.mvhd.next_track_id;\n\toptions.type = options.type || \"avc1\";\n\n\tvar trak = this.moov.add(\"trak\");\n\tthis.moov.mvhd.next_track_id = options.id+1;\n\ttrak.add(\"tkhd\").set(\"flags\",BoxParser.TKHD_FLAG_ENABLED | \n\t\t\t\t\t\t\t\t BoxParser.TKHD_FLAG_IN_MOVIE | \n\t\t\t\t\t\t\t\t BoxParser.TKHD_FLAG_IN_PREVIEW)\n\t\t\t\t\t.set(\"creation_time\",0)\n\t\t\t\t\t.set(\"modification_time\", 0)\n\t\t\t\t\t.set(\"track_id\", options.id)\n\t\t\t\t\t.set(\"duration\", options.duration || 0)\n\t\t\t\t\t.set(\"layer\", options.layer || 0)\n\t\t\t\t\t.set(\"alternate_group\", 0)\n\t\t\t\t\t.set(\"volume\", 1)\n\t\t\t\t\t.set(\"matrix\", [ 1<<16, 0, 0, 0, 1<<16, 0, 0, 0, 0x40000000 ])\n\t\t\t\t\t.set(\"width\", options.width << 16)\n\t\t\t\t\t.set(\"height\", options.height << 16);\n\n\tvar mdia = trak.add(\"mdia\");\n\tmdia.add(\"mdhd\").set(\"creation_time\", 0)\n\t\t\t\t\t.set(\"modification_time\", 0)\n\t\t\t\t\t.set(\"timescale\", options.timescale || 1)\n\t\t\t\t\t.set(\"duration\", options.media_duration || 0)\n\t\t\t\t\t.set(\"language\", options.language || \"und\");\n\n\tmdia.add(\"hdlr\").set(\"handler\", options.hdlr || \"vide\")\n\t\t\t\t\t.set(\"name\", options.name || \"Track created with MP4Box.js\");\n\n\tmdia.add(\"elng\").set(\"extended_language\", options.language || \"fr-FR\");\n\n\tvar minf = mdia.add(\"minf\");\n\tif (BoxParser[options.type+\"SampleEntry\"] === undefined) return;\n\tvar sample_description_entry = new BoxParser[options.type+\"SampleEntry\"]();\n\tsample_description_entry.data_reference_index = 1;\n\tvar media_type = \"\";\n\tfor (var mediaType in BoxParser.sampleEntryCodes) {\n\t\tvar codes = BoxParser.sampleEntryCodes[mediaType];\n\t\tfor (var i = 0; i < codes.length; i++) {\n\t\t\tif (codes.indexOf(options.type) > -1) {\n\t\t\t\tmedia_type = mediaType;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tswitch(media_type) {\n\t\tcase \"Visual\":\n\t\t\tminf.add(\"vmhd\").set(\"graphicsmode\",0).set(\"opcolor\", [ 0, 0, 0 ]);\n\t\t\tsample_description_entry.set(\"width\", options.width)\n\t\t\t\t\t\t.set(\"height\", options.height)\n\t\t\t\t\t\t.set(\"horizresolution\", 0x48<<16)\n\t\t\t\t\t\t.set(\"vertresolution\", 0x48<<16)\n\t\t\t\t\t\t.set(\"frame_count\", 1)\n\t\t\t\t\t\t.set(\"compressorname\", options.type+\" Compressor\")\n\t\t\t\t\t\t.set(\"depth\", 0x18);\n\t\t\tif (options.avcDecoderConfigRecord) {\n\t\t\t\tvar avcC = new BoxParser.avcCBox();\n\t\t\t\tavcC.parse(new MP4BoxStream(options.avcDecoderConfigRecord));\n\t\t\t\tsample_description_entry.addBox(avcC);\n\t\t\t} else if (options.hevcDecoderConfigRecord) {\n\t\t\t\tvar hvcC = new BoxParser.hvcCBox();\n\t\t\t\thvcC.parse(new MP4BoxStream(options.hevcDecoderConfigRecord));\n\t\t\t\tsample_description_entry.addBox(hvcC);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"Audio\":\n\t\t\tminf.add(\"smhd\").set(\"balance\", options.balance || 0);\n\t\t\tsample_description_entry.set(\"channel_count\", options.channel_count || 2)\n\t\t\t\t\t\t.set(\"samplesize\", options.samplesize || 16)\n\t\t\t\t\t\t.set(\"samplerate\", options.samplerate || 1<<16);\n\t\t\tbreak;\n\t\tcase \"Hint\":\n\t\t\tminf.add(\"hmhd\"); // TODO: add properties\n\t\t\tbreak;\n\t\tcase \"Subtitle\":\n\t\t\tminf.add(\"sthd\");\n\t\t\tswitch (options.type) {\n\t\t\t\tcase \"stpp\":\n\t\t\t\t\tsample_description_entry.set(\"namespace\", options.namespace || \"nonamespace\")\n\t\t\t\t\t\t\t\t.set(\"schema_location\", options.schema_location || \"\")\n\t\t\t\t\t\t\t\t.set(\"auxiliary_mime_types\", options.auxiliary_mime_types || \"\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"Metadata\":\n\t\t\tminf.add(\"nmhd\");\n\t\t\tbreak;\n\t\tcase \"System\":\n\t\t\tminf.add(\"nmhd\");\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tminf.add(\"nmhd\");\n\t\t\tbreak;\n\t}\n\tif (options.description) {\n\t\tsample_description_entry.addBox(options.description);\n\t}\n\tif (options.description_boxes) {\n\t\toptions.description_boxes.forEach(function (b) {\n\t\t\tsample_description_entry.addBox(b);\n\t\t});\n\t}\n\tminf.add(\"dinf\").add(\"dref\").addEntry((new BoxParser[\"url Box\"]()).set(\"flags\", 0x1));\n\tvar stbl = minf.add(\"stbl\");\n\tstbl.add(\"stsd\").addEntry(sample_description_entry);\n\tstbl.add(\"stts\").set(\"sample_counts\", [])\n\t\t\t\t\t.set(\"sample_deltas\", []);\n\tstbl.add(\"stsc\").set(\"first_chunk\", [])\n\t\t\t\t\t.set(\"samples_per_chunk\", [])\n\t\t\t\t\t.set(\"sample_description_index\", []);\n\tstbl.add(\"stco\").set(\"chunk_offsets\", []);\n\tstbl.add(\"stsz\").set(\"sample_sizes\", []);\n\n\tthis.moov.mvex.add(\"trex\").set(\"track_id\", options.id)\n\t\t\t\t\t\t\t  .set(\"default_sample_description_index\", options.default_sample_description_index || 1)\n\t\t\t\t\t\t\t  .set(\"default_sample_duration\", options.default_sample_duration || 0)\n\t\t\t\t\t\t\t  .set(\"default_sample_size\", options.default_sample_size || 0)\n\t\t\t\t\t\t\t  .set(\"default_sample_flags\", options.default_sample_flags || 0);\n\tthis.buildTrakSampleLists(trak);\n\treturn options.id;\n}\n\nBoxParser.Box.prototype.computeSize = function(stream_) {\n\tvar stream = stream_ || new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\tthis.write(stream);\n}\n\nISOFile.prototype.addSample = function (track_id, data, _options) {\n\tvar options = _options || {};\n\tvar sample = {};\n\tvar trak = this.getTrackById(track_id);\n\tif (trak === null) return;\n    sample.number = trak.samples.length;\n\tsample.track_id = trak.tkhd.track_id;\n\tsample.timescale = trak.mdia.mdhd.timescale;\n\tsample.description_index = (options.sample_description_index ? options.sample_description_index - 1: 0);\n\tsample.description = trak.mdia.minf.stbl.stsd.entries[sample.description_index];\n\tsample.data = data;\n\tsample.size = data.byteLength;\n\tsample.alreadyRead = sample.size;\n\tsample.duration = options.duration || 1;\n\tsample.cts = options.cts || 0;\n\tsample.dts = options.dts || 0;\n\tsample.is_sync = options.is_sync || false;\n\tsample.is_leading = options.is_leading || 0;\n\tsample.depends_on = options.depends_on || 0;\n\tsample.is_depended_on = options.is_depended_on || 0;\n\tsample.has_redundancy = options.has_redundancy || 0;\n\tsample.degradation_priority = options.degradation_priority || 0;\n\tsample.offset = 0;\n\tsample.subsamples = options.subsamples;\n\ttrak.samples.push(sample);\n\ttrak.samples_size += sample.size;\n\ttrak.samples_duration += sample.duration;\n\tif (trak.first_dts === undefined) {\n\t\ttrak.first_dts = options.dts;\n\t}\n\n\tthis.processSamples();\n\t\n\tvar moof = this.createSingleSampleMoof(sample);\n\tthis.addBox(moof);\n\tmoof.computeSize();\n\t/* adjusting the data_offset now that the moof size is known*/\n\tmoof.trafs[0].truns[0].data_offset = moof.size+8; //8 is mdat header\n\tthis.add(\"mdat\").data = new Uint8Array(data);\n\treturn sample;\n}\n\nISOFile.prototype.createSingleSampleMoof = function(sample) {\n\tvar sample_flags = 0;\n\tif (sample.is_sync)\n\t\tsample_flags = (1 << 25);  // sample_depends_on_none (I picture)\n\telse\n\t\tsample_flags = (1 << 16);  // non-sync\n\n\tvar moof = new BoxParser.moofBox();\n\tmoof.add(\"mfhd\").set(\"sequence_number\", this.nextMoofNumber);\n\tthis.nextMoofNumber++;\n\tvar traf = moof.add(\"traf\");\n\tvar trak = this.getTrackById(sample.track_id);\n\ttraf.add(\"tfhd\").set(\"track_id\", sample.track_id)\n\t\t\t\t\t.set(\"flags\", BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF);\n\ttraf.add(\"tfdt\").set(\"baseMediaDecodeTime\", (sample.dts - (trak.first_dts || 0)));\n\ttraf.add(\"trun\").set(\"flags\", BoxParser.TRUN_FLAGS_DATA_OFFSET | BoxParser.TRUN_FLAGS_DURATION | \n\t\t\t\t \t\t\t\t  BoxParser.TRUN_FLAGS_SIZE | BoxParser.TRUN_FLAGS_FLAGS | \n\t\t\t\t \t\t\t\t  BoxParser.TRUN_FLAGS_CTS_OFFSET)\n\t\t\t\t\t.set(\"data_offset\",0)\n\t\t\t\t\t.set(\"first_sample_flags\",0)\n\t\t\t\t\t.set(\"sample_count\",1)\n\t\t\t\t\t.set(\"sample_duration\",[sample.duration])\n\t\t\t\t\t.set(\"sample_size\",[sample.size])\n\t\t\t\t\t.set(\"sample_flags\",[sample_flags])\n\t\t\t\t\t.set(\"sample_composition_time_offset\", [sample.cts - sample.dts]);\n\treturn moof;\n}\n\n// file:src/isofile-sample-processing.js\n/* Index of the last moof box received */\nISOFile.prototype.lastMoofIndex = 0;\n\n/* size of the buffers allocated for samples */\nISOFile.prototype.samplesDataSize = 0;\n\n/* Resets all sample tables */\nISOFile.prototype.resetTables = function () {\n\tvar i;\n\tvar trak, stco, stsc, stsz, stts, ctts, stss;\n\tthis.initial_duration = this.moov.mvhd.duration;\n\tthis.moov.mvhd.duration = 0;\n\tfor (i = 0; i < this.moov.traks.length; i++) {\n\t\ttrak = this.moov.traks[i];\n\t\ttrak.tkhd.duration = 0;\n\t\ttrak.mdia.mdhd.duration = 0;\n\t\tstco = trak.mdia.minf.stbl.stco || trak.mdia.minf.stbl.co64;\n\t\tstco.chunk_offsets = [];\n\t\tstsc = trak.mdia.minf.stbl.stsc;\n\t\tstsc.first_chunk = [];\n\t\tstsc.samples_per_chunk = [];\n\t\tstsc.sample_description_index = [];\n\t\tstsz = trak.mdia.minf.stbl.stsz || trak.mdia.minf.stbl.stz2;\n\t\tstsz.sample_sizes = [];\n\t\tstts = trak.mdia.minf.stbl.stts;\n\t\tstts.sample_counts = [];\n\t\tstts.sample_deltas = [];\n\t\tctts = trak.mdia.minf.stbl.ctts;\n\t\tif (ctts) {\n\t\t\tctts.sample_counts = [];\n\t\t\tctts.sample_offsets = [];\n\t\t}\n\t\tstss = trak.mdia.minf.stbl.stss;\n\t\tvar k = trak.mdia.minf.stbl.boxes.indexOf(stss);\n\t\tif (k != -1) trak.mdia.minf.stbl.boxes[k] = null;\n\t}\n}\n\nISOFile.initSampleGroups = function(trak, traf, sbgps, trak_sgpds, traf_sgpds) {\n\tvar l;\n\tvar k;\n\tvar sample_groups_info;\n\tvar sample_group_info;\n\tvar sample_group_key;\n\tfunction SampleGroupInfo(_type, _parameter, _sbgp) {\n\t\tthis.grouping_type = _type;\n\t\tthis.grouping_type_parameter = _parameter;\n\t\tthis.sbgp = _sbgp;\n\t\tthis.last_sample_in_run = -1;\n\t\tthis.entry_index = -1;\t\t\n\t}\n\tif (traf) {\n\t\ttraf.sample_groups_info = [];\n\t} \n\tif (!trak.sample_groups_info) {\n\t\ttrak.sample_groups_info = [];\n\t}\n\tfor (k = 0; k < sbgps.length; k++) {\n\t\tsample_group_key = sbgps[k].grouping_type +\"/\"+ sbgps[k].grouping_type_parameter;\n\t\tsample_group_info = new SampleGroupInfo(sbgps[k].grouping_type, sbgps[k].grouping_type_parameter, sbgps[k]);\n\t\tif (traf) {\n\t\t\ttraf.sample_groups_info[sample_group_key] = sample_group_info;\n\t\t}\n\t\tif (!trak.sample_groups_info[sample_group_key]) {\n\t\t\ttrak.sample_groups_info[sample_group_key] = sample_group_info;\n\t\t}\n\t\tfor (l=0; l <trak_sgpds.length; l++) {\n\t\t\tif (trak_sgpds[l].grouping_type === sbgps[k].grouping_type) {\n\t\t\t\tsample_group_info.description = trak_sgpds[l];\n\t\t\t\tsample_group_info.description.used = true;\n\t\t\t}\n\t\t}\n\t\tif (traf_sgpds) {\n\t\t\tfor (l=0; l <traf_sgpds.length; l++) {\n\t\t\t\tif (traf_sgpds[l].grouping_type === sbgps[k].grouping_type) {\n\t\t\t\t\tsample_group_info.fragment_description = traf_sgpds[l];\n\t\t\t\t\tsample_group_info.fragment_description.used = true;\n\t\t\t\t\tsample_group_info.is_fragment = true;\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t}\n\t}\n\tif (!traf) {\n\t\tfor (k = 0; k < trak_sgpds.length; k++) {\n\t\t\tif (!trak_sgpds[k].used && trak_sgpds[k].version >= 2) {\n\t\t\t\tsample_group_key = trak_sgpds[k].grouping_type +\"/0\";\n\t\t\t\tsample_group_info = new SampleGroupInfo(trak_sgpds[k].grouping_type, 0);\n\t\t\t\tif (!trak.sample_groups_info[sample_group_key]) {\n\t\t\t\t\ttrak.sample_groups_info[sample_group_key] = sample_group_info;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (traf_sgpds) {\n\t\t\tfor (k = 0; k < traf_sgpds.length; k++) {\n\t\t\t\tif (!traf_sgpds[k].used && traf_sgpds[k].version >= 2) {\n\t\t\t\t\tsample_group_key = traf_sgpds[k].grouping_type +\"/0\";\n\t\t\t\t\tsample_group_info = new SampleGroupInfo(traf_sgpds[k].grouping_type, 0);\n\t\t\t\t\tsample_group_info.is_fragment = true;\n\t\t\t\t\tif (!traf.sample_groups_info[sample_group_key]) {\n\t\t\t\t\t\ttraf.sample_groups_info[sample_group_key] = sample_group_info;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nISOFile.setSampleGroupProperties = function(trak, sample, sample_number, sample_groups_info) {\n\tvar k;\n\tvar index;\n\tsample.sample_groups = [];\n\tfor (k in sample_groups_info) {\n\t\tsample.sample_groups[k] = {};\n\t\tsample.sample_groups[k].grouping_type = sample_groups_info[k].grouping_type;\n\t\tsample.sample_groups[k].grouping_type_parameter = sample_groups_info[k].grouping_type_parameter;\n\t\tif (sample_number >= sample_groups_info[k].last_sample_in_run) {\n\t\t\tif (sample_groups_info[k].last_sample_in_run < 0) {\n\t\t\t\tsample_groups_info[k].last_sample_in_run = 0;\n\t\t\t}\n\t\t\tsample_groups_info[k].entry_index++;\t\n\t\t\tif (sample_groups_info[k].entry_index <= sample_groups_info[k].sbgp.entries.length - 1) {\n\t\t\t\tsample_groups_info[k].last_sample_in_run += sample_groups_info[k].sbgp.entries[sample_groups_info[k].entry_index].sample_count;\n\t\t\t}\n\t\t}\n\t\tif (sample_groups_info[k].entry_index <= sample_groups_info[k].sbgp.entries.length - 1) {\n\t\t\tsample.sample_groups[k].group_description_index = sample_groups_info[k].sbgp.entries[sample_groups_info[k].entry_index].group_description_index;\n\t\t} else {\n\t\t\tsample.sample_groups[k].group_description_index = -1; // special value for not defined\n\t\t}\n\t\tif (sample.sample_groups[k].group_description_index !== 0) {\n\t\t\tvar description;\n\t\t\tif (sample_groups_info[k].fragment_description) {\n\t\t\t\tdescription = sample_groups_info[k].fragment_description;\n\t\t\t} else {\n\t\t\t\tdescription = sample_groups_info[k].description;\n\t\t\t}\n\t\t\tif (sample.sample_groups[k].group_description_index > 0) {\n\t\t\t\tif (sample.sample_groups[k].group_description_index > 65535) {\n\t\t\t\t\tindex = (sample.sample_groups[k].group_description_index >> 16)-1;\n\t\t\t\t} else {\n\t\t\t\t\tindex = sample.sample_groups[k].group_description_index-1;\n\t\t\t\t}\n\t\t\t\tif (description && index >= 0) {\n\t\t\t\t\tsample.sample_groups[k].description = description.entries[index];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (description && description.version >= 2) {\n\t\t\t\t\tif (description.default_group_description_index > 0) {\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tsample.sample_groups[k].description = description.entries[description.default_group_description_index-1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nISOFile.process_sdtp = function (sdtp, sample, number) {\n\tif (!sample) {\n\t\treturn;\n\t}\n\tif (sdtp) {\n\t\tsample.is_leading = sdtp.is_leading[number];\n\t\tsample.depends_on = sdtp.sample_depends_on[number];\n\t\tsample.is_depended_on = sdtp.sample_is_depended_on[number];\n\t\tsample.has_redundancy = sdtp.sample_has_redundancy[number];\n\t} else {\n\t\tsample.is_leading = 0;\n\t\tsample.depends_on = 0;\n\t\tsample.is_depended_on = 0\n\t\tsample.has_redundancy = 0;\n\t}\t\n}\n\n/* Build initial sample list from  sample tables */\nISOFile.prototype.buildSampleLists = function() {\t\n\tvar i;\n\tvar trak;\n\tfor (i = 0; i < this.moov.traks.length; i++) {\n\t\ttrak = this.moov.traks[i];\n\t\tthis.buildTrakSampleLists(trak);\n\t}\n}\n\nISOFile.prototype.buildTrakSampleLists = function(trak) {\t\n\tvar j, k;\n\tvar stco, stsc, stsz, stts, ctts, stss, stsd, subs, sbgps, sgpds, stdp;\n\tvar chunk_run_index, chunk_index, last_chunk_in_run, offset_in_chunk, last_sample_in_chunk;\n\tvar last_sample_in_stts_run, stts_run_index, last_sample_in_ctts_run, ctts_run_index, last_stss_index, last_subs_index, subs_entry_index, last_subs_sample_index;\n\n\ttrak.samples = [];\n\ttrak.samples_duration = 0;\n\ttrak.samples_size = 0;\n\tstco = trak.mdia.minf.stbl.stco || trak.mdia.minf.stbl.co64;\n\tstsc = trak.mdia.minf.stbl.stsc;\n\tstsz = trak.mdia.minf.stbl.stsz || trak.mdia.minf.stbl.stz2;\n\tstts = trak.mdia.minf.stbl.stts;\n\tctts = trak.mdia.minf.stbl.ctts;\n\tstss = trak.mdia.minf.stbl.stss;\n\tstsd = trak.mdia.minf.stbl.stsd;\n\tsubs = trak.mdia.minf.stbl.subs;\n\tstdp = trak.mdia.minf.stbl.stdp;\n\tsbgps = trak.mdia.minf.stbl.sbgps;\n\tsgpds = trak.mdia.minf.stbl.sgpds;\n\t\n\tlast_sample_in_stts_run = -1;\n\tstts_run_index = -1;\n\tlast_sample_in_ctts_run = -1;\n\tctts_run_index = -1;\n\tlast_stss_index = 0;\n\tsubs_entry_index = 0;\n\tlast_subs_sample_index = 0;\t\t\n\n\tISOFile.initSampleGroups(trak, null, sbgps, sgpds);\n\n\tif (typeof stsz === \"undefined\") {\n\t\treturn;\n\t}\n\n\t/* we build the samples one by one and compute their properties */\n\tfor (j = 0; j < stsz.sample_sizes.length; j++) {\n\t\tvar sample = {};\n\t\tsample.number = j;\n\t\tsample.track_id = trak.tkhd.track_id;\n\t\tsample.timescale = trak.mdia.mdhd.timescale;\n\t\tsample.alreadyRead = 0;\n\t\ttrak.samples[j] = sample;\n\t\t/* size can be known directly */\n\t\tsample.size = stsz.sample_sizes[j];\n\t\ttrak.samples_size += sample.size;\n\t\t/* computing chunk-based properties (offset, sample description index)*/\n\t\tif (j === 0) {\t\t\t\t\n\t\t\tchunk_index = 1; /* the first sample is in the first chunk (chunk indexes are 1-based) */\n\t\t\tchunk_run_index = 0; /* the first chunk is the first entry in the first_chunk table */\n\t\t\tsample.chunk_index = chunk_index;\n\t\t\tsample.chunk_run_index = chunk_run_index;\n\t\t\tlast_sample_in_chunk = stsc.samples_per_chunk[chunk_run_index];\n\t\t\toffset_in_chunk = 0;\n\n\t\t\t/* Is there another entry in the first_chunk table ? */\n\t\t\tif (chunk_run_index + 1 < stsc.first_chunk.length) {\n\t\t\t\t/* The last chunk in the run is the chunk before the next first chunk */\n\t\t\t\tlast_chunk_in_run = stsc.first_chunk[chunk_run_index+1]-1; \t\n\t\t\t} else {\n\t\t\t\t/* There is only one entry in the table, it is valid for all future chunks*/\n\t\t\t\tlast_chunk_in_run = Infinity;\n\t\t\t}\n\t\t} else {\n\t\t\tif (j < last_sample_in_chunk) {\n\t\t\t\t/* the sample is still in the current chunk */\n\t\t\t\tsample.chunk_index = chunk_index;\n\t\t\t\tsample.chunk_run_index = chunk_run_index;\n\t\t\t} else {\n\t\t\t\t/* the sample is in the next chunk */\n\t\t\t\tchunk_index++;\n\t\t\t\tsample.chunk_index = chunk_index;\n\t\t\t\t/* reset the accumulated offset in the chunk */\n\t\t\t\toffset_in_chunk = 0;\n\t\t\t\tif (chunk_index <= last_chunk_in_run) {\n\t\t\t\t\t/* stay in the same entry of the first_chunk table */\n\t\t\t\t\t/* chunk_run_index unmodified */\n\t\t\t\t} else {\n\t\t\t\t\tchunk_run_index++;\n\t\t\t\t\t/* Is there another entry in the first_chunk table ? */\n\t\t\t\t\tif (chunk_run_index + 1 < stsc.first_chunk.length) {\n\t\t\t\t\t\t/* The last chunk in the run is the chunk before the next first chunk */\n\t\t\t\t\t\tlast_chunk_in_run = stsc.first_chunk[chunk_run_index+1]-1; \t\n\t\t\t\t\t} else {\n\t\t\t\t\t\t/* There is only one entry in the table, it is valid for all future chunks*/\n\t\t\t\t\t\tlast_chunk_in_run = Infinity;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tsample.chunk_run_index = chunk_run_index;\n\t\t\t\tlast_sample_in_chunk += stsc.samples_per_chunk[chunk_run_index];\n\t\t\t}\n\t\t}\n\n\t\tsample.description_index = stsc.sample_description_index[sample.chunk_run_index]-1;\n\t\tsample.description = stsd.entries[sample.description_index];\n\t\tsample.offset = stco.chunk_offsets[sample.chunk_index-1] + offset_in_chunk; /* chunk indexes are 1-based */\n\t\toffset_in_chunk += sample.size;\n\n\t\t/* setting dts, cts, duration and rap flags */\n\t\tif (j > last_sample_in_stts_run) {\n\t\t\tstts_run_index++;\n\t\t\tif (last_sample_in_stts_run < 0) {\n\t\t\t\tlast_sample_in_stts_run = 0;\n\t\t\t}\n\t\t\tlast_sample_in_stts_run += stts.sample_counts[stts_run_index];\t\t\t\t\n\t\t}\n\t\tif (j > 0) {\n\t\t\ttrak.samples[j-1].duration = stts.sample_deltas[stts_run_index];\n\t\t\ttrak.samples_duration += trak.samples[j-1].duration;\n\t\t\tsample.dts = trak.samples[j-1].dts + trak.samples[j-1].duration;\n\t\t} else {\n\t\t\tsample.dts = 0;\n\t\t}\n\t\tif (ctts) {\n\t\t\tif (j >= last_sample_in_ctts_run) {\n\t\t\t\tctts_run_index++;\n\t\t\t\tif (last_sample_in_ctts_run < 0) {\n\t\t\t\t\tlast_sample_in_ctts_run = 0;\n\t\t\t\t}\n\t\t\t\tlast_sample_in_ctts_run += ctts.sample_counts[ctts_run_index];\t\t\t\t\n\t\t\t}\n\t\t\tsample.cts = trak.samples[j].dts + ctts.sample_offsets[ctts_run_index];\n\t\t} else {\n\t\t\tsample.cts = sample.dts;\n\t\t}\n\t\tif (stss) {\n\t\t\tif (j == stss.sample_numbers[last_stss_index] - 1) { // sample numbers are 1-based\n\t\t\t\tsample.is_sync = true;\n\t\t\t\tlast_stss_index++;\n\t\t\t} else {\n\t\t\t\tsample.is_sync = false;\t\t\t\t\n\t\t\t\tsample.degradation_priority = 0;\n\t\t\t}\n\t\t\tif (subs) {\n\t\t\t\tif (subs.entries[subs_entry_index].sample_delta + last_subs_sample_index == j+1) {\n\t\t\t\t\tsample.subsamples = subs.entries[subs_entry_index].subsamples;\n\t\t\t\t\tlast_subs_sample_index += subs.entries[subs_entry_index].sample_delta;\n\t\t\t\t\tsubs_entry_index++;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tsample.is_sync = true;\n\t\t}\n\t\tISOFile.process_sdtp(trak.mdia.minf.stbl.sdtp, sample, sample.number);\n\t\tif (stdp) {\n\t\t\tsample.degradation_priority = stdp.priority[j];\n\t\t} else {\n\t\t\tsample.degradation_priority = 0;\n\t\t}\n\t\tif (subs) {\n\t\t\tif (subs.entries[subs_entry_index].sample_delta + last_subs_sample_index == j) {\n\t\t\t\tsample.subsamples = subs.entries[subs_entry_index].subsamples;\n\t\t\t\tlast_subs_sample_index += subs.entries[subs_entry_index].sample_delta;\n\t\t\t}\n\t\t}\n\t\tif (sbgps.length > 0 || sgpds.length > 0) {\n\t\t\tISOFile.setSampleGroupProperties(trak, sample, j, trak.sample_groups_info);\n\t\t}\n\t}\n\tif (j>0) {\n\t\ttrak.samples[j-1].duration = Math.max(trak.mdia.mdhd.duration - trak.samples[j-1].dts, 0);\n\t\ttrak.samples_duration += trak.samples[j-1].duration;\n\t}\n}\n\n/* Update sample list when new 'moof' boxes are received */\nISOFile.prototype.updateSampleLists = function() {\t\n\tvar i, j, k;\n\tvar default_sample_description_index, default_sample_duration, default_sample_size, default_sample_flags;\n\tvar last_run_position;\n\tvar box, moof, traf, trak, trex;\n\tvar sample;\n\tvar sample_flags;\n\t\n\tif (this.moov === undefined) {\n\t\treturn;\n\t}\n\t/* if the input file is fragmented and fetched in multiple downloads, we need to update the list of samples */\n\twhile (this.lastMoofIndex < this.moofs.length) {\n\t\tbox = this.moofs[this.lastMoofIndex];\n\t\tthis.lastMoofIndex++;\n\t\tif (box.type == \"moof\") {\n\t\t\tmoof = box;\n\t\t\tfor (i = 0; i < moof.trafs.length; i++) {\n\t\t\t\ttraf = moof.trafs[i];\n\t\t\t\ttrak = this.getTrackById(traf.tfhd.track_id);\n\t\t\t\ttrex = this.getTrexById(traf.tfhd.track_id);\n\t\t\t\tif (traf.tfhd.flags & BoxParser.TFHD_FLAG_SAMPLE_DESC) {\n\t\t\t\t\tdefault_sample_description_index = traf.tfhd.default_sample_description_index;\n\t\t\t\t} else {\n\t\t\t\t\tdefault_sample_description_index = (trex ? trex.default_sample_description_index: 1);\n\t\t\t\t}\n\t\t\t\tif (traf.tfhd.flags & BoxParser.TFHD_FLAG_SAMPLE_DUR) {\n\t\t\t\t\tdefault_sample_duration = traf.tfhd.default_sample_duration;\n\t\t\t\t} else {\n\t\t\t\t\tdefault_sample_duration = (trex ? trex.default_sample_duration : 0);\n\t\t\t\t}\n\t\t\t\tif (traf.tfhd.flags & BoxParser.TFHD_FLAG_SAMPLE_SIZE) {\n\t\t\t\t\tdefault_sample_size = traf.tfhd.default_sample_size;\n\t\t\t\t} else {\n\t\t\t\t\tdefault_sample_size = (trex ? trex.default_sample_size : 0);\n\t\t\t\t}\n\t\t\t\tif (traf.tfhd.flags & BoxParser.TFHD_FLAG_SAMPLE_FLAGS) {\n\t\t\t\t\tdefault_sample_flags = traf.tfhd.default_sample_flags;\n\t\t\t\t} else {\n\t\t\t\t\tdefault_sample_flags = (trex ? trex.default_sample_flags : 0);\n\t\t\t\t}\n\t\t\t\ttraf.sample_number = 0;\n\t\t\t\t/* process sample groups */\n\t\t\t\tif (traf.sbgps.length > 0) {\n\t\t\t\t\tISOFile.initSampleGroups(trak, traf, traf.sbgps, trak.mdia.minf.stbl.sgpds, traf.sgpds);\n\t\t\t\t}\n\t\t\t\tfor (j = 0; j < traf.truns.length; j++) {\n\t\t\t\t\tvar trun = traf.truns[j];\n\t\t\t\t\tfor (k = 0; k < trun.sample_count; k++) {\n\t\t\t\t\t\tsample = {};\n\t\t\t\t\t\tsample.moof_number = this.lastMoofIndex;\n\t\t\t\t\t\tsample.number_in_traf = traf.sample_number;\n\t\t\t\t\t\ttraf.sample_number++;\n\t\t\t            sample.number = trak.samples.length;\n\t\t\t\t\t\ttraf.first_sample_index = trak.samples.length;\n\t\t\t\t\t\ttrak.samples.push(sample);\n\t\t\t\t\t\tsample.track_id = trak.tkhd.track_id;\n\t\t\t\t\t\tsample.timescale = trak.mdia.mdhd.timescale;\n\t\t\t\t\t\tsample.description_index = default_sample_description_index-1;\n\t\t\t\t\t\tsample.description = trak.mdia.minf.stbl.stsd.entries[sample.description_index];\n\t\t\t\t\t\tsample.size = default_sample_size;\n\t\t\t\t\t\tif (trun.flags & BoxParser.TRUN_FLAGS_SIZE) {\n\t\t\t\t\t\t\tsample.size = trun.sample_size[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrak.samples_size += sample.size;\n\t\t\t\t\t\tsample.duration = default_sample_duration;\n\t\t\t\t\t\tif (trun.flags & BoxParser.TRUN_FLAGS_DURATION) {\n\t\t\t\t\t\t\tsample.duration = trun.sample_duration[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttrak.samples_duration += sample.duration;\n\t\t\t\t\t\tif (trak.first_traf_merged || k > 0) {\n\t\t\t\t\t\t\tsample.dts = trak.samples[trak.samples.length-2].dts+trak.samples[trak.samples.length-2].duration;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (traf.tfdt) {\n\t\t\t\t\t\t\t\tsample.dts = traf.tfdt.baseMediaDecodeTime;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsample.dts = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttrak.first_traf_merged = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsample.cts = sample.dts;\n\t\t\t\t\t\tif (trun.flags & BoxParser.TRUN_FLAGS_CTS_OFFSET) {\n\t\t\t\t\t\t\tsample.cts = sample.dts + trun.sample_composition_time_offset[k];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsample_flags = default_sample_flags;\n\t\t\t\t\t\tif (trun.flags & BoxParser.TRUN_FLAGS_FLAGS) {\n\t\t\t\t\t\t\tsample_flags = trun.sample_flags[k];\n\t\t\t\t\t\t} else if (k === 0 && (trun.flags & BoxParser.TRUN_FLAGS_FIRST_FLAG)) {\n\t\t\t\t\t\t\tsample_flags = trun.first_sample_flags;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsample.is_sync = ((sample_flags >> 16 & 0x1) ? false : true);\n\t\t\t\t\t\tsample.is_leading = (sample_flags >> 26 & 0x3);\n\t\t\t\t\t\tsample.depends_on = (sample_flags >> 24 & 0x3);\n\t\t\t\t\t\tsample.is_depended_on = (sample_flags >> 22 & 0x3);\n\t\t\t\t\t\tsample.has_redundancy = (sample_flags >> 20 & 0x3);\n\t\t\t\t\t\tsample.degradation_priority = (sample_flags & 0xFFFF);\n\t\t\t\t\t\t//ISOFile.process_sdtp(traf.sdtp, sample, sample.number_in_traf);\n\t\t\t\t\t\tvar bdop = (traf.tfhd.flags & BoxParser.TFHD_FLAG_BASE_DATA_OFFSET) ? true : false;\n\t\t\t\t\t\tvar dbim = (traf.tfhd.flags & BoxParser.TFHD_FLAG_DEFAULT_BASE_IS_MOOF) ? true : false;\n\t\t\t\t\t\tvar dop = (trun.flags & BoxParser.TRUN_FLAGS_DATA_OFFSET) ? true : false;\n\t\t\t\t\t\tvar bdo = 0;\n\t\t\t\t\t\tif (!bdop) {\n\t\t\t\t\t\t\tif (!dbim) {\n\t\t\t\t\t\t\t\tif (j === 0) { // the first track in the movie fragment\n\t\t\t\t\t\t\t\t\tbdo = moof.start; // the position of the first byte of the enclosing Movie Fragment Box\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tbdo = last_run_position; // end of the data defined by the preceding *track* (irrespective of the track id) fragment in the moof\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbdo = moof.start;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbdo = traf.tfhd.base_data_offset;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j === 0 && k === 0) {\n\t\t\t\t\t\t\tif (dop) {\n\t\t\t\t\t\t\t\tsample.offset = bdo + trun.data_offset; // If the data-offset is present, it is relative to the base-data-offset established in the track fragment header\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsample.offset = bdo; // the data for this run starts the base-data-offset defined by the track fragment header\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsample.offset = last_run_position; // this run starts immediately after the data of the previous run\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlast_run_position = sample.offset + sample.size;\n\t\t\t\t\t\tif (traf.sbgps.length > 0 || traf.sgpds.length > 0 ||\n\t\t\t\t\t\t\ttrak.mdia.minf.stbl.sbgps.length > 0 || trak.mdia.minf.stbl.sgpds.length > 0) {\n\t\t\t\t\t\t\tISOFile.setSampleGroupProperties(trak, sample, sample.number_in_traf, traf.sample_groups_info);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (traf.subs) {\n\t\t\t\t\ttrak.has_fragment_subsamples = true;\n\t\t\t\t\tvar sample_index = traf.first_sample_index;\n\t\t\t\t\tfor (j = 0; j < traf.subs.entries.length; j++) {\n\t\t\t\t\t\tsample_index += traf.subs.entries[j].sample_delta;\n\t\t\t\t\t\tsample = trak.samples[sample_index-1];\n\t\t\t\t\t\tsample.subsamples = traf.subs.entries[j].subsamples;\n\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\t\n}\n\n/* Try to get sample data for a given sample:\n   returns null if not found\n   returns the same sample if already requested\n */\nISOFile.prototype.getSample = function(trak, sampleNum) {\t\n\tvar buffer;\n\tvar sample = trak.samples[sampleNum];\n\t\n\tif (!this.moov) {\n\t\treturn null;\n\t}\n\n\tif (!sample.data) {\n\t\t/* Not yet fetched */\n\t\tsample.data = new Uint8Array(sample.size);\n\t\tsample.alreadyRead = 0;\n\t\tthis.samplesDataSize += sample.size;\n\t\tLog.debug(\"ISOFile\", \"Allocating sample #\"+sampleNum+\" on track #\"+trak.tkhd.track_id+\" of size \"+sample.size+\" (total: \"+this.samplesDataSize+\")\");\n\t} else if (sample.alreadyRead == sample.size) {\n\t\t/* Already fetched entirely */\n\t\treturn sample;\n\t}\n\n\t/* The sample has only been partially fetched, we need to check in all buffers */\n\twhile(true) {\n\t\tvar index =\tthis.stream.findPosition(true, sample.offset + sample.alreadyRead, false);\n\t\tif (index > -1) {\n\t\t\tbuffer = this.stream.buffers[index];\n\t\t\tvar lengthAfterStart = buffer.byteLength - (sample.offset + sample.alreadyRead - buffer.fileStart);\n\t\t\tif (sample.size - sample.alreadyRead <= lengthAfterStart) {\n\t\t\t\t/* the (rest of the) sample is entirely contained in this buffer */\n\n\t\t\t\tLog.debug(\"ISOFile\",\"Getting sample #\"+sampleNum+\" data (alreadyRead: \"+sample.alreadyRead+\" offset: \"+\n\t\t\t\t\t(sample.offset+sample.alreadyRead - buffer.fileStart)+\" read size: \"+(sample.size - sample.alreadyRead)+\" full size: \"+sample.size+\")\");\n\n\t\t\t\tDataStream.memcpy(sample.data.buffer, sample.alreadyRead,\n\t\t\t\t                  buffer, sample.offset+sample.alreadyRead - buffer.fileStart, sample.size - sample.alreadyRead);\n\n\t\t\t\t/* update the number of bytes used in this buffer and check if it needs to be removed */\n\t\t\t\tbuffer.usedBytes += sample.size - sample.alreadyRead;\n\t\t\t\tthis.stream.logBufferLevel();\n\n\t\t\t\tsample.alreadyRead = sample.size;\n\n\t\t\t\treturn sample;\n\t\t\t} else {\n\t\t\t\t/* the sample does not end in this buffer */\n\n\t\t\t\tif (lengthAfterStart === 0) return null;\n\n\t\t\t\tLog.debug(\"ISOFile\",\"Getting sample #\"+sampleNum+\" partial data (alreadyRead: \"+sample.alreadyRead+\" offset: \"+\n\t\t\t\t\t(sample.offset+sample.alreadyRead - buffer.fileStart)+\" read size: \"+lengthAfterStart+\" full size: \"+sample.size+\")\");\n\n\t\t\t\tDataStream.memcpy(sample.data.buffer, sample.alreadyRead,\n\t\t\t\t                  buffer, sample.offset+sample.alreadyRead - buffer.fileStart, lengthAfterStart);\n\t\t\t\tsample.alreadyRead += lengthAfterStart;\n\n\t\t\t\t/* update the number of bytes used in this buffer and check if it needs to be removed */\n\t\t\t\tbuffer.usedBytes += lengthAfterStart;\n\t\t\t\tthis.stream.logBufferLevel();\n\n\t\t\t\t/* keep looking in the next buffer */\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\n/* Release the memory used to store the data of the sample */\nISOFile.prototype.releaseSample = function(trak, sampleNum) {\t\n\tvar sample = trak.samples[sampleNum];\n\tif (sample.data) {\n\t\tthis.samplesDataSize -= sample.size;\n\t\tsample.data = null;\n\t\tsample.alreadyRead = 0;\n\t\treturn sample.size;\n\t} else {\n\t\treturn 0;\n\t}\n}\n\nISOFile.prototype.getAllocatedSampleDataSize = function() {\n\treturn this.samplesDataSize;\n}\n\n/* Builds the MIME Type 'codecs' sub-parameters for the whole file */\nISOFile.prototype.getCodecs = function() {\t\n\tvar i;\n\tvar codecs = \"\";\n\tfor (i = 0; i < this.moov.traks.length; i++) {\n\t\tvar trak = this.moov.traks[i];\n\t\tif (i>0) {\n\t\t\tcodecs+=\",\"; \n\t\t}\n\t\tcodecs += trak.mdia.minf.stbl.stsd.entries[0].getCodec();\t\t\n\t}\n\treturn codecs;\n}\n\n/* Helper function */\nISOFile.prototype.getTrexById = function(id) {\t\n\tvar i;\n\tif (!this.moov || !this.moov.mvex) return null;\n\tfor (i = 0; i < this.moov.mvex.trexs.length; i++) {\n\t\tvar trex = this.moov.mvex.trexs[i];\n\t\tif (trex.track_id == id) return trex;\n\t}\n\treturn null;\n}\n\n/* Helper function */\nISOFile.prototype.getTrackById = function(id) {\n\tif (this.moov === undefined) {\n\t\treturn null;\n\t}\n\tfor (var j = 0; j < this.moov.traks.length; j++) {\n\t\tvar trak = this.moov.traks[j];\n\t\tif (trak.tkhd.track_id == id) return trak;\n\t}\n\treturn null;\n}\n// file:src/isofile-item-processing.js\n/* size of the buffers allocated for samples */\nISOFile.prototype.itemsDataSize = 0;\n\nISOFile.prototype.flattenItemInfo = function() {\t\n\tvar items = this.items;\n\tvar entity_groups = this.entity_groups;\n\tvar i, j;\n\tvar item;\n\tvar meta = this.meta;\n\tif (meta === null || meta === undefined) return;\n\tif (meta.hdlr === undefined) return;\n\tif (meta.iinf === undefined) return;\n\tfor (i = 0; i < meta.iinf.item_infos.length; i++) {\n\t\titem = {};\n\t\titem.id = meta.iinf.item_infos[i].item_ID;\n\t\titems[item.id] = item;\n\t\titem.ref_to = [];\n\t\titem.name = meta.iinf.item_infos[i].item_name;\n\t\tif (meta.iinf.item_infos[i].protection_index > 0) {\n\t\t\titem.protection = meta.ipro.protections[meta.iinf.item_infos[i].protection_index-1];\n\t\t}\n\t\tif (meta.iinf.item_infos[i].item_type) {\n\t\t\titem.type = meta.iinf.item_infos[i].item_type;\n\t\t} else {\n\t\t\titem.type = \"mime\";\n\t\t}\n\t\titem.content_type = meta.iinf.item_infos[i].content_type;\n\t\titem.content_encoding = meta.iinf.item_infos[i].content_encoding;\n\t\titem.item_uri_type = meta.iinf.item_infos[i].item_uri_type;\n\t}\n\tif (meta.grpl) {\n\t\tfor (i = 0; i < meta.grpl.boxes.length; i++) {\n\t\t\tentity_group = {};\n\t\t\tentity_group.id = meta.grpl.boxes[i].group_id;\n\t\t\tentity_group.entity_ids = meta.grpl.boxes[i].entity_ids;\n\t\t\tentity_group.type = meta.grpl.boxes[i].type;\n\t\t\tentity_groups[entity_group.id] = entity_group;\n\t\t}\n\t}\n\tif (meta.iloc) {\n\t\tfor(i = 0; i < meta.iloc.items.length; i++) {\n\t\t\tvar offset;\n\t\t\tvar itemloc = meta.iloc.items[i];\n\t\t\titem = items[itemloc.item_ID];\n\t\t\tif (itemloc.data_reference_index !== 0) {\n\t\t\t\tLog.warn(\"Item storage with reference to other files: not supported\");\n\t\t\t\titem.source = meta.dinf.boxes[itemloc.data_reference_index-1];\n\t\t\t}\n\t\t\tswitch(itemloc.construction_method) {\n\t\t\t\tcase 0: // offset into the file referenced by the data reference index\n\t\t\t\tbreak;\n\t\t\t\tcase 1: // offset into the idat box of this meta box\n\t\t\t\tbreak;\n\t\t\t\tcase 2: // offset into another item\n\t\t\t\tLog.warn(\"Item storage with construction_method : not supported\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\titem.extents = [];\n\t\t\titem.size = 0;\n\t\t\tfor (j = 0; j < itemloc.extents.length; j++) {\n\t\t\t\titem.extents[j] = {};\n\t\t\t\titem.extents[j].offset = itemloc.extents[j].extent_offset + itemloc.base_offset;\n\t\t\t\tif (itemloc.construction_method == 1) {\n\t\t\t\t\titem.extents[j].offset += meta.idat.start + meta.idat.hdr_size;\n\t\t\t\t}\n\t\t\t\titem.extents[j].length = itemloc.extents[j].extent_length;\n\t\t\t\titem.extents[j].alreadyRead = 0;\n\t\t\t\titem.size += item.extents[j].length;\n\t\t\t}\n\t\t}\n\t}\n\tif (meta.pitm) {\n\t\titems[meta.pitm.item_id].primary = true;\n\t}\n\tif (meta.iref) {\n\t\tfor (i=0; i <meta.iref.references.length; i++) {\n\t\t\tvar ref = meta.iref.references[i];\n\t\t\tfor (j=0; j<ref.references.length; j++) {\n\t\t\t\titems[ref.from_item_ID].ref_to.push({type: ref.type, id: ref.references[j]});\n\t\t\t}\n\t\t}\n\t}\n\tif (meta.iprp) {\n\t\tfor (var k = 0; k < meta.iprp.ipmas.length; k++) {\n\t\t\tvar ipma = meta.iprp.ipmas[k];\n\t\t\tfor (i = 0; i < ipma.associations.length; i++) {\n\t\t\t\tvar association = ipma.associations[i];\n\t\t\t\titem = items[association.id];\n\t\t\t\tif (!item) {\n\t\t\t\t\titem = entity_groups[association.id];\n\t\t\t\t}\n\t\t\t\tif (item) {\n\t\t\t\t\tif (item.properties === undefined) {\n\t\t\t\t\t\titem.properties = {};\n\t\t\t\t\t\titem.properties.boxes = [];\n\t\t\t\t\t}\n\t\t\t\t\tfor (j = 0; j < association.props.length; j++) {\n\t\t\t\t\t\tvar propEntry = association.props[j];\n\t\t\t\t\t\tif (propEntry.property_index > 0 && propEntry.property_index-1 < meta.iprp.ipco.boxes.length) {\n\t\t\t\t\t\t\tvar propbox = meta.iprp.ipco.boxes[propEntry.property_index-1];\n\t\t\t\t\t\t\titem.properties[propbox.type] = propbox;\n\t\t\t\t\t\t\titem.properties.boxes.push(propbox);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nISOFile.prototype.getItem = function(item_id) {\t\n\tvar buffer;\n\tvar item;\n\t\n\tif (!this.meta) {\n\t\treturn null;\n\t}\n\n \titem = this.items[item_id];\n\tif (!item.data && item.size) {\n\t\t/* Not yet fetched */\n\t\titem.data = new Uint8Array(item.size);\n\t\titem.alreadyRead = 0;\n\t\tthis.itemsDataSize += item.size;\n\t\tLog.debug(\"ISOFile\", \"Allocating item #\"+item_id+\" of size \"+item.size+\" (total: \"+this.itemsDataSize+\")\");\n\t} else if (item.alreadyRead === item.size) {\n\t\t/* Already fetched entirely */\n\t\treturn item;\n\t}\n\n\t/* The item has only been partially fetched, we need to check in all buffers to find the remaining extents*/\n\n\tfor (var i = 0; i < item.extents.length; i++) {\n\t\tvar extent = item.extents[i];\n\t\tif (extent.alreadyRead === extent.length) {\n\t\t\tcontinue;\n\t\t} else {\n\t\t\tvar index =\tthis.stream.findPosition(true, extent.offset + extent.alreadyRead, false);\n\t\t\tif (index > -1) {\n\t\t\t\tbuffer = this.stream.buffers[index];\n\t\t\t\tvar lengthAfterStart = buffer.byteLength - (extent.offset + extent.alreadyRead - buffer.fileStart);\n\t\t\t\tif (extent.length - extent.alreadyRead <= lengthAfterStart) {\n\t\t\t\t\t/* the (rest of the) extent is entirely contained in this buffer */\n\n\t\t\t\t\tLog.debug(\"ISOFile\",\"Getting item #\"+item_id+\" extent #\"+i+\" data (alreadyRead: \"+extent.alreadyRead+\n\t\t\t\t\t\t\" offset: \"+(extent.offset+extent.alreadyRead - buffer.fileStart)+\" read size: \"+(extent.length - extent.alreadyRead)+\n\t\t\t\t\t\t\" full extent size: \"+extent.length+\" full item size: \"+item.size+\")\");\n\n\t\t\t\t\tDataStream.memcpy(item.data.buffer, item.alreadyRead, \n\t\t\t\t\t                  buffer, extent.offset+extent.alreadyRead - buffer.fileStart, extent.length - extent.alreadyRead);\n\n\t\t\t\t\t/* update the number of bytes used in this buffer and check if it needs to be removed */\n\t\t\t\t\tbuffer.usedBytes += extent.length - extent.alreadyRead;\n\t\t\t\t\tthis.stream.logBufferLevel();\n\n\t\t\t\t\titem.alreadyRead += (extent.length - extent.alreadyRead);\n\t\t\t\t\textent.alreadyRead = extent.length;\n\t\t\t\t} else {\n\t\t\t\t\t/* the sample does not end in this buffer */\n\n\t\t\t\t\tLog.debug(\"ISOFile\",\"Getting item #\"+item_id+\" extent #\"+i+\" partial data (alreadyRead: \"+extent.alreadyRead+\" offset: \"+\n\t\t\t\t\t\t(extent.offset+extent.alreadyRead - buffer.fileStart)+\" read size: \"+lengthAfterStart+\n\t\t\t\t\t\t\" full extent size: \"+extent.length+\" full item size: \"+item.size+\")\");\n\n\t\t\t\t\tDataStream.memcpy(item.data.buffer, item.alreadyRead, \n\t\t\t\t\t                  buffer, extent.offset+extent.alreadyRead - buffer.fileStart, lengthAfterStart);\n\t\t\t\t\textent.alreadyRead += lengthAfterStart;\n\t\t\t\t\titem.alreadyRead += lengthAfterStart;\n\n\t\t\t\t\t/* update the number of bytes used in this buffer and check if it needs to be removed */\n\t\t\t\t\tbuffer.usedBytes += lengthAfterStart;\n\t\t\t\t\tthis.stream.logBufferLevel();\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\tif (item.alreadyRead === item.size) {\n\t\t/* fetched entirely */\n\t\treturn item;\n\t} else {\n\t\treturn null;\n\t}\n}\n\n/* Release the memory used to store the data of the item */\nISOFile.prototype.releaseItem = function(item_id) {\t\n\tvar item = this.items[item_id];\n\tif (item.data) {\n\t\tthis.itemsDataSize -= item.size;\n\t\titem.data = null;\n\t\titem.alreadyRead = 0;\n\t\tfor (var i = 0; i < item.extents.length; i++) {\n\t\t\tvar extent = item.extents[i];\n\t\t\textent.alreadyRead = 0;\n\t\t}\n\t\treturn item.size;\n\t} else {\n\t\treturn 0;\n\t}\n}\n\n\nISOFile.prototype.processItems = function(callback) {\n\tfor(var i in this.items) {\n\t\tvar item = this.items[i];\n\t\tthis.getItem(item.id);\n\t\tif (callback && !item.sent) {\n\t\t\tcallback(item);\n\t\t\titem.sent = true;\n\t\t\titem.data = null;\n\t\t}\n\t}\n}\n\nISOFile.prototype.hasItem = function(name) {\n\tfor(var i in this.items) {\n\t\tvar item = this.items[i];\n\t\tif (item.name === name) {\n\t\t\treturn item.id;\n\t\t}\n\t}\n\treturn -1;\n}\n\nISOFile.prototype.getMetaHandler = function() {\n\tif (!this.meta) {\n\t\treturn null;\n\t} else {\n\t\treturn this.meta.hdlr.handler;\t\t\n\t}\n}\n\nISOFile.prototype.getPrimaryItem = function() {\n\tif (!this.meta || !this.meta.pitm) {\n\t\treturn null;\n\t} else {\n\t\treturn this.getItem(this.meta.pitm.item_id);\n\t}\n}\n\nISOFile.prototype.itemToFragmentedTrackFile = function(_options) {\n\tvar options = _options || {};\n\tvar item = null;\n\tif (options.itemId) {\n\t\titem = this.getItem(options.itemId);\n\t} else {\n\t\titem = this.getPrimaryItem();\n\t}\n\tif (item == null) return null;\n\n\tvar file = new ISOFile();\n\tfile.discardMdatData = false;\n\t// assuming the track type is the same as the item type\n\tvar trackOptions = { type: item.type, description_boxes: item.properties.boxes};\n\tif (item.properties.ispe) {\n\t\ttrackOptions.width = item.properties.ispe.image_width;\n\t\ttrackOptions.height = item.properties.ispe.image_height;\n\t}\n\tvar trackId = file.addTrack(trackOptions);\n\tif (trackId) {\n\t\tfile.addSample(trackId, item.data);\n\t\treturn file;\n\t} else {\n\t\treturn null;\n\t}\n}\n\n// file:src/isofile-write.js\n/* Rewrite the entire file */\nISOFile.prototype.write = function(outstream) {\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tthis.boxes[i].write(outstream);\n\t}\n}\n\nISOFile.prototype.createFragment = function(track_id, sampleNumber, stream_) {\n\tvar trak = this.getTrackById(track_id);\n\tvar sample = this.getSample(trak, sampleNumber);\n\tif (sample == null) {\n\t\tthis.setNextSeekPositionFromSample(trak.samples[sampleNumber]);\n\t\treturn null;\n\t}\n\t\n\tvar stream = stream_ || new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\n\tvar moof = this.createSingleSampleMoof(sample);\n\tmoof.write(stream);\n\n\t/* adjusting the data_offset now that the moof size is known*/\n\tmoof.trafs[0].truns[0].data_offset = moof.size+8; //8 is mdat header\n\tLog.debug(\"MP4Box\", \"Adjusting data_offset with new value \"+moof.trafs[0].truns[0].data_offset);\n\tstream.adjustUint32(moof.trafs[0].truns[0].data_offset_position, moof.trafs[0].truns[0].data_offset);\n\t\t\n\tvar mdat = new BoxParser.mdatBox();\n\tmdat.data = sample.data;\n\tmdat.write(stream);\n\treturn stream;\n}\n\n/* Modify the file and create the initialization segment */\nISOFile.writeInitializationSegment = function(ftyp, moov, total_duration, sample_duration) {\n\tvar i;\n\tvar index;\n\tvar mehd;\n\tvar trex;\n\tvar box;\n\tLog.debug(\"ISOFile\", \"Generating initialization segment\");\n\n\tvar stream = new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\tftyp.write(stream);\n\t\n\t/* we can now create the new mvex box */\n\tvar mvex = moov.add(\"mvex\");\n\tif (total_duration) {\n\t\tmvex.add(\"mehd\").set(\"fragment_duration\", total_duration);\n\t}\n\tfor (i = 0; i < moov.traks.length; i++) {\n\t\tmvex.add(\"trex\").set(\"track_id\", moov.traks[i].tkhd.track_id)\n\t\t\t\t\t\t.set(\"default_sample_description_index\", 1)\n\t\t\t\t\t\t.set(\"default_sample_duration\", sample_duration)\n\t\t\t\t\t\t.set(\"default_sample_size\", 0)\n\t\t\t\t\t\t.set(\"default_sample_flags\", 1<<16)\n\t}\n\tmoov.write(stream);\n\n\treturn stream.buffer;\n\n}\n\nISOFile.prototype.save = function(name) {\n\tvar stream = new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\tthis.write(stream);\n\tstream.save(name);\t\n}\n\nISOFile.prototype.getBuffer = function() {\n\tvar stream = new DataStream();\n\tstream.endianness = DataStream.BIG_ENDIAN;\n\tthis.write(stream);\n\treturn stream.buffer;\n}\n\nISOFile.prototype.initializeSegmentation = function() {\n\tvar i;\n\tvar j;\n\tvar box;\n\tvar initSegs;\n\tvar trak;\n\tvar seg;\n\tif (this.onSegment === null) {\n\t\tLog.warn(\"MP4Box\", \"No segmentation callback set!\");\n\t}\n\tif (!this.isFragmentationInitialized) {\n\t\tthis.isFragmentationInitialized = true;\t\t\n\t\tthis.nextMoofNumber = 0;\n\t\tthis.resetTables();\n\t}\t\n\tinitSegs = [];\t\n\tfor (i = 0; i < this.fragmentedTracks.length; i++) {\n\t\tvar moov = new BoxParser.moovBox();\n\t\tmoov.mvhd = this.moov.mvhd;\n\t    moov.boxes.push(moov.mvhd);\n\t\ttrak = this.getTrackById(this.fragmentedTracks[i].id);\n\t\tmoov.boxes.push(trak);\n\t\tmoov.traks.push(trak);\n\t\tseg = {};\n\t\tseg.id = trak.tkhd.track_id;\n\t\tseg.user = this.fragmentedTracks[i].user;\n\t\tseg.buffer = ISOFile.writeInitializationSegment(this.ftyp, moov, (this.moov.mvex && this.moov.mvex.mehd ? this.moov.mvex.mehd.fragment_duration: undefined), (this.moov.traks[i].samples.length>0 ? this.moov.traks[i].samples[0].duration: 0));\n\t\tinitSegs.push(seg);\n\t}\n\treturn initSegs;\n}\n\n// file:src/box-print.js\n/* \n * Copyright (c) Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nBoxParser.Box.prototype.printHeader = function(output) {\n\tthis.size += 8;\n\tif (this.size > MAX_SIZE) {\n\t\tthis.size += 8;\n\t}\n\tif (this.type === \"uuid\") {\n\t\tthis.size += 16;\n\t}\n\toutput.log(output.indent+\"size:\"+this.size);\n\toutput.log(output.indent+\"type:\"+this.type);\n}\n\nBoxParser.FullBox.prototype.printHeader = function(output) {\n\tthis.size += 4;\n\tBoxParser.Box.prototype.printHeader.call(this, output);\n\toutput.log(output.indent+\"version:\"+this.version);\n\toutput.log(output.indent+\"flags:\"+this.flags);\n}\n\nBoxParser.Box.prototype.print = function(output) {\n\tthis.printHeader(output);\n}\n\nBoxParser.ContainerBox.prototype.print = function(output) {\n\tthis.printHeader(output);\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tif (this.boxes[i]) {\n\t\t\tvar prev_indent = output.indent;\n\t\t\toutput.indent += \" \";\n\t\t\tthis.boxes[i].print(output);\n\t\t\toutput.indent = prev_indent;\n\t\t}\n\t}\n}\n\nISOFile.prototype.print = function(output) {\n\toutput.indent = \"\";\n\tfor (var i=0; i<this.boxes.length; i++) {\n\t\tif (this.boxes[i]) {\n\t\t\tthis.boxes[i].print(output);\n\t\t}\n\t}\t\n}\n\nBoxParser.mvhdBox.prototype.print = function(output) {\n\tBoxParser.FullBox.prototype.printHeader.call(this, output);\n\toutput.log(output.indent+\"creation_time: \"+this.creation_time);\n\toutput.log(output.indent+\"modification_time: \"+this.modification_time);\n\toutput.log(output.indent+\"timescale: \"+this.timescale);\n\toutput.log(output.indent+\"duration: \"+this.duration);\n\toutput.log(output.indent+\"rate: \"+this.rate);\n\toutput.log(output.indent+\"volume: \"+(this.volume>>8));\n\toutput.log(output.indent+\"matrix: \"+this.matrix.join(\", \"));\n\toutput.log(output.indent+\"next_track_id: \"+this.next_track_id);\n}\n\nBoxParser.tkhdBox.prototype.print = function(output) {\n\tBoxParser.FullBox.prototype.printHeader.call(this, output);\n\toutput.log(output.indent+\"creation_time: \"+this.creation_time);\n\toutput.log(output.indent+\"modification_time: \"+this.modification_time);\n\toutput.log(output.indent+\"track_id: \"+this.track_id);\n\toutput.log(output.indent+\"duration: \"+this.duration);\n\toutput.log(output.indent+\"volume: \"+(this.volume>>8));\n\toutput.log(output.indent+\"matrix: \"+this.matrix.join(\", \"));\n\toutput.log(output.indent+\"layer: \"+this.layer);\n\toutput.log(output.indent+\"alternate_group: \"+this.alternate_group);\n\toutput.log(output.indent+\"width: \"+this.width);\n\toutput.log(output.indent+\"height: \"+this.height);\n}// file:src/mp4box.js\n/*\n * Copyright (c) 2012-2013. Telecom ParisTech/TSI/MM/GPAC Cyril Concolato\n * License: BSD-3-Clause (see LICENSE file)\n */\nvar MP4Box = {};\n\nMP4Box.createFile = function (_keepMdatData, _stream) {\n\t/* Boolean indicating if bytes containing media data should be kept in memory */\n\tvar keepMdatData = (_keepMdatData !== undefined ? _keepMdatData : true);\n\tvar file = new ISOFile(_stream);\n\tfile.discardMdatData = (keepMdatData ? false : true);\n\treturn file;\n}\n\nif (typeof exports !== 'undefined') {\n\texports.createFile = MP4Box.createFile;\n}\n",null,null,null,null,null,null,null,null,null,null],"names":["MAX_U6","Math","pow","MAX_U14","MAX_U30","MAX_U53","Number","MAX_SAFE_INTEGER","MAX_U62","ImmutableBytesBuffer","buffer","offset","view","constructor","this","DataView","byteOffset","length","remaining","Uint8Array","slice","firstByteValue","getRemainingBuffer","subarray","getU8","Error","val","getUint8","getU16","getUint16","getU32","getUint32","getU64","getBigUint64","getVarInt","first","prefix","BigInt","getNumberVarInt","getBytes","len","getVarBytes","getUtf8String","TextDecoder","decode","MutableBytesBuffer","byteLength","enoughSpaceAvailable","required","newBuffer","x","set","putU8","v","setUint8","putU16","setUint16","putU32","setUint32","putU64","setBigUint64","putVarInt","value","shift","i","putBytes","putUtf8String","bytes","TextEncoder","encode","putLengthPrefixedByteArray","ReadableStreamBuffer","reader","readableStream","getReader","waitForBytes","Promise","resolve","fillTo","fill","result","read","done","temp","size","readAll","maxLength","undefined","getInt16","close","releaseLock","cancel","release","WritableStreamBuffer","writer","writableStream","getWriter","write","data","flush","clear","ReadableWritableStreamBuffer","readStreamBuffer","writeStreamBuffer","releaseAll","readBuffer","readStream","writeBuffer","writeStream","Tuple","TupleField","Location","KeyValuePairs","Parameters","GroupOrder","FilterType","Subscribe","SubscribeOk","SubscribeError","SubscribeUpdate","SubscribeNamespace","SubscribeNamespaceOk","SubscribeNamespaceError","Unsubscribe","Publish","PublishOk","PublishError","PublishDone","PublishNamespace","PublishNamespaceOk","PublishNamespaceError","PublishNamespaceDone","FetchType","StandaloneFetch","JoiningFetch","Fetch","FetchOk","FetchError","FetchCancel","GoAway","ClientSetup","ServerSetup","MaxRequestId","Version","ControlMessageType","debug","msg","console","log","async","sleep","ms","setTimeout","serialize","tuple","buf","forEach","field","serialized","deserialize","push","encoded","location","group","object","valueIsVarInt","key","deserialize_with_size","pairs","Map","deserialize_with_reader","order","Publisher","Ascending","Descending","NextGroupStart","LargestObject","AbsoluteStart","AbsoluteRange","mainBuf","payloadBuf","id","namespace","name","subscriber_priority","group_order","forward","filter_type","start_location","end_group","params","track_alias","expires","content_exists","largest_location","code","reason","subscription_id","stream_count","Standalone","Relative","Absolute","end_location","r","start","fetch_type","standalone","joining","end_of_track","session_uri","versions","version","supportedVersionLen","toString","t","ReservedSetupV00","RequestsBlocked","ControlStream","decoder","encoder","nextRequestId","remoteMaxRequestId","mutex","c","Decoder","Encoder","recv","message","send","unlock","lock","payload","p","then","incr","setRemoteMaxRequestId","messageType","advertisedLength","error","rawPayload","res","type","w","m","SubgroupHeader","SubgroupObject","SubgroupType","ObjectForwardingPreference","Status","ObjectDatagramType","ObjectDatagram","header","group_id","hasExplicitSubgroupId","subgroup_id","publisher_priority","obj","object_id","extension_headers","object_payload","status","try_from","Type0x10","Type0x11","Type0x12","Type0x13","Type0x14","Type0x15","Type0x18","Type0x19","Type0x1A","Type0x1B","Type0x1C","Type0x1D","isSubgroupIdPresent","isSubgroupIdZero","isSubgroupFirstObjectId","isExtensionPresent","contains_end_of_group","SubgroupWriter","stream","SubgroupReader","extHeaders","obj_payload_len","NORMAL","OBJECT_NULL","GROUP_END","TRACK_END","Type0x0","Type0x1","Type0x2","Type0x3","Type0x4","Type0x5","Type0x6","Type0x7","Type0x20","Type0x21","isEndOfGroup","hasExtensions","hasObjectId","hasStatus","alias","extHeadersLength","extHeadersData","Objects","quic","h","datagrams","writable","TrackWriter","createUnidirectionalStream","subgroupHeader","streams","incomingUnidirectionalStreams","subgroupType","e","asError","String","Deferred","promise","reject","pending","Watch","current","next","init","update","Function","Notify","wait","wake","Queue","closed","capacity","queue","CountQueuingStrategy","highWaterMark","TransformStream","readable","abort","err","control","migrationState","objects","publishedNamespaces","waitingPublishNamespaceRequests","subscribe","subscribeQueue","nextTrackAlias","startMigration","migrationDone","publish_namespace","has","join","publishNamespaceSend","PublishNamespaceSend","Control.ControlMessageType","subscribed","recvSubscribe","recvUnsubscribe","recvPublishNamespaceOk","recvPublishNamespaceError","get","onOk","onError","warn","trackAlias","SubscribeRecv","unsubscribe","delete","state","ok","active","subscriberPriority","groupOrder","track","ack","acked","serve","props","priority","subgroup","Subscriber","tracksToMigrate","Set","publishedNamespacesQueue","trackToIDMap","trackAliasMap","aliasToSubscriptionMap","pendingTrack","recvPublishNamespace","recvPublishNamespaceDone","recvSubscribeOk","recvSubscribeError","recvPublishDone","publishNamespace","PublishNamespaceRecv","_msg","subscribe_namespace","SubscribeSend","subscription_req","Control.GroupOrder","Control.FilterType","isMigrating","trackID","subscription","add","callback","onDone","recvObject","subscriptionId","onData","_code","_reason","streamCount","Connection","controlStream","publisher","subscriber","running","run","onMigration","closeCode","all","runControl","runObjects","handleGoAway","handleMaxRequestId","migrateSession","Client","fingerprint","config","fetchFingerprint","catch","createQuic","sessionUri","options","serverCertificateHashes","uri","url","WebTransport","ready","prepareConnection","createBidirectionalStream","sendOrder","Control.Version","DRAFT_14","Control.ClientSetup","server","readServerSetup","Stream.ControlStream","connect","conn","bind","response","fetch","hexString","text","hexBytes","parseInt","algorithm","bufferLen","bufReader","readClientSetup","Segment","input","cache","timestamp","backpressure","ByteLengthQueuingStrategy","transport","transform","chunk","controller","max","duration","enqueue","chunks","tee","log_level","Log","Date","setLogLevel","level","info","module","getDurationString","_timescale","neg","pad","number","a","split","duration_sec","hours","floor","minutes","msec","printRanges","ranges","str","end","exports","MP4BoxStream","arrayBuffer","ArrayBuffer","dataview","position","prototype","getPosition","getEndPosition","getLength","seek","pos","npos","min","isNaN","isFinite","isEos","readAnyInt","signed","getInt8","getInt32","readUint8","readUint16","readUint24","readUint32","readUint64","readString","s","fromCharCode","readCString","arr","b","apply","readInt8","readInt16","readInt32","readInt64","readUint8Array","readInt16Array","Int16Array","readUint16Array","readUint32Array","Uint32Array","readInt32Array","Int32Array","DataStream","endianness","_byteOffset","dataView","LITTLE_ENDIAN","_realloc","extra","_dynamicSize","req","blen","_buffer","_byteLength","src","_trimAlloc","dst","BIG_ENDIAN","Object","defineProperty","_dataView","isEof","mapUint8Array","memcpy","BYTES_PER_ELEMENT","arrayToNative","readInt8Array","Int8Array","Uint16Array","readFloat64Array","Float64Array","readFloat32Array","Float32Array","readFloat32","getFloat32","readFloat64","getFloat64","dstOffset","srcOffset","dstU8","srcU8","array","arrayIsLittleEndian","flipArrayEndianness","nativeToEndian","littleEndian","u8","j","k","tmp","failurePosition","fromCharCodeUint8","uint8arr","encoding","MAX_SIZE","save","filename","blob","Blob","window","URL","createObjectURL","document","createElement","body","appendChild","setAttribute","click","revokeObjectURL","writeInt32Array","mapInt32Array","writeInt32","writeInt16Array","mapInt16Array","writeInt16","writeInt8Array","mapInt8Array","writeInt8","writeUint32Array","mapUint32Array","writeUint32","writeUint16Array","mapUint16Array","writeUint16","writeUint8Array","writeUint8","writeFloat64Array","mapFloat64Array","writeFloat64","writeFloat32Array","mapFloat32Array","writeFloat32","setInt32","setInt16","setInt8","setFloat32","setFloat64","writeUCS2String","lengthOverride","charCodeAt","writeString","substring","writeCString","writeStruct","structDefinition","struct","writeType","tp","Array","charset","test","ta","writeUint64","writeUint24","adjustUint32","MultiBufferStream","buffers","bufferIndex","insertBuffer","initialized","firstBuffer","fileStart","logBufferLevel","concat","buffer1","buffer2","reduceBuffer","newLength","smallB","usedBytes","ab","to_add","splice","used","total","range","bufferedString","cleanBuffers","mergeNextBuffer","next_buffer","oldLength","oldUsedBytes","oldFileStart","findPosition","fromStart","filePosition","markAsUsed","abuffer","index","findEndContiguousBuf","inputindex","currentBuf","nextBuf","getEndFilePositionAfter","addUsedBytes","nbBytes","setAllUsedBytes","MPEG4DescriptorParser","descTagToName","getDescriptorName","tag","that","classes","parseOneDescriptor","desc","byteRead","Descriptor","parse","_tag","_size","descs","findDescriptor","parseRemainingDescriptors","ES_Descriptor","call","ES_ID","flags","dependsOn_ES_ID","l","OCR_ES_ID","getOTI","dcd","oti","getAudioConfig","dsi","audioObjectType","DecoderConfigDescriptor","streamType","upStream","bufferSize","maxBitrate","avgBitrate","DecoderSpecificInfo","SLConfigDescriptor","BoxParser","ERR_INVALID_DATA","ERR_NOT_ENOUGH_DATA","OK","BASIC_BOXES","FULL_BOXES","CONTAINER_BOXES","boxCodes","fullBoxCodes","containerBoxCodes","sampleEntryCodes","sampleGroupEntryCodes","trackGroupTypes","UUIDBoxes","UUIDs","initialize","FullBox","Box","ContainerBox","SampleEntry","TrackGroupTypeBox","box","createBoxCtor","createFullBoxCtor","boxes","createContainerBoxCtor","_type","_name","_uuid","box_name","uuid","hdr_size","SampleGroupEntry","grouping_type","parseMethod","parseFullHeader","addSubBoxArrays","subBoxNames","nbSubBoxes","createMediaSampleEntryCtor","mediaType","createSampleEntryCtor","createEncryptedSampleEntryCtor","createSampleGroupCtor","createTrackGroupCtor","createUUIDBox","isFullBox","isContainerBox","printPS","ps","nalu","reduce","byte","padStart","ColorPoint","y","Pixel","row","col","bad_pixel_row","bad_pixel_column","TKHD_FLAG_ENABLED","TKHD_FLAG_IN_MOVIE","TKHD_FLAG_IN_PREVIEW","TFHD_FLAG_BASE_DATA_OFFSET","TFHD_FLAG_SAMPLE_DESC","TFHD_FLAG_SAMPLE_DUR","TFHD_FLAG_SAMPLE_SIZE","TFHD_FLAG_SAMPLE_FLAGS","TFHD_FLAG_DUR_EMPTY","TFHD_FLAG_DEFAULT_BASE_IS_MOOF","TRUN_FLAGS_DATA_OFFSET","TRUN_FLAGS_FIRST_FLAG","TRUN_FLAGS_DURATION","TRUN_FLAGS_SIZE","TRUN_FLAGS_FLAGS","TRUN_FLAGS_CTS_OFFSET","addBox","prop","addEntry","_prop","parseUUID","parseHex16","hex16","hex","parseOneBox","headerOnly","parentSize","diff","box_type","has_unparsed_data","parseDataAndRewind","ret","indexOf","parseLanguage","language","chars","languageString","SAMPLE_ENTRY_TYPE_VISUAL","SAMPLE_ENTRY_TYPE_AUDIO","SAMPLE_ENTRY_TYPE_HINT","SAMPLE_ENTRY_TYPE_METADATA","SAMPLE_ENTRY_TYPE_SUBTITLE","SAMPLE_ENTRY_TYPE_SYSTEM","SAMPLE_ENTRY_TYPE_TEXT","parseHeader","data_reference_index","parseFooter","compressorname_length","width","height","horizresolution","vertresolution","frame_count","compressorname","depth","channel_count","samplesize","samplerate","FieldLength","layer_size","op_index","aux_type","aux_subtype_length","aux_subtype","seq_profile","seq_level_idx_0","seq_tier_0","high_bitdepth","twelve_bit","monochrome","chroma_subsampling_x","chroma_subsampling_y","chroma_sample_position","reserved_1","initial_presentation_delay_present","initial_presentation_delay_minus_one","reserved_2","configOBUs_length","configOBUs","toparse","configurationVersion","AVCProfileIndication","profile_compatibility","AVCLevelIndication","lengthSizeMinusOne","nb_SPS_nalus","SPS","nb_PPS_nalus","PPS","ext","bufferSizeDB","all_ref_pics_intra","intra_pred_used","max_ref_per_pic","channel_indexes","channel_types","channel_associations","cleanApertureWidthN","cleanApertureWidthD","cleanApertureHeightN","cleanApertureHeightD","horizOffN","horizOffD","vertOffN","vertOffD","max_content_light_level","max_pic_average_light_level","pos_x","pos_y","pos_z","quat_x","quat_y","quat_z","focal_length_x","principal_point_x","principal_point_y","focal_length_y","skew_factor","component_count","component_types","component_type_urls","component_type","entry_count","chunk_offsets","maxCLL","maxFALL","colour_type","colour_primaries","transfer_characteristics","matrix_coefficients","full_range_flag","ICC_profile","notice","compositionToDTSShift","leastDecodeToDisplayDelta","greatestDecodeToDisplayDelta","compositionStartTime","compositionEndTime","sample_counts","sample_offsets","tmp_byte1","tmp_byte2","tmp_byte3","fscod","bsid","bsmod","acmod","lfeon","bit_rate_code","tmp_16","data_rate","num_ind_sub","ind_subs","ind_sub","num_dep_sub","chan_loc","boxesFound","knownBlockTypes","flagAndType","numMetadataBlocks","bytessent","time","OutputChannelCount","PreSkip","InputSampleRate","OutputGain","ChannelMappingFamily","StreamCount","CoupledCount","ChannelMapping","entries","extended_language","entry","segment_duration","media_time","media_rate_integer","media_rate_fraction","timescale","presentation_time","event_duration","scheme_id_uri","presentation_time_delta","message_size","message_data","createEntityToGroupCtor","num_entities_in_group","entity_ids","entity_id","tile_size_x","tile_size_y","layer_binning","tiles_in_layer_column_minus1","tiles_in_layer_row_minus1","esd_data","esd_parser","esd","fieldCount","fieldOrdering","data_format","major_brand","minor_version","compatible_brands","handler","tmp_byte","general_profile_space","general_tier_flag","general_profile_idc","general_profile_compatibility","general_constraint_indicator","general_level_idc","min_spatial_segmentation_idc","parallelismType","chroma_format_idc","bit_depth_luma_minus8","bit_depth_chroma_minus8","avgFrameRate","constantFrameRate","numTemporalLayers","temporalIdNested","nalu_arrays","nalu_array","completeness","nalu_type","numOfArrays","numNalus","item_infos","offset_size","length_size","base_offset_size","index_size","items","item_count","item","item_ID","construction_method","base_offset","extent_count","extents","extent","extent_index","extent_offset","extent_length","reserved","axis","item_protection_index","item_name","content_type","content_encoding","extension_type","item_type","item_uri_type","associations","item_assoc","association_count","essential","property_index","references","SingleItemTypeReferenceBox","SingleItemTypeReferenceBoxLarge","angle","image_width","image_height","schemeURI","count","levels","track_ID","padding_flag","assignment_type","grouping_type_parameter","sub_track_id","layer_id","period","display_primaries","white_point","max_display_mastering_luminance","min_display_mastering_luminance","creation_time","modification_time","fragment_duration","sequence_number","bits_per_pixel","rate","volume","matrix","next_track_id","packetssent","sample_count","padbits","hSpacing","vSpacing","payloadID","rtpmap_string","initial_delay","item_id","num_channels","bits_per_channels","step_count","ref_track_id","ntp_timestamp","system_id","kid","datasize","descriptionformat","sdptext","aux_info_type","aux_info_type_parameter","default_sample_info_size","sample_info_size","mime_format","schema_location","auxiliary_mime_types","displayFlags","horizontal_justification","vertical_justification","bg_color_rgba","box_record","style_record","roll_count","first_output_sample","sample_offset","description_length","num_output_samples","num_total_samples","layerNumber","accurateStatisticsFlag","avgBitRate","subSequenceIdentifier","durationFlag","avgRateFlag","dependency","numReferences","dependencyInfo","subSeqDirectionFlag","roll_distance","num_leading_samples_known","num_leading_samples","operation_point_count","target_rate_share","available_bitrate","maximum_bitrate","minimum_bitrate","discard_priority","crypt_byte_block","skip_byte_block","isProtected","Per_Sample_IV_Size","KID","constant_IV_size","constant_IV","NAL_unit_type","level_independently_decodable","group_description_index","component_index","correction_applied","num_bad_rows","num_bad_cols","num_bad_pixels","bad_rows","bad_columns","bad_pixels","scheme_type","scheme_version","scheme_uri","is_leading","sample_depends_on","sample_is_depended_on","sample_has_redundancy","default_length","default_group_description_index","reference_ID","earliest_presentation_time","first_offset","ref","tmp_32","reference_type","referenced_size","subsegment_duration","starts_with_SAP","SAP_type","SAP_delta_time","from_item_ID","to_item_ID","primaryRChromaticity_x","primaryRChromaticity_y","primaryGChromaticity_x","primaryGChromaticity_y","primaryBChromaticity_x","primaryBChromaticity_y","whitePointChromaticity_x","whitePointChromaticity_y","luminanceMax","luminanceMin","balance","subsegments","subsegment_count","subsegment","range_count","range_size","switch_group","alternate_group","attribute_list","first_chunk","samples_per_chunk","sample_description_index","entryCount","shadowed_sample_numbers","sync_sample_numbers","sample_numbers","sample_sizes","sample_size","delta","sample_deltas","tmp32","single_view_allowed","stereo_scheme","stereo_indication_type","ftypBox","field_size","subsample_count","sampleInfo","sample_delta","subsamples","subsample","discardable","codec_specific_parameters","default_crypt_byte_block","default_skip_byte_block","default_isProtected","default_Per_Sample_IV_Size","default_KID","default_constant_IV_size","default_constant_IV","baseMediaDecodeTime","readBytes","track_id","base_data_offset","default_sample_description_index","default_sample_duration","default_sample_size","default_sample_flags","length_size_of_traf_num","length_size_of_trun_num","length_size_of_sample_num","number_of_entries","moof_offset","traf_number","trun_number","sample_number","layer","track_group_id","TrackReferenceTypeBox","track_ids","trefBox","data_offset","first_sample_flags","sample_duration","sample_flags","sample_composition_time_offset","lang","description","tags","profile","component_bit_depth_minus_one","component_format","component_align_size","sampling_type","interleave_type","block_size","component_little_endian","block_pad_lsb","block_little_endian","block_reversed","pad_unknown","pixel_size","row_align_size","tile_align_size","num_tile_cols_minus_one","num_tile_rows_minus_one","LiveServerManifest","replace","default_AlgorithmID","default_IV_size","fragment_count","absolute_time","absolute_duration","graphicsmode","opcolor","bitDepth","chromaSubsampling","videoFullRangeFlag","colourPrimaries","transferCharacteristics","matrixCoefficients","codecIntializationDataSize","codecIntializationData","colorSpace","transferFunction","bitReader","held_bits","num_held_bits","stream_read_1_bytes","strm","stream_read_2_bytes","extract_bits","num_bits","ptl_present_flag","ols_idx","num_sublayers","constant_frame_rate","bit_depth_minus8","num_bytes_constraint_info","ptl_frame_only_constraint_flag","ptl_multilayer_enabled_flag","general_constraint_info","cnstr1","cnstr2","ptl_sublayer_present_mask","sublayer_level_idc","ptl_num_sub_profiles","general_sub_profile_idc","max_picture_width","max_picture_height","avg_frame_rate","num_of_arrays","isVideo","isAudio","isSubtitle","isMetadata","isHint","getCodec","getWidth","getHeight","getChannelCount","getSampleRate","getSampleSize","VisualSampleEntry","AudioSampleEntry","SubtitleSampleEntry","MetadataSampleEntry","decimalToHex","d","padding","avc1SampleEntry","avc2SampleEntry","avc3SampleEntry","avc4SampleEntry","baseCodec","avcC","hev1SampleEntry","hvc1SampleEntry","hvcC","reversed","hasByte","constraint_string","vvc1SampleEntry","vvi1SampleEntry","vvcC","last_nonzero","ptl_frame_only_constraint","ptl_multilayer_enabled","base32_chars","mp4aSampleEntry","esds","stxtSampleEntry","vp08SampleEntry","vp09SampleEntry","vpcC","av01SampleEntry","bitdepth","av1C","writeHeader","sizePosition","avcCBox","co64Box","cslgBox","cttsBox","drefBox","elngBox","elstBox","emsgBox","hdlrBox","hvcCBox","kindBox","mdhdBox","mehdBox","mfhdBox","mvhdBox","writeFooter","stppSampleEntry","sbgpBox","sgpdBox","sidxBox","smhdBox","stcoBox","stscBox","stsdBox","stshBox","stssBox","stszBox","constant","sttsBox","tfdtBox","UINT32_MAX","tfhdBox","tkhdBox","trexBox","trunBox","data_offset_position","vmhdBox","unpack","samples","pts","dts","Infinity","description_index","chunk_index","DIFF_BOXES_PROP_NAMES","DIFF_PRIMITIVE_ARRAY_PROP_NAMES","boxEqualFields","box_a","box_b","boxEqual","VTTin4Parser","parseSample","cues","cue","getText","startTime","endTime","n","z","secToTimestamp","insec","string","cueIn4","payl","XMLSubtitlein4Parser","sample","documentString","resources","DOMParser","parseFromString","Textin4Parser","parseConfig","ISOFile","mdats","moofs","isProgressive","moovStartFound","onMoovStart","moovStartSent","onReady","readySent","onSegment","onSamples","sampleListBuilt","fragmentedTracks","extractedTracks","isFragmentationInitialized","sampleProcessingStarted","nextMoofNumber","itemListBuilt","entity_groups","onSidx","sidxSent","setSegmentOptions","user","trak","getTrackById","fragTrack","nextSample","segmentStream","nb_samples","rapAlignement","nbSamples","unsetSegmentOptions","setExtractionOptions","extractTrack","unsetExtractionOptions","restoreParsePosition","hasIncompleteMdat","processIncompleteMdat","saveParsePosition","processIncompleteBox","updateUsedBytes","checkBuffer","appendBuffer","last","nextFileStart","moov","buildSampleLists","updateSampleLists","getInfo","processSamples","nextSeekPosition","nextParsePosition","sidx","meta","flattenItemInfo","processItems","onItem","getAllocatedSampleDataSize","sample_desc","movie","_1904","getTime","hasMoov","mvhd","isFragmented","mvex","mehd","hasIOD","iods","brands","ftyp","created","modified","tracks","audioTracks","videoTracks","subtitleTracks","metadataTracks","hintTracks","otherTracks","traks","mdia","minf","stbl","stsd","tkhd","hdlr","tref","edts","edits","elst","movie_duration","movie_timescale","track_width","track_height","mdhd","cts_shift","cslg","samples_duration","codec","kind","udta","kinds","elng","samples_size","bitrate","audio","sample_rate","video","mime","setNextSeekPositionFromSample","alreadyRead","fragTrak","createFragment","extractTrak","getSample","getBox","getBoxes","returnEarly","_sweep","getTrackSamplesInfo","getTrackSample","releaseUsedSamples","sampleNum","lastValidSample","releaseSample","samplesDataSize","stop","seekTrack","useRap","seek_offset","rap_seek_sample_num","seek_sample_num","cts","is_sync","getTrackDuration","trak_seek_info","seek_info","equal","box_index","a_box","b_box","lastBoxStartPosition","parsingMdat","discardMdatData","_options","addTrack","media_duration","sample_description_entry","media_type","codes","avcDecoderConfigRecord","hevcDecoderConfigRecord","description_boxes","buildTrakSampleLists","computeSize","stream_","addSample","depends_on","is_depended_on","has_redundancy","degradation_priority","first_dts","moof","createSingleSampleMoof","trafs","truns","moofBox","traf","lastMoofIndex","resetTables","stsc","stts","ctts","stss","initial_duration","stco","co64","stsz","stz2","initSampleGroups","sbgps","trak_sgpds","traf_sgpds","sample_group_info","sample_group_key","SampleGroupInfo","_parameter","_sbgp","sbgp","last_sample_in_run","entry_index","sample_groups_info","fragment_description","is_fragment","setSampleGroupProperties","sample_groups","process_sdtp","sdtp","subs","sgpds","stdp","chunk_run_index","last_chunk_in_run","offset_in_chunk","last_sample_in_chunk","last_sample_in_stts_run","stts_run_index","last_sample_in_ctts_run","ctts_run_index","last_stss_index","subs_entry_index","last_subs_sample_index","last_run_position","trex","tfhd","getTrexById","trun","moof_number","number_in_traf","first_sample_index","first_traf_merged","tfdt","bdop","dbim","dop","bdo","has_fragment_subsamples","sample_index","lengthAfterStart","getCodecs","codecs","trexs","itemsDataSize","iinf","ref_to","protection_index","protection","ipro","protections","grpl","entity_group","iloc","itemloc","source","dinf","idat","pitm","primary","iref","iprp","ipmas","ipma","association","properties","propEntry","ipco","propbox","getItem","releaseItem","sent","hasItem","getMetaHandler","getPrimaryItem","itemToFragmentedTrackFile","itemId","file","trackOptions","ispe","trackId","outstream","sampleNumber","mdat","mdatBox","writeInitializationSegment","total_duration","getBuffer","initializeSegmentation","initSegs","seg","moovBox","printHeader","output","indent","print","prev_indent","MP4Box","_keepMdatData","_stream","keepMdatData","createFile","MP4.BoxParser","dOpsBox","mapping","Container","mp4","frame","segment","MP4.ISOFile","isDecoderConfig","codedWidth","isVideoConfig","numberOfChannels","sampleRate","codedHeight","dops","MP4.Stream","copyTo","SUPPORTED","encoderConfig","decoderConfig","frames","AudioEncoder","metadata","configure","isSupported","short","includes","isConfigSupported","supported","keyframeNext","keyframeCounter","bitrateMode","latencyMode","hardwareAcceleration","VideoEncoder","keyFrame","encodeQueueSize","framerate","Track","segments","notify","media","runAudio","isVideoTrack","runVideo","MediaStreamTrackProcessor","Audio.Encoder","container","WritableStream","pipeThrough","pipeTo","Video.Encoder","at","desiredSize","ReadableStream","pull","isAudioTrackSettings","settings","isVideoTrackSettings","Broadcast","catalog","connection","mediaTracks","getTracks","getSettings","audioContext","AudioContext","createMediaStreamSource","MediaStream","assign","initTrack","selectionParams","mimeType","frameRate","channelConfig","channelCount","streamingFormat","streamingFormatVersion","supportsDeltaUpdates","commonTrackFields","packaging","renderGroup","serveSubscribe","base","lastIndexOf","splitExt","serveCatalog","serveInit","serveTrack","JSON","stringify","Catalog.encode","serveSegment","attach","srcObject","PublisherApi","client","broadcast","opts","fingerprintUrl","publish","bcConfig","PublisherMoq","HTMLElement","shadow","cameraSelect","microphoneSelect","previewVideo","connectButton","playbackUrlTextarea","mediaStream","isPublishing","super","attachShadow","mode","style","textContent","classList","autoplay","playsInline","muted","readOnly","rows","display","marginTop","append","handleDeviceChange","handleClick","navigator","mediaDevices","addEventListener","startPreview","connectedCallback","populateDeviceLists","disconnectedCallback","removeEventListener","devices","enumerateDevices","vids","filter","mics","innerHTML","o","deviceId","label","vidId","micId","videoConstraints","exact","ideal","audioConstraints","getUserMedia","disabled","getAttribute","crypto","randomUUID","getAudioTracks","makeEven","videoConfig","videoWidth","videoHeight","audioConfig","playbackBaseUrl","customElements","define"],"mappings":"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","x_google_ignoreList":[38]}